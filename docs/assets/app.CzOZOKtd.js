const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/highlight.Ct1y-uZ_.js","assets/snippet.5f7I8aJ2.js"])))=>i.map(i=>d[i]);
import{e as Jd,c as Ii,l as Zd,a as Gc,u as hn,b as or,h as dt,d as Dr,i as Jc,f as si,g as yu,H as ul,r as Bo,s as ei,j as rr,U as Oa,k as Di,m as Fo,n as Or,o as Fn,q as cl,p as Jn,t as bu,v as xu,w as _u,x as Ni,y as ti,z as Qd,E as Zc,A as Qc,B as ds,C as pr,D as fl,F as Ti,G as S,I as Xc,J as ef,K as Xd,L as tf,M as nf,N as ps,O as ms,P as ep,Q as ea,R as Bi,S as rf,T as tp,V as np,W as rp,X as hl,Y as of,Z as ip,_ as Je,$ as op,a0 as sp,a1 as ap,a2 as ku,a3 as lp,a4 as Yi,a5 as gs,a6 as sf,a7 as af,a8 as up,a9 as cp,aa as lf,ab as fp,ac as hp,ad as dp,ae as pp,af as mp,ag as gp,ah as vp,ai as yp,aj as bn,ak as uf,al as bp,am as xp,an as _p,ao as kp,ap as cf,aq as dl,ar as wp,as as wu,at as Cp,au as ff,av as Rr,aw as Sp,ax as ne,ay as La,az as Tp,aA as Ep,aB as Lr,aC as Pp,aD as Rp,aE as Ap,aF as Ip,aG as Dp,aH as Op,aI as xi,aJ as hf,aK as Pe,aL as xe,aM as ie,aN as Yt,aO as Gt,aP as H,aQ as J,aR as mr,aS as F,aT as wt,aU as Mn,aV as zt,aW as ot,aX as df,aY as pl,aZ as An,a_ as $o,a$ as Tn,b0 as ta,b1 as Lp}from"./snippet.5f7I8aJ2.js";function Mp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const jp="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(jp);Jd();function Zn(e){Ii===null&&Zd(),Gc&&Ii.l!==null?zp(Ii).m.push(e):hn(()=>{const t=or(e);if(typeof t=="function")return t})}function zp(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const na=0,vo=1,ra=2;function Np(e,t,n,r,i){dt&&Dr();var o=e,s=Jc(),l=Ii,u=Oa,f,d,h,g=s?Fo(void 0):Or(void 0,!1,!1),v=s?Fo(void 0):Or(void 0,!1,!1),b=!1;function C(w,$){b=!0,$&&(bu(A),xu(A),_u(l));try{w===na&&n&&(f?Ni(f):f=Fn(()=>n(o))),w===vo&&r&&(d?Ni(d):d=Fn(()=>r(o,g))),w!==na&&f&&ti(f,()=>f=null),w!==vo&&d&&ti(d,()=>d=null),w!==ra&&h&&ti(h,()=>h=null)}finally{$&&(_u(null),xu(null),bu(null),Qd())}}var A=si(()=>{if(u===(u=t()))return;let w=dt&&yu(u)===(o.data===ul);if(w&&(o=Bo(),ei(o),rr(!1),w=!0),yu(u)){var $=u;b=!1,$.then(O=>{$===u&&(Di(g,O),C(vo,!0))},O=>{if($===u)throw Di(v,O),C(ra,!0),v.v}),dt?n&&(f=Fn(()=>n(o))):cl(()=>{b||C(na,!0)})}else Di(g,u),C(vo,!1);return w&&rr(!0),()=>u=Oa});dt&&(o=Jn)}function Le(e,t,n=!1){dt&&Dr();var r=e,i=null,o=null,s=Oa,l=n?Zc:0,u=!1;const f=(v,b=!0)=>{u=!0,g(b,v)};var d=null;function h(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var v=s?i:o,b=s?o:i;v&&Ni(v),b&&ti(b,()=>{s?o=null:i=null})}const g=(v,b)=>{if(s===(s=v))return;let C=!1;if(dt){const V=Qc(r)===ul;!!s===V&&(r=Bo(),ei(r),rr(!1),C=!0)}var A=fl(),w=r;if(A&&(d=document.createDocumentFragment(),d.append(w=ds())),s?i??=b&&Fn(()=>b(w)):o??=b&&Fn(()=>b(w)),A){var $=pr,O=s?i:o,z=s?o:i;O&&$.skipped_effects.delete(O),z&&$.skipped_effects.add(z),$.add_callback(h)}else h();C&&rr(!0)};si(()=>{u=!1,t(f),u||g(null,null)},l),dt&&(r=Jn)}function $n(e,t){return t}function Bp(e,t,n){for(var r=e.items,i=[],o=t.length,s=0;s<o;s++)tp(t[s].e,i,!0);var l=o>0&&i.length===0&&n!==null;if(l){var u=n.parentNode;np(u),u.append(n),r.clear(),Yn(e,t[0].prev,t[o-1].next)}rp(i,()=>{for(var f=0;f<o;f++){var d=t[f];l||(r.delete(d.k),Yn(e,d.prev,d.next)),Bi(d.e,!l)}})}function Un(e,t,n,r,i,o=null){var s=e,l={flags:t,items:new Map,first:null},u=(t&of)!==0;if(u){var f=e;s=dt?ei(Ti(f)):f.appendChild(ds())}dt&&Dr();var d=null,h=!1,g=new Map,v=Xc(()=>{var w=n();return nf(w)?w:w==null?[]:tf(w)}),b,C;function A(){Fp(C,b,l,g,s,i,t,r,n),o!==null&&(b.length===0?d?Ni(d):d=Fn(()=>o(s)):d!==null&&ti(d,()=>{d=null}))}si(()=>{C??=hl,b=S(v);var w=b.length;if(h&&w===0)return;h=w===0;let $=!1;if(dt){var O=Qc(s)===ul;O!==(w===0)&&(s=Bo(),ei(s),rr(!1),$=!0)}if(dt){for(var z=null,V,P=0;P<w;P++){if(Jn.nodeType===ef&&Jn.data===Xd){s=Jn,$=!0,rr(!1);break}var W=b[P],ae=r(W,P);V=Ma(Jn,l,z,null,W,ae,P,i,t,n),l.items.set(ae,V),z=V}w>0&&ei(Bo())}if(dt)w===0&&o&&(d=Fn(()=>o(s)));else if(fl()){var me=new Set,j=pr;for(P=0;P<w;P+=1){W=b[P],ae=r(W,P);var X=l.items.get(ae)??g.get(ae);X?(t&(ms|ps))!==0&&pf(X,W,P,t):(V=Ma(null,l,null,null,W,ae,P,i,t,n,!0),g.set(ae,V)),me.add(ae)}for(const[te,se]of l.items)me.has(te)||j.skipped_effects.add(se.e);j.add_callback(A)}else A();$&&rr(!0),S(v)}),dt&&(s=Jn)}function Fp(e,t,n,r,i,o,s,l,u){var f=(s&ip)!==0,d=(s&(ms|ps))!==0,h=t.length,g=n.items,v=n.first,b=v,C,A=null,w,$=[],O=[],z,V,P,W;if(f)for(W=0;W<h;W+=1)z=t[W],V=l(z,W),P=g.get(V),P!==void 0&&(P.a?.measure(),(w??=new Set).add(P));for(W=0;W<h;W+=1){if(z=t[W],V=l(z,W),P=g.get(V),P===void 0){var ae=r.get(V);if(ae!==void 0){r.delete(V),g.set(V,ae);var me=A?A.next:b;Yn(n,A,ae),Yn(n,ae,me),ia(ae,me,i),A=ae}else{var j=b?b.e.nodes_start:i;A=Ma(j,n,A,A===null?n.first:A.next,z,V,W,o,s,u)}g.set(V,A),$=[],O=[],b=A.next;continue}if(d&&pf(P,z,W,s),(P.e.f&ea)!==0&&(Ni(P.e),f&&(P.a?.unfix(),(w??=new Set).delete(P))),P!==b){if(C!==void 0&&C.has(P)){if($.length<O.length){var X=O[0],te;A=X.prev;var se=$[0],K=$[$.length-1];for(te=0;te<$.length;te+=1)ia($[te],X,i);for(te=0;te<O.length;te+=1)C.delete(O[te]);Yn(n,se.prev,K.next),Yn(n,A,se),Yn(n,K,X),b=X,A=K,W-=1,$=[],O=[]}else C.delete(P),ia(P,b,i),Yn(n,P.prev,P.next),Yn(n,P,A===null?n.first:A.next),Yn(n,A,P),A=P;continue}for($=[],O=[];b!==null&&b.k!==V;)(b.e.f&ea)===0&&(C??=new Set).add(b),O.push(b),b=b.next;if(b===null)continue;P=b}$.push(P),A=P,b=P.next}if(b!==null||C!==void 0){for(var Q=C===void 0?[]:tf(C);b!==null;)(b.e.f&ea)===0&&Q.push(b),b=b.next;var ye=Q.length;if(ye>0){var _e=(s&of)!==0&&h===0?i:null;if(f){for(W=0;W<ye;W+=1)Q[W].a?.measure();for(W=0;W<ye;W+=1)Q[W].a?.fix()}Bp(n,Q,_e)}}f&&cl(()=>{if(w!==void 0)for(P of w)P.a?.apply()}),e.first=n.first&&n.first.e,e.last=A&&A.e;for(var Ee of r.values())Bi(Ee.e);r.clear()}function pf(e,t,n,r){(r&ms)!==0&&Di(e.v,t),(r&ps)!==0?Di(e.i,n):e.i=n}function Ma(e,t,n,r,i,o,s,l,u,f,d){var h=(u&ms)!==0,g=(u&ep)===0,v=h?g?Or(i,!1,!1):Fo(i):i,b=(u&ps)===0?s:Fo(s),C={i:b,v,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var A=document.createDocumentFragment();A.append(e=ds())}return C.e=Fn(()=>l(e,v,b,f),dt),C.e.prev=n&&n.e,C.e.next=r&&r.e,n===null?d||(t.first=C):(n.next=C,n.e.next=C.e),r!==null&&(r.prev=C,r.e.prev=C.e),C}finally{}}function ia(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var s=rf(o);i.before(o),o=s}}function Yn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function mf(e,t,n=!1,r=!1,i=!1){var o=e,s="";Je(()=>{var l=hl;if(s===(s=t()??"")){dt&&Dr();return}if(l.nodes_start!==null&&(op(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),s!==""){if(dt){Jn.data;for(var u=Dr(),f=u;u!==null&&(u.nodeType!==ef||u.data!=="");)f=u,u=rf(u);if(u===null)throw sp(),ap;ku(Jn,f),o=ei(u);return}var d=s+"";n?d=`<svg>${d}</svg>`:r&&(d=`<math>${d}</math>`);var h=lp(d);if((n||r)&&(h=Ti(h)),ku(Ti(h),h.lastChild),n||r)for(;Ti(h);)o.before(Ti(h));else o.before(h)}})}function $p(e,t,n,r,i){dt&&Dr();var o=t.$$slots?.[n],s=!1;o===!0&&(o=t.children,s=!0),o===void 0||o(e,s?()=>r:r)}function Oi(e,t,n){dt&&Dr();var r=e,i,o,s=null,l=null;function u(){o&&(ti(o),o=null),s&&(s.lastChild.remove(),r.before(s),s=null),o=l,l=null}si(()=>{if(i!==(i=t())){var f=fl();if(i){var d=r;f&&(s=document.createDocumentFragment(),s.append(d=ds())),l=Fn(()=>n(d,i))}f?pr.add_callback(u):u()}},Zc),dt&&(r=Jn)}function ml(e,t,n){Yi(()=>{var r=or(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};gs(()=>{var s=n();sf(s),i&&af(o,s)&&(o=s,r.update(s))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function Up(e,t){var n=void 0,r;si(()=>{n!==(n=t())&&(r&&(Bi(r),r=null),n&&(r=Fn(()=>{Yi(()=>n(e))})))})}function gf(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=gf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function qp(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=gf(e))&&(r&&(r+=" "),r+=t);return r}function ja(e){return typeof e=="object"?qp(e):e??""}const Cu=[...` 	
\r\fÂ \v\uFEFF`];function Hp(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var l=s+o;(s===0||Cu.includes(r[s-1]))&&(l===r.length||Cu.includes(r[l]))?r=(s===0?"":r.substring(0,s))+r.substring(l+1):s=l}}return r===""?null:r}function Su(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function oa(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Kp(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,l=!1,u=[];r&&u.push(...Object.keys(r).map(oa)),i&&u.push(...Object.keys(i).map(oa));var f=0,d=-1;const C=e.length;for(var h=0;h<C;h++){var g=e[h];if(l?g==="/"&&e[h-1]==="*"&&(l=!1):o?o===g&&(o=!1):g==="/"&&e[h+1]==="*"?l=!0:g==='"'||g==="'"?o=g:g==="("?s++:g===")"&&s--,!l&&o===!1&&s===0){if(g===":"&&d===-1)d=h;else if(g===";"||h===C-1){if(d!==-1){var v=oa(e.substring(f,d).trim());if(!u.includes(v)){g!==";"&&h++;var b=e.substring(f,h).trim();n+=" "+b+";"}}f=h+1,d=-1}}}}return r&&(n+=Su(r)),i&&(n+=Su(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Ht(e,t,n,r,i,o){var s=e.__className;if(dt||s!==n||s===void 0){var l=Hp(n,r,o);(!dt||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):t?e.className=l:e.setAttribute("class",l)),e.__className=n}else if(o&&i!==o)for(var u in o){var f=!!o[u];(i==null||f!==!!i[u])&&e.classList.toggle(u,f)}return o}function sa(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function Mr(e,t,n,r){var i=e.__style;if(dt||i!==t){var o=Kp(t,r);(!dt||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else r&&(Array.isArray(r)?(sa(e,n?.[0],r[0]),sa(e,n?.[1],r[1],"important")):sa(e,n,r));return r}function za(e,t,n=!1){if(e.multiple){if(t==null)return;if(!nf(t))return up();for(var r of e.options)r.selected=t.includes(Tu(r));return}for(r of e.options){var i=Tu(r);if(cp(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Vp(e){var t=new MutationObserver(()=>{za(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),lf(()=>{t.disconnect()})}function Tu(e){return"__value"in e?e.__value:e.value}const yo=Symbol("class"),_i=Symbol("style"),vf=Symbol("is custom element"),yf=Symbol("is html");function _t(e){if(dt){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;ut(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;ut(e,"checked",null),e.checked=i}}};e.__on_r=n,fp(n),hp()}}function Wp(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ut(e,t,n,r){var i=bf(e);dt&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[dp]=n),n==null?e.removeAttribute(t):typeof n!="string"&&xf(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Yp(e,t,n,r,i=!1){var o=bf(e),s=o[vf],l=!o[yf];let u=dt&&s;u&&rr(!1);var f=t||{},d=e.tagName==="OPTION";for(var h in t)h in n||(n[h]=null);n.class?n.class=ja(n.class):n.class=null,n[_i]&&(n.style??=null);var g=xf(e);for(const O in n){let z=n[O];if(d&&O==="value"&&z==null){e.value=e.__value="",f[O]=z;continue}if(O==="class"){var v=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ht(e,v,z,r,t?.[yo],n[yo]),f[O]=z,f[yo]=n[yo];continue}if(O==="style"){Mr(e,z,t?.[_i],n[_i]),f[O]=z,f[_i]=n[_i];continue}var b=f[O];if(!(z===b&&!(z===void 0&&e.hasAttribute(O)))){f[O]=z;var C=O[0]+O[1];if(C!=="$$")if(C==="on"){const V={},P="$$"+O;let W=O.slice(2);var A=_p(W);if(vp(W)&&(W=W.slice(0,-7),V.capture=!0),!A&&b){if(z!=null)continue;e.removeEventListener(W,f[P],V),f[P]=null}if(z!=null)if(A)e[`__${W}`]=z,bn([W]);else{let ae=function(me){f[O].call(this,me)};f[P]=yp(W,e,ae,V)}else A&&(e[`__${W}`]=void 0)}else if(O==="style")ut(e,O,z);else if(O==="autofocus")uf(e,!!z);else if(!s&&(O==="__value"||O==="value"&&z!=null))e.value=e.__value=z;else if(O==="selected"&&d)Wp(e,z);else{var w=O;l||(w=bp(w));var $=w==="defaultValue"||w==="defaultChecked";if(z==null&&!s&&!$)if(o[O]=null,w==="value"||w==="checked"){let V=e;const P=t===void 0;if(w==="value"){let W=V.defaultValue;V.removeAttribute(w),V.defaultValue=W,V.value=V.__value=P?W:null}else{let W=V.defaultChecked;V.removeAttribute(w),V.defaultChecked=W,V.checked=P?W:!1}}else e.removeAttribute(O);else $||g.includes(w)&&(s||typeof z!="string")?e[w]=z:typeof z!="function"&&ut(e,w,z)}}}return u&&rr(!0),f}function Gp(e,t,n=[],r=[],i,o=!1){mp(n,r,s=>{var l=void 0,u={},f=e.nodeName==="SELECT",d=!1;if(si(()=>{var g=t(...s.map(S)),v=Yp(e,l,g,i,o);d&&f&&"value"in g&&za(e,g.value);for(let C of Object.getOwnPropertySymbols(u))g[C]||Bi(u[C]);for(let C of Object.getOwnPropertySymbols(g)){var b=g[C];C.description===gp&&(!l||b!==l[C])&&(u[C]&&Bi(u[C]),u[C]=Fn(()=>Up(e,()=>b))),v[C]=b}l=v}),f){var h=e;Yi(()=>{za(h,l.value,!0),Vp(h)})}d=!0})}function bf(e){return e.__attributes??={[vf]:e.nodeName.includes("-"),[yf]:e.namespaceURI===pp}}var Eu=new Map;function xf(e){var t=Eu.get(e.nodeName);if(t)return t;Eu.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=kp(r);for(var o in n)n[o].set&&t.push(o);r=xp(r)}return t}function jt(e,t,n=t){var r=Jc(),i=new WeakSet;cf(e,"input",o=>{var s=o?e.defaultValue:e.value;if(s=aa(e)?la(s):s,n(s),pr!==null&&i.add(pr),r&&s!==(s=t())){var l=e.selectionStart,u=e.selectionEnd;e.value=s??"",u!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(u,e.value.length))}}),(dt&&e.defaultValue!==e.value||or(t)==null&&e.value)&&(n(aa(e)?la(e.value):e.value),pr!==null&&i.add(pr)),gs(()=>{var o=t();e===document.activeElement&&i.has(pr)||aa(e)&&o===la(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function dr(e,t,n=t){cf(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(dt&&e.defaultChecked!==e.checked||or(t)==null)&&n(e.checked),gs(()=>{var r=t();e.checked=!!r})}function aa(e){var t=e.type;return t==="number"||t==="range"}function la(e){return e===""?null:+e}class gl{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#e.get(t);i.delete(n),i.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){gl.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var Jp=new gl({box:"border-box"});function Eo(e,t,n){var r=Jp.observe(e,()=>n(e[t]));Yi(()=>(or(()=>n(e[t])),r))}function Pu(e,t){return e===t||e?.[dl]===t}function En(e={},t,n,r){return Yi(()=>{var i,o;return gs(()=>{i=o,o=[],or(()=>{e!==n(...o)&&(t(e,...o),i&&Pu(n(...i),e)&&t(null,...i))})}),()=>{cl(()=>{o&&Pu(n(...o),e)&&t(null,...o)})}}),e}function vl(e=!1){const t=Ii,n=t.l.u;if(!n)return;let r=()=>sf(t.s);if(e){let i=0,o={};const s=ff(()=>{let l=!1;const u=t.s;for(const f in u)u[f]!==o[f]&&(o[f]=u[f],l=!0);return l&&i++,i});r=()=>S(s)}n.b.length&&wp(()=>{Ru(t,r),wu(n.b)}),hn(()=>{const i=or(()=>n.m.map(Cp));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&hn(()=>{Ru(t,r),wu(n.a)})}function Ru(e,t){if(e.l.s)for(const n of e.l.s)S(n);t()}function _f(e,t,n){if(e==null)return t(void 0),Rr;const r=or(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Jr=[];function yl(e,t=Rr){let n=null;const r=new Set;function i(l){if(af(e,l)&&(e=l,n)){const u=!Jr.length;for(const f of r)f[1](),Jr.push(f,e);if(u){for(let f=0;f<Jr.length;f+=2)Jr[f][0](Jr[f+1]);Jr.length=0}}}function o(l){i(l(e))}function s(l,u=Rr){const f=[l,u];return r.add(f),r.size===1&&(n=t(i,o)||Rr),l(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function De(e){let t;return _f(e,n=>t=n)(),t}let Ei=!1,Na=Symbol();function Ke(e,t,n){const r=n[t]??={store:null,source:Or(void 0),unsubscribe:Rr};if(r.store!==e&&!(Na in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Rr;else{var i=!0;r.unsubscribe=_f(e,o=>{i?r.source.v=o:ne(r.source,o)}),i=!1}return e&&Na in n?De(e):S(r.source)}function Ye(e,t){return e.set(t),t}function sr(){const e={};function t(){lf(()=>{for(var n in e)e[n].unsubscribe();Sp(e,Na,{enumerable:!1,value:!0})})}return[e,t]}function kf(){Ei=!0}function Zp(e){var t=Ei;try{return Ei=!1,[e(),Ei]}finally{Ei=t}}const Qp={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(xi(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];xi(i)&&(i=i());const o=La(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(xi(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=La(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===dl||t===hf)return!1;for(let n of e.props)if(xi(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(xi(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function ua(...e){return new Proxy({props:e},Qp)}function nt(e,t,n,r){var i=!Gc||(n&Dp)!==0,o=(n&Ip)!==0,s=(n&Ap)!==0,l=r,u=!0,f=()=>(u&&(u=!1,l=s?or(r):r),l),d;if(o){var h=dl in e||hf in e;d=La(e,t)?.set??(h&&t in e?O=>e[t]=O:void 0)}var g,v=!1;o?[g,v]=Zp(()=>e[t]):g=e[t],g===void 0&&r!==void 0&&(g=f(),d&&(i&&Tp(),d(g)));var b;if(i?b=()=>{var O=e[t];return O===void 0?f():(u=!0,O)}:b=()=>{var O=e[t];return O!==void 0&&(l=void 0),O===void 0?l:O},i&&(n&Ep)===0)return b;if(d){var C=e.$$legacy;return function(O,z){return arguments.length>0?((!i||!z||C||v)&&d(z?b():O),O):b()}}var A=!1,w=((n&Op)!==0?ff:Xc)(()=>(A=!1,b()));o&&S(w);var $=hl;return function(O,z){if(arguments.length>0){const V=z?S(w):i&&o?Lr(O):O;return ne(w,V),A=!0,l!==void 0&&(l=V),O}return Pp&&A||($.f&Rp)!==0?w.v:S(w)}}var Ba=function(e,t){return Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ba(e,t)},Uo=function(){return Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Uo.apply(this,arguments)};function Au(e,t,n){for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var Iu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}Ba(n,r),n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}(t,e),t}(Error),wf={},Xp=new Set,Fi={};function Pi(e,t){if(typeof e=="string"||typeof e=="number"&&!isNaN(e)&&Math.abs(e)!==1/0||e==null||typeof e=="boolean")return e;var n=t.indexOf(e);if(n!==-1)return"#$@__instance__"+n;t.push(e);var r=t.length-1;if(e.constructor===Array){var i=e.map(function(u){return Pi(u,t)});return i.unshift("#$@__reference__"+r),i}if(e.constructor===Object){var o=Object.fromEntries(Object.entries(e).map(function(u){return[u[0],Pi(u[1],t)]}));return o["#$@__reference__"]=r,o}Xp.add(e.constructor);var s={};s=Object.defineProperty(s,"#$@__constructor__",{value:e.constructor.name,enumerable:!0}),s=Object.defineProperty(s,"#$@__reference__",{value:r,enumerable:!0});var l=function(u,f){if(Object.keys(Fi).includes(u.constructor.name))return Fi[u.constructor.name].toPlain(u,function(d){return Pi(d,f)})}(e,t);return l!==void 0?Uo(Uo({},l),s):(Object.getOwnPropertyNames(e).forEach(function(u){Object.defineProperty(s,u,{value:Pi(e[u],t),enumerable:!0})}),s)}function Ri(e,t,n){var r;if(typeof e=="string"&&e.indexOf("#$@__instance__")===0)return n[l=parseInt(e.slice(15))];if(typeof e=="string"||typeof e=="number"||e==null||typeof e=="boolean")return e;if(e.constructor===Array){if(e.length===0)return[];var i=e.shift();if(typeof i!="string"||i.substring(0,16)!=="#$@__reference__"){if(Object.keys(n).length===0)return e.unshift(i),e;throw new Iu}var o=[];n[l=i.slice(16)]=o;for(var s=0;s<e.length;s++)o[s]=Ri(e[s],t,n);return o}if(e.constructor===Object){var l;if((l=(r=e["#$@__reference__"])!==null&&r!==void 0?r:null)===null){if(Object.keys(n).length===0)return e;throw new Iu}if(delete e["#$@__reference__"],!Object.keys(e).includes("#$@__constructor__")){for(var u in o={},n[l]=o,e)o[u]=Ri(e[u],t,n);return o}var f=e["#$@__constructor__"];delete e["#$@__constructor__"];var d=function(g,v,b,C){if(Object.keys(Fi).includes(v))return Fi[v].fromPlain(g,function(A){return Ri(A,b,C)})}(e,f,t,n);if(d!==void 0)return d;if(!Object.keys(t).includes(f))throw new Error("The class "+f+" is not allowed");var h={};for(var u in n[l]=h,e)h[u]=Ri(e[u],t,n);return Object.setPrototypeOf(h,t[f].prototype),h}}function em(e){wf[e.name]=e}function Cf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e,t){e("Date",n=>({time:n.getTime()}),function(n){let r=new Date;return r.setTime(n.time),r}),e("BigInt",n=>({number:n.toString()}),n=>BigInt(n.number)),e("String",n=>({text:n.toString()}),n=>new String(n.text)),e("RegExp",n=>({source:n.source,flags:n.flags}),n=>new RegExp(n.source,n.flags)),e("Number",function(n){let r={nan:!1,infinity:!1,positive:!0,number:null};return Math.abs(n)===1/0?(r.infinity=!0,r.positive=Math.abs(n)===n,r):isNaN(n)?(r.nan=!0,r):(r.number=n.valueOf(),r)},function(n){return n.nan?NaN:n.infinity?1/0*(n.positive?1:-1):new Number(n.number)}),e("Map",(n,r)=>({data:Array.from(n.entries()).map(i=>r(i))}),function(n,r){const i=new Map;return n.data.map(o=>r(o)).forEach(([o,s])=>i.set(o,s)),i}),e("Set",(n,r)=>({data:Array.from(n.values()).map(i=>r(i))}),function(n,r){const i=new Set;return n.data.map(o=>r(o)).forEach(o=>i.add(o)),i}),e("ArrayBuffer",(n,r)=>({data:r(new Uint8Array(n))}),(n,r)=>r(n.data).buffer),e("DataView",(n,r)=>({buffer:r(n.buffer),offset:n.byteOffset,length:n.byteLength}),(n,r)=>new DataView(r(n.buffer),n.offset,n.length)),[Error,EvalError,RangeError,AggregateError,ReferenceError,SyntaxError,TypeError,URIError,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].forEach(n=>t(n))})(function(e,t,n){Fi[e]={toPlain:t,fromPlain:n}},em);var Er,tm={};function Po(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Sf(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Po(n);return(i,o)=>r.then(s=>o(s.transaction(t,i).objectStore(t)))}let ca;function fa(){return ca||(ca=Sf("keyval-store","keyval")),ca}function nm(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=o(n)):i!=="call"&&i!=="optionalCall"||(n=o((...s)=>n.call(t,...s)),t=void 0)}return n}(Er=tm).defaults={},Er.set=function(e,t,n){var r=n||{},i=Er.defaults,o=r.expires||i.expires,s=r.domain||i.domain,l=r.path!==void 0?r.path:i.path!==void 0?i.path:"/",u=r.secure!==void 0?r.secure:i.secure,f=r.httponly!==void 0?r.httponly:i.httponly,d=r.samesite!==void 0?r.samesite:i.samesite,h=o?new Date(typeof o=="number"?new Date().getTime()+864e5*o:o):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(h&&h.getTime()>=0?";expires="+h.toUTCString():"")+(s?";domain="+s:"")+(l?";path="+l:"")+(u?";secure":"")+(f?";httponly":"")+(d?";samesite="+d:"")},Er.get=function(e){for(var t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");if(r=r<0?n.length:r,decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))===e)return decodeURIComponent(n.slice(r+1))}return null},Er.erase=function(e,t){Er.set(e,"",{expires:-1,domain:t&&t.domain,path:t&&t.path,secure:0,httponly:0})},Er.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");r=r<0?n.length:r,e[decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))]=decodeURIComponent(n.slice(r+1))}return e};const Du=[],rm=e=>{(t=>{const n=typeof process<"u"&&nm([process,"access",r=>r.env,"optionalAccess",r=>r.NODE_ENV])==="production";Du.includes(t)||n||(typeof window>"u"&&(t+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(t),Du.push(t))})(`Unable to find the ${e}. No data will be persisted.`)};let im=function(e){return e===void 0?"undefined":JSON.stringify(Pi(e,[]))},om=function(e,t){if(t===void 0&&(t=void 0),typeof e!="string")return e;if(t===void 0&&(t={}),e!=="undefined"){t=Object.fromEntries(Au(Au([],Object.entries(t),!0),Object.entries(wf)));try{return Ri(JSON.parse(e),t,{})}catch{return e}}};function sm(e,t,n){const r=t.getValue(n);return r!==null&&e.set(r),t.addListener&&t.addListener(n,i=>{e.set(i)}),e.subscribe(i=>{t.setValue(n,i)}),{...e,delete(){t.deleteValue(n)}}}function Ou(){}function am(e=Ou,t=Ou){const n=[];return{callListeners(r,i){i!==void 0&&n.filter(({key:o})=>o===r).forEach(({listener:o})=>o(i))},addListener(r,i){n.push({key:r,listener:i}),n.length===1&&e()},removeListener(r,i){const o=n.indexOf({key:r,listener:i});o!==-1&&n.splice(o,1),n.length===0&&t()}}}function lm(e){try{return typeof window[e]=="object"}catch{return!1}}function um(){if(typeof indexedDB!="object"||!lm("indexedDB"))return rm("IndexedDB"),fm();const{removeListener:e,callListeners:t,addListener:n}=am(),r=Sf("svelte-persist","persist");return{addListener:n,removeListener:e,getValue:i=>(function(o,s=fa()){return s("readonly",l=>Po(l.get(o)))}(i,r).then(o=>t(i,om(o))),null),setValue(i,o){(function(s,l,u=fa()){u("readwrite",f=>(f.put(l,s),Po(f.transaction)))})(i,im(o),r)},deleteValue(i){(function(o,s=fa()){s("readwrite",l=>(l.delete(o),Po(l.transaction)))})(i,r)}}}var Lu;function cm(){return{getValue:()=>null,deleteValue(){},setValue(){}}}function fm(){return{...cm(),addListener(){},removeListener(){}}}(function(e){e[e.LOCAL=0]="LOCAL",e[e.SESSION=1]="SESSION",e[e.SYNC=2]="SYNC"})(Lu||(Lu={}));var Mu,hm=function(e){return Math.round(e/1099511627776)||32},dm=function(e){var t,n=e.length;return n===0?0:(t=e[n-1],32*(n-1)+hm(t))},pm=function(e){var t,n="",r=e.length;for(t=0;t<r;t++)n+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return n.substr(0,dm(e)/4)};Cf(pm);var mm=function(e,t,n){return e===32?t:(0|t)+1099511627776*e},gm=function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=mm(t,e[n-1]&2147483648>>t-1)),e},vm=function(e){var t,n,r,i=[];for(r=(e=e.replace(/\s|0x/g,"")).length,n=(e+="00000000").length,t=0;t<n;t+=8)i.push(0^parseInt(e.substr(t,8),16));return gm(i,4*r)};Cf(vm);var Ue={cipher:{},mode:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e}}};Ue.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var t,n,r,i,o,s=this._tables[0][4],l=this._tables[1],u=e.length,f=1;if(u!==4&&u!==6&&u!==8)throw new Ue.exception.invalid("invalid aes key size");for(this._key=[i=e.slice(0),o=[]],t=u;t<4*u+28;t++)r=i[t-1],(t%u==0||u===8&&t%u==4)&&(r=s[r>>>24]<<24^s[r>>16&255]<<16^s[r>>8&255]<<8^s[255&r],t%u==0&&(r=r<<8^r>>>24^f<<24,f=f<<1^283*(f>>7))),i[t]=i[t-u]^r;for(n=0;t;n++,t--)r=i[3&n?t:t-4],o[n]=t<=4||n<4?r:l[0][s[r>>>24]]^l[1][s[r>>16&255]]^l[2][s[r>>8&255]]^l[3][s[255&r]]},Ue.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,n,r,i,o,s,l,u=this._tables[0],f=this._tables[1],d=u[4],h=f[4],g=[],v=[];for(e=0;e<256;e++)v[(g[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=r||1,n=v[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,d[t]=o,h[o]=t,l=16843009*g[i=g[r=g[t]]]^65537*i^257*r^16843008*t,s=257*g[o]^16843008*o,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,f[e][o]=l=l<<24^l>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),f[e]=f[e].slice(0)},_crypt:function(e,t){if(e.length!==4)throw new Ue.exception.invalid("invalid aes block size");var n,r,i,o,s=this._key[t],l=e[0]^s[0],u=e[t?3:1]^s[1],f=e[2]^s[2],d=e[t?1:3]^s[3],h=s.length/4-2,g=4,v=[0,0,0,0],b=this._tables[t],C=b[0],A=b[1],w=b[2],$=b[3],O=b[4];for(o=0;o<h;o++)n=C[l>>>24]^A[u>>16&255]^w[f>>8&255]^$[255&d]^s[g],r=C[u>>>24]^A[f>>16&255]^w[d>>8&255]^$[255&l]^s[g+1],i=C[f>>>24]^A[d>>16&255]^w[l>>8&255]^$[255&u]^s[g+2],d=C[d>>>24]^A[l>>16&255]^w[u>>8&255]^$[255&f]^s[g+3],g+=4,l=n,u=r,f=i;for(o=0;o<4;o++)v[t?3&-o:o]=O[l>>>24]<<24^O[u>>16&255]<<16^O[f>>8&255]<<8^O[255&d]^s[g++],n=l,l=u,u=f,f=d,d=n;return v}},Ue.bitArray={bitSlice:function(e,t,n){return e=Ue.bitArray._shiftRight(e.slice(t/32),32-(31&t)).slice(1),n===void 0?e:Ue.bitArray.clamp(e,n-t)},extract:function(e,t,n){var r=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r)&(1<<n)-1},concat:function(e,t){if(e.length===0||t.length===0)return e.concat(t);var n=e[e.length-1],r=Ue.bitArray.getPartial(n);return r===32?e.concat(t):Ue.bitArray._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t,n=e.length;return n===0?0:(t=e[n-1],32*(n-1)+Ue.bitArray.getPartial(t))},clamp:function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=Ue.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return e===32?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(Ue.bitArray.bitLength(e)!==Ue.bitArray.bitLength(t))return!1;var n,r=0;for(n=0;n<e.length;n++)r|=e[n]^t[n];return r===0},_shiftRight:function(e,t,n,r){var i,o,s;for(r===void 0&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(t===0)return r.concat(e);for(i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;return o=e.length?e[e.length-1]:0,s=Ue.bitArray.getPartial(o),r.push(Ue.bitArray.partial(t+s&31,t+s>32?n:r.pop(),1)),r},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},Ue.codec.utf8String={fromBits:function(e){var t,n,r="",i=Ue.bitArray.bitLength(e);for(t=0;t<i/8;t++)(3&t)==0&&(n=e[t/4]),r+=String.fromCharCode(n>>>8>>>8>>>8),n<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e.charCodeAt(t),(3&t)==3&&(n.push(r),r=0);return 3&t&&n.push(Ue.bitArray.partial(8*(3&t),r)),n}},Ue.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var r,i="",o=0,s=Ue.codec.base64._chars,l=0,u=Ue.bitArray.bitLength(e);for(n&&(s=s.substr(0,62)+"-_"),r=0;6*i.length<u;)i+=s.charAt((l^e[r]>>>o)>>>26),o<6?(l=e[r]<<6-o,o+=26,r++):(l<<=6,o-=6);for(;3&i.length&&!t;)i+="=";return i},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n,r,i=[],o=0,s=Ue.codec.base64._chars,l=0;for(t&&(s=s.substr(0,62)+"-_"),n=0;n<e.length;n++){if((r=s.indexOf(e.charAt(n)))<0)throw new Ue.exception.invalid("this isn't base64!");o>26?(o-=26,i.push(l^r>>>o),l=r<<32-o):l^=r<<32-(o+=6)}return 56&o&&i.push(Ue.bitArray.partial(56&o,l,1)),i}},Ue.codec.base64url={fromBits:function(e){return Ue.codec.base64.fromBits(e,1,1)},toBits:function(e){return Ue.codec.base64.toBits(e,1)}},Ue.mode.gcm={name:"gcm",encrypt:function(e,t,n,r,i){var o,s=t.slice(0),l=Ue.bitArray;return i=i||128,r=r||[],o=Ue.mode.gcm._ctrMode(!0,e,s,r,n,i),l.concat(o.data,o.tag)},decrypt:function(e,t,n,r,i){var o,s,l=t.slice(0),u=Ue.bitArray,f=u.bitLength(l);if(r=r||[],(i=i||128)<=f?(s=u.bitSlice(l,f-i),l=u.bitSlice(l,0,f-i)):(s=l,l=[]),o=Ue.mode.gcm._ctrMode(!1,e,l,r,n,i),!u.equal(o.tag,s))throw new Ue.exception.corrupt("gcm: tag doesn't match");return o.data},_galoisMultiply:function(e,t){var n,r,i,o,s,l=Ue.bitArray._xor4;for(i=[0,0,0,0],o=t.slice(0),n=0;n<128;n++){for((e[Math.floor(n/32)]&1<<31-n%32)!=0&&(i=l(i,o)),s=(1&o[3])!=0,r=3;r>0;r--)o[r]=o[r]>>>1|(1&o[r-1])<<31;o[0]=o[0]>>>1,s&&(o[0]=o[0]^225<<24)}return i},_ghash:function(e,t,n){var r,i,o=n.length;for(r=t.slice(0),i=0;i<o;i+=4)r[0]^=4294967295&n[i],r[1]^=4294967295&n[i+1],r[2]^=4294967295&n[i+2],r[3]^=4294967295&n[i+3],r=Ue.mode.gcm._galoisMultiply(r,e);return r},_ctrMode:function(e,t,n,r,i,o){var s,l,u,f,d,h,g,v,b,C,A,w,$=Ue.bitArray;for(b=n.length,C=$.bitLength(n),A=$.bitLength(r),w=$.bitLength(i),s=t.encrypt([0,0,0,0]),w===96?(l=i.slice(0),l=$.concat(l,[1])):(l=Ue.mode.gcm._ghash(s,[0,0,0,0],i),l=Ue.mode.gcm._ghash(s,l,[0,0,Math.floor(w/4294967296),4294967295&w])),u=Ue.mode.gcm._ghash(s,[0,0,0,0],r),h=l.slice(0),g=u.slice(0),e||(g=Ue.mode.gcm._ghash(s,u,n)),d=0;d<b;d+=4)h[3]++,f=t.encrypt(h),n[d]^=f[0],n[d+1]^=f[1],n[d+2]^=f[2],n[d+3]^=f[3];return n=$.clamp(n,C),e&&(g=Ue.mode.gcm._ghash(s,u,n)),v=[Math.floor(A/4294967296),4294967295&A,Math.floor(C/4294967296),4294967295&C],g=Ue.mode.gcm._ghash(s,g,v),f=t.encrypt(l),g[0]^=f[0],g[1]^=f[1],g[2]^=f[2],g[3]^=f[3],{tag:$.bitSlice(g,0,o),data:n}}},function(e){e[e.EXCEPTION=0]="EXCEPTION",e[e.NO_ENCRYPTION=1]="NO_ENCRYPTION",e[e.NO_STORAGE=2]="NO_STORAGE"}(Mu||(Mu={}));function Ne(e,t){return sm(yl(t),um(),e)}const Rn=Ne("resumeMd","# Go to settings and fetch my resume template from the settings! Also Update your info!"),$i=yl("<h1>Hi</h1>"),Hn=Ne("jobDescription","Paste your job description here, or paste a link and try to fetch it"),Qn=Ne("jobUrl","https://example.com/"),jn=Ne("navstate","None"),Li=Ne("pagestate","Content"),Ln=Ne("jobName","Change Me"),yr=Ne("resumeKeywords",[]),br=Ne("jobKeywords",[]),vs=Ne("overlappingKeywords",[]),xr=Ne("combinedScore",0),bl=Ne("createdTime",[]),xl=Ne("updatedTime",[]),Ar=Ne("keywords",[]),Ir=Ne("saveCount",0),Xr=Ne("saveState",0),Kn=Ne("projectId",-1),_l=Ne("availableProjects",[]),ys=Ne("header",""),Ro=yl(!1),jr=Ne("resumeTemplate","# Go to settings and fetch my resume template from the settings! Also Update your info!"),qo=Ne("name","John Doe"),Ho=Ne("email","example@gmail.com"),Ko=Ne("phone","999-999-9999"),Vo=Ne("website","example.com"),Wo=Ne("linkedin","linkedin.com/in/example"),Yo=Ne("github","github.com/example"),Go=Ne("address","Moon Street 123"),ym=Ne("cssTheme","/ResuMate/style.css"),Jo=Ne("openRouterKey","your_api_key_here"),Ui=Ne("openRouterAIModel","openai/gpt-4.1"),qi=Ne("knowlegeBase","Fetch some example knowlege to see what it looks like"),Zo=Ne("enableEmail",!0),Qo=Ne("enablePhone",!0),Xo=Ne("enableWebsite",!0),es=Ne("enableLinkedin",!1),ts=Ne("enableGithub",!0),ns=Ne("enableAddress",!0),bm=Ne("enableAddressLink",!0),rs=Ne("showUSCitizenship",!1),xm=Ne("customHeader",""),_m=Ne("enableCustomHeader",!1),km=Ne("customCSS",""),wm=Ne("enableCustomCSS",!1),ju=Ne("hasSeenWelcome",!1);function kl(){let e=[];e.push("# "+De(qo));const t=[];if(De(Qo)&&t.push("![Phone](https://shlok-bhakta.github.io/ResuMate/icons/phone.svg) "+De(Ko)),De(Zo)){const n=De(Ho);t.push("![Mail](https://shlok-bhakta.github.io/ResuMate/icons/mail.svg) ["+n+"](mailto:"+n+")")}if(De(ns)&&t.push("![Globe](https://shlok-bhakta.github.io/ResuMate/icons/globe.svg) "+De(Go)),De(Xo)){const n=De(Vo);t.push("![Website](https://shlok-bhakta.github.io/ResuMate/icons/internet.svg) ["+n+"](https://"+n+")")}if(De(ts)){const n=De(Yo);t.push("![Github](https://shlok-bhakta.github.io/ResuMate/icons/github.svg) ["+n+"](https://"+n+")")}if(De(es)){const n=De(Wo);t.push("![Linkedin](https://shlok-bhakta.github.io/ResuMate/icons/linkedin.svg) ["+n+"](https://"+n+")")}De(rs)&&t.push("![Passport](https://shlok-bhakta.github.io/ResuMate/icons/passport.svg) US CITIZEN"),t.length>0&&(e.push(""),e.push("#### "+t.join(" | "))),e.push("",""),ys.set(e.join(`
`))}function zu(e,t){if(!e||t.length===0)return[];let n=e.toLowerCase();n=n.replace(/<!--[\s\S]*?-->/g,"");const r=[];for(let i=0;i<t.length;i++){const o=t[i],s=o.toLowerCase(),l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=s.includes(" "),f=/[^\w\s]/.test(s),d=s.includes(".");let h;u||f||d?h=new RegExp(`(?:^|\\s)${l}(?:\\s|$|\\.|,|;|:|\\))`,"i"):h=new RegExp(`\\b${l}\\b`,"i"),h.test(n)&&(r.push(o),n=n.replace(new RegExp(h.source,"gi")," __MATCHED__ "))}return r}function wl(){const e=De(Ar),t=De(Hn),n=De(Rn),r=zu(t,e),i=zu(n,e);let o=0;const s=[];if(r.length>0){const l=100/r.length;for(let u=0;u<r.length;u++){const f=r[u];i.find(d=>d.toLowerCase()===f.toLowerCase())&&(s.push(f),o+=l)}}o>99.95&&(o=100),r.sort((l,u)=>l.localeCompare(u)),i.sort((l,u)=>l.localeCompare(u)),Nu(r,s),Nu(i,s),vs.set(s),br.set(r),yr.set(i),xr.set(o)}function Nu(e,t){for(let n=0;n<e.length;n++){const r=e[n];t.includes(r)&&(e.splice(n,1),e.unshift(r))}}function Cm(e){const t=e.getSelection();if(t.end>t.start){const n=e.getLine(t.start),r=e.getLine(t.end),o=e.textarea.value.substring(n.start,r.end).split(`
`),s=o.every(u=>{const f=u.trim();return f===""||f.startsWith("<!--")&&f.endsWith("-->")}),l=o.map(u=>{const f=u.trim();if(f==="")return u;const d=f.startsWith("<!--")&&f.endsWith("-->");return s&&d?u.replace(/^\s*<!--\s*/,"").replace(/\s*-->\s*$/,""):!s&&!d?`<!-- ${u} -->`:u});e.removeAt(n.start,r.end-n.start),e.insertAt(n.start,l.join(`
`))}else{const n=e.getLine(),r=n.value.trim();if(r.startsWith("<!--")&&r.endsWith("-->")){const i=n.value.replace(/^\s*<!--\s*/,"").replace(/\s*-->\s*$/,"");e.removeAt(n.start,n.value.length),e.insertAt(n.start,i)}else r!==""&&(e.removeAt(n.start,n.value.length),e.insertAt(n.start,`<!-- ${n.value} -->`))}e.textarea.setSelectionRange(t.start,t.end)}const Tf={shortcuts:[{id:"commentselection",combination:new Set(["control","/"]),action:e=>Cm(e)},{id:"underline",combination:new Set(["control","u"]),action:e=>e.toggleSelectionSurrounding("__")}]};function Bu(e){const t=e.split(`
`);for(let n=0;n<t.length;n++){const r=t[n];if(!r.startsWith("<!--")&&r.includes("||")){let i=r.split("||").slice(0,2);t[n]="| "+i.join(" | ")+` |
|:-|-:|
`}}return t.join(`
`)}var Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ao={exports:{}},Tm=Ao.exports,Fu;function Em(){return Fu||(Fu=1,function(e,t){(function(n,r){e.exports=r()})(Tm,function(){var n=function(a,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,p=1,m=arguments.length;p<m;p++)for(var y in c=arguments[p])Object.prototype.hasOwnProperty.call(c,y)&&(a[y]=c[y]);return a}).apply(this,arguments)};function i(a,c,p){for(var m,y=0,x=c.length;y<x;y++)!m&&y in c||((m=m||Array.prototype.slice.call(c,0,y))[y]=c[y]);return a.concat(m||Array.prototype.slice.call(c))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sm,s=Object.keys,l=Array.isArray;function u(a,c){return typeof c!="object"||s(c).forEach(function(p){a[p]=c[p]}),a}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var f=Object.getPrototypeOf,d={}.hasOwnProperty;function h(a,c){return d.call(a,c)}function g(a,c){typeof c=="function"&&(c=c(f(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(c).forEach(function(p){b(a,p,c[p])})}var v=Object.defineProperty;function b(a,c,p,m){v(a,c,u(p&&h(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},m))}function C(a){return{from:function(c){return a.prototype=Object.create(c.prototype),b(a.prototype,"constructor",a),{extend:g.bind(null,a.prototype)}}}}var A=Object.getOwnPropertyDescriptor,w=[].slice;function $(a,c,p){return w.call(a,c,p)}function O(a,c){return c(a)}function z(a){if(!a)throw new Error("Assertion Failed")}function V(a){o.setImmediate?setImmediate(a):setTimeout(a,0)}function P(a,c){if(typeof c=="string"&&h(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var p=[],m=0,y=c.length;m<y;++m){var x=P(a,c[m]);p.push(x)}return p}var _=c.indexOf(".");if(_!==-1){var E=a[c.substr(0,_)];return E==null?void 0:P(E,c.substr(_+1))}}function W(a,c,p){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){z(typeof p!="string"&&"length"in p);for(var m=0,y=c.length;m<y;++m)W(a,c[m],p[m])}else{var x,_,E=c.indexOf(".");E!==-1?(x=c.substr(0,E),(_=c.substr(E+1))===""?p===void 0?l(a)&&!isNaN(parseInt(x))?a.splice(x,1):delete a[x]:a[x]=p:W(E=!(E=a[x])||!h(a,x)?a[x]={}:E,_,p)):p===void 0?l(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=p}}function ae(a){var c,p={};for(c in a)h(a,c)&&(p[c]=a[c]);return p}var me=[].concat;function j(a){return me.apply([],a)}var ee="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return o[a]}),X=new Set(ee.map(function(a){return o[a]})),te=null;function se(a){return te=new WeakMap,a=function c(p){if(!p||typeof p!="object")return p;var m=te.get(p);if(m)return m;if(l(p)){m=[],te.set(p,m);for(var y=0,x=p.length;y<x;++y)m.push(c(p[y]))}else if(X.has(p.constructor))m=p;else{var _,E=f(p);for(_ in m=E===Object.prototype?{}:Object.create(E),te.set(p,m),p)h(p,_)&&(m[_]=c(p[_]))}return m}(a),te=null,a}var K={}.toString;function Q(a){return K.call(a).slice(8,-1)}var ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof ye=="symbol"?function(a){var c;return a!=null&&(c=a[ye])&&c.apply(a)}:function(){return null};function Ee(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var Be={};function k(a){var c,p,m,y;if(arguments.length===1){if(l(a))return a.slice();if(this===Be&&typeof a=="string")return[a];if(y=_e(a)){for(p=[];!(m=y.next()).done;)p.push(m.value);return p}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(p=new Array(c);c--;)p[c]=a[c];return p}for(c=arguments.length,p=new Array(c);c--;)p[c]=arguments[c];return p}var Ce=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Dn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(mn),Se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function T(a,c){this.name=a,this.message=c}function Ze(a,c){return a+". Errors: "+Object.keys(c).map(function(p){return c[p].toString()}).filter(function(p,m,y){return y.indexOf(p)===m}).join(`
`)}function ft(a,c,p,m){this.failures=c,this.failedKeys=m,this.successCount=p,this.message=Ze(a,c)}function Me(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(p){return c[p]}),this.failuresByPos=c,this.message=Ze(a,this.failures)}C(T).from(Error).extend({toString:function(){return this.name+": "+this.message}}),C(ft).from(T),C(Me).from(T);var Xe=Dn.reduce(function(a,c){return a[c]=c+"Error",a},{}),rt=T,ve=Dn.reduce(function(a,c){var p=c+"Error";function m(y,x){this.name=p,y?typeof y=="string"?(this.message="".concat(y).concat(x?`
 `+x:""),this.inner=x||null):typeof y=="object"&&(this.message="".concat(y.name," ").concat(y.message),this.inner=y):(this.message=Se[c]||p,this.inner=null)}return C(m).from(rt),a[c]=m,a},{});ve.Syntax=SyntaxError,ve.Type=TypeError,ve.Range=RangeError;var bt=mn.reduce(function(a,c){return a[c+"Error"]=ve[c],a},{}),At=Dn.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=ve[c]),a},{});function Oe(){}function pt(a){return a}function Jt(a,c){return a==null||a===pt?c:function(p){return c(a(p))}}function Fe(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function it(a,c){return a===Oe?c:function(){var p=a.apply(this,arguments);p!==void 0&&(arguments[0]=p);var m=this.onsuccess,y=this.onerror;this.onsuccess=null,this.onerror=null;var x=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Fe(m,this.onsuccess):m),y&&(this.onerror=this.onerror?Fe(y,this.onerror):y),x!==void 0?x:p}}function xt(a,c){return a===Oe?c:function(){a.apply(this,arguments);var p=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Fe(p,this.onsuccess):p),m&&(this.onerror=this.onerror?Fe(m,this.onerror):m)}}function It(a,c){return a===Oe?c:function(p){var m=a.apply(this,arguments);u(p,m);var y=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,p=c.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?Fe(y,this.onsuccess):y),x&&(this.onerror=this.onerror?Fe(x,this.onerror):x),m===void 0?p===void 0?void 0:p:u(m,p)}}function pn(a,c){return a===Oe?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function In(a,c){return a===Oe?c:function(){var p=a.apply(this,arguments);if(p&&typeof p.then=="function"){for(var m=this,y=arguments.length,x=new Array(y);y--;)x[y]=arguments[y];return p.then(function(){return c.apply(m,x)})}return c.apply(this,arguments)}}At.ModifyError=ft,At.DexieError=T,At.BulkError=Me;var je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ct(a){je=a}var $t={},Qt=100,ee=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,f(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),a]}(),mn=ee[0],Dn=ee[1],ee=ee[2],Dn=Dn&&Dn.then,oe=mn&&mn.constructor,Te=!!ee,Ie=function(a,c){St.push([a,c]),st&&(queueMicrotask(gn),st=!1)},qe=!0,st=!0,mt=[],gt=[],Et=pt,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Oe,pgp:!1,env:{},finalize:Oe},de=vt,St=[],at=0,Ut=[];function fe(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=de;if(typeof a!="function"){if(a!==$t)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ln(this,this._value))}this._state=null,this._value=null,++c.ref,function p(m,y){try{y(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var _=m._lib&&qt();x&&typeof x.then=="function"?p(m,function(E,I){x instanceof fe?x._then(E,I):x.then(E,I)}):(m._state=!0,m._value=x,lt(m)),_&&Zt()}},ln.bind(null,m))}catch(x){ln(m,x)}}(this,a)}var sn={get:function(){var a=de,c=ht;function p(m,y){var x=this,_=!a.global&&(a!==de||c!==ht),E=_&&!Dt(),I=new fe(function(L,B){Vt(x,new an(Kr(m,a,_,E),Kr(y,a,_,E),L,B,a))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return p.prototype=$t,p},set:function(a){b(this,"then",a&&a.prototype===$t?sn:{get:function(){return a},set:sn.set})}};function an(a,c,p,m,y){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=p,this.reject=m,this.psd=y}function ln(a,c){var p,m;gt.push(c),a._state===null&&(p=a._lib&&qt(),c=Et(c),a._state=!1,a._value=c,m=a,mt.some(function(y){return y._value===m._value})||mt.push(m),lt(a),p&&Zt())}function lt(a){var c=a._listeners;a._listeners=[];for(var p=0,m=c.length;p<m;++p)Vt(a,c[p]);var y=a._PSD;--y.ref||y.finalize(),at===0&&(++at,Ie(function(){--at==0&&er()},[]))}function Vt(a,c){if(a._state!==null){var p=a._state?c.onFulfilled:c.onRejected;if(p===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++at,Ie(un,[p,a,c])}else a._listeners.push(c)}function un(a,c,p){try{var m,y=c._value;!c._state&&gt.length&&(gt=[]),m=je&&c._consoleTask?c._consoleTask.run(function(){return a(y)}):a(y),c._state||gt.indexOf(y)!==-1||function(x){for(var _=mt.length;_;)if(mt[--_]._value===x._value)return mt.splice(_,1)}(c),p.resolve(m)}catch(x){p.reject(x)}finally{--at==0&&er(),--p.psd.ref||p.psd.finalize()}}function gn(){Bn(vt,function(){qt()&&Zt()})}function qt(){var a=qe;return st=qe=!1,a}function Zt(){var a,c,p;do for(;0<St.length;)for(a=St,St=[],p=a.length,c=0;c<p;++c){var m=a[c];m[0].apply(null,m[1])}while(0<St.length);st=qe=!0}function er(){var a=mt;mt=[],a.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=Ut.slice(0),p=c.length;p;)c[--p]()}function zn(a){return new fe($t,!1,a)}function ct(a,c){var p=de;return function(){var m=qt(),y=de;try{return kn(p,!0),a.apply(this,arguments)}catch(x){c&&c(x)}finally{kn(y,!1),m&&Zt()}}}g(fe.prototype,{then:sn,_then:function(a,c){Vt(this,new an(null,null,a,c,de))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,p=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?p:zn)(m)}):this.then(null,function(m){return(m&&m.name===c?p:zn)(m)})},finally:function(a){return this.then(function(c){return fe.resolve(a()).then(function(){return c})},function(c){return fe.resolve(a()).then(function(){return zn(c)})})},timeout:function(a,c){var p=this;return a<1/0?new fe(function(m,y){var x=setTimeout(function(){return y(new ve.Timeout(c))},a);p.then(m,y).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=Hr(),g(fe,{all:function(){var a=k.apply(null,arguments).map(Ot);return new fe(function(c,p){a.length===0&&c([]);var m=a.length;a.forEach(function(y,x){return fe.resolve(y).then(function(_){a[x]=_,--m||c(a)},p)})})},resolve:function(a){return a instanceof fe?a:a&&typeof a.then=="function"?new fe(function(c,p){a.then(c,p)}):new fe($t,!0,a)},reject:zn,race:function(){var a=k.apply(null,arguments).map(Ot);return new fe(function(c,p){a.map(function(m){return fe.resolve(m).then(c,p)})})},PSD:{get:function(){return de},set:function(a){return de=a}},totalEchoes:{get:function(){return ht}},newPSD:Rt,usePSD:Bn,scheduler:{get:function(){return Ie},set:function(a){Ie=a}},rejectionMapper:{get:function(){return Et},set:function(a){Et=a}},follow:function(a,c){return new fe(function(p,m){return Rt(function(y,x){var _=de;_.unhandleds=[],_.onunhandled=x,_.finalize=Fe(function(){var E,I=this;E=function(){I.unhandleds.length===0?y():x(I.unhandleds[0])},Ut.push(function L(){E(),Ut.splice(Ut.indexOf(L),1)}),++at,Ie(function(){--at==0&&er()},[])},_.finalize),a()},c,p,m)})}}),oe&&(oe.allSettled&&b(fe,"allSettled",function(){var a=k.apply(null,arguments).map(Ot);return new fe(function(c){a.length===0&&c([]);var p=a.length,m=new Array(p);a.forEach(function(y,x){return fe.resolve(y).then(function(_){return m[x]={status:"fulfilled",value:_}},function(_){return m[x]={status:"rejected",reason:_}}).then(function(){return--p||c(m)})})})}),oe.any&&typeof AggregateError<"u"&&b(fe,"any",function(){var a=k.apply(null,arguments).map(Ot);return new fe(function(c,p){a.length===0&&p(new AggregateError([]));var m=a.length,y=new Array(m);a.forEach(function(x,_){return fe.resolve(x).then(function(E){return c(E)},function(E){y[_]=E,--m||p(new AggregateError(y))})})})}),oe.withResolvers&&(fe.withResolvers=oe.withResolvers));var Ae={awaits:0,echoes:0,id:0},Ts=0,Ur=[],qr=0,ht=0,Pt=0;function Rt(a,c,p,m){var y=de,x=Object.create(y);return x.parent=y,x.ref=0,x.global=!1,x.id=++Pt,vt.env,x.env=Te?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject}:{},c&&u(x,c),++y.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=Bn(x,a,p,m),x.ref===0&&x.finalize(),m}function Nt(){return Ae.id||(Ae.id=++Ts),++Ae.awaits,Ae.echoes+=Qt,Ae.id}function Dt(){return!!Ae.awaits&&(--Ae.awaits==0&&(Ae.id=0),Ae.echoes=Ae.awaits*Qt,!0)}function Ot(a){return Ae.echoes&&a&&a.constructor===oe?(Nt(),a.then(function(c){return Dt(),c},function(c){return Dt(),Lt(c)})):a}function Nn(){var a=Ur[Ur.length-1];Ur.pop(),kn(a,!1)}function kn(a,c){var p,m=de;(c?!Ae.echoes||qr++&&a===de:!qr||--qr&&a===de)||queueMicrotask(c?function(y){++ht,Ae.echoes&&--Ae.echoes!=0||(Ae.echoes=Ae.awaits=Ae.id=0),Ur.push(de),kn(y,!0)}.bind(null,a):Nn),a!==de&&(de=a,m===vt&&(vt.env=Hr()),Te&&(p=vt.env.Promise,c=a.env,(m.global||a.global)&&(Object.defineProperty(o,"Promise",c.PromiseProp),p.all=c.all,p.race=c.race,p.resolve=c.resolve,p.reject=c.reject,c.allSettled&&(p.allSettled=c.allSettled),c.any&&(p.any=c.any))))}function Hr(){var a=o.Promise;return Te?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function Bn(a,c,p,m,y){var x=de;try{return kn(a,!0),c(p,m,y)}finally{kn(x,!1)}}function Kr(a,c,p,m){return typeof a!="function"?a:function(){var y=de;p&&Nt(),kn(c,!0);try{return a.apply(this,arguments)}finally{kn(y,!1),m&&queueMicrotask(Dt)}}}function ci(a){Promise===oe&&Ae.echoes===0?qr===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Dn).indexOf("[native code]")===-1&&(Nt=Dt=Oe);var Lt=fe.reject,kr="ï¿¿",tr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kl="String expected.",Vr=[],Qi="__dbnames",Es="readonly",Ps="readwrite";function wr(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var Vl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Xi(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=se(c))[a],c}}function Wl(){throw ve.Type()}function Qe(a,c){try{var p=Yl(a),m=Yl(c);if(p!==m)return p==="Array"?1:m==="Array"?-1:p==="binary"?1:m==="binary"?-1:p==="string"?1:m==="string"?-1:p==="Date"?1:m!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(y,x){for(var _=y.length,E=x.length,I=_<E?_:E,L=0;L<I;++L)if(y[L]!==x[L])return y[L]<x[L]?-1:1;return _===E?0:_<E?-1:1}(Gl(a),Gl(c));case"Array":return function(y,x){for(var _=y.length,E=x.length,I=_<E?_:E,L=0;L<I;++L){var B=Qe(y[L],x[L]);if(B!==0)return B}return _===E?0:_<E?-1:1}(a,c)}}catch{}return NaN}function Yl(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=Q(a),a==="ArrayBuffer"?"binary":a)}function Gl(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Jl=(Tt.prototype._trans=function(a,c,p){var m=this._tx||de.trans,y=this.name,x=je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function _(L,B,R){if(!R.schema[y])throw new ve.NotFound("Table "+y+" not part of transaction");return c(R.idbtrans,R)}var E=qt();try{var I=m&&m.db._novip===this.db._novip?m===de.trans?m._promise(a,_,p):Rt(function(){return m._promise(a,_,p)},{trans:m,transless:de.transless||de}):function L(B,R,q,D){if(B.idbdb&&(B._state.openComplete||de.letThrough||B._vip)){var N=B._createTransaction(R,q,B._dbSchema);try{N.create(),B._state.PR1398_maxLoop=3}catch(U){return U.name===Xe.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return L(B,R,q,D)})):Lt(U)}return N._promise(R,function(U,M){return Rt(function(){return de.trans=N,D(U,M,N)})}).then(function(U){if(R==="readwrite")try{N.idbtrans.commit()}catch{}return R==="readonly"?U:N._completion.then(function(){return U})})}if(B._state.openComplete)return Lt(new ve.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return Lt(new ve.DatabaseClosed);B.open().catch(Oe)}return B._state.dbReadyPromise.then(function(){return L(B,R,q,D)})}(this.db,a,[this.name],_);return x&&(I._consoleTask=x,I=I.catch(function(L){return console.trace(L),Lt(L)})),I}finally{E&&Zt()}},Tt.prototype.get=function(a,c){var p=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?Lt(new ve.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return p.core.get({trans:m,key:a}).then(function(y){return p.hook.reading.fire(y)})}).then(c)},Tt.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(l(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=s(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(E){if(E.compound&&c.every(function(L){return 0<=E.keyPath.indexOf(L)})){for(var I=0;I<c.length;++I)if(c.indexOf(E.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(E,I){return E.keyPath.length-I.keyPath.length})[0];if(p&&this.db._maxKey!==kr){var x=p.keyPath.slice(0,c.length);return this.where(x).equals(x.map(function(I){return a[I]}))}!p&&je&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function y(E,I){return Qe(E,I)===0}var _=c.reduce(function(R,I){var L=R[0],B=R[1],R=m[I],q=a[I];return[L||R,L||!R?wr(B,R&&R.multi?function(D){return D=P(D,I),l(D)&&D.some(function(N){return y(q,N)})}:function(D){return y(q,P(D,I))}):B]},[null,null]),x=_[0],_=_[1];return x?this.where(x.name).equals(a[x.keyPath]).filter(_):p?this.filter(_):this.where(c).equals("")},Tt.prototype.filter=function(a){return this.toCollection().and(a)},Tt.prototype.count=function(a){return this.toCollection().count(a)},Tt.prototype.offset=function(a){return this.toCollection().offset(a)},Tt.prototype.limit=function(a){return this.toCollection().limit(a)},Tt.prototype.each=function(a){return this.toCollection().each(a)},Tt.prototype.toArray=function(a){return this.toCollection().toArray(a)},Tt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Tt.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,l(a)?"[".concat(a.join("+"),"]"):a))},Tt.prototype.reverse=function(){return this.toCollection().reverse()},Tt.prototype.mapToClass=function(a){var c,p=this.db,m=this.name;function y(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Wl&&(function(I,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function B(){this.constructor=I}n(I,L),I.prototype=L===null?Object.create(L):(B.prototype=L.prototype,new B)}(y,c=a),Object.defineProperty(y.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),y.prototype.table=function(){return m},a=y);for(var x=new Set,_=a.prototype;_;_=f(_))Object.getOwnPropertyNames(_).forEach(function(I){return x.add(I)});function E(I){if(!I)return I;var L,B=Object.create(a.prototype);for(L in I)if(!x.has(L))try{B[L]=I[L]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),a},Tt.prototype.defineClass=function(){return this.mapToClass(function(a){u(this,a)})},Tt.prototype.add=function(a,c){var p=this,m=this.schema.primKey,y=m.auto,x=m.keyPath,_=a;return x&&y&&(_=Xi(x)(a)),this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"add",keys:c!=null?[c]:null,values:[_]})}).then(function(E){return E.numFailures?fe.reject(E.failures[0]):E.lastResult}).then(function(E){if(x)try{W(a,x,E)}catch{}return E})},Tt.prototype.update=function(a,c){return typeof a!="object"||l(a)?this.where(":id").equals(a).modify(c):(a=P(a,this.schema.primKey.keyPath),a===void 0?Lt(new ve.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},Tt.prototype.put=function(a,c){var p=this,m=this.schema.primKey,y=m.auto,x=m.keyPath,_=a;return x&&y&&(_=Xi(x)(a)),this._trans("readwrite",function(E){return p.core.mutate({trans:E,type:"put",values:[_],keys:c!=null?[c]:null})}).then(function(E){return E.numFailures?fe.reject(E.failures[0]):E.lastResult}).then(function(E){if(x)try{W(a,x,E)}catch{}return E})},Tt.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(p){return c.core.mutate({trans:p,type:"delete",keys:[a]})}).then(function(p){return p.numFailures?fe.reject(p.failures[0]):void 0})},Tt.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:Vl})}).then(function(c){return c.numFailures?fe.reject(c.failures[0]):void 0})},Tt.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(p){return c.core.getMany({keys:a,trans:p}).then(function(m){return m.map(function(y){return c.hook.reading.fire(y)})})})},Tt.prototype.bulkAdd=function(a,c,p){var m=this,y=Array.isArray(c)?c:void 0,x=(p=p||(y?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(_){var L=m.schema.primKey,E=L.auto,L=L.keyPath;if(L&&y)throw new ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(y&&y.length!==a.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");var I=a.length,L=L&&E?a.map(Xi(L)):a;return m.core.mutate({trans:_,type:"add",keys:y,values:L,wantResults:x}).then(function(N){var R=N.numFailures,q=N.results,D=N.lastResult,N=N.failures;if(R===0)return x?q:D;throw new Me("".concat(m.name,".bulkAdd(): ").concat(R," of ").concat(I," operations failed"),N)})})},Tt.prototype.bulkPut=function(a,c,p){var m=this,y=Array.isArray(c)?c:void 0,x=(p=p||(y?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(_){var L=m.schema.primKey,E=L.auto,L=L.keyPath;if(L&&y)throw new ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(y&&y.length!==a.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");var I=a.length,L=L&&E?a.map(Xi(L)):a;return m.core.mutate({trans:_,type:"put",keys:y,values:L,wantResults:x}).then(function(N){var R=N.numFailures,q=N.results,D=N.lastResult,N=N.failures;if(R===0)return x?q:D;throw new Me("".concat(m.name,".bulkPut(): ").concat(R," of ").concat(I," operations failed"),N)})})},Tt.prototype.bulkUpdate=function(a){var c=this,p=this.core,m=a.map(function(_){return _.key}),y=a.map(function(_){return _.changes}),x=[];return this._trans("readwrite",function(_){return p.getMany({trans:_,keys:m,cache:"clone"}).then(function(E){var I=[],L=[];a.forEach(function(R,q){var D=R.key,N=R.changes,U=E[q];if(U){for(var M=0,Y=Object.keys(N);M<Y.length;M++){var G=Y[M],Z=N[G];if(G===c.schema.primKey.keyPath){if(Qe(Z,D)!==0)throw new ve.Constraint("Cannot update primary key in bulkUpdate()")}else W(U,G,Z)}x.push(q),I.push(D),L.push(U)}});var B=I.length;return p.mutate({trans:_,type:"put",keys:I,values:L,updates:{keys:m,changeSpecs:y}}).then(function(R){var q=R.numFailures,D=R.failures;if(q===0)return B;for(var N=0,U=Object.keys(D);N<U.length;N++){var M,Y=U[N],G=x[Number(Y)];G!=null&&(M=D[Y],delete D[Y],D[G]=M)}throw new Me("".concat(c.name,".bulkUpdate(): ").concat(q," of ").concat(B," operations failed"),D)})})})},Tt.prototype.bulkDelete=function(a){var c=this,p=a.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:a})}).then(function(_){var y=_.numFailures,x=_.lastResult,_=_.failures;if(y===0)return x;throw new Me("".concat(c.name,".bulkDelete(): ").concat(y," of ").concat(p," operations failed"),_)})},Tt);function Tt(){}function fi(a){function c(_,E){if(E){for(var I=arguments.length,L=new Array(I-1);--I;)L[I-1]=arguments[I];return p[_].subscribe.apply(null,L),a}if(typeof _=="string")return p[_]}var p={};c.addEventType=x;for(var m=1,y=arguments.length;m<y;++m)x(arguments[m]);return c;function x(_,E,I){if(typeof _!="object"){var L;E=E||pn;var B={subscribers:[],fire:I=I||Oe,subscribe:function(R){B.subscribers.indexOf(R)===-1&&(B.subscribers.push(R),B.fire=E(B.fire,R))},unsubscribe:function(R){B.subscribers=B.subscribers.filter(function(q){return q!==R}),B.fire=B.subscribers.reduce(E,I)}};return p[_]=c[_]=B}s(L=_).forEach(function(R){var q=L[R];if(l(q))x(R,L[R][0],L[R][1]);else{if(q!=="asap")throw new ve.InvalidArgument("Invalid event config");var D=x(R,pt,function(){for(var N=arguments.length,U=new Array(N);N--;)U[N]=arguments[N];D.subscribers.forEach(function(M){V(function(){M.apply(null,U)})})})}})}}function hi(a,c){return C(c).from({prototype:a}),c}function Wr(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function Rs(a,c){a.filter=wr(a.filter,c)}function As(a,c,p){var m=a.replayFilter;a.replayFilter=m?function(){return wr(m(),c())}:c,a.justLimit=p&&!m}function eo(a,c){if(a.isPrimKey)return c.primaryKey;var p=c.getIndexByKeyPath(a.index);if(!p)throw new ve.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return p}function Zl(a,c,p){var m=eo(a,c.schema);return c.openCursor({trans:p,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:m,range:a.range}})}function to(a,c,p,m){var y=a.replayFilter?wr(a.filter,a.replayFilter()):a.filter;if(a.or){var x={},_=function(E,I,L){var B,R;y&&!y(I,L,function(q){return I.stop(q)},function(q){return I.fail(q)})||((R=""+(B=I.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(B)),h(x,R)||(x[R]=!0,c(E,I,L)))};return Promise.all([a.or._iterate(_,p),Ql(Zl(a,m,p),a.algorithm,_,!a.keysOnly&&a.valueMapper)])}return Ql(Zl(a,m,p),wr(a.algorithm,y),c,!a.keysOnly&&a.valueMapper)}function Ql(a,c,p,m){var y=ct(m?function(x,_,E){return p(m(x),_,E)}:p);return a.then(function(x){if(x)return x.start(function(){var _=function(){return x.continue()};c&&!c(x,function(E){return _=E},function(E){x.stop(E),_=Oe},function(E){x.fail(E),_=Oe})||y(x.value,x,function(E){return _=E}),_()})})}var di=(Xl.prototype.execute=function(a){var c=this["@@propmod"];if(c.add!==void 0){var p=c.add;if(l(p))return i(i([],l(a)?a:[],!0),p).sort();if(typeof p=="number")return(Number(a)||0)+p;if(typeof p=="bigint")try{return BigInt(a)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(c.remove!==void 0){var m=c.remove;if(l(m))return l(a)?a.filter(function(y){return!m.includes(y)}).sort():[];if(typeof m=="number")return Number(a)-m;if(typeof m=="bigint")try{return BigInt(a)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}return p=(p=c.replacePrefix)===null||p===void 0?void 0:p[0],p&&typeof a=="string"&&a.startsWith(p)?c.replacePrefix[1]+a.substring(p.length):a},Xl);function Xl(a){this["@@propmod"]=a}var Ad=(tt.prototype._read=function(a,c){var p=this._ctx;return p.error?p.table._trans(null,Lt.bind(null,p.error)):p.table._trans("readonly",a).then(c)},tt.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,Lt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},tt.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=wr(c.algorithm,a)},tt.prototype._iterate=function(a,c){return to(this._ctx,a,c,this._ctx.table.core)},tt.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return a&&u(p,a),c._ctx=p,c},tt.prototype.raw=function(){return this._ctx.valueMapper=null,this},tt.prototype.each=function(a){var c=this._ctx;return this._read(function(p){return to(c,a,p,c.table.core)})},tt.prototype.count=function(a){var c=this;return this._read(function(p){var m=c._ctx,y=m.table.core;if(Wr(m,!0))return y.count({trans:p,query:{index:eo(m,y.schema),range:m.range}}).then(function(_){return Math.min(_,m.limit)});var x=0;return to(m,function(){return++x,!1},p,y).then(function(){return x})}).then(a)},tt.prototype.sortBy=function(a,c){var p=a.split(".").reverse(),m=p[0],y=p.length-1;function x(I,L){return L?x(I[p[L]],L-1):I[m]}var _=this._ctx.dir==="next"?1:-1;function E(I,L){return Qe(x(I,y),x(L,y))*_}return this.toArray(function(I){return I.sort(E)}).then(c)},tt.prototype.toArray=function(a){var c=this;return this._read(function(p){var m=c._ctx;if(m.dir==="next"&&Wr(m,!0)&&0<m.limit){var y=m.valueMapper,x=eo(m,m.table.core.schema);return m.table.core.query({trans:p,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(E){return E=E.result,y?E.map(y):E})}var _=[];return to(m,function(E){return _.push(E)},p,m.table.core).then(function(){return _})},a)},tt.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Wr(c)?As(c,function(){var p=a;return function(m,y){return p===0||(p===1?--p:y(function(){m.advance(p),p=0}),!1)}}):As(c,function(){var p=a;return function(){return--p<0}})),this},tt.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),As(this._ctx,function(){var c=a;return function(p,m,y){return--c<=0&&m(y),0<=c}},!0),this},tt.prototype.until=function(a,c){return Rs(this._ctx,function(p,m,y){return!a(p.value)||(m(y),c)}),this},tt.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},tt.prototype.last=function(a){return this.reverse().first(a)},tt.prototype.filter=function(a){var c;return Rs(this._ctx,function(p){return a(p.value)}),(c=this._ctx).isMatch=wr(c.isMatch,a),this},tt.prototype.and=function(a){return this.filter(a)},tt.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},tt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tt.prototype.desc=function(){return this.reverse()},tt.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,m){a(m.key,m)})},tt.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},tt.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,m){a(m.primaryKey,m)})},tt.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var p=[];return this.each(function(m,y){p.push(y.key)}).then(function(){return p}).then(a)},tt.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Wr(c,!0)&&0<c.limit)return this._read(function(m){var y=eo(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:y,range:c.range}})}).then(function(m){return m.result}).then(a);c.keysOnly=!c.isMatch;var p=[];return this.each(function(m,y){p.push(y.primaryKey)}).then(function(){return p}).then(a)},tt.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},tt.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},tt.prototype.lastKey=function(a){return this.reverse().firstKey(a)},tt.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return Rs(this._ctx,function(y){var m=y.primaryKey.toString(),y=h(c,m);return c[m]=!0,!y}),this},tt.prototype.modify=function(a){var c=this,p=this._ctx;return this._write(function(m){var y,x,_;_=typeof a=="function"?a:(y=s(a),x=y.length,function(M){for(var Y=!1,G=0;G<x;++G){var Z=y[G],re=a[Z],le=P(M,Z);re instanceof di?(W(M,Z,re.execute(le)),Y=!0):le!==re&&(W(M,Z,re),Y=!0)}return Y});var E=p.table.core,R=E.schema.primaryKey,I=R.outbound,L=R.extractKey,B=200,R=c.db._options.modifyChunkSize;R&&(B=typeof R=="object"?R[E.name]||R["*"]||200:R);function q(M,Z){var G=Z.failures,Z=Z.numFailures;N+=M-Z;for(var re=0,le=s(G);re<le.length;re++){var ge=le[re];D.push(G[ge])}}var D=[],N=0,U=[];return c.clone().primaryKeys().then(function(M){function Y(Z){var re=Math.min(B,M.length-Z);return E.getMany({trans:m,keys:M.slice(Z,Z+re),cache:"immutable"}).then(function(le){for(var ge=[],ue=[],he=I?[]:null,be=[],pe=0;pe<re;++pe){var ke=le[pe],$e={value:se(ke),primKey:M[Z+pe]};_.call($e,$e.value,$e)!==!1&&($e.value==null?be.push(M[Z+pe]):I||Qe(L(ke),L($e.value))===0?(ue.push($e.value),I&&he.push(M[Z+pe])):(be.push(M[Z+pe]),ge.push($e.value)))}return Promise.resolve(0<ge.length&&E.mutate({trans:m,type:"add",values:ge}).then(function(Ve){for(var We in Ve.failures)be.splice(parseInt(We),1);q(ge.length,Ve)})).then(function(){return(0<ue.length||G&&typeof a=="object")&&E.mutate({trans:m,type:"put",keys:he,values:ue,criteria:G,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<Z}).then(function(Ve){return q(ue.length,Ve)})}).then(function(){return(0<be.length||G&&a===Is)&&E.mutate({trans:m,type:"delete",keys:be,criteria:G,isAdditionalChunk:0<Z}).then(function(Ve){return q(be.length,Ve)})}).then(function(){return M.length>Z+re&&Y(Z+B)})})}var G=Wr(p)&&p.limit===1/0&&(typeof a!="function"||a===Is)&&{index:p.index,range:p.range};return Y(0).then(function(){if(0<D.length)throw new ft("Error modifying one or more objects",D,N,U);return M.length})})})},tt.prototype.delete=function(){var a=this._ctx,c=a.range;return Wr(a)&&(a.isPrimKey||c.type===3)?this._write(function(p){var m=a.table.core.schema.primaryKey,y=c;return a.table.core.count({trans:p,query:{index:m,range:y}}).then(function(x){return a.table.core.mutate({trans:p,type:"deleteRange",range:y}).then(function(_){var E=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new ft("Could not delete some values",Object.keys(E).map(function(I){return E[I]}),x-_);return x-_})})}):this.modify(Is)},tt);function tt(){}var Is=function(a,c){return c.value=null};function Id(a,c){return a<c?-1:a===c?0:1}function Dd(a,c){return c<a?-1:a===c?0:1}function wn(a,c,p){return a=a instanceof tu?new a.Collection(a):a,a._ctx.error=new(p||TypeError)(c),a}function Yr(a){return new a.Collection(a,function(){return eu("")}).limit(0)}function no(a,c,p,m){var y,x,_,E,I,L,B,R=p.length;if(!p.every(function(N){return typeof N=="string"}))return wn(a,Kl);function q(N){y=N==="next"?function(M){return M.toUpperCase()}:function(M){return M.toLowerCase()},x=N==="next"?function(M){return M.toLowerCase()}:function(M){return M.toUpperCase()},_=N==="next"?Id:Dd;var U=p.map(function(M){return{lower:x(M),upper:y(M)}}).sort(function(M,Y){return _(M.lower,Y.lower)});E=U.map(function(M){return M.upper}),I=U.map(function(M){return M.lower}),B=(L=N)==="next"?"":m}q("next"),a=new a.Collection(a,function(){return ur(E[0],I[R-1]+m)}),a._ondirectionchange=function(N){q(N)};var D=0;return a._addAlgorithm(function(N,U,M){var Y=N.key;if(typeof Y!="string")return!1;var G=x(Y);if(c(G,I,D))return!0;for(var Z=null,re=D;re<R;++re){var le=function(ge,ue,he,be,pe,ke){for(var $e=Math.min(ge.length,be.length),Ve=-1,We=0;We<$e;++We){var Cn=ue[We];if(Cn!==be[We])return pe(ge[We],he[We])<0?ge.substr(0,We)+he[We]+he.substr(We+1):pe(ge[We],be[We])<0?ge.substr(0,We)+be[We]+he.substr(We+1):0<=Ve?ge.substr(0,Ve)+ue[Ve]+he.substr(Ve+1):null;pe(ge[We],Cn)<0&&(Ve=We)}return $e<be.length&&ke==="next"?ge+he.substr(ge.length):$e<ge.length&&ke==="prev"?ge.substr(0,he.length):Ve<0?null:ge.substr(0,Ve)+be[Ve]+he.substr(Ve+1)}(Y,G,E[re],I[re],_,L);le===null&&Z===null?D=re+1:(Z===null||0<_(Z,le))&&(Z=le)}return U(Z!==null?function(){N.continue(Z+B)}:M),!1}),a}function ur(a,c,p,m){return{type:2,lower:a,upper:c,lowerOpen:p,upperOpen:m}}function eu(a){return{type:1,lower:a,upper:a}}var tu=(Object.defineProperty(Wt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Wt.prototype.between=function(a,c,p,m){p=p!==!1,m=m===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(p||m)&&(!p||!m)?Yr(this):new this.Collection(this,function(){return ur(a,c,!p,!m)})}catch{return wn(this,tr)}},Wt.prototype.equals=function(a){return a==null?wn(this,tr):new this.Collection(this,function(){return eu(a)})},Wt.prototype.above=function(a){return a==null?wn(this,tr):new this.Collection(this,function(){return ur(a,void 0,!0)})},Wt.prototype.aboveOrEqual=function(a){return a==null?wn(this,tr):new this.Collection(this,function(){return ur(a,void 0,!1)})},Wt.prototype.below=function(a){return a==null?wn(this,tr):new this.Collection(this,function(){return ur(void 0,a,!1,!0)})},Wt.prototype.belowOrEqual=function(a){return a==null?wn(this,tr):new this.Collection(this,function(){return ur(void 0,a)})},Wt.prototype.startsWith=function(a){return typeof a!="string"?wn(this,Kl):this.between(a,a+kr,!0,!0)},Wt.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):no(this,function(c,p){return c.indexOf(p[0])===0},[a],kr)},Wt.prototype.equalsIgnoreCase=function(a){return no(this,function(c,p){return c===p[0]},[a],"")},Wt.prototype.anyOfIgnoreCase=function(){var a=k.apply(Be,arguments);return a.length===0?Yr(this):no(this,function(c,p){return p.indexOf(c)!==-1},a,"")},Wt.prototype.startsWithAnyOfIgnoreCase=function(){var a=k.apply(Be,arguments);return a.length===0?Yr(this):no(this,function(c,p){return p.some(function(m){return c.indexOf(m)===0})},a,kr)},Wt.prototype.anyOf=function(){var a=this,c=k.apply(Be,arguments),p=this._cmp;try{c.sort(p)}catch{return wn(this,tr)}if(c.length===0)return Yr(this);var m=new this.Collection(this,function(){return ur(c[0],c[c.length-1])});m._ondirectionchange=function(x){p=x==="next"?a._ascending:a._descending,c.sort(p)};var y=0;return m._addAlgorithm(function(x,_,E){for(var I=x.key;0<p(I,c[y]);)if(++y===c.length)return _(E),!1;return p(I,c[y])===0||(_(function(){x.continue(c[y])}),!1)}),m},Wt.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Wt.prototype.noneOf=function(){var a=k.apply(Be,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return wn(this,tr)}var c=a.reduce(function(p,m){return p?p.concat([[p[p.length-1][1],m]]):[[-1/0,m]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},Wt.prototype.inAnyRange=function(Y,c){var p=this,m=this._cmp,y=this._ascending,x=this._descending,_=this._min,E=this._max;if(Y.length===0)return Yr(this);if(!Y.every(function(G){return G[0]!==void 0&&G[1]!==void 0&&y(G[0],G[1])<=0}))return wn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ve.InvalidArgument);var I=!c||c.includeLowers!==!1,L=c&&c.includeUppers===!0,B,R=y;function q(G,Z){return R(G[0],Z[0])}try{(B=Y.reduce(function(G,Z){for(var re=0,le=G.length;re<le;++re){var ge=G[re];if(m(Z[0],ge[1])<0&&0<m(Z[1],ge[0])){ge[0]=_(ge[0],Z[0]),ge[1]=E(ge[1],Z[1]);break}}return re===le&&G.push(Z),G},[])).sort(q)}catch{return wn(this,tr)}var D=0,N=L?function(G){return 0<y(G,B[D][1])}:function(G){return 0<=y(G,B[D][1])},U=I?function(G){return 0<x(G,B[D][0])}:function(G){return 0<=x(G,B[D][0])},M=N,Y=new this.Collection(this,function(){return ur(B[0][0],B[B.length-1][1],!I,!L)});return Y._ondirectionchange=function(G){R=G==="next"?(M=N,y):(M=U,x),B.sort(q)},Y._addAlgorithm(function(G,Z,re){for(var le,ge=G.key;M(ge);)if(++D===B.length)return Z(re),!1;return!N(le=ge)&&!U(le)||(p._cmp(ge,B[D][1])===0||p._cmp(ge,B[D][0])===0||Z(function(){R===y?G.continue(B[D][0]):G.continue(B[D][1])}),!1)}),Y},Wt.prototype.startsWithAnyOf=function(){var a=k.apply(Be,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Yr(this):this.inAnyRange(a.map(function(c){return[c,c+kr]})):wn(this,"startsWithAnyOf() only works with strings")},Wt);function Wt(){}function Vn(a){return ct(function(c){return pi(c),a(c.target.error),!1})}function pi(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var mi="storagemutated",Ds="x-storagemutated-1",cr=fi(null,mi),Od=(Wn.prototype._lock=function(){return z(!de.global),++this._reculock,this._reculock!==1||de.global||(de.lockOwnerFor=this),this},Wn.prototype._unlock=function(){if(z(!de.global),--this._reculock==0)for(de.global||(de.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{Bn(a[1],a[0])}catch{}}return this},Wn.prototype._locked=function(){return this._reculock&&de.lockOwnerFor!==this},Wn.prototype.create=function(a){var c=this;if(!this.mode)return this;var p=this.db.idbdb,m=this.db._state.dbOpenError;if(z(!this.idbtrans),!a&&!p)switch(m&&m.name){case"DatabaseClosedError":throw new ve.DatabaseClosed(m);case"MissingAPIError":throw new ve.MissingAPI(m.message,m);default:throw new ve.OpenFailed(m)}if(!this.active)throw new ve.TransactionInactive;return z(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ct(function(y){pi(y),c._reject(a.error)}),a.onabort=ct(function(y){pi(y),c.active&&c._reject(new ve.Abort(a.error)),c.active=!1,c.on("abort").fire(y)}),a.oncomplete=ct(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&cr.storagemutated.fire(a.mutatedParts)}),this},Wn.prototype._promise=function(a,c,p){var m=this;if(a==="readwrite"&&this.mode!=="readwrite")return Lt(new ve.ReadOnly("Transaction is readonly"));if(!this.active)return Lt(new ve.TransactionInactive);if(this._locked())return new fe(function(x,_){m._blockedFuncs.push([function(){m._promise(a,c,p).then(x,_)},de])});if(p)return Rt(function(){var x=new fe(function(_,E){m._lock();var I=c(_,E,m);I&&I.then&&I.then(_,E)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var y=new fe(function(x,_){var E=c(x,_,m);E&&E.then&&E.then(x,_)});return y._lib=!0,y},Wn.prototype._root=function(){return this.parent?this.parent._root():this},Wn.prototype.waitFor=function(a){var c,p=this._root(),m=fe.resolve(a);p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return m}):(p._waitingFor=m,p._waitingQueue=[],c=p.idbtrans.objectStore(p.storeNames[0]),function x(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(c.get(-1/0).onsuccess=x)}());var y=p._waitingFor;return new fe(function(x,_){m.then(function(E){return p._waitingQueue.push(ct(x.bind(null,E)))},function(E){return p._waitingQueue.push(ct(_.bind(null,E)))}).finally(function(){p._waitingFor===y&&(p._waitingFor=null)})})},Wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ve.Abort))},Wn.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(h(c,a))return c[a];var p=this.schema[a];if(!p)throw new ve.NotFound("Table "+a+" not part of transaction");return p=new this.db.Table(a,p,this),p.core=this.db.core.table(a),c[a]=p},Wn);function Wn(){}function Os(a,c,p,m,y,x,_){return{name:a,keyPath:c,unique:p,multi:m,auto:y,compound:x,src:(p&&!_?"&":"")+(m?"*":"")+(y?"++":"")+nu(c)}}function nu(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Ls(a,c,p){return{name:a,primKey:c,indexes:p,mappedClass:null,idxByName:(m=function(y){return[y.name,y]},p.reduce(function(y,x,_){return _=m(x,_),_&&(y[_[0]]=_[1]),y},{}))};var m}var gi=function(a){try{return a.only([[]]),gi=function(){return[[]]},[[]]}catch{return gi=function(){return kr},kr}};function Ms(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(p){return p[c]}:function(p){return P(p,c)}:function(p){return P(p,a)};var c}function ru(a){return[].slice.call(a)}var Ld=0;function vi(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function Md(a,c,I){function m(M){if(M.type===3)return null;if(M.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var D=M.lower,N=M.upper,U=M.lowerOpen,M=M.upperOpen;return D===void 0?N===void 0?null:c.upperBound(N,!!M):N===void 0?c.lowerBound(D,!!U):c.bound(D,N,!!U,!!M)}function y(q){var D,N=q.name;return{name:N,schema:q,mutate:function(U){var M=U.trans,Y=U.type,G=U.keys,Z=U.values,re=U.range;return new Promise(function(le,ge){le=ct(le);var ue=M.objectStore(N),he=ue.keyPath==null,be=Y==="put"||Y==="add";if(!be&&Y!=="delete"&&Y!=="deleteRange")throw new Error("Invalid operation type: "+Y);var pe,ke=(G||Z||{length:1}).length;if(G&&Z&&G.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(ke===0)return le({numFailures:0,failures:{},results:[],lastResult:void 0});function $e(cn){++Cn,pi(cn)}var Ve=[],We=[],Cn=0;if(Y==="deleteRange"){if(re.type===4)return le({numFailures:Cn,failures:We,results:[],lastResult:void 0});re.type===3?Ve.push(pe=ue.clear()):Ve.push(pe=ue.delete(m(re)))}else{var he=be?he?[Z,G]:[Z,null]:[G,null],ze=he[0],en=he[1];if(be)for(var tn=0;tn<ke;++tn)Ve.push(pe=en&&en[tn]!==void 0?ue[Y](ze[tn],en[tn]):ue[Y](ze[tn])),pe.onerror=$e;else for(tn=0;tn<ke;++tn)Ve.push(pe=ue[Y](ze[tn])),pe.onerror=$e}function go(cn){cn=cn.target.result,Ve.forEach(function(Tr,Xs){return Tr.error!=null&&(We[Xs]=Tr.error)}),le({numFailures:Cn,failures:We,results:Y==="delete"?G:Ve.map(function(Tr){return Tr.result}),lastResult:cn})}pe.onerror=function(cn){$e(cn),go(cn)},pe.onsuccess=go})},getMany:function(U){var M=U.trans,Y=U.keys;return new Promise(function(G,Z){G=ct(G);for(var re,le=M.objectStore(N),ge=Y.length,ue=new Array(ge),he=0,be=0,pe=function(Ve){Ve=Ve.target,ue[Ve._pos]=Ve.result,++be===he&&G(ue)},ke=Vn(Z),$e=0;$e<ge;++$e)Y[$e]!=null&&((re=le.get(Y[$e]))._pos=$e,re.onsuccess=pe,re.onerror=ke,++he);he===0&&G(ue)})},get:function(U){var M=U.trans,Y=U.key;return new Promise(function(G,Z){G=ct(G);var re=M.objectStore(N).get(Y);re.onsuccess=function(le){return G(le.target.result)},re.onerror=Vn(Z)})},query:(D=L,function(U){return new Promise(function(M,Y){M=ct(M);var G,Z,re,he=U.trans,le=U.values,ge=U.limit,pe=U.query,ue=ge===1/0?void 0:ge,be=pe.index,pe=pe.range,he=he.objectStore(N),be=be.isPrimaryKey?he:he.index(be.name),pe=m(pe);if(ge===0)return M({result:[]});D?((ue=le?be.getAll(pe,ue):be.getAllKeys(pe,ue)).onsuccess=function(ke){return M({result:ke.target.result})},ue.onerror=Vn(Y)):(G=0,Z=!le&&"openKeyCursor"in be?be.openKeyCursor(pe):be.openCursor(pe),re=[],Z.onsuccess=function(ke){var $e=Z.result;return $e?(re.push(le?$e.value:$e.primaryKey),++G===ge?M({result:re}):void $e.continue()):M({result:re})},Z.onerror=Vn(Y))})}),openCursor:function(U){var M=U.trans,Y=U.values,G=U.query,Z=U.reverse,re=U.unique;return new Promise(function(le,ge){le=ct(le);var be=G.index,ue=G.range,he=M.objectStore(N),he=be.isPrimaryKey?he:he.index(be.name),be=Z?re?"prevunique":"prev":re?"nextunique":"next",pe=!Y&&"openKeyCursor"in he?he.openKeyCursor(m(ue),be):he.openCursor(m(ue),be);pe.onerror=Vn(ge),pe.onsuccess=ct(function(ke){var $e,Ve,We,Cn,ze=pe.result;ze?(ze.___id=++Ld,ze.done=!1,$e=ze.continue.bind(ze),Ve=(Ve=ze.continuePrimaryKey)&&Ve.bind(ze),We=ze.advance.bind(ze),Cn=function(){throw new Error("Cursor not stopped")},ze.trans=M,ze.stop=ze.continue=ze.continuePrimaryKey=ze.advance=function(){throw new Error("Cursor not started")},ze.fail=ct(ge),ze.next=function(){var en=this,tn=1;return this.start(function(){return tn--?en.continue():en.stop()}).then(function(){return en})},ze.start=function(en){function tn(){if(pe.result)try{en()}catch(cn){ze.fail(cn)}else ze.done=!0,ze.start=function(){throw new Error("Cursor behind last entry")},ze.stop()}var go=new Promise(function(cn,Tr){cn=ct(cn),pe.onerror=Vn(Tr),ze.fail=Tr,ze.stop=function(Xs){ze.stop=ze.continue=ze.continuePrimaryKey=ze.advance=Cn,cn(Xs)}});return pe.onsuccess=ct(function(cn){pe.onsuccess=tn,tn()}),ze.continue=$e,ze.continuePrimaryKey=Ve,ze.advance=We,tn(),go},le(ze)):le(null)},ge)})},count:function(U){var M=U.query,Y=U.trans,G=M.index,Z=M.range;return new Promise(function(re,le){var ge=Y.objectStore(N),ue=G.isPrimaryKey?ge:ge.index(G.name),ge=m(Z),ue=ge?ue.count(ge):ue.count();ue.onsuccess=ct(function(he){return re(he.target.result)}),ue.onerror=Vn(le)})}}}var x,_,E,B=(_=I,E=ru((x=a).objectStoreNames),{schema:{name:x.name,tables:E.map(function(q){return _.objectStore(q)}).map(function(q){var D=q.keyPath,M=q.autoIncrement,N=l(D),U={},M={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:D==null,compound:N,keyPath:D,autoIncrement:M,unique:!0,extractKey:Ms(D)},indexes:ru(q.indexNames).map(function(Y){return q.index(Y)}).map(function(re){var G=re.name,Z=re.unique,le=re.multiEntry,re=re.keyPath,le={name:G,compound:l(re),keyPath:re,unique:Z,multiEntry:le,extractKey:Ms(re)};return U[vi(re)]=le}),getIndexByKeyPath:function(Y){return U[vi(Y)]}};return U[":id"]=M.primaryKey,D!=null&&(U[vi(D)]=M.primaryKey),M})},hasGetAll:0<E.length&&"getAll"in _.objectStore(E[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=B.schema,L=B.hasGetAll,B=I.tables.map(y),R={};return B.forEach(function(q){return R[q.name]=q}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(q){if(!R[q])throw new Error("Table '".concat(q,"' not found"));return R[q]},MIN_KEY:-1/0,MAX_KEY:gi(c),schema:I}}function jd(a,c,p,m){var y=p.IDBKeyRange;return p.indexedDB,{dbcore:(m=Md(c,y,m),a.dbcore.reduce(function(x,_){return _=_.create,r(r({},x),_(x))},m))}}function ro(a,m){var p=m.db,m=jd(a._middlewares,p,a._deps,m);a.core=m.dbcore,a.tables.forEach(function(y){var x=y.name;a.core.schema.tables.some(function(_){return _.name===x})&&(y.core=a.core.table(x),a[x]instanceof a.Table&&(a[x].core=y.core))})}function io(a,c,p,m){p.forEach(function(y){var x=m[y];c.forEach(function(_){var E=function I(L,B){return A(L,B)||(L=f(L))&&I(L,B)}(_,y);(!E||"value"in E&&E.value===void 0)&&(_===a.Transaction.prototype||_ instanceof a.Transaction?b(_,y,{get:function(){return this.table(y)},set:function(I){v(this,y,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):_[y]=new a.Table(y,x))})})}function js(a,c){c.forEach(function(p){for(var m in p)p[m]instanceof a.Table&&delete p[m]})}function zd(a,c){return a._cfg.version-c._cfg.version}function Nd(a,c,p,m){var y=a._dbSchema;p.objectStoreNames.contains("$meta")&&!y.$meta&&(y.$meta=Ls("$meta",ou("")[0],[]),a._storeNames.push("$meta"));var x=a._createTransaction("readwrite",a._storeNames,y);x.create(p),x._completion.catch(m);var _=x._reject.bind(x),E=de.transless||de;Rt(function(){return de.trans=x,de.transless=E,c!==0?(ro(a,p),L=c,((I=x).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(B){return B??L}):fe.resolve(L)).then(function(B){return q=B,D=x,N=p,U=[],B=(R=a)._versions,M=R._dbSchema=so(0,R.idbdb,N),(B=B.filter(function(Y){return Y._cfg.version>=q})).length!==0?(B.forEach(function(Y){U.push(function(){var G=M,Z=Y._cfg.dbschema;ao(R,G,N),ao(R,Z,N),M=R._dbSchema=Z;var re=zs(G,Z);re.add.forEach(function(be){Ns(N,be[0],be[1].primKey,be[1].indexes)}),re.change.forEach(function(be){if(be.recreate)throw new ve.Upgrade("Not yet support for changing primary key");var pe=N.objectStore(be.name);be.add.forEach(function(ke){return oo(pe,ke)}),be.change.forEach(function(ke){pe.deleteIndex(ke.name),oo(pe,ke)}),be.del.forEach(function(ke){return pe.deleteIndex(ke)})});var le=Y._cfg.contentUpgrade;if(le&&Y._cfg.version>q){ro(R,N),D._memoizedTables={};var ge=ae(Z);re.del.forEach(function(be){ge[be]=G[be]}),js(R,[R.Transaction.prototype]),io(R,[R.Transaction.prototype],s(ge),ge),D.schema=ge;var ue,he=Ce(le);return he&&Nt(),re=fe.follow(function(){var be;(ue=le(D))&&he&&(be=Dt.bind(null,null),ue.then(be,be))}),ue&&typeof ue.then=="function"?fe.resolve(ue):re.then(function(){return ue})}}),U.push(function(G){var Z,re,le=Y._cfg.dbschema;Z=le,re=G,[].slice.call(re.db.objectStoreNames).forEach(function(ge){return Z[ge]==null&&re.db.deleteObjectStore(ge)}),js(R,[R.Transaction.prototype]),io(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),D.schema=R._dbSchema}),U.push(function(G){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===Y._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(Z){return Z!=="$meta"})):G.objectStore("$meta").put(Y._cfg.version,"version"))})}),function Y(){return U.length?fe.resolve(U.shift()(D.idbtrans)).then(Y):fe.resolve()}().then(function(){iu(M,N)})):fe.resolve();var R,q,D,N,U,M}).catch(_)):(s(y).forEach(function(B){Ns(p,B,y[B].primKey,y[B].indexes)}),ro(a,p),void fe.follow(function(){return a.on.populate.fire(x)}).catch(_));var I,L})}function Bd(a,c){iu(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var p=so(0,a.idbdb,c);ao(a,a._dbSchema,c);for(var m=0,y=zs(p,a._dbSchema).change;m<y.length;m++){var x=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=c.objectStore(_.name);_.add.forEach(function(I){je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(I.src)),oo(E,I)})}(y[m]);if(typeof x=="object")return x.value}}function zs(a,c){var p,m={del:[],add:[],change:[]};for(p in a)c[p]||m.del.push(p);for(p in c){var y=a[p],x=c[p];if(y){var _={name:p,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(y.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||y.primKey.auto!==x.primKey.auto)_.recreate=!0,m.change.push(_);else{var E=y.idxByName,I=x.idxByName,L=void 0;for(L in E)I[L]||_.del.push(L);for(L in I){var B=E[L],R=I[L];B?B.src!==R.src&&_.change.push(R):_.add.push(R)}(0<_.del.length||0<_.add.length||0<_.change.length)&&m.change.push(_)}}else m.add.push([p,x])}return m}function Ns(a,c,p,m){var y=a.db.createObjectStore(c,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});return m.forEach(function(x){return oo(y,x)}),y}function iu(a,c){s(a).forEach(function(p){c.db.objectStoreNames.contains(p)||(je&&console.debug("Dexie: Creating missing table",p),Ns(c,p,a[p].primKey,a[p].indexes))})}function oo(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function so(a,c,p){var m={};return $(c.objectStoreNames,0).forEach(function(y){for(var x=p.objectStore(y),_=Os(nu(L=x.keyPath),L||"",!0,!1,!!x.autoIncrement,L&&typeof L!="string",!0),E=[],I=0;I<x.indexNames.length;++I){var B=x.index(x.indexNames[I]),L=B.keyPath,B=Os(B.name,L,!!B.unique,!!B.multiEntry,!1,L&&typeof L!="string",!1);E.push(B)}m[y]=Ls(y,_,E)}),m}function ao(a,c,p){for(var m=p.db.objectStoreNames,y=0;y<m.length;++y){var x=m[y],_=p.objectStore(x);a._hasGetAll="getAll"in _;for(var E=0;E<_.indexNames.length;++E){var I=_.indexNames[E],L=_.index(I).keyPath,B=typeof L=="string"?L:"["+$(L).join("+")+"]";!c[x]||(L=c[x].idxByName[B])&&(L.name=I,delete c[x].idxByName[B],c[x].idxByName[I]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function ou(a){return a.split(",").map(function(c,p){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return Os(m,y||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(y),p===0)})}var Fd=(lo.prototype._parseStoresSpec=function(a,c){s(a).forEach(function(p){if(a[p]!==null){var m=ou(a[p]),y=m.shift();if(y.unique=!0,y.multi)throw new ve.Schema("Primary key cannot be multi-valued");m.forEach(function(x){if(x.auto)throw new ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new ve.Schema("Index must have a name and cannot be an empty string")}),c[p]=Ls(p,y,m)}})},lo.prototype.stores=function(p){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,p):p;var p=c._versions,m={},y={};return p.forEach(function(x){u(m,x._cfg.storesSource),y=x._cfg.dbschema={},x._parseStoresSpec(m,y)}),c._dbSchema=y,js(c,[c._allTables,c,c.Transaction.prototype]),io(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],s(y),y),c._storeNames=s(y),this},lo.prototype.upgrade=function(a){return this._cfg.contentUpgrade=In(this._cfg.contentUpgrade||Oe,a),this},lo);function lo(){}function Bs(a,c){var p=a._dbNamesDB;return p||(p=a._dbNamesDB=new nr(Qi,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function Fs(a){return a&&typeof a.databases=="function"}function $s(a){return Rt(function(){return de.letThrough=!0,a()})}function Us(a){return!("from"in a)}var Xt=function(a,c){if(!this){var p=new Xt;return a&&"d"in a&&u(p,a),p}u(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function yi(a,c,p){var m=Qe(c,p);if(!isNaN(m)){if(0<m)throw RangeError();if(Us(a))return u(a,{from:c,to:p,d:1});var y=a.l,m=a.r;if(Qe(p,a.from)<0)return y?yi(y,c,p):a.l={from:c,to:p,d:1,l:null,r:null},au(a);if(0<Qe(c,a.to))return m?yi(m,c,p):a.r={from:c,to:p,d:1,l:null,r:null},au(a);Qe(c,a.from)<0&&(a.from=c,a.l=null,a.d=m?m.d+1:1),0<Qe(p,a.to)&&(a.to=p,a.r=null,a.d=a.l?a.l.d+1:1),p=!a.r,y&&!a.l&&bi(a,y),m&&p&&bi(a,m)}}function bi(a,c){Us(c)||function p(m,I){var x=I.from,_=I.to,E=I.l,I=I.r;yi(m,x,_),E&&p(m,E),I&&p(m,I)}(a,c)}function su(a,c){var p=uo(c),m=p.next();if(m.done)return!1;for(var y=m.value,x=uo(a),_=x.next(y.from),E=_.value;!m.done&&!_.done;){if(Qe(E.from,y.to)<=0&&0<=Qe(E.to,y.from))return!0;Qe(y.from,E.from)<0?y=(m=p.next(E.from)).value:E=(_=x.next(y.from)).value}return!1}function uo(a){var c=Us(a)?null:{s:0,n:a};return{next:function(p){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&Qe(p,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||Qe(p,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function au(a){var c,p,m=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((p=a.l)===null||p===void 0?void 0:p.d)||0),y=1<m?"r":m<-1?"l":"";y&&(c=y=="r"?"l":"r",p=r({},a),m=a[y],a.from=m.from,a.to=m.to,a[y]=m[y],p[y]=m[c],(a[c]=p).d=lu(p)),a.d=lu(a)}function lu(p){var c=p.r,p=p.l;return(c?p?Math.max(c.d,p.d):c.d:p?p.d:0)+1}function co(a,c){return s(c).forEach(function(p){a[p]?bi(a[p],c[p]):a[p]=function m(y){var x,_,E={};for(x in y)h(y,x)&&(_=y[x],E[x]=!_||typeof _!="object"||X.has(_.constructor)?_:m(_));return E}(c[p])}),a}function qs(a,c){return a.all||c.all||Object.keys(a).some(function(p){return c[p]&&su(c[p],a[p])})}g(Xt.prototype,((Dn={add:function(a){return bi(this,a),this},addKey:function(a){return yi(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(p){return yi(c,p,p)}),this},hasKey:function(a){var c=uo(this).next(a).value;return c&&Qe(c.from,a)<=0&&0<=Qe(c.to,a)}})[ye]=function(){return uo(this)},Dn));var Cr={},Hs={},Ks=!1;function fo(a){co(Hs,a),Ks||(Ks=!0,setTimeout(function(){Ks=!1,Vs(Hs,!(Hs={}))},0))}function Vs(a,c){c===void 0&&(c=!1);var p=new Set;if(a.all)for(var m=0,y=Object.values(Cr);m<y.length;m++)uu(_=y[m],a,p,c);else for(var x in a){var _,E=/^idb\:\/\/(.*)\/(.*)\//.exec(x);E&&(x=E[1],E=E[2],(_=Cr["idb://".concat(x,"/").concat(E)])&&uu(_,a,p,c))}p.forEach(function(I){return I()})}function uu(a,c,p,m){for(var y=[],x=0,_=Object.entries(a.queries.query);x<_.length;x++){for(var E=_[x],I=E[0],L=[],B=0,R=E[1];B<R.length;B++){var q=R[B];qs(c,q.obsSet)?q.subscribers.forEach(function(M){return p.add(M)}):m&&L.push(q)}m&&y.push([I,L])}if(m)for(var D=0,N=y;D<N.length;D++){var U=N[D],I=U[0],L=U[1];a.queries.query[I]=L}}function $d(a){var c=a._state,p=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Lt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,y=Math.round(10*a.verno),x=!1;function _(){if(c.openCanceller!==m)throw new ve.DatabaseClosed("db.open() was cancelled")}function E(){return new fe(function(q,D){if(_(),!p)throw new ve.MissingAPI;var N=a.name,U=c.autoSchema||!y?p.open(N):p.open(N,y);if(!U)throw new ve.MissingAPI;U.onerror=Vn(D),U.onblocked=ct(a._fireOnBlocked),U.onupgradeneeded=ct(function(M){var Y;B=U.transaction,c.autoSchema&&!a._options.allowEmptyDB?(U.onerror=pi,B.abort(),U.result.close(),(Y=p.deleteDatabase(N)).onsuccess=Y.onerror=ct(function(){D(new ve.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(B.onerror=Vn(D),M=M.oldVersion>Math.pow(2,62)?0:M.oldVersion,R=M<1,a.idbdb=U.result,x&&Bd(a,B),Nd(a,M/10,B,D))},D),U.onsuccess=ct(function(){B=null;var M,Y,G,Z,re,le=a.idbdb=U.result,ge=$(le.objectStoreNames);if(0<ge.length)try{var ue=le.transaction((Z=ge).length===1?Z[0]:Z,"readonly");if(c.autoSchema)Y=le,G=ue,(M=a).verno=Y.version/10,G=M._dbSchema=so(0,Y,G),M._storeNames=$(Y.objectStoreNames,0),io(M,[M._allTables],s(G),G);else if(ao(a,a._dbSchema,ue),((re=zs(so(0,(re=a).idbdb,ue),re._dbSchema)).add.length||re.change.some(function(he){return he.add.length||he.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),le.close(),y=le.version+1,x=!0,q(E());ro(a,ue)}catch{}Vr.push(a),le.onversionchange=ct(function(he){c.vcFired=!0,a.on("versionchange").fire(he)}),le.onclose=ct(function(he){a.on("close").fire(he)}),R&&(re=a._deps,ue=N,le=re.indexedDB,re=re.IDBKeyRange,Fs(le)||ue===Qi||Bs(le,re).put({name:ue}).catch(Oe)),q()},D)}).catch(function(q){switch(q?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(0<y)return y=0,E()}return fe.reject(q)})}var I,L=c.dbReadyResolve,B=null,R=!1;return fe.race([m,(typeof navigator>"u"?fe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function D(){return indexedDB.databases().finally(q)}I=setInterval(D,100),D()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(E)]).then(function(){return _(),c.onReadyBeingFired=[],fe.resolve($s(function(){return a.on.ready.fire(a.vip)})).then(function q(){if(0<c.onReadyBeingFired.length){var D=c.onReadyBeingFired.reduce(In,Oe);return c.onReadyBeingFired=[],fe.resolve($s(function(){return D(a.vip)})).then(q)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(q){c.dbOpenError=q;try{B&&B.abort()}catch{}return m===c.openCanceller&&a._close(),Lt(q)}).finally(function(){c.openComplete=!0,L()}).then(function(){var q;return R&&(q={},a.tables.forEach(function(D){D.schema.indexes.forEach(function(N){N.name&&(q["idb://".concat(a.name,"/").concat(D.name,"/").concat(N.name)]=new Xt(-1/0,[[[]]]))}),q["idb://".concat(a.name,"/").concat(D.name,"/")]=q["idb://".concat(a.name,"/").concat(D.name,"/:dels")]=new Xt(-1/0,[[[]]])}),cr(mi).fire(q),Vs(q,!0)),a})}function Ws(a){function c(x){return a.next(x)}var p=y(c),m=y(function(x){return a.throw(x)});function y(x){return function(I){var E=x(I),I=E.value;return E.done?I:I&&typeof I.then=="function"?I.then(p,m):l(I)?Promise.all(I).then(p,m):p(I)}}return y(c)()}function ho(a,c,p){for(var m=l(a)?a.slice():[a],y=0;y<p;++y)m.push(c);return m}var Ud={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var p=a.table(c),m=p.schema,y={},x=[];function _(R,q,D){var N=vi(R),U=y[N]=y[N]||[],M=R==null?0:typeof R=="string"?1:R.length,Y=0<q,Y=r(r({},D),{name:Y?"".concat(N,"(virtual-from:").concat(D.name,")"):D.name,lowLevelIndex:D,isVirtual:Y,keyTail:q,keyLength:M,extractKey:Ms(R),unique:!Y&&D.unique});return U.push(Y),Y.isPrimaryKey||x.push(Y),1<M&&_(M===2?R[0]:R.slice(0,M-1),q+1,D),U.sort(function(G,Z){return G.keyTail-Z.keyTail}),Y}c=_(m.primaryKey.keyPath,0,m.primaryKey),y[":id"]=[c];for(var E=0,I=m.indexes;E<I.length;E++){var L=I[E];_(L.keyPath,0,L)}function B(R){var q,D=R.query.index;return D.isVirtual?r(r({},R),{query:{index:D.lowLevelIndex,range:(q=R.query.range,D=D.keyTail,{type:q.type===1?2:q.type,lower:ho(q.lower,q.lowerOpen?a.MAX_KEY:a.MIN_KEY,D),lowerOpen:!0,upper:ho(q.upper,q.upperOpen?a.MIN_KEY:a.MAX_KEY,D),upperOpen:!0})}}):R}return r(r({},p),{schema:r(r({},m),{primaryKey:c,indexes:x,getIndexByKeyPath:function(R){return(R=y[vi(R)])&&R[0]}}),count:function(R){return p.count(B(R))},query:function(R){return p.query(B(R))},openCursor:function(R){var q=R.query.index,D=q.keyTail,N=q.isVirtual,U=q.keyLength;return N?p.openCursor(B(R)).then(function(Y){return Y&&M(Y)}):p.openCursor(R);function M(Y){return Object.create(Y,{continue:{value:function(G){G!=null?Y.continue(ho(G,R.reverse?a.MAX_KEY:a.MIN_KEY,D)):R.unique?Y.continue(Y.key.slice(0,U).concat(R.reverse?a.MIN_KEY:a.MAX_KEY,D)):Y.continue()}},continuePrimaryKey:{value:function(G,Z){Y.continuePrimaryKey(ho(G,a.MAX_KEY,D),Z)}},primaryKey:{get:function(){return Y.primaryKey}},key:{get:function(){var G=Y.key;return U===1?G[0]:G.slice(0,U)}},value:{get:function(){return Y.value}}})}}})}})}};function Ys(a,c,p,m){return p=p||{},m=m||"",s(a).forEach(function(y){var x,_,E;h(c,y)?(x=a[y],_=c[y],typeof x=="object"&&typeof _=="object"&&x&&_?(E=Q(x))!==Q(_)?p[m+y]=c[y]:E==="Object"?Ys(x,_,p,m+y+"."):x!==_&&(p[m+y]=c[y]):x!==_&&(p[m+y]=c[y])):p[m+y]=void 0}),s(c).forEach(function(y){h(a,y)||(p[m+y]=c[y])}),p}function Gs(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var qd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var p=a.table(c),m=p.schema.primaryKey;return r(r({},p),{mutate:function(y){var x=de.trans,_=x.table(c).hook,E=_.deleting,I=_.creating,L=_.updating;switch(y.type){case"add":if(I.fire===Oe)break;return x._promise("readwrite",function(){return B(y)},!0);case"put":if(I.fire===Oe&&L.fire===Oe)break;return x._promise("readwrite",function(){return B(y)},!0);case"delete":if(E.fire===Oe)break;return x._promise("readwrite",function(){return B(y)},!0);case"deleteRange":if(E.fire===Oe)break;return x._promise("readwrite",function(){return function R(q,D,N){return p.query({trans:q,values:!1,query:{index:m,range:D},limit:N}).then(function(U){var M=U.result;return B({type:"delete",keys:M,trans:q}).then(function(Y){return 0<Y.numFailures?Promise.reject(Y.failures[0]):M.length<N?{failures:[],numFailures:0,lastResult:void 0}:R(q,r(r({},D),{lower:M[M.length-1],lowerOpen:!0}),N)})})}(y.trans,y.range,1e4)},!0)}return p.mutate(y);function B(R){var q,D,N,U=de.trans,M=R.keys||Gs(m,R);if(!M)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?r(r({},R),{keys:M}):r({},R)).type!=="delete"&&(R.values=i([],R.values)),R.keys&&(R.keys=i([],R.keys)),q=p,N=M,((D=R).type==="add"?Promise.resolve([]):q.getMany({trans:D.trans,keys:N,cache:"immutable"})).then(function(Y){var G=M.map(function(Z,re){var le,ge,ue,he=Y[re],be={onerror:null,onsuccess:null};return R.type==="delete"?E.fire.call(be,Z,he,U):R.type==="add"||he===void 0?(le=I.fire.call(be,Z,R.values[re],U),Z==null&&le!=null&&(R.keys[re]=Z=le,m.outbound||W(R.values[re],m.keyPath,Z))):(le=Ys(he,R.values[re]),(ge=L.fire.call(be,le,Z,he,U))&&(ue=R.values[re],Object.keys(ge).forEach(function(pe){h(ue,pe)?ue[pe]=ge[pe]:W(ue,pe,ge[pe])}))),be});return p.mutate(R).then(function(Z){for(var re=Z.failures,le=Z.results,ge=Z.numFailures,Z=Z.lastResult,ue=0;ue<M.length;++ue){var he=(le||M)[ue],be=G[ue];he==null?be.onerror&&be.onerror(re[ue]):be.onsuccess&&be.onsuccess(R.type==="put"&&Y[ue]?R.values[ue]:he)}return{failures:re,results:le,numFailures:ge,lastResult:Z}}).catch(function(Z){return G.forEach(function(re){return re.onerror&&re.onerror(Z)}),Promise.reject(Z)})})}}})}})}};function cu(a,c,p){try{if(!c||c.keys.length<a.length)return null;for(var m=[],y=0,x=0;y<c.keys.length&&x<a.length;++y)Qe(c.keys[y],a[x])===0&&(m.push(p?se(c.values[y]):c.values[y]),++x);return m.length===a.length?m:null}catch{return null}}var Hd={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var p=a.table(c);return r(r({},p),{getMany:function(m){if(!m.cache)return p.getMany(m);var y=cu(m.keys,m.trans._cache,m.cache==="clone");return y?fe.resolve(y):p.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?se(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),p.mutate(m)}})}}}};function fu(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function hu(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kd={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,p=new Xt(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(m,y,x){if(de.subscr&&y!=="readonly")throw new ve.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(de.querier));return a.transaction(m,y,x)},table:function(m){var y=a.table(m),x=y.schema,_=x.primaryKey,R=x.indexes,E=_.extractKey,I=_.outbound,L=_.autoIncrement&&R.filter(function(D){return D.compound&&D.keyPath.includes(_.keyPath)}),B=r(r({},y),{mutate:function(D){function N(pe){return pe="idb://".concat(c,"/").concat(m,"/").concat(pe),Z[pe]||(Z[pe]=new Xt)}var U,M,Y,G=D.trans,Z=D.mutatedParts||(D.mutatedParts={}),re=N(""),le=N(":dels"),ge=D.type,be=D.type==="deleteRange"?[D.range]:D.type==="delete"?[D.keys]:D.values.length<50?[Gs(_,D).filter(function(pe){return pe}),D.values]:[],ue=be[0],he=be[1],be=D.trans._cache;return l(ue)?(re.addKeys(ue),(be=ge==="delete"||ue.length===he.length?cu(ue,be):null)||le.addKeys(ue),(be||he)&&(U=N,M=be,Y=he,x.indexes.forEach(function(pe){var ke=U(pe.name||"");function $e(We){return We!=null?pe.extractKey(We):null}function Ve(We){return pe.multiEntry&&l(We)?We.forEach(function(Cn){return ke.addKey(Cn)}):ke.addKey(We)}(M||Y).forEach(function(We,en){var ze=M&&$e(M[en]),en=Y&&$e(Y[en]);Qe(ze,en)!==0&&(ze!=null&&Ve(ze),en!=null&&Ve(en))})}))):ue?(he={from:(he=ue.lower)!==null&&he!==void 0?he:a.MIN_KEY,to:(he=ue.upper)!==null&&he!==void 0?he:a.MAX_KEY},le.add(he),re.add(he)):(re.add(p),le.add(p),x.indexes.forEach(function(pe){return N(pe.name).add(p)})),y.mutate(D).then(function(pe){return!ue||D.type!=="add"&&D.type!=="put"||(re.addKeys(pe.results),L&&L.forEach(function(ke){for(var $e=D.values.map(function(ze){return ke.extractKey(ze)}),Ve=ke.keyPath.findIndex(function(ze){return ze===_.keyPath}),We=0,Cn=pe.results.length;We<Cn;++We)$e[We][Ve]=pe.results[We];N(ke.name).addKeys($e)})),G.mutatedParts=co(G.mutatedParts||{},Z),pe})}}),R=function(N){var U=N.query,N=U.index,U=U.range;return[N,new Xt((N=U.lower)!==null&&N!==void 0?N:a.MIN_KEY,(U=U.upper)!==null&&U!==void 0?U:a.MAX_KEY)]},q={get:function(D){return[_,new Xt(D.key)]},getMany:function(D){return[_,new Xt().addKeys(D.keys)]},count:R,query:R,openCursor:R};return s(q).forEach(function(D){B[D]=function(N){var U=de.subscr,M=!!U,Y=fu(de,y)&&hu(D,N)?N.obsSet={}:U;if(M){var G=function(he){return he="idb://".concat(c,"/").concat(m,"/").concat(he),Y[he]||(Y[he]=new Xt)},Z=G(""),re=G(":dels"),U=q[D](N),M=U[0],U=U[1];if((D==="query"&&M.isPrimaryKey&&!N.values?re:G(M.name||"")).add(U),!M.isPrimaryKey){if(D!=="count"){var le=D==="query"&&I&&N.values&&y.query(r(r({},N),{values:!1}));return y[D].apply(this,arguments).then(function(he){if(D==="query"){if(I&&N.values)return le.then(function($e){return $e=$e.result,Z.addKeys($e),he});var be=N.values?he.result.map(E):he.result;(N.values?Z:re).addKeys(be)}else if(D==="openCursor"){var pe=he,ke=N.values;return pe&&Object.create(pe,{key:{get:function(){return re.addKey(pe.primaryKey),pe.key}},primaryKey:{get:function(){var $e=pe.primaryKey;return re.addKey($e),$e}},value:{get:function(){return ke&&Z.addKey(pe.primaryKey),pe.value}}})}return he})}re.add(p)}}return y[D].apply(this,arguments)}}),B}})}};function du(a,c,p){if(p.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return p.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(y,x){return!(x in p.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(y,x){return!(x in p.failures)})),c)}function Js(a,c){return p=a,((m=c).lower===void 0||(m.lowerOpen?0<Qe(p,m.lower):0<=Qe(p,m.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?Qe(a,c.upper)<0:Qe(a,c.upper)<=0));var p,m}function pu(a,c,q,m,y,x){if(!q||q.length===0)return a;var _=c.query.index,E=_.multiEntry,I=c.query.range,L=m.schema.primaryKey.extractKey,B=_.extractKey,R=(_.lowLevelIndex||_).extractKey,q=q.reduce(function(D,N){var U=D,M=[];if(N.type==="add"||N.type==="put")for(var Y=new Xt,G=N.values.length-1;0<=G;--G){var Z,re=N.values[G],le=L(re);Y.hasKey(le)||(Z=B(re),(E&&l(Z)?Z.some(function(pe){return Js(pe,I)}):Js(Z,I))&&(Y.addKey(le),M.push(re)))}switch(N.type){case"add":var ge=new Xt().addKeys(c.values?D.map(function(ke){return L(ke)}):D),U=D.concat(c.values?M.filter(function(ke){return ke=L(ke),!ge.hasKey(ke)&&(ge.addKey(ke),!0)}):M.map(function(ke){return L(ke)}).filter(function(ke){return!ge.hasKey(ke)&&(ge.addKey(ke),!0)}));break;case"put":var ue=new Xt().addKeys(N.values.map(function(ke){return L(ke)}));U=D.filter(function(ke){return!ue.hasKey(c.values?L(ke):ke)}).concat(c.values?M:M.map(function(ke){return L(ke)}));break;case"delete":var he=new Xt().addKeys(N.keys);U=D.filter(function(ke){return!he.hasKey(c.values?L(ke):ke)});break;case"deleteRange":var be=N.range;U=D.filter(function(ke){return!Js(L(ke),be)})}return U},a);return q===a?a:(q.sort(function(D,N){return Qe(R(D),R(N))||Qe(L(D),L(N))}),c.limit&&c.limit<1/0&&(q.length>c.limit?q.length=c.limit:a.length===c.limit&&q.length<c.limit&&(y.dirty=!0)),x?Object.freeze(q):q)}function mu(a,c){return Qe(a.lower,c.lower)===0&&Qe(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function Vd(a,c){return function(p,m,y,x){if(p===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Qe(p,m))===0){if(y&&x)return 0;if(y)return 1;if(x)return-1}return m}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(p,m,y,x){if(p===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Qe(p,m))===0){if(y&&x)return 0;if(y)return-1;if(x)return 1}return m}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function Wd(a,c,p,m){a.subscribers.add(p),m.addEventListener("abort",function(){var y,x;a.subscribers.delete(p),a.subscribers.size===0&&(y=a,x=c,setTimeout(function(){y.subscribers.size===0&&Ee(x,y)},3e3))})}var Yd={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(p,m,y){var x,_,E=a.transaction(p,m,y);return m==="readwrite"&&(_=(x=new AbortController).signal,y=function(I){return function(){if(x.abort(),m==="readwrite"){for(var L=new Set,B=0,R=p;B<R.length;B++){var q=R[B],D=Cr["idb://".concat(c,"/").concat(q)];if(D){var N=a.table(q),U=D.optimisticOps.filter(function(ke){return ke.trans===E});if(E._explicit&&I&&E.mutatedParts)for(var M=0,Y=Object.values(D.queries.query);M<Y.length;M++)for(var G=0,Z=(ge=Y[M]).slice();G<Z.length;G++)qs((ue=Z[G]).obsSet,E.mutatedParts)&&(Ee(ge,ue),ue.subscribers.forEach(function(ke){return L.add(ke)}));else if(0<U.length){D.optimisticOps=D.optimisticOps.filter(function(ke){return ke.trans!==E});for(var re=0,le=Object.values(D.queries.query);re<le.length;re++)for(var ge,ue,he,be=0,pe=(ge=le[re]).slice();be<pe.length;be++)(ue=pe[be]).res!=null&&E.mutatedParts&&(I&&!ue.dirty?(he=Object.isFrozen(ue.res),he=pu(ue.res,ue.req,U,N,ue,he),ue.dirty?(Ee(ge,ue),ue.subscribers.forEach(function(ke){return L.add(ke)})):he!==ue.res&&(ue.res=he,ue.promise=fe.resolve({result:he}))):(ue.dirty&&Ee(ge,ue),ue.subscribers.forEach(function(ke){return L.add(ke)})))}}}L.forEach(function(ke){return ke()})}}},E.addEventListener("abort",y(!1),{signal:_}),E.addEventListener("error",y(!1),{signal:_}),E.addEventListener("complete",y(!0),{signal:_})),E},table:function(p){var m=a.table(p),y=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var _=de.trans;if(y.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return m.mutate(x);var E=Cr["idb://".concat(c,"/").concat(p)];return E?(_=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Gs(y,x).some(function(I){return I==null}))?(E.optimisticOps.push(x),x.mutatedParts&&fo(x.mutatedParts),_.then(function(I){0<I.numFailures&&(Ee(E.optimisticOps,x),(I=du(0,x,I))&&E.optimisticOps.push(I),x.mutatedParts&&fo(x.mutatedParts))}),_.catch(function(){Ee(E.optimisticOps,x),x.mutatedParts&&fo(x.mutatedParts)})):_.then(function(I){var L=du(0,r(r({},x),{values:x.values.map(function(B,R){var q;return I.failures[R]?B:(B=(q=y.keyPath)!==null&&q!==void 0&&q.includes(".")?se(B):r({},B),W(B,y.keyPath,I.results[R]),B)})}),I);E.optimisticOps.push(L),queueMicrotask(function(){return x.mutatedParts&&fo(x.mutatedParts)})}),_):m.mutate(x)},query:function(x){if(!fu(de,m)||!hu("query",x))return m.query(x);var _=((L=de.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",R=de,E=R.requery,I=R.signal,L=function(N,U,M,Y){var G=Cr["idb://".concat(N,"/").concat(U)];if(!G)return[];if(!(U=G.queries[M]))return[null,!1,G,null];var Z=U[(Y.query?Y.query.index.name:null)||""];if(!Z)return[null,!1,G,null];switch(M){case"query":var re=Z.find(function(le){return le.req.limit===Y.limit&&le.req.values===Y.values&&mu(le.req.query.range,Y.query.range)});return re?[re,!0,G,Z]:[Z.find(function(le){return("limit"in le.req?le.req.limit:1/0)>=Y.limit&&(!Y.values||le.req.values)&&Vd(le.req.query.range,Y.query.range)}),!1,G,Z];case"count":return re=Z.find(function(le){return mu(le.req.query.range,Y.query.range)}),[re,!!re,G,Z]}}(c,p,"query",x),B=L[0],R=L[1],q=L[2],D=L[3];return B&&R?B.obsSet=x.obsSet:(R=m.query(x).then(function(N){var U=N.result;if(B&&(B.res=U),_){for(var M=0,Y=U.length;M<Y;++M)Object.freeze(U[M]);Object.freeze(U)}else N.result=se(U);return N}).catch(function(N){return D&&B&&Ee(D,B),Promise.reject(N)}),B={obsSet:x.obsSet,promise:R,subscribers:new Set,type:"query",req:x,dirty:!1},D?D.push(B):(D=[B],(q=q||(Cr["idb://".concat(c,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=D)),Wd(B,D,E,I),B.promise.then(function(N){return{result:pu(N.result,x,q?.optimisticOps,m,B,_)}})}})}})}};function po(a,c){return new Proxy(a,{get:function(p,m,y){return m==="db"?c:Reflect.get(p,m,y)}})}var nr=(Mt.prototype.version=function(a){if(isNaN(a)||a<.1)throw new ve.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,p=c.filter(function(m){return m._cfg.version===a})[0];return p||(p=new this.Version(a),c.push(p),c.sort(zd),p.stores({}),this._state.autoSchema=!1,p)},Mt.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||de.letThrough||this._vip)?a():new fe(function(p,m){if(c._state.openComplete)return m(new ve.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new ve.DatabaseClosed);c.open().catch(Oe)}c._state.dbReadyPromise.then(p,m)}).then(a)},Mt.prototype.use=function(a){var c=a.stack,p=a.create,m=a.level,y=a.name;return y&&this.unuse({stack:c,name:y}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:p,level:m??10,name:y}),a.sort(function(x,_){return x.level-_.level}),this},Mt.prototype.unuse=function(a){var c=a.stack,p=a.name,m=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(y){return m?y.create!==m:!!p&&y.name!==p})),this},Mt.prototype.open=function(){var a=this;return Bn(vt,function(){return $d(a)})},Mt.prototype._close=function(){var a=this._state,c=Vr.indexOf(this);if(0<=c&&Vr.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new fe(function(p){a.dbReadyResolve=p}),a.openCanceller=new fe(function(p,m){a.cancelOpen=m}))},Mt.prototype.close=function(p){var c=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,p=this._state;c?(p.isBeingOpened&&p.cancelOpen(new ve.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new ve.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},Mt.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var p=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new fe(function(y,x){function _(){c.close(a);var E=c._deps.indexedDB.deleteDatabase(c.name);E.onsuccess=ct(function(){var I,L,B;I=c._deps,L=c.name,B=I.indexedDB,I=I.IDBKeyRange,Fs(B)||L===Qi||Bs(B,I).delete(L).catch(Oe),y()}),E.onerror=Vn(x),E.onblocked=c._fireOnBlocked}if(p)throw new ve.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(_):_()})},Mt.prototype.backendDB=function(){return this.idbdb},Mt.prototype.isOpen=function(){return this.idbdb!==null},Mt.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},Mt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Mt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Mt.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),Mt.prototype.transaction=function(){var a=function(c,p,m){var y=arguments.length;if(y<2)throw new ve.InvalidArgument("Too few arguments");for(var x=new Array(y-1);--y;)x[y-1]=arguments[y];return m=x.pop(),[c,j(x),m]}.apply(this,arguments);return this._transaction.apply(this,a)},Mt.prototype._transaction=function(a,c,p){var m=this,y=de.trans;y&&y.db===this&&a.indexOf("!")===-1||(y=null);var x,_,E=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(_=c.map(function(L){if(L=L instanceof m.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),a=="r"||a===Es)x=Es;else{if(a!="rw"&&a!=Ps)throw new ve.InvalidArgument("Invalid transaction mode: "+a);x=Ps}if(y){if(y.mode===Es&&x===Ps){if(!E)throw new ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");y=null}y&&_.forEach(function(L){if(y&&y.storeNames.indexOf(L)===-1){if(!E)throw new ve.SubTransaction("Table "+L+" not included in parent transaction.");y=null}}),E&&y&&!y.active&&(y=null)}}catch(L){return y?y._promise(null,function(B,R){R(L)}):Lt(L)}var I=function L(B,R,q,D,N){return fe.resolve().then(function(){var U=de.transless||de,M=B._createTransaction(R,q,B._dbSchema,D);if(M.explicit=!0,U={trans:M,transless:U},D)M.idbtrans=D.idbtrans;else try{M.create(),M.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(Z){return Z.name===Xe.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return L(B,R,q,null,N)})):Lt(Z)}var Y,G=Ce(N);return G&&Nt(),U=fe.follow(function(){var Z;(Y=N.call(M,M))&&(G?(Z=Dt.bind(null,null),Y.then(Z,Z)):typeof Y.next=="function"&&typeof Y.throw=="function"&&(Y=Ws(Y)))},U),(Y&&typeof Y.then=="function"?fe.resolve(Y).then(function(Z){return M.active?Z:Lt(new ve.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):U.then(function(){return Y})).then(function(Z){return D&&M._resolve(),M._completion.then(function(){return Z})}).catch(function(Z){return M._reject(Z),Lt(Z)})})}.bind(null,this,x,_,y,p);return y?y._promise(x,I,"lock"):de.trans?Bn(de.transless,function(){return m._whenReady(I)}):this._whenReady(I)},Mt.prototype.table=function(a){if(!h(this._allTables,a))throw new ve.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},Mt);function Mt(a,c){var p=this;this._middlewares={},this.verno=0;var m=Mt.dependencies;this._options=c=r({addons:Mt.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var y,x,_,E,I,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Oe,dbReadyPromise:null,cancelOpen:Oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};L.dbReadyPromise=new fe(function(R){L.dbReadyResolve=R}),L.openCanceller=new fe(function(R,q){L.cancelOpen=q}),this._state=L,this.name=a,this.on=fi(this,"populate","blocked","versionchange","close",{ready:[In,Oe]}),this.on.ready.subscribe=O(this.on.ready.subscribe,function(R){return function(q,D){Mt.vip(function(){var N,U=p._state;U.openComplete?(U.dbOpenError||fe.resolve().then(q),D&&R(q)):U.onReadyBeingFired?(U.onReadyBeingFired.push(q),D&&R(q)):(R(q),N=p,D||R(function M(){N.on.ready.unsubscribe(q),N.on.ready.unsubscribe(M)}))})}}),this.Collection=(y=this,hi(Ad.prototype,function(Y,M){this.db=y;var D=Vl,N=null;if(M)try{D=M()}catch(G){N=G}var U=Y._ctx,M=U.table,Y=M.hook.reading.fire;this._ctx={table:M,index:U.index,isPrimKey:!U.index||M.schema.primKey.keyPath&&U.index===M.schema.primKey.name,range:D,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:U.or,valueMapper:Y!==pt?Y:null}})),this.Table=(x=this,hi(Jl.prototype,function(R,q,D){this.db=x,this._tx=D,this.name=R,this.schema=q,this.hook=x._allTables[R]?x._allTables[R].hook:fi(null,{creating:[it,Oe],reading:[Jt,pt],updating:[It,Oe],deleting:[xt,Oe]})})),this.Transaction=(_=this,hi(Od.prototype,function(R,q,D,N,U){var M=this;this.db=_,this.mode=R,this.storeNames=q,this.schema=D,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=fi(this,"complete","error","abort"),this.parent=U||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe(function(Y,G){M._resolve=Y,M._reject=G}),this._completion.then(function(){M.active=!1,M.on.complete.fire()},function(Y){var G=M.active;return M.active=!1,M.on.error.fire(Y),M.parent?M.parent._reject(Y):G&&M.idbtrans&&M.idbtrans.abort(),Lt(Y)})})),this.Version=(E=this,hi(Fd.prototype,function(R){this.db=E,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,hi(tu.prototype,function(R,q,D){if(this.db=I,this._ctx={table:R,index:q===":id"?null:q,or:D},this._cmp=this._ascending=Qe,this._descending=function(N,U){return Qe(U,N)},this._max=function(N,U){return 0<Qe(N,U)?N:U},this._min=function(N,U){return Qe(N,U)<0?N:U},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new ve.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=gi(c.IDBKeyRange),this._createTransaction=function(R,q,D,N){return new p.Transaction(R,q,D,p._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(R){p.on("blocked").fire(R),Vr.filter(function(q){return q.name===p.name&&q!==p&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(R)})},this.use(Hd),this.use(Yd),this.use(Kd),this.use(Ud),this.use(qd);var B=new Proxy(this,{get:function(R,q,D){if(q==="_vip")return!0;if(q==="table")return function(U){return po(p.table(U),B)};var N=Reflect.get(R,q,D);return N instanceof Jl?po(N,B):q==="tables"?N.map(function(U){return po(U,B)}):q==="_createTransaction"?function(){return po(N.apply(this,arguments),B)}:N}});this.vip=B,m.forEach(function(R){return R(p)})}var mo,Dn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Gd=(Zs.prototype.subscribe=function(a,c,p){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:p})},Zs.prototype[Dn]=function(){return this},Zs);function Zs(a){this._subscribe=a}try{mo={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{mo={indexedDB:null,IDBKeyRange:null}}function gu(a){var c,p=!1,m=new Gd(function(y){var x=Ce(a),_,E=!1,I={},L={},B={get closed(){return E},unsubscribe:function(){E||(E=!0,_&&_.abort(),R&&cr.storagemutated.unsubscribe(D))}};y.start&&y.start(B);var R=!1,q=function(){return ci(N)},D=function(U){co(I,U),qs(L,I)&&q()},N=function(){var U,M,Y;!E&&mo.indexedDB&&(I={},U={},_&&_.abort(),_=new AbortController,Y=function(G){var Z=qt();try{x&&Nt();var re=Rt(a,G);return re=x?re.finally(Dt):re}finally{Z&&Zt()}}(M={subscr:U,signal:_.signal,requery:q,querier:a,trans:null}),Promise.resolve(Y).then(function(G){p=!0,c=G,E||M.signal.aborted||(I={},function(Z){for(var re in Z)if(h(Z,re))return;return 1}(L=U)||R||(cr(mi,D),R=!0),ci(function(){return!E&&y.next&&y.next(G)}))},function(G){p=!1,["DatabaseClosedError","AbortError"].includes(G?.name)||E||ci(function(){E||y.error&&y.error(G)})}))};return setTimeout(q,0),B});return m.hasValue=function(){return p},m.getValue=function(){return c},m}var Sr=nr;function Qs(a){var c=fr;try{fr=!0,cr.storagemutated.fire(a),Vs(a,!0)}finally{fr=c}}g(Sr,r(r({},At),{delete:function(a){return new Sr(a,{addons:[]}).delete()},exists:function(a){return new Sr(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=Sr.dependencies,p=c.indexedDB,c=c.IDBKeyRange,(Fs(p)?Promise.resolve(p.databases()).then(function(m){return m.map(function(y){return y.name}).filter(function(y){return y!==Qi})}):Bs(p,c).toCollection().primaryKeys()).then(a)}catch{return Lt(new ve.MissingAPI)}var c,p},defineClass:function(){return function(a){u(this,a)}},ignoreTransaction:function(a){return de.trans?Bn(de.transless,a):a()},vip:$s,async:function(a){return function(){try{var c=Ws(a.apply(this,arguments));return c&&typeof c.then=="function"?c:fe.resolve(c)}catch(p){return Lt(p)}}},spawn:function(a,c,p){try{var m=Ws(a.apply(p,c||[]));return m&&typeof m.then=="function"?m:fe.resolve(m)}catch(y){return Lt(y)}},currentTransaction:{get:function(){return de.trans||null}},waitFor:function(a,c){return c=fe.resolve(typeof a=="function"?Sr.ignoreTransaction(a):a).timeout(c||6e4),de.trans?de.trans.waitFor(c):c},Promise:fe,debug:{get:function(){return je},set:function(a){Ct(a)}},derive:C,extend:u,props:g,override:O,Events:fi,on:cr,liveQuery:gu,extendObservabilitySet:co,getByKeyPath:P,setByKeyPath:W,delByKeyPath:function(a,c){typeof c=="string"?W(a,c,void 0):"length"in c&&[].map.call(c,function(p){W(a,p,void 0)})},shallowClone:ae,deepClone:se,getObjectDiff:Ys,cmp:Qe,asap:V,minKey:-1/0,addons:[],connections:Vr,errnames:Xe,dependencies:mo,cache:Cr,semVer:"4.0.11",version:"4.0.11".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,p){return a+c/Math.pow(10,2*p)})})),Sr.maxKey=gi(Sr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(cr(mi,function(a){fr||(a=new CustomEvent(Ds,{detail:a}),fr=!0,dispatchEvent(a),fr=!1)}),addEventListener(Ds,function(a){a=a.detail,fr||Qs(a)}));var Gr,fr=!1,vu=function(){};return typeof BroadcastChannel<"u"&&((vu=function(){(Gr=new BroadcastChannel(Ds)).onmessage=function(a){return a.data&&Qs(a.data)}})(),typeof Gr.unref=="function"&&Gr.unref(),cr(mi,function(a){fr||Gr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!nr.disableBfCache&&a.persisted){je&&console.debug("Dexie: handling persisted pagehide"),Gr?.close();for(var c=0,p=Vr;c<p.length;c++)p[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!nr.disableBfCache&&a.persisted&&(je&&console.debug("Dexie: handling persisted pageshow"),vu(),Qs({all:new Xt(-1/0,[[]])}))})),fe.rejectionMapper=function(a,c){return!a||a instanceof T||a instanceof TypeError||a instanceof SyntaxError||!a.name||!bt[a.name]?a:(c=new bt[a.name](c||a.message,a),"stack"in a&&b(c,"stack",{get:function(){return this.inner.stack}}),c)},Ct(je),r(nr,Object.freeze({__proto__:null,Dexie:nr,liveQuery:gu,Entity:Wl,cmp:Qe,PropModification:di,replacePrefix:function(a,c){return new di({replacePrefix:[a,c]})},add:function(a){return new di({add:a})},remove:function(a){return new di({remove:a})},default:nr,RangeSet:Xt,mergeRanges:bi,rangesOverlap:su}),{default:nr}),nr})}(Ao)),Ao.exports}var Pm=Em();const Fa=Cl(Pm),$u=Symbol.for("Dexie"),is=globalThis[$u]||(globalThis[$u]=Fa);if(Fa.semVer!==is.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fa.semVer} and ${is.semVer}`);const{liveQuery:f2,mergeRanges:h2,rangesOverlap:d2,RangeSet:p2,cmp:m2,Entity:g2,PropModification:v2,replacePrefix:y2,add:b2,remove:x2}=is;class Rm extends is{project;constructor(){super("ResuMateMain"),this.version(1).stores({project:"++id, name, md, mdKeywords, jobUrl, jobDesc, jobKeywords, score, saves, created, modified"})}}const ir=new Rm;async function bs(){const e=new Date,t=De(Kn);if(De(Ln)===""||De(Ln)==="Change Me")return Xr.set(-1),-1;try{if(t===-1){const n=await ir.project.add({name:De(Ln),md:De(Rn),mdKeywords:De(yr),jobUrl:De(Qn),jobDesc:De(Hn),jobKeywords:De(br),score:De(xr),saves:1,created:e,modified:e});Kn.set(n),Ir.set(1),Xr.set(1)}else{const n=await ir.project.get(t),r=(n?.saves??De(Ir))+1;await ir.project.update(t,{name:De(Ln),md:De(Rn),mdKeywords:De(yr),jobUrl:De(Qn),jobDesc:De(Hn),jobKeywords:De(br),score:De(xr),saves:r,created:n?.created??e,modified:e}),Ir.set(r),Xr.set(2)}return await ai(),0}catch(n){return console.error(n),Xr.set(-1),-1}}async function $a(e){const t=await ir.project.get(e);if(!t){console.warn("Project not found:",e);return}Ln.set(t.name),Rn.set(t.md),yr.set(t.mdKeywords),Qn.set(t.jobUrl),Hn.set(t.jobDesc),br.set(t.jobKeywords),xr.set(t.score),bl.set(t.created??new Date),xl.set(t.modified??new Date),Ir.set(t.saves),Kn.set(e),wl()}async function ai(){const e=await ir.project.toArray();e.reverse(),_l.set(e.map(t=>[t.name,t.id]))}async function Am(e,t){const n=t.trim();n&&(await ir.project.update(e,{name:n,modified:new Date}),De(Kn)===e&&Ln.set(n),await ai())}async function Ef(e,t){const n=await ir.project.get(e);if(!n)return console.warn("Project to duplicate not found:",e),-1;const r=new Date,i=(t??`${n.name} (Copy)`).trim(),o=await ir.project.add({name:i,md:n.md,mdKeywords:n.mdKeywords,jobUrl:n.jobUrl,jobDesc:n.jobDesc,jobKeywords:n.jobKeywords,score:n.score,saves:0,created:r,modified:r});return Kn.set(o),Ln.set(i),Ir.set(0),await ai(),await $a(o),o}async function Im(e){await ir.project.delete(e),De(Kn)===e&&Pf(),await ai()}function Pf(){Ln.set("Change Me"),Rn.set(De(jr)),yr.set([]),Qn.set("https://example.com/"),Hn.set("Paste your job description here, or paste a link and try to fetch it"),br.set([]),vs.set([]),xr.set(0),bl.set(new Date),xl.set(new Date),Ir.set(0),Kn.set(-1),console.log("Project cleared")}async function Dm(){const e=["ResuMateMain","svelte-persist"],t={};for(const r of e){const i=await Sl(r);t[r]={};for(const o of i.objectStoreNames){const l=i.transaction(o,"readonly").objectStore(o),u=[];await new Promise((f,d)=>{const h=l.openCursor();h.onerror=()=>d(h.error),h.onsuccess=g=>{const v=g.target.result;v?(u.push({key:v.key,value:v.value}),v.continue()):f()}}),t[r][o]=u}i.close()}const n=JSON.stringify(t,null,2);Mm(n,"indexeddb_export.json")}async function Rf(e){const t=JSON.parse(e);if(!(t.ResuMateMain&&t["svelte-persist"])){console.error("Required databases not found in import payload");return}for(const n of Object.keys(t)){const r=await Sl(n);for(const i of Object.keys(t[n])){if(!Array.from(r.objectStoreNames).includes(i)){console.warn(`Store ${i} missing in ${n}, skipping`);continue}const o=r.transaction(i,"readwrite"),s=o.objectStore(i);await Af(s);const l=t[n][i];for(const u of l)s.keyPath===null?await new Promise((f,d)=>{const h=s.put(u.value,u.key);h.onerror=()=>d(h.error),h.onsuccess=()=>f()}):await Lm(s,u.value);await new Promise(u=>{o.oncomplete=()=>u()})}r.close()}await ai(),console.log("Import completed")}async function Om(){console.log("Resetting application data...");const e=["ResuMateMain","svelte-persist"];for(const t of e){const n=await Sl(t);for(const r of n.objectStoreNames){const i=n.transaction(r,"readwrite");await Af(i.objectStore(r)),await new Promise(o=>{i.oncomplete=()=>o()})}n.close()}Rn.set("# Go to settings and fetch my resume template from the settings! Also Update your info!"),$i.set("<h1>Hi</h1>"),Hn.set("Paste your job description here, or paste a link and try to fetch it"),Qn.set("https://example.com/"),jn.set("None"),Li.set("Content"),Ln.set("Change Me"),yr.set([]),br.set([]),vs.set([]),xr.set(0),bl.set([]),xl.set([]),Ar.set([]),Ir.set(0),Kn.set(-1),_l.set([]),ys.set(""),jr.set("# Go to settings and fetch my resume template from the settings! Also Update your info!"),qo.set("John Doe"),Ho.set("example@gmail.com"),Ko.set("999-999-9999"),Vo.set("example.com"),Wo.set("linkedin.com/in/example"),Yo.set("github.com/example"),Go.set("Moon Street 123"),ym.set("/ResuMate/style.css"),Jo.set("your_api_key_here"),Ui.set("openai/gpt-4.1"),qi.set("Fetch some example knowlege to see what it looks like"),Zo.set(!0),Qo.set(!0),Xo.set(!0),es.set(!1),ts.set(!0),ns.set(!0),bm.set(!0),rs.set(!0),xm.set(""),_m.set(!1),km.set(""),wm.set(!1),kl(),console.log("Application reset complete")}function Sl(e){return new Promise((t,n)=>{const r=indexedDB.open(e);r.onerror=()=>n(r.error),r.onsuccess=()=>t(r.result)})}function Af(e){return new Promise((t,n)=>{const r=e.clear();r.onerror=()=>n(r.error),r.onsuccess=()=>t()})}function Lm(e,t){return new Promise((n,r)=>{const i=e.add(t);i.onerror=()=>r(i.error),i.onsuccess=()=>n()})}function Mm(e,t){const n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,i.click(),URL.revokeObjectURL(r)}async function jm(){if(!De(Ro)){Ro.set(!0);try{const e=zm(),t=Nm(),n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${De(Jo)}`},body:JSON.stringify({model:De(Ui),messages:[{role:"system",content:e},{role:"user",content:t}]})});if(!n.ok){console.error("OpenRouter request failed",n.status,n.statusText);return}let i=(await n.json())?.choices?.[0]?.message?.content??"";if(i=i.replace(/```\n.*?\n```/,""),i=i.replace(/```/g,""),!i.startsWith("#")){const o=i.indexOf("#");o!==-1&&(i=i.slice(o))}i.trim().length>0?Rn.set(i):console.warn("Tuned content empty; resumeMd left unchanged")}catch(e){console.error("Error tuning resume:",e)}finally{Ro.set(!1)}}}function zm(){return`
You are a Resume Tuner who cannot tell a lie!

You must truthfully tune a resume to match the job description and requirements.

The resume is markdown. '||' denotes a two-column left/right alignment transform later.

You are a tool: output ONLY the final markdown resume. The first character MUST be the first header (# ...)
Do NOT add explanations or fences. Remove HTML comments (<!-- -->). Keep overall uncommented length stable.

Guidelines:
- Delete irrelevant content; substitute with relevant knowledge-base content ONLY if present (no fabrications).
- Use XYZ bullet format:
  Buzzword X by doing Y resulting in Z (quantitative where possible, but truthful).
- Maintain existing section headers (##, ###, etc.) unless removing an irrelevant section.
- Skills ordering should mirror job description ordering of technologies.
- Adjust casing to exactly match job description tokens (e.g. C++ vs c++).
- Avoid bolding inside skills list to prevent parser issues.
- Coursework: only refine to include technologies explicitly mentioned (e.g. "Database Systems" -> "Database Systems in MySQL & MongoDB" if applicable).
- Experience: Reword bullets to highlight relevant stack items when justified by existing knowledge base or resume comments.
- Projects: Reorder most relevant first; swap or modify to maximize truthful relevance.
- Events/Certifications: Keep only those relevant to the job focus area (e.g. security vs development).
- No lying. If evidence not present in knowledge base/resume, omit.

Scoring system is simplistic keyword overlap; optimize overlap AND authentic recruiter impact.

ONE SHOT: Provide final best version.
NO extraneous text.`}function Nm(){return`
JOB DESCRIPTION:
${De(Hn)}

JOB KEYWORDS (maximize overlap):
${JSON.stringify(De(br))}

CURRENT RESUME (markdown):
${De(Rn)}

RESUME KEYWORDS:
${JSON.stringify(De(yr))}

CURRENT COMBINED SCORE:
${De(xr)}

KNOWLEDGE BASE (safe source of truthful additions):
${De(qi)}

Remember:
- Remove comments
- Keep section structure logical
- Maintain approximate length of uncommented material
- Start output with first '#' header
`}var Bm=xe('<p class="text-xs px-2 py-1"> </p>'),Fm=(e,t,n)=>t(S(n)),$m=(e,t,n)=>t(S(n)),Um=xe('<li class="list-none"><div class="flex items-center gap-2 min-w-0"><button type="button"><span class="truncate block"> </span></button> <button type="button" class="glass-edit-button px-2 py-1 rounded text-xs focus:ring-2 focus:ring-blue/70 transition-all svelte-pss47x" title="Project options">â®</button></div></li>'),qm=xe('<ul role="list" class="flex flex-col gap-1 flex-1 min-h-0 overflow-y-auto overflow-x-hidden pr-1"></ul>'),Hm=xe('<nav aria-label="Projects" class="flex flex-col gap-2 flex-1 min-h-0"><div class="px-1"><input type="text" class="glass-search w-full px-3 py-2 rounded text-text text-sm focus:outline-none placeholder:text-overlay1 svelte-pss47x" placeholder="Search projects..." aria-label="Search projects"/></div> <!></nav>');function Km(e,t){Gt(t,!0);const n=nt(t,"onSelect",3,()=>{});nt(t,"onNewproject",3,()=>{});const r=nt(t,"onEditProject",3,()=>{});let i=Pe(Lr([]));_l.subscribe(z=>ne(i,z,!0));let o=Pe("");const s=mr(()=>S(o).trim()?S(i).filter(z=>z[0].toLowerCase().includes(S(o).toLowerCase())):S(i));hn(()=>{S(u)>=S(s).length&&ne(u,S(s).length-1),S(u)<-1&&ne(u,-1)});let l=[],u=Pe(-1);Zn(()=>{ai()});function f(z){if(z<0)return;const V=l[z];V&&(V.focus(),ne(u,z,!0))}function d(z){$a(z[1]),n()({name:z[0],id:z[1]})}function h(z){Kn.set(z[1]),$a(z[1]),jn.set("Project Options"),r()({name:z[0],id:z[1]})}function g(z,V,P){switch(z.key){case"ArrowDown":case"ArrowRight":z.preventDefault(),f((V+1)%P);break;case"ArrowUp":case"ArrowLeft":z.preventDefault(),f((V-1+P)%P);break;case"Home":z.preventDefault(),f(0);break;case"End":z.preventDefault(),f(P-1);break}}function v(z,V){return l[V]=z,{destroy(){l[V]=void 0}}}var b=Hm(),C=H(b),A=H(C);_t(A),F(C);var w=J(C,2);{var $=z=>{var V=Bm(),P=H(V,!0);F(V),Je(()=>wt(P,S(i).length===0?"No projects yet. Create one to begin.":"No matches.")),ie(z,V)},O=z=>{var V=qm();Un(V,21,()=>S(s),$n,(P,W,ae)=>{var me=Um(),j=H(me),X=H(j);X.__keydown=Q=>g(Q,ae,S(s).length),ut(X,"data-index",ae),X.__click=[Fm,d,W];var te=H(X),se=H(te,!0);F(te),F(X),ml(X,(Q,ye)=>v?.(Q,ye),()=>ae);var K=J(X,2);K.__click=[$m,h,W],F(j),F(me),Je(()=>{Ht(X,1,`glass-project-button flex-1 min-w-0 text-left text-sm px-3 py-2 rounded outline-hidden focus:outline-hidden focus:ring-2 focus:ring-blue/70 transition-all ${S(u)===ae?"glass-project-focused":"glass-project-normal"}`,"svelte-pss47x"),ut(X,"aria-label",`Load project ${S(W)[0]}`),ut(X,"title",`Open ${S(W)[0]}`),wt(se,S(W)[0]),ut(K,"aria-label",`Edit project ${S(W)[0]}`)}),Mn("focus",X,()=>ne(u,ae,!0)),ie(P,me)}),F(V),ie(z,V)};Le(w,z=>{(S(s)?.length||0)===0?z($):z(O,!1)})}F(b),jt(A,()=>S(o),z=>ne(o,z)),ie(e,b),Yt()}bn(["keydown","click"]);function Uu(e,t,n){Ye(jn,"CreateProject"),n()()}function Vm(e,t){Ye(jn,t()==="Settings"?"None":"Settings")}var Wm=xe('<aside class="glass-sidebar flex flex-col gap-4 p-4 h-svh overflow-hidden relative svelte-1xkxhek" aria-label="Primary"><header class="flex items-center gap-2"><button type="button" class="glass-icon-button p-2 text-text transition-all focus:outline-hidden focus:ring-2 focus:ring-blue/70 svelte-1xkxhek"><img alt="" class="w-5 h-5 pointer-events-none" aria-hidden="true"/></button> <button type="button" class="text-left" aria-label="Create new project"><h1 class="text-blue text-2xl font-bold tracking-tight">ResuMate</h1></button></header> <div class="flex flex-col gap-2"><button type="button" class="glass-button-primary px-3 py-2 rounded text-sm w-full text-left transition-all svelte-1xkxhek" aria-label="New Project"><span class="font-semibold">New Project</span> <span aria-hidden="true">+</span></button></div> <div class="flex flex-col gap-2 flex-1 min-h-0"><h2 class="text-xs uppercase tracking-wide opacity-70 px-1">Projects</h2> <!></div> <footer class="mt-auto pt-2 flex flex-col gap-2"><button type="button" class="glass-button px-3 py-2 rounded text-sm text-text w-full text-left transition-all svelte-1xkxhek" aria-label="Toggle settings">Settings</button></footer></aside>');function Ym(e,t){Gt(t,!0);const[n,r]=sr(),i=()=>Ke(jn,"$modalState",n);let o=nt(t,"collapsed",3,!1),s=nt(t,"width",3,288),l=nt(t,"onToggleSidebar",3,()=>{}),u=nt(t,"onSelect",3,()=>{}),f=nt(t,"onNewproject",3,()=>{}),d=nt(t,"onEditProject",3,()=>{});var h=Wm(),g=H(h),v=H(g);v.__click=function(...P){l()?.apply(this,P)};var b=H(v);F(v);var C=J(v,2);C.__click=[Uu,i,f],F(g);var A=J(g,2),w=H(A);w.__click=[Uu,i,f],F(A);var $=J(A,2),O=J(H($),2);Km(O,{onSelect:u(),onNewproject:f(),onEditProject:d()}),F($);var z=J($,2),V=H(z);V.__click=[Vm,i],F(z),F(h),Je(()=>{Mr(h,`width:${o()?"0px":s()+"px"}; ${o()?"padding:0;border-right-width:0":""}`),ut(h,"aria-hidden",o()),ut(v,"aria-label",o()?"Expand sidebar":"Collapse sidebar"),ut(v,"aria-expanded",!o()),ut(v,"title",o()?"Show sidebar":"Hide sidebar"),ut(b,"src",o()?"/ResuMate/icons/sidebaropen.svg":"/ResuMate/icons/sidebarclose.svg"),ut(A,"aria-hidden",o()),ut($,"aria-hidden",o()),ut(z,"aria-hidden",o()),ut(V,"aria-pressed",i()==="Settings")}),ie(e,h),Yt(),r()}bn(["click"]);var Gm=(e,t,n)=>t(S(n)),Jm=xe('<button role="tab" type="button"> </button>'),Zm=xe('<div role="tablist" aria-label="Editor modes" class="flex flex-row gap-1"></div>');function Qm(e,t){Gt(t,!0);const n=["Content","Tuning","Preview"];let r=Pe("Content"),i=[],o=Pe(0);Li.subscribe(d=>{ne(r,d,!0);const h=n.indexOf(S(r));h!==-1&&ne(o,h,!0)});function s(d){Li.set(d),ne(r,d,!0),ne(o,n.indexOf(d),!0),queueMicrotask(()=>{i[S(o)]?.focus()})}function l(d){const h=n.length;let g=S(o);switch(d.key){case"ArrowRight":case"ArrowDown":d.preventDefault(),g=(S(o)+1)%h;break;case"ArrowLeft":case"ArrowUp":d.preventDefault(),g=(S(o)-1+h)%h;break;case"Home":d.preventDefault(),g=0;break;case"End":d.preventDefault(),g=h-1;break;case"Enter":case" ":d.preventDefault(),s(n[S(o)]);return;default:return}ne(o,g,!0),i[S(o)]?.focus()}function u(d,h){return i[h]=d,{destroy(){i[h]=void 0}}}Zn(()=>{Li.subscribe(d=>{const h=n.indexOf(d);h!==-1&&ne(o,h,!0)})});var f=Zm();f.__keydown=l,Un(f,21,()=>n,$n,(d,h,g)=>{var v=Jm();v.__click=[Gm,s,h];var b=H(v,!0);F(v),ml(v,(C,A)=>u?.(C,A),()=>g),Je(()=>{ut(v,"tabindex",g===S(o)?0:-1),ut(v,"aria-selected",g===S(o)),Ht(v,1,`glass-tab px-3 py-2 rounded text-sm transition-all ${g===S(o)?"glass-tab-active":"glass-tab-inactive"}`,"svelte-ffka90"),wt(b,S(h))}),Mn("focus",v,()=>ne(o,g,!0)),ie(d,v)}),F(f),ie(e,f),Yt()}bn(["keydown","click"]);function Xm(e,t){Ye(jn,"Project Options")}async function eg(e,t){await Ef(t())}function tg(){bs()}async function ng(e,t,n,r){if(t()&&S(n)!==""){const i=`
			         <!DOCTYPE html>
			         <html>
			         <head>
			             <style>
			                 ${S(n)}
			                 body, html {
			                     margin: 0;
			                     padding: 0;
			                     height: 100%;
			                     }
			                     .pdf-page {
			                         width: 8.5in;
			                         height: 11in;
			                         background-color: white;
			                         padding-top: 0.0in;
			                         padding-left: 0.2in;
			                         padding-right: 0.2in;
			                         box-sizing: border-box;
			                         overflow: hidden;
			                         max-height: 11in;
			                     @page {
			                         size: letter;
			                         scale: 1;
			                         margin: 0;
			                         width: 8.5in;
			                         height: 11in;
			                     }
			                     
			                     .pdf-page {
			                         overflow: hidden;
			                         max-height: 11in;
			                     }

			                     }

			                     </style>
			                 </head>
			                 <body>
			                     <div class="pdf-page">${await t()}</div>
			                 </body>
			             </html>
			         `,o=new Blob([i],{type:"text/html;charset=utf-8"}),s=URL.createObjectURL(o),l=window.open(s,"_blank");l&&(l.onload=()=>{l.document.title=r()||"ResuMate",setTimeout(()=>{l.focus(),l.print(),setTimeout(()=>{l.close(),URL.revokeObjectURL(s)},100)},100)})}}var rg=xe('<button type="button" class="glass-button-small p-2 text-text transition-all focus:outline-hidden focus:ring-2 focus:ring-blue/70 svelte-10duhqa" aria-label="Show sidebar" title="Show sidebar"><img src="/ResuMate/icons/sidebaropen.svg" alt="" aria-hidden="true" class="w-5 h-5 pointer-events-none"/></button>'),ig=xe('<div class="glass-topbar flex items-center gap-3 px-4 py-3 relative overflow-hidden h-12 svelte-10duhqa" role="banner" aria-label="Application top bar"><!> <div class="flex items-center gap-2"><button type="button" class="glass-button px-3 py-2 text-text text-sm transition-all svelte-10duhqa" aria-label="Edit project" title="Edit project">Edit</button> <button type="button" class="glass-button px-3 py-2 text-text text-sm transition-all svelte-10duhqa" aria-label="Duplicate project" title="Duplicate project">Duplicate</button></div> <div class="flex items-center gap-2"><button type="button" class="glass-button-primary px-3 py-2 text-sm transition-all relative svelte-10duhqa" aria-describedby="save-status-text" aria-label="Save project">Save <span aria-hidden="true"></span></button> <div id="save-status-text" role="status" aria-live="polite" class="text-xs min-w-[4ch]"> </div></div> <div class="flex-1"></div> <div class="w-fit nerdfont"> </div> <div class="flex-1"></div> <!> <button type="button" class="glass-button px-3 py-2 text-text text-sm transition-all ml-2 svelte-10duhqa" aria-label="Download / Print resume" title="Download / Print resume">Download</button></div>');function og(e,t){Gt(t,!0);const[n,r]=sr(),i=()=>Ke(jn,"$modalState",n),o=()=>Ke(Kn,"$projectId",n),s=()=>Ke($i,"$resumeHtml",n),l=()=>Ke(Ln,"$jobName",n),u=()=>Ke(Xr,"$saveState",n),f=nt(t,"collapsed",3,!1),d=nt(t,"onShowSidebar",3,()=>{});let h=Pe("");async function g(){try{const K=await fetch("/ResuMate/style.css");K.ok?ne(h,await K.text(),!0):console.error("Failed to load stylesheet")}catch(K){console.error("Error loading stylesheet:",K)}}g();function v(K){switch(K){case-1:return"Error saving";case 0:return"Saving...";case 1:case 2:return"Saved";default:return""}}function b(K){switch(K){case-1:return"bg-red";case 0:return"bg-yellow";case 1:case 2:return"bg-green";default:return"bg-overlay0"}}var C=ig(),A=H(C);{var w=K=>{var Q=rg();Q.__click=function(...ye){d()?.apply(this,ye)},ie(K,Q)};Le(A,K=>{f()&&K(w)})}var $=J(A,2),O=H($);O.__click=[Xm,i];var z=J(O,2);z.__click=[eg,o],F($);var V=J($,2),P=H(V);P.__click=[tg];var W=J(H(P));F(P);var ae=J(P,2),me=H(ae,!0);F(ae),F(V);var j=J(V,4),X=H(j,!0);F(j);var te=J(j,4);Qm(te,{});var se=J(te,2);se.__click=[ng,s,h,l],F(C),Je((K,Q,ye)=>{Ht(W,1,K,"svelte-10duhqa"),wt(me,Q),wt(X,ye)},[()=>"absolute -top-1 -right-1 w-3 h-3 rounded-full "+b(u()),()=>v(u()),()=>l().length<60?l():l().slice(0,60)+"..."]),ie(e,C),Yt(),r()}bn(["click"]);function Hi(e,t=1e3){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t)}}function sg(e,t){if(e.size!==t.size)return!1;const n=new Set(e),r=new Set(t);for(const i of n)if(r.add(i),r.size!==t.size)return!1;for(const i of r)if(n.add(i),n.size!==e.size)return!1;return!0}function ag(e,t){if(!e)return t;const n={...t};return Object.entries(e).forEach(([r,i])=>{n[r]=i}),n}let qu=class extends Event{detail;constructor(t,n){super(t,n),this.detail=n.detail}};const lg={writeTab:"Write",previewTab:"Preview",iconsLabels:{}};var ug=xe('<div class="carta-renderer markdown-body svelte-r6n2gn"><!> <!></div>');function cg(e,t){Gt(t,!0);let n=nt(t,"elem",15),r=nt(t,"hidden",3,!1),i=Pe(!1),o=Pe(Lr(t.carta.renderSSR(t.value)));const s=Hi(g=>{t.carta.render(g).then(v=>{ne(o,""),ne(o,v,!0)}).then(()=>t.onrender())},t.carta.rendererDebounce??300),l=g=>{s(g)};hn(()=>{S(i)&&l(t.value)}),Zn(()=>{n()&&t.carta.$setRenderer(n()),ne(i,!0)});var u=ug(),f=H(u);mf(f,()=>S(o));var d=J(f,2);{var h=g=>{var v=zt(),b=ot(v);df(b,()=>t.children??Rr),ie(g,v)};Le(d,g=>{S(i)&&g(h)})}F(u),En(u,g=>n(g),()=>n()),Je(()=>Mr(u,`display: ${r()?"none":"unset"};`)),Mn("scroll",u,function(...g){t.onscroll?.apply(this,g)}),ie(e,u),Yt()}const fg="modulepreload",hg=function(e){return"/ResuMate/"+e},Hu={},os=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=s(n.map(f=>{if(f=hg(f),f in Hu)return;Hu[f]=!0;const d=f.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${h}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":fg,d||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function ar(){}ar.prototype={diff:function(t,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var s=this;function l(z){return o?(setTimeout(function(){o(void 0,z)},0),!0):z}t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t)),n=this.removeEmpty(this.tokenize(n));var u=n.length,f=t.length,d=1,h=u+f;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var g=(r=i.timeout)!==null&&r!==void 0?r:1/0,v=Date.now()+g,b=[{oldPos:-1,lastComponent:void 0}],C=this.extractCommon(b[0],n,t,0);if(b[0].oldPos+1>=f&&C+1>=u)return l([{value:this.join(n),count:n.length}]);var A=-1/0,w=1/0;function $(){for(var z=Math.max(A,-d);z<=Math.min(w,d);z+=2){var V=void 0,P=b[z-1],W=b[z+1];P&&(b[z-1]=void 0);var ae=!1;if(W){var me=W.oldPos-z;ae=W&&0<=me&&me<u}var j=P&&P.oldPos+1<f;if(!ae&&!j){b[z]=void 0;continue}if(!j||ae&&P.oldPos+1<W.oldPos?V=s.addToPath(W,!0,void 0,0):V=s.addToPath(P,void 0,!0,1),C=s.extractCommon(V,n,t,z),V.oldPos+1>=f&&C+1>=u)return l(dg(s,V.lastComponent,n,t,s.useLongestToken));b[z]=V,V.oldPos+1>=f&&(w=Math.min(w,z-1)),C+1>=u&&(A=Math.max(A,z+1))}d++}if(o)(function z(){setTimeout(function(){if(d>h||Date.now()>v)return o();$()||z()},0)})();else for(;d<=h&&Date.now()<=v;){var O=$();if(O)return O}},addToPath:function(t,n,r,i){var o=t.lastComponent;return o&&o.added===n&&o.removed===r?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}},extractCommon:function(t,n,r,i){for(var o=n.length,s=r.length,l=t.oldPos,u=l-i,f=0;u+1<o&&l+1<s&&this.equals(n[u+1],r[l+1]);)u++,l++,f++;return f&&(t.lastComponent={count:f,previousComponent:t.lastComponent}),t.oldPos=l,u},equals:function(t,n){return this.options.comparator?this.options.comparator(t,n):t===n||this.options.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(t[r]);return n},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function dg(e,t,n,r,i){for(var o=[],s;t;)o.push(t),s=t.previousComponent,delete t.previousComponent,t=s;o.reverse();for(var l=0,u=o.length,f=0,d=0;l<u;l++){var h=o[l];if(h.removed){if(h.value=e.join(r.slice(d,d+h.count)),d+=h.count,l&&o[l-1].added){var v=o[l-1];o[l-1]=o[l],o[l]=v}}else{if(!h.added&&i){var g=n.slice(f,f+h.count);g=g.map(function(C,A){var w=r[d+A];return w.length>C.length?w:C}),h.value=e.join(g)}else h.value=e.join(n.slice(f,f+h.count));f+=h.count,h.added||(d+=h.count)}}var b=o[u-1];return u>1&&typeof b.value=="string"&&(b.added||b.removed)&&e.equals("",b.value)&&(o[u-2].value+=b.value,o.pop()),o}var pg=new ar;function mg(e,t,n){return pg.diff(e,t,n)}var Ku=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Vu=/\S/,If=new ar;If.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Vu.test(e)&&!Vu.test(t)};If.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&Ku.test(t[n])&&Ku.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var Df=new ar;Df.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};var gg=new ar;gg.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var vg=new ar;vg.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Io(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Io=function(t){return typeof t}:Io=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io(e)}var yg=Object.prototype.toString,Ki=new ar;Ki.useLongestToken=!0;Ki.tokenize=Df.tokenize;Ki.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=r===void 0?function(o,s){return typeof s>"u"?n:s}:r;return typeof e=="string"?e:JSON.stringify(Ua(e,null,null,i),i,"  ")};Ki.equals=function(e,t){return ar.prototype.equals.call(Ki,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Ua(e,t,n,r,i){t=t||[],n=n||[],r&&(e=r(i,e));var o;for(o=0;o<t.length;o+=1)if(t[o]===e)return n[o];var s;if(yg.call(e)==="[object Array]"){for(t.push(e),s=new Array(e.length),n.push(s),o=0;o<e.length;o+=1)s[o]=Ua(e[o],t,n,r,i);return t.pop(),n.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),Io(e)==="object"&&e!==null){t.push(e),s={},n.push(s);var l=[],u;for(u in e)e.hasOwnProperty(u)&&l.push(u);for(l.sort(),o=0;o<l.length;o+=1)u=l[o],s[u]=Ua(e[u],t,n,r,u);t.pop(),n.pop()}else s=e;return s}var qa=new ar;qa.tokenize=function(e){return e.slice()};qa.join=qa.removeEmpty=function(e){return e};function bg(e,t,n){const r=mg(e.replaceAll(`\r
`,`
`),t.replaceAll(`\r
`,`
`)),i=document.createElement("div");i.innerHTML=n;const o=Array.from(i.querySelectorAll(".line"));let s={line:0,span:0,char:0},l={line:0,span:0,char:0};if(o.length===0)return t;const u=v=>(bo(v,o).textContent??"")[v.char],f=()=>{s=structuredClone(l),s.char++,_g(l,o)||(l=xg(l,o))},d=v=>{if(v===`
`){s.char=0,s.span=0,s.line++,l=structuredClone(s);return}const b=u(l);b!==v&&console.warn(`Character mismatch: "${v}" !== "${b}" at: `,l,o),f()},h=v=>{if(v===`
`){const A=bo(s,o),w=[];for(;;){const W=w.at(-1)??A;if(!W.nextElementSibling)break;w.push(W.nextElementSibling)}const $=A.textContent??"",O=$.slice(s.char);A.textContent=$.slice(0,s.char);const z=document.createElement("span");z.classList.add("line");const V=document.createTextNode(`
`);if(O!==""){const W=document.createElement("span");z.appendChild(W),W.textContent=O,W.style.cssText=A.style.cssText}for(const W of w)z.appendChild(W);o[s.line].after(V,z),o.splice(s.line+1,0,z),l={line:l.line+1,span:0,char:0},s=structuredClone(l);return}const b=bo(s,o),C=b.textContent??"";b.textContent=C.slice(0,s.char)+v+C.slice(s.char),s.char++,s.line===l.line&&s.span===l.span&&l.char++},g=v=>{if(v===`
`){const w=o[l.line-1],$=o[l.line],O=Array.from($.children);for(const V of O)w.appendChild(V);w.nextSibling?.remove(),$.remove(),o.splice(l.line,1),l=structuredClone(s),l=ha(l,o);return}const b=bo(l,o),C=b.textContent??"",A=C[l.char];A!==v&&console.warn(`Character mismatch: "${v}" !== "${A}" at: `,l,o),b.textContent=C.slice(0,l.char)+C.slice(l.char+1),b.textContent===""&&b.remove(),l=ha(l,o)};l=ha(l,o);for(const v of r)switch(!0){case v.added:for(const b of v.value)h(b);break;case v.removed:for(const b of v.value)g(b);break;default:for(const b of v.value)d(b);break}return i.innerHTML}function Of(e){const t=document.createElement("span");return e.appendChild(t),t}function ha(e,t){const{line:n,span:r,char:i}=e,o=t[n],l=Array.from(o.children).at(r)?.textContent??"",u={line:n,span:r,char:i};return i>=l.length&&(u.char=0,u.span=r+1),u.span>=o.children.length&&(u.char=0,u.span=0,u.line=n+1),u}function xg(e,t){const{line:n,span:r,char:i}=e,o=t[n],l=(o.children[r]??Of(o)).textContent??"",u={line:n,span:r,char:i+1};return i+1>=l.length&&(u.char=0,u.span=r+1,u.span>=o.children.length&&(u.span=0,u.line=n+1)),u}function _g(e,t){return e.line>=t.length-1&&kg(e,t)}function kg(e,t){const n=t[e.line];return e.span>=n.children.length-1&&wg(e,t)}function wg(e,t){const n=t[e.line],r=n.children[e.span]??n;return e.char>=(r.textContent??"").length-1}function bo(e,t){const n=t[e.line];return n.children[e.span]??Of(n)}var Cg=xe('<div role="tooltip" class="editor-unfocus-suggestion svelte-1g4r752">Press ESC then TAB to move the focus off the field</div> <div role="textbox" tabindex="-1" class="carta-input svelte-1g4r752"><div class="carta-input-wrapper svelte-1g4r752"><div class="carta-highlight carta-font-code svelte-1g4r752" tabindex="-1" aria-hidden="true"><!></div> <textarea></textarea></div> <!></div>',1);function Sg(e,t){Gt(t,!0);let n=nt(t,"value",15,""),r=nt(t,"placeholder",3,""),i=nt(t,"elem",15),o=nt(t,"props",19,()=>({})),s=nt(t,"hidden",3,!1),l,u,f,d=Pe(Lr(n())),h=Pe(!1),g=n();const v=Math.random().toString(36).substring(2),b=()=>{if(!S(h)||!l||(l.style.height="0",l.style.minHeight="0",l.style.height=l.scrollHeight+"px",l.style.minHeight=f.clientHeight+"px",l.scrollTop=0,!(document.activeElement===l))||!t.carta.input)return;const Q=t.carta.input.getCursorXY();Q&&i()&&(Q.top<0||Q.top+t.carta.input.getRowHeight()>=i().scrollTop+i().clientHeight)&&i().scrollTo({top:Q?.top,behavior:"instant"})},C=()=>{window.getSelection()?.toString()||l?.focus()},w=Hi(async K=>{const Q=await t.carta.highlighter();if(!Q)return;let ye;const _e=await os(()=>import("./highlight.Ct1y-uZ_.js"),__vite__mapDeps([0,1])),{isSingleTheme:Ee}=_e;Ee(Q.theme)?ye=Q.codeToHtml(K,{lang:Q.lang,theme:Q.theme}):ye=Q.codeToHtml(K,{lang:Q.lang,themes:Q.theme}),t.carta.sanitizer?ne(d,t.carta.sanitizer(ye),!0):ne(d,ye,!0),g=n(),requestAnimationFrame(b)},t.highlightDelay),$=Hi(async K=>{const Q=await t.carta.highlighter(),ye=await os(()=>import("./highlight.Ct1y-uZ_.js"),__vite__mapDeps([0,1])),{loadNestedLanguages:_e}=ye;if(!Q)return;const{updated:Ee}=await _e(Q,K);Ee&&w(K)},300),O=K=>{if(u)try{ne(d,bg(g,K,S(d)),!0),g=K,requestAnimationFrame(b)}catch(Q){console.error(`Error executing speculative update: ${Q}.`)}w(K),$(K)};hn(()=>{O(n())}),Zn(()=>{ne(h,!0),requestAnimationFrame(b)}),Zn(()=>{t.carta.$setInput(l,i(),()=>{n(l.value)})});var z=Cg(),V=ot(z),P=J(V,2);P.__click=C,P.__keydown=C;var W=H(P),ae=H(W),me=H(ae);mf(me,()=>S(d)),F(ae),En(ae,K=>u=K,()=>u);var j=J(ae,2);pl(j);var X=()=>l.scrollTop=0;Gp(j,()=>({class:"carta-font-code","aria-multiline":"true","aria-describedby":`editor-unfocus-suggestion-${v??""}`,spellcheck:o().spellcheck===!0,tabindex:"0",placeholder:r(),...o(),onscroll:X}),void 0,void 0,"svelte-1g4r752"),En(j,K=>l=K,()=>l),F(W),En(W,K=>f=K,()=>f);var te=J(W,2);{var se=K=>{var Q=zt(),ye=ot(Q);df(ye,()=>t.children),ie(K,Q)};Le(te,K=>{S(h)&&K(se)})}return F(P),En(P,K=>i(K),()=>i()),Je(()=>{ut(V,"id",`editor-unfocus-suggestion-${v??""}`),Mr(V,`display: ${s()?"none":"unset"};`),Mr(P,`display: ${s()?"none":"unset"};`)}),Mn("scroll",P,function(...K){t.onscroll?.apply(this,K)}),jt(j,n),ie(e,z),Yt({resize:b})}bn(["click","keydown"]);function ki(e){if(e.key!=="ArrowLeft"&&e.key!=="ArrowRight")return;e.preventDefault();const t=e.currentTarget.parentElement?.children;if(!t)return;const n=e.currentTarget.nextElementSibling??t[0],r=e.currentTarget.previousElementSibling??t[t.length-1];e.key==="ArrowRight"?n.focus():r.focus()}var Tg=An('<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" d="M4 8a2 2 0 1 1-3.999.001A2 2 0 0 1 4 8m6 0a2 2 0 1 1-3.999.001A2 2 0 0 1 10 8m6 0a2 2 0 1 1-3.999.001A2 2 0 0 1 16 8"></path></svg>');function Eg(e){var t=Tg();ie(e,t)}var Pg=(e,t)=>t("write"),Rg=(e,t)=>t("preview"),Ag=xe('<button type="button"> </button> <button type="button"> </button>',1),Ig=(e,t,n)=>{e.stopPropagation(),e.preventDefault(),t.carta.input&&S(n).action(t.carta.input),t.carta.input?.update(),t.carta.input?.textarea.focus()},Dg=xe('<button class="carta-icon svelte-1c77udu"><!></button>'),Og=(e,t)=>{e.stopPropagation(),e.preventDefault(),ne(t,!S(t))},Lg=xe('<button class="carta-icon svelte-1c77udu"><!></button>'),Mg=xe("<!> <!>",1),jg=(e,t,n,r)=>{e.stopPropagation(),e.preventDefault(),t.carta.input&&S(n).action(t.carta.input),t.carta.input?.update(),t.carta.input?.textarea.focus(),ne(r,!1)},zg=xe('<button class="carta-icon-full svelte-1c77udu"><!> <span> </span></button>'),Ng=xe('<div class="carta-icons-menu svelte-1c77udu"></div>'),Bg=xe('<div class="carta-toolbar svelte-1c77udu" role="toolbar"><div class="carta-toolbar-left svelte-1c77udu"><!></div> <div class="carta-filler svelte-1c77udu"></div> <div class="carta-toolbar-right svelte-1c77udu"><!></div></div> <!>',1);function Fg(e,t){Gt(t,!0);let n=nt(t,"tab",15),r=Pe(void 0),i=Pe(void 0),o=Pe(void 0),s=Pe(Lr([...t.carta.icons])),l=Pe(0),u=Pe(0),f=Pe(0),d=Pe(!1),h=Pe(!1);const g=8,v=()=>new Promise(requestAnimationFrame),b=Hi(async()=>{if(!S(r)||!S(o))return;const X=()=>S(r)?S(r).scrollWidth-S(r).clientWidth>0:!1;for(;X();)S(s).pop(),ne(s,S(s),!0),await v();const te=()=>S(l)>2*S(u)+g;for(;S(s).length<t.carta.icons.length&&te();)S(s).push(t.carta.icons[S(s).length]),ne(s,S(s),!0),await v()},100);function C(X){const te=X.target;S(i)&&!S(i).contains(te)&&ne(h,!1)}Zn(b),hn(()=>{ne(d,S(s).length!==t.carta.icons.length)});var A=Bg();Mn("resize",$o,b),Mn("click",$o,C);var w=ot(A),$=H(w),O=H($);{var z=X=>{var te=Ag(),se=ot(te);ut(se,"tabindex",0),se.__click=[Pg,n],se.__keydown=function(..._e){ki?.apply(this,_e)};var K=H(se,!0);F(se);var Q=J(se,2);ut(Q,"tabindex",-1),Q.__click=[Rg,n],Q.__keydown=function(..._e){ki?.apply(this,_e)};var ye=H(Q,!0);F(Q),Je(()=>{Ht(se,1,ja(n()==="write"?"carta-active":"")),wt(K,t.labels.writeTab),Ht(Q,1,ja(n()==="preview"?"carta-active":"")),wt(ye,t.labels.previewTab)}),ie(X,te)};Le(O,X=>{t.mode=="tabs"&&X(z)})}F($);var V=J($,2),P=J(V,2),W=H(P);{var ae=X=>{var te=Mg(),se=ot(te);Un(se,17,()=>S(s),$n,(ye,_e,Ee)=>{var Be=Dg();const k=mr(()=>t.labels.iconsLabels[S(_e).id]??S(_e).label);ut(Be,"tabindex",Ee==0?0:-1),Be.__click=[Ig,t,_e],Be.__keydown=function(...Se){ki?.apply(this,Se)};var Ce=H(Be);Oi(Ce,()=>S(_e).component,(Se,T)=>{T(Se,{})}),F(Be),Je(()=>{ut(Be,"title",S(k)),ut(Be,"aria-label",S(k))}),Eo(Be,"clientWidth",Se=>ne(u,Se)),ie(ye,Be)});var K=J(se,2);{var Q=ye=>{var _e=Lg();const Ee=mr(()=>t.labels.iconsLabels.menu??"Menu");ut(_e,"tabindex",-1),_e.__keydown=function(...k){ki?.apply(this,k)},_e.__click=[Og,h];var Be=H(_e);Eg(Be),F(_e),Je(()=>{ut(_e,"title",S(Ee)),ut(_e,"aria-label",S(Ee))}),ie(ye,_e)};Le(K,ye=>{S(d)&&ye(Q)})}ie(X,te)};Le(W,X=>{t.mode==="tabs"&&n()==="preview"||X(ae)})}F(P),En(P,X=>ne(o,X),()=>S(o)),F(w),En(w,X=>ne(r,X),()=>S(r));var me=J(w,2);{var j=X=>{var te=Ng();Un(te,21,()=>t.carta.icons.filter(se=>!S(s).includes(se)),$n,(se,K)=>{var Q=zg();const ye=mr(()=>t.labels.iconsLabels[S(K).id]??S(K).label);Q.__click=[jg,t,K,h],Q.__keydown=function(...k){ki?.apply(this,k)};var _e=H(Q);Oi(_e,()=>S(K).component,(k,Ce)=>{Ce(k,{})});var Ee=J(_e,2),Be=H(Ee,!0);F(Ee),F(Q),Je(()=>{ut(Q,"aria-label",S(ye)),wt(Be,S(ye))}),ie(se,Q)}),F(te),En(te,se=>ne(i,se),()=>S(i)),Je(()=>Mr(te,`top: ${S(f)??""}px;`)),ie(X,te)};Le(me,X=>{S(h)&&S(d)&&X(j)})}Eo(V,"clientWidth",X=>ne(l,X)),Eo(w,"clientHeight",X=>ne(f,X)),ie(e,A),Yt()}bn(["click","keydown"]);var $g=xe('<div><!> <div class="carta-wrapper"><div><!> <!></div></div>  <!></div>');function Lf(e,t){Gt(t,!0);let n=nt(t,"theme",3,"default"),r=nt(t,"value",15,""),i=nt(t,"mode",3,"auto"),o=nt(t,"scroll",3,"sync"),s=nt(t,"disableToolbar",3,!1),l=nt(t,"placeholder",3,""),u=nt(t,"textarea",19,()=>({})),f=nt(t,"selectedTab",7,"write"),d=nt(t,"userLabels",19,()=>({})),h=nt(t,"highlightDelay",3,250);const g=mr(()=>({...lg,...d()}));let v=Pe(0),b=Pe(!1),C,A=Pe(void 0),w=Pe(void 0),$,O=0,z=Pe(void 0);const V=mr(()=>i()==="auto"?S(v)&&S(v)>768?"split":"tabs":i());hn(()=>{S(V),S(z)&&S(z).resize()}),hn(()=>{S(A),S(w),j(f())});function P(k){const Ce=k.scrollHeight-k.clientHeight;return k.scrollTop*(1+k.clientHeight/Ce)/k.scrollHeight}const W=Hi(()=>{$=null},1e3);function ae(k){const[Ce,Se]=k.target==S(A)?[S(A),S(w)]:[S(w),S(A)];S(V)=="split"&&o()=="sync"&&Ce&&Se&&me(Ce,Se)}function me(k,Ce){const Se=P(k);if(O=Se,$&&$!=k)return;$=k;const T=Ce.scrollHeight-Ce.clientHeight;Ce.scrollTo({top:Se*T,behavior:"auto"}),W()}function j(k){if(S(V)!=="tabs")return;const Ce=k==="write"?S(A):S(w);if(!Ce)return;const Se=Ce.scrollHeight-Ce.clientHeight;Ce.scroll({top:Se*O,behavior:"instant"})}Zn(()=>t.carta.$setElement(C)),Zn(()=>ne(b,!0));var X=$g(),te=H(X);{var se=k=>{Fg(k,{get carta(){return t.carta},get labels(){return S(g)},get mode(){return S(V)},get tab(){return f()},set tab(Ce){f(Ce)}})};Le(te,k=>{s()||k(se)})}var K=J(te,2),Q=H(K),ye=H(Q);{let k=mr(()=>!(S(V)=="split"||f()=="write"));En(Sg(ye,{get carta(){return t.carta},get placeholder(){return l()},get highlightDelay(){return h()},get props(){return u()},get hidden(){return S(k)},onscroll:ae,get value(){return r()},set value(Ce){r(Ce)},get elem(){return S(A)},set elem(Ce){ne(A,Ce,!0)},children:(Ce,Se)=>{var T=zt(),Ze=ot(T);{var ft=Me=>{var Xe=zt(),rt=ot(Xe);Un(rt,17,()=>t.carta.components.filter(({parent:ve})=>[ve].flat().includes("input")),$n,(ve,bt)=>{let At=()=>S(bt).component,Oe=()=>S(bt).props;var pt=zt(),Jt=ot(pt);Oi(Jt,At,(Fe,it)=>{it(Fe,ua({get carta(){return t.carta}},Oe))}),ie(ve,pt)}),ie(Me,Xe)};Le(Ze,Me=>{S(b)&&Me(ft)})}ie(Ce,T)},$$slots:{default:!0}}),Ce=>ne(z,Ce,!0),()=>S(z))}var _e=J(ye,2);{let k=mr(()=>!(S(V)=="split"||f()=="preview"));cg(_e,{get carta(){return t.carta},get value(){return r()},get hidden(){return S(k)},onscroll:ae,onrender:()=>{S(V)=="split"&&o()=="sync"&&S(A)&&S(w)&&me(S(A),S(w))},get elem(){return S(w)},set elem(Ce){ne(w,Ce,!0)},children:(Ce,Se)=>{var T=zt(),Ze=ot(T);{var ft=Me=>{var Xe=zt(),rt=ot(Xe);Un(rt,17,()=>t.carta.components.filter(({parent:ve})=>[ve].flat().includes("renderer")),$n,(ve,bt)=>{let At=()=>S(bt).component,Oe=()=>S(bt).props;var pt=zt(),Jt=ot(pt);Oi(Jt,At,(Fe,it)=>{it(Fe,ua({get carta(){return t.carta}},Oe))}),ie(ve,pt)}),ie(Me,Xe)};Le(Ze,Me=>{S(b)&&Me(ft)})}ie(Ce,T)},$$slots:{default:!0}})}F(Q),F(K);var Ee=J(K,2);{var Be=k=>{var Ce=zt(),Se=ot(Ce);Un(Se,17,()=>t.carta.components.filter(({parent:T})=>[T].flat().includes("editor")),$n,(T,Ze)=>{let ft=()=>S(Ze).component,Me=()=>S(Ze).props;var Xe=zt(),rt=ot(Xe);Oi(rt,ft,(ve,bt)=>{bt(ve,ua({get carta(){return t.carta}},Me))}),ie(T,Xe)}),ie(k,Ce)};Le(Ee,k=>{S(b)&&k(Be)})}F(X),En(X,k=>C=k,()=>C),Je(()=>{Ht(X,1,`carta-editor carta-theme__${n()??""}`,"svelte-11jlii3"),Ht(Q,1,`carta-container mode-${S(V)??""}`,"svelte-11jlii3")}),Eo(X,"clientWidth",k=>ne(v,k)),ie(e,X),Yt()}function Wu(e){if(e)throw e}var da,Yu;function Ug(){if(Yu)return da;Yu=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var d=e.call(f,"constructor"),h=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!d&&!h)return!1;var g;for(g in f);return typeof g>"u"||e.call(f,g)},s=function(f,d){n&&d.name==="__proto__"?n(f,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):f[d.name]=d.newValue},l=function(f,d){if(d==="__proto__")if(e.call(f,d)){if(r)return r(f,d).value}else return;return f[d]};return da=function u(){var f,d,h,g,v,b,C=arguments[0],A=1,w=arguments.length,$=!1;for(typeof C=="boolean"&&($=C,C=arguments[1]||{},A=2),(C==null||typeof C!="object"&&typeof C!="function")&&(C={});A<w;++A)if(f=arguments[A],f!=null)for(d in f)h=l(C,d),g=l(f,d),C!==g&&($&&g&&(o(g)||(v=i(g)))?(v?(v=!1,b=h&&i(h)?h:[]):b=h&&o(h)?h:{},s(C,{name:d,newValue:u($,b,g)})):typeof g<"u"&&s(C,{name:d,newValue:g}));return C},da}var qg=Ug();const pa=Cl(qg);function Ha(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Hg(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...i);function l(u,...f){const d=e[++o];let h=-1;if(u){s(u);return}for(;++h<i.length;)(f[h]===null||f[h]===void 0)&&(f[h]=i[h]);i=f,d?Kg(d,l)(...f):s(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Kg(e,t){let n;return r;function r(...s){const l=e.length>s.length;let u;l&&s.push(i);try{u=e.apply(this,s)}catch(f){const d=f;if(l&&n)throw d;return i(d)}l||(u&&u.then&&typeof u.then=="function"?u.then(o,i):u instanceof Error?i(u):o(u))}function i(s,...l){n||(n=!0,t(s,...l))}function o(s){i(null,s)}}function Mi(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Gu(e.position):"start"in e||"end"in e?Gu(e):"line"in e||"column"in e?Ka(e):""}function Ka(e){return Ju(e&&e.line)+":"+Ju(e&&e.column)}function Gu(e){return Ka(e&&e.start)+"-"+Ka(e&&e.end)}function Ju(e){return e&&typeof e=="number"?e:1}class xn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(s=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const l=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=Mi(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}xn.prototype.file="";xn.prototype.name="";xn.prototype.reason="";xn.prototype.message="";xn.prototype.stack="";xn.prototype.column=void 0;xn.prototype.line=void 0;xn.prototype.ancestors=void 0;xn.prototype.cause=void 0;xn.prototype.fatal=void 0;xn.prototype.place=void 0;xn.prototype.ruleId=void 0;xn.prototype.source=void 0;const Gn={basename:Vg,dirname:Wg,extname:Yg,join:Gg,sep:"/"};function Vg(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Gi(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function Wg(e){if(Gi(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Yg(e){Gi(e);let t=e.length,n=-1,r=0,i=-1,o=0,s;for(;t--;){const l=e.codePointAt(t);if(l===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),l===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Gg(...e){let t=-1,n;for(;++t<e.length;)Gi(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Jg(n)}function Jg(e){Gi(e);const t=e.codePointAt(0)===47;let n=Zg(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Zg(e,t){let n="",r=0,i=-1,o=0,s=-1,l,u;for(;++s<=e.length;){if(s<e.length)l=e.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else l===46&&o>-1?o++:o=-1}return n}function Gi(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Qg={cwd:Xg};function Xg(){return"/"}function Va(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ev(e){if(typeof e=="string")e=new URL(e);else if(!Va(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return tv(e)}function tv(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const ma=["history","path","basename","stem","extname","dirname"];class nv{constructor(t){let n;t?Va(t)?n={path:t}:typeof t=="string"||rv(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Qg.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ma.length;){const o=ma[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)ma.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Gn.basename(this.path):void 0}set basename(t){va(t,"basename"),ga(t,"basename"),this.path=Gn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Gn.dirname(this.path):void 0}set dirname(t){Zu(this.basename,"dirname"),this.path=Gn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Gn.extname(this.path):void 0}set extname(t){if(ga(t,"extname"),Zu(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Va(t)&&(t=ev(t)),va(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Gn.basename(this.path,this.extname):void 0}set stem(t){va(t,"stem"),ga(t,"stem"),this.path=Gn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new xn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ga(e,t){if(e&&e.includes(Gn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Gn.sep+"`")}function va(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Zu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function rv(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const iv=function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},ov={}.hasOwnProperty;class Tl extends iv{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Hg()}copy(){const t=new Tl;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(pa(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(xa("data",this.frozen),this.namespace[t]=n,this):ov.call(this.namespace,t)&&this.namespace[t]||void 0:t?(xa("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=xo(t),r=this.parser||this.Parser;return ya("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),ya("process",this.parser||this.Parser),ba("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){const l=xo(t),u=r.parse(l);r.run(u,l,function(d,h,g){if(d||!h||!g)return f(d);const v=h,b=r.stringify(v,g);av(b)?g.value=b:g.result=b,f(d,g)});function f(d,h){d||!h?s(d):o?o(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),ya("processSync",this.parser||this.Parser),ba("processSync",this.compiler||this.Compiler),this.process(t,i),ec("processSync","process",n),r;function i(o,s){n=!0,Wu(o),r=s}}run(t,n,r){Xu(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,l){const u=xo(n);i.run(t,u,f);function f(d,h,g){const v=h||t;d?l(d):s?s(v):r(void 0,v,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),ec("runSync","run",r),i;function o(s,l){Wu(s),i=l,r=!0}}stringify(t,n){this.freeze();const r=xo(n),i=this.compiler||this.Compiler;return ba("stringify",i),Xu(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(xa("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")u(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[d,...h]=f;u(d,h)}else s(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function s(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(f.plugins),f.settings&&(i.settings=pa(!0,i.settings,f.settings))}function l(f){let d=-1;if(f!=null)if(Array.isArray(f))for(;++d<f.length;){const h=f[d];o(h)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function u(f,d){let h=-1,g=-1;for(;++h<r.length;)if(r[h][0]===f){g=h;break}if(g===-1)r.push([f,...d]);else if(d.length>0){let[v,...b]=d;const C=r[g][1];Ha(C)&&Ha(v)&&(v=pa(!0,C,v)),r[g]=[f,v,...b]}}}}const Qu=new Tl().freeze();function ya(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function ba(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function xa(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Xu(e){if(!Ha(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ec(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function xo(e){return sv(e)?e:new nv(e)}function sv(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function av(e){return typeof e=="string"||lv(e)}function lv(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const uv={};function El(e,t){const n=uv,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Mf(e,r,i)}function Mf(e,t,n){if(cv(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return tc(e.children,t,n)}return Array.isArray(e)?tc(e,t,n):""}function tc(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Mf(e[i],t,n);return r.join("")}function cv(e){return!!(e&&typeof e=="object")}const nc=document.createElement("i");function Pl(e){const t="&"+e+";";nc.innerHTML=t;const n=nc.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Pn(e,t,n,r){const i=e.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function On(e,t){return e.length>0?(Pn(e,e.length,0,t),e):t}const rc={}.hasOwnProperty;function jf(e){const t={};let n=-1;for(;++n<e.length;)fv(t,e[n]);return t}function fv(e,t){let n;for(n in t){const i=(rc.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){rc.call(i,s)||(i[s]=[]);const l=o[s];hv(i[s],Array.isArray(l)?l:l?[l]:[])}}}function hv(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Pn(e,0,0,r)}function zf(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function qn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fn=_r(/[A-Za-z]/),rn=_r(/[\dA-Za-z]/),dv=_r(/[#-'*+\--9=?A-Z^-~]/);function ss(e){return e!==null&&(e<32||e===127)}const Wa=_r(/\d/),pv=_r(/[\dA-Fa-f]/),mv=_r(/[!-/:-@[-`{-~]/);function Re(e){return e!==null&&e<-2}function yt(e){return e!==null&&(e<0||e===32)}function Ge(e){return e===-2||e===-1||e===32}const xs=_r(/\p{P}|\p{S}/u),zr=_r(/\s/);function _r(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function li(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&rn(e.charCodeAt(n+1))&&rn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const l=e.charCodeAt(n+1);o<56320&&l>56319&&l<57344?(s=String.fromCharCode(o,l),i=1):s="ï¿½"}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function et(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(u){return Ge(u)?(e.enter(n),l(u)):t(u)}function l(u){return Ge(u)&&o++<i?(e.consume(u),l):(e.exit(n),t(u))}}const gv={tokenize:vv};function vv(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),et(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),o(l)}function o(l){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(l)}function s(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Re(l)?(e.consume(l),e.exit("chunkText"),o):(e.consume(l),s)}}const yv={tokenize:bv},ic={tokenize:xv};function bv(e){const t=this,n=[];let r=0,i,o,s;return l;function l(O){if(r<n.length){const z=n[r];return t.containerState=z[1],e.attempt(z[0].continuation,u,f)(O)}return f(O)}function u(O){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&$();const z=t.events.length;let V=z,P;for(;V--;)if(t.events[V][0]==="exit"&&t.events[V][1].type==="chunkFlow"){P=t.events[V][1].end;break}w(r);let W=z;for(;W<t.events.length;)t.events[W][1].end={...P},W++;return Pn(t.events,V+1,0,t.events.slice(z)),t.events.length=W,f(O)}return l(O)}function f(O){if(r===n.length){if(!i)return g(O);if(i.currentConstruct&&i.currentConstruct.concrete)return b(O);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ic,d,h)(O)}function d(O){return i&&$(),w(r),g(O)}function h(O){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,b(O)}function g(O){return t.containerState={},e.attempt(ic,v,b)(O)}function v(O){return r++,n.push([t.currentConstruct,t.containerState]),g(O)}function b(O){if(O===null){i&&$(),w(0),e.consume(O);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),C(O)}function C(O){if(O===null){A(e.exit("chunkFlow"),!0),w(0),e.consume(O);return}return Re(O)?(e.consume(O),A(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(O),C)}function A(O,z){const V=t.sliceStream(O);if(z&&V.push(null),O.previous=o,o&&(o.next=O),o=O,i.defineSkip(O.start),i.write(V),t.parser.lazy[O.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<s&&(!i.events[P][1].end||i.events[P][1].end.offset>s))return;const W=t.events.length;let ae=W,me,j;for(;ae--;)if(t.events[ae][0]==="exit"&&t.events[ae][1].type==="chunkFlow"){if(me){j=t.events[ae][1].end;break}me=!0}for(w(r),P=W;P<t.events.length;)t.events[P][1].end={...j},P++;Pn(t.events,ae+1,0,t.events.slice(W)),t.events.length=P}}function w(O){let z=n.length;for(;z-- >O;){const V=n[z];t.containerState=V[1],V[0].exit.call(t,e)}n.length=O}function $(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function xv(e,t,n){return et(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function oi(e){if(e===null||yt(e)||zr(e))return 1;if(xs(e))return 2}function _s(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Ya={name:"attention",resolveAll:_v,tokenize:kv};function _v(e,t){let n=-1,r,i,o,s,l,u,f,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},g={...e[n][1].start};oc(h,-u),oc(g,u),s={type:u>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},o={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},e[r][1].end={...s.start},e[n][1].start={...l.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=On(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=On(f,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),f=On(f,_s(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=On(f,[["exit",o,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,f=On(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Pn(e,r-1,n-r+3,f),n=r+f.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function kv(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=oi(r);let o;return s;function s(u){return o=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===o)return e.consume(u),l;const f=e.exit("attentionSequence"),d=oi(u),h=!d||d===2&&i||n.includes(u),g=!i||i===2&&d||n.includes(r);return f._open=!!(o===42?h:h&&(i||!g)),f._close=!!(o===42?g:g&&(d||!h)),t(u)}}function oc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wv={name:"autolink",tokenize:Cv};function Cv(e,t,n){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(v){return fn(v)?(e.consume(v),s):v===64?n(v):f(v)}function s(v){return v===43||v===45||v===46||rn(v)?(r=1,l(v)):f(v)}function l(v){return v===58?(e.consume(v),r=0,u):(v===43||v===45||v===46||rn(v))&&r++<32?(e.consume(v),l):(r=0,f(v))}function u(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||ss(v)?n(v):(e.consume(v),u)}function f(v){return v===64?(e.consume(v),d):dv(v)?(e.consume(v),f):n(v)}function d(v){return rn(v)?h(v):n(v)}function h(v){return v===46?(e.consume(v),r=0,d):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):g(v)}function g(v){if((v===45||rn(v))&&r++<63){const b=v===45?g:h;return e.consume(v),b}return n(v)}}const Ji={partial:!0,tokenize:Sv};function Sv(e,t,n){return r;function r(o){return Ge(o)?et(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Re(o)?t(o):n(o)}}const Nf={continuation:{tokenize:Ev},exit:Pv,name:"blockQuote",tokenize:Tv};function Tv(e,t,n){const r=this;return i;function i(s){if(s===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return Ge(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Ev(e,t,n){const r=this;return i;function i(s){return Ge(s)?et(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(Nf,t,n)(s)}}function Pv(e){e.exit("blockQuote")}const Bf={name:"characterEscape",tokenize:Rv};function Rv(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return mv(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Ff={name:"characterReference",tokenize:Av};function Av(e,t,n){const r=this;let i=0,o,s;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),u}function u(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,s=rn,d(h))}function f(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=pv,d):(e.enter("characterReferenceValue"),o=7,s=Wa,d(h))}function d(h){if(h===59&&i){const g=e.exit("characterReferenceValue");return s===rn&&!Pl(r.sliceSerialize(g))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(h)&&i++<o?(e.consume(h),d):n(h)}}const sc={partial:!0,tokenize:Dv},ac={concrete:!0,name:"codeFenced",tokenize:Iv};function Iv(e,t,n){const r=this,i={partial:!0,tokenize:V};let o=0,s=0,l;return u;function u(P){return f(P)}function f(P){const W=r.events[r.events.length-1];return o=W&&W[1].type==="linePrefix"?W[2].sliceSerialize(W[1],!0).length:0,l=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(P)}function d(P){return P===l?(s++,e.consume(P),d):s<3?n(P):(e.exit("codeFencedFenceSequence"),Ge(P)?et(e,h,"whitespace")(P):h(P))}function h(P){return P===null||Re(P)?(e.exit("codeFencedFence"),r.interrupt?t(P):e.check(sc,C,z)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(P))}function g(P){return P===null||Re(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(P)):Ge(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),et(e,v,"whitespace")(P)):P===96&&P===l?n(P):(e.consume(P),g)}function v(P){return P===null||Re(P)?h(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(P))}function b(P){return P===null||Re(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(P)):P===96&&P===l?n(P):(e.consume(P),b)}function C(P){return e.attempt(i,z,A)(P)}function A(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),w}function w(P){return o>0&&Ge(P)?et(e,$,"linePrefix",o+1)(P):$(P)}function $(P){return P===null||Re(P)?e.check(sc,C,z)(P):(e.enter("codeFlowValue"),O(P))}function O(P){return P===null||Re(P)?(e.exit("codeFlowValue"),$(P)):(e.consume(P),O)}function z(P){return e.exit("codeFenced"),t(P)}function V(P,W,ae){let me=0;return j;function j(Q){return P.enter("lineEnding"),P.consume(Q),P.exit("lineEnding"),X}function X(Q){return P.enter("codeFencedFence"),Ge(Q)?et(P,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):te(Q)}function te(Q){return Q===l?(P.enter("codeFencedFenceSequence"),se(Q)):ae(Q)}function se(Q){return Q===l?(me++,P.consume(Q),se):me>=s?(P.exit("codeFencedFenceSequence"),Ge(Q)?et(P,K,"whitespace")(Q):K(Q)):ae(Q)}function K(Q){return Q===null||Re(Q)?(P.exit("codeFencedFence"),W(Q)):ae(Q)}}}function Dv(e,t,n){const r=this;return i;function i(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const _a={name:"codeIndented",tokenize:Lv},Ov={partial:!0,tokenize:Mv};function Lv(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),et(e,o,"linePrefix",5)(f)}function o(f){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?s(f):n(f)}function s(f){return f===null?u(f):Re(f)?e.attempt(Ov,s,u)(f):(e.enter("codeFlowValue"),l(f))}function l(f){return f===null||Re(f)?(e.exit("codeFlowValue"),s(f)):(e.consume(f),l)}function u(f){return e.exit("codeIndented"),t(f)}}function Mv(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):Re(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):et(e,o,"linePrefix",5)(s)}function o(s){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):Re(s)?i(s):n(s)}}const jv={name:"codeText",previous:Nv,resolve:zv,tokenize:Bv};function zv(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Nv(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Bv(e,t,n){let r=0,i,o;return s;function s(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),u(h))}function u(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),u):h===96?(o=e.enter("codeTextSequence"),i=0,d(h)):Re(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("codeTextData"),f(h))}function f(h){return h===null||h===32||h===96||Re(h)?(e.exit("codeTextData"),u(h)):(e.consume(h),f)}function d(h){return h===96?(e.consume(h),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(o.type="codeTextData",f(h))}}class Fv{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&wi(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),wi(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),wi(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);wi(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);wi(this.left,n.reverse())}}}function wi(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function $f(e){const t={};let n=-1,r,i,o,s,l,u,f;const d=new Fv(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,$v(d,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(s=d.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},l=d.slice(i,n),l.unshift(r),d.splice(i,n-i+1,l))}}return Pn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!f}function $v(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,u=[],f={};let d,h,g=-1,v=n,b=0,C=0;const A=[C];for(;v;){for(;e.get(++i)[1]!==v;);o.push(i),v._tokenizer||(d=r.sliceStream(v),v.next||d.push(null),h&&s.defineSkip(v.start),v._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(d),v._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=v,v=v.next}for(v=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(C=g+1,A.push(C),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(s.events=[],v?(v._tokenizer=void 0,v.previous=void 0):A.pop(),g=A.length;g--;){const w=l.slice(A[g],A[g+1]),$=o.pop();u.push([$,$+w.length-1]),e.splice($,2,w)}for(u.reverse(),g=-1;++g<u.length;)f[b+u[g][0]]=b+u[g][1],b+=u[g][1]-u[g][0]-1;return f}const Uv={resolve:Hv,tokenize:Kv},qv={partial:!0,tokenize:Vv};function Hv(e){return $f(e),e}function Kv(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?o(l):Re(l)?e.check(qv,s,o)(l):(e.consume(l),i)}function o(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function s(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Vv(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),et(e,o,"linePrefix")}function o(s){if(s===null||Re(s))return n(s);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function Uf(e,t,n,r,i,o,s,l,u){const f=u||Number.POSITIVE_INFINITY;let d=0;return h;function h(w){return w===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(w),e.exit(o),g):w===null||w===32||w===41||ss(w)?n(w):(e.enter(r),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),C(w))}function g(w){return w===62?(e.enter(o),e.consume(w),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),v(w))}function v(w){return w===62?(e.exit("chunkString"),e.exit(l),g(w)):w===null||w===60||Re(w)?n(w):(e.consume(w),w===92?b:v)}function b(w){return w===60||w===62||w===92?(e.consume(w),v):v(w)}function C(w){return!d&&(w===null||w===41||yt(w))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(r),t(w)):d<f&&w===40?(e.consume(w),d++,C):w===41?(e.consume(w),d--,C):w===null||w===32||w===40||ss(w)?n(w):(e.consume(w),w===92?A:C)}function A(w){return w===40||w===41||w===92?(e.consume(w),C):C(w)}}function qf(e,t,n,r,i,o){const s=this;let l=0,u;return f;function f(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(o),d}function d(v){return l>999||v===null||v===91||v===93&&!u||v===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(v):v===93?(e.exit(o),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):Re(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===null||v===91||v===93||Re(v)||l++>999?(e.exit("chunkString"),d(v)):(e.consume(v),u||(u=!Ge(v)),v===92?g:h)}function g(v){return v===91||v===92||v===93?(e.consume(v),l++,h):h(v)}}function Hf(e,t,n,r,i,o){let s;return l;function l(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),s=g===40?41:g,u):n(g)}function u(g){return g===s?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(o),f(g))}function f(g){return g===s?(e.exit(o),u(s)):g===null?n(g):Re(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),et(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===s||g===null||Re(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?h:d)}function h(g){return g===s||g===92?(e.consume(g),d):d(g)}}function ji(e,t){let n;return r;function r(i){return Re(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ge(i)?et(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Wv={name:"definition",tokenize:Gv},Yv={partial:!0,tokenize:Jv};function Gv(e,t,n){const r=this;let i;return o;function o(v){return e.enter("definition"),s(v)}function s(v){return qf.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function l(v){return i=qn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),u):n(v)}function u(v){return yt(v)?ji(e,f)(v):f(v)}function f(v){return Uf(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function d(v){return e.attempt(Yv,h,h)(v)}function h(v){return Ge(v)?et(e,g,"whitespace")(v):g(v)}function g(v){return v===null||Re(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):n(v)}}function Jv(e,t,n){return r;function r(l){return yt(l)?ji(e,i)(l):n(l)}function i(l){return Hf(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function o(l){return Ge(l)?et(e,s,"whitespace")(l):s(l)}function s(l){return l===null||Re(l)?t(l):n(l)}}const Zv={name:"hardBreakEscape",tokenize:Qv};function Qv(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Re(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const Xv={name:"headingAtx",resolve:e1,tokenize:t1};function e1(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Pn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function t1(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),o(d)}function o(d){return e.enter("atxHeadingSequence"),s(d)}function s(d){return d===35&&r++<6?(e.consume(d),s):d===null||yt(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),u(d)):d===null||Re(d)?(e.exit("atxHeading"),t(d)):Ge(d)?et(e,l,"whitespace")(d):(e.enter("atxHeadingText"),f(d))}function u(d){return d===35?(e.consume(d),u):(e.exit("atxHeadingSequence"),l(d))}function f(d){return d===null||d===35||yt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),f)}}const n1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lc=["pre","script","style","textarea"],r1={concrete:!0,name:"htmlFlow",resolveTo:s1,tokenize:a1},i1={partial:!0,tokenize:u1},o1={partial:!0,tokenize:l1};function s1(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function a1(e,t,n){const r=this;let i,o,s,l,u;return f;function f(T){return d(T)}function d(T){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(T),h}function h(T){return T===33?(e.consume(T),g):T===47?(e.consume(T),o=!0,C):T===63?(e.consume(T),i=3,r.interrupt?t:k):fn(T)?(e.consume(T),s=String.fromCharCode(T),A):n(T)}function g(T){return T===45?(e.consume(T),i=2,v):T===91?(e.consume(T),i=5,l=0,b):fn(T)?(e.consume(T),i=4,r.interrupt?t:k):n(T)}function v(T){return T===45?(e.consume(T),r.interrupt?t:k):n(T)}function b(T){const Ze="CDATA[";return T===Ze.charCodeAt(l++)?(e.consume(T),l===Ze.length?r.interrupt?t:te:b):n(T)}function C(T){return fn(T)?(e.consume(T),s=String.fromCharCode(T),A):n(T)}function A(T){if(T===null||T===47||T===62||yt(T)){const Ze=T===47,ft=s.toLowerCase();return!Ze&&!o&&lc.includes(ft)?(i=1,r.interrupt?t(T):te(T)):n1.includes(s.toLowerCase())?(i=6,Ze?(e.consume(T),w):r.interrupt?t(T):te(T)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):o?$(T):O(T))}return T===45||rn(T)?(e.consume(T),s+=String.fromCharCode(T),A):n(T)}function w(T){return T===62?(e.consume(T),r.interrupt?t:te):n(T)}function $(T){return Ge(T)?(e.consume(T),$):j(T)}function O(T){return T===47?(e.consume(T),j):T===58||T===95||fn(T)?(e.consume(T),z):Ge(T)?(e.consume(T),O):j(T)}function z(T){return T===45||T===46||T===58||T===95||rn(T)?(e.consume(T),z):V(T)}function V(T){return T===61?(e.consume(T),P):Ge(T)?(e.consume(T),V):O(T)}function P(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),u=T,W):Ge(T)?(e.consume(T),P):ae(T)}function W(T){return T===u?(e.consume(T),u=null,me):T===null||Re(T)?n(T):(e.consume(T),W)}function ae(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||yt(T)?V(T):(e.consume(T),ae)}function me(T){return T===47||T===62||Ge(T)?O(T):n(T)}function j(T){return T===62?(e.consume(T),X):n(T)}function X(T){return T===null||Re(T)?te(T):Ge(T)?(e.consume(T),X):n(T)}function te(T){return T===45&&i===2?(e.consume(T),ye):T===60&&i===1?(e.consume(T),_e):T===62&&i===4?(e.consume(T),Ce):T===63&&i===3?(e.consume(T),k):T===93&&i===5?(e.consume(T),Be):Re(T)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(i1,Se,se)(T)):T===null||Re(T)?(e.exit("htmlFlowData"),se(T)):(e.consume(T),te)}function se(T){return e.check(o1,K,Se)(T)}function K(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),Q}function Q(T){return T===null||Re(T)?se(T):(e.enter("htmlFlowData"),te(T))}function ye(T){return T===45?(e.consume(T),k):te(T)}function _e(T){return T===47?(e.consume(T),s="",Ee):te(T)}function Ee(T){if(T===62){const Ze=s.toLowerCase();return lc.includes(Ze)?(e.consume(T),Ce):te(T)}return fn(T)&&s.length<8?(e.consume(T),s+=String.fromCharCode(T),Ee):te(T)}function Be(T){return T===93?(e.consume(T),k):te(T)}function k(T){return T===62?(e.consume(T),Ce):T===45&&i===2?(e.consume(T),k):te(T)}function Ce(T){return T===null||Re(T)?(e.exit("htmlFlowData"),Se(T)):(e.consume(T),Ce)}function Se(T){return e.exit("htmlFlow"),t(T)}}function l1(e,t,n){const r=this;return i;function i(s){return Re(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function u1(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ji,t,n)}}const c1={name:"htmlText",tokenize:f1};function f1(e,t,n){const r=this;let i,o,s;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),u}function u(k){return k===33?(e.consume(k),f):k===47?(e.consume(k),V):k===63?(e.consume(k),O):fn(k)?(e.consume(k),ae):n(k)}function f(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),o=0,b):fn(k)?(e.consume(k),$):n(k)}function d(k){return k===45?(e.consume(k),v):n(k)}function h(k){return k===null?n(k):k===45?(e.consume(k),g):Re(k)?(s=h,_e(k)):(e.consume(k),h)}function g(k){return k===45?(e.consume(k),v):h(k)}function v(k){return k===62?ye(k):k===45?g(k):h(k)}function b(k){const Ce="CDATA[";return k===Ce.charCodeAt(o++)?(e.consume(k),o===Ce.length?C:b):n(k)}function C(k){return k===null?n(k):k===93?(e.consume(k),A):Re(k)?(s=C,_e(k)):(e.consume(k),C)}function A(k){return k===93?(e.consume(k),w):C(k)}function w(k){return k===62?ye(k):k===93?(e.consume(k),w):C(k)}function $(k){return k===null||k===62?ye(k):Re(k)?(s=$,_e(k)):(e.consume(k),$)}function O(k){return k===null?n(k):k===63?(e.consume(k),z):Re(k)?(s=O,_e(k)):(e.consume(k),O)}function z(k){return k===62?ye(k):O(k)}function V(k){return fn(k)?(e.consume(k),P):n(k)}function P(k){return k===45||rn(k)?(e.consume(k),P):W(k)}function W(k){return Re(k)?(s=W,_e(k)):Ge(k)?(e.consume(k),W):ye(k)}function ae(k){return k===45||rn(k)?(e.consume(k),ae):k===47||k===62||yt(k)?me(k):n(k)}function me(k){return k===47?(e.consume(k),ye):k===58||k===95||fn(k)?(e.consume(k),j):Re(k)?(s=me,_e(k)):Ge(k)?(e.consume(k),me):ye(k)}function j(k){return k===45||k===46||k===58||k===95||rn(k)?(e.consume(k),j):X(k)}function X(k){return k===61?(e.consume(k),te):Re(k)?(s=X,_e(k)):Ge(k)?(e.consume(k),X):me(k)}function te(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),i=k,se):Re(k)?(s=te,_e(k)):Ge(k)?(e.consume(k),te):(e.consume(k),K)}function se(k){return k===i?(e.consume(k),i=void 0,Q):k===null?n(k):Re(k)?(s=se,_e(k)):(e.consume(k),se)}function K(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||yt(k)?me(k):(e.consume(k),K)}function Q(k){return k===47||k===62||yt(k)?me(k):n(k)}function ye(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function _e(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),Ee}function Ee(k){return Ge(k)?et(e,Be,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):Be(k)}function Be(k){return e.enter("htmlTextData"),s(k)}}const Rl={name:"labelEnd",resolveAll:m1,resolveTo:g1,tokenize:v1},h1={tokenize:y1},d1={tokenize:b1},p1={tokenize:x1};function m1(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Pn(e,0,e.length,n),e}function g1(e,t){let n=e.length,r=0,i,o,s,l;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const u={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[s][1].end}},d={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[s-2][1].start}};return l=[["enter",u,t],["enter",f,t]],l=On(l,e.slice(o+1,o+r+3)),l=On(l,[["enter",d,t]]),l=On(l,_s(t.parser.constructs.insideSpan.null,e.slice(o+r+4,s-3),t)),l=On(l,[["exit",d,t],e[s-2],e[s-1],["exit",f,t]]),l=On(l,e.slice(s+1)),l=On(l,[["exit",u,t]]),Pn(e,o,e.length,l),e}function v1(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return l;function l(g){return o?o._inactive?h(g):(s=r.parser.defined.includes(qn(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),u):n(g)}function u(g){return g===40?e.attempt(h1,d,s?d:h)(g):g===91?e.attempt(d1,d,s?f:h)(g):s?d(g):h(g)}function f(g){return e.attempt(p1,d,h)(g)}function d(g){return t(g)}function h(g){return o._balanced=!0,n(g)}}function y1(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return yt(h)?ji(e,o)(h):o(h)}function o(h){return h===41?d(h):Uf(e,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return yt(h)?ji(e,u)(h):d(h)}function l(h){return n(h)}function u(h){return h===34||h===39||h===40?Hf(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function f(h){return yt(h)?ji(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function b1(e,t,n){const r=this;return i;function i(l){return qf.call(r,e,o,s,"reference","referenceMarker","referenceString")(l)}function o(l){return r.parser.defined.includes(qn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function s(l){return n(l)}}function x1(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const _1={name:"labelStartImage",resolveAll:Rl.resolveAll,tokenize:k1};function k1(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),o}function o(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),s):n(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const w1={name:"labelStartLink",resolveAll:Rl.resolveAll,tokenize:C1};function C1(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const ka={name:"lineEnding",tokenize:S1};function S1(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),et(e,t,"linePrefix")}}const Do={name:"thematicBreak",tokenize:T1};function T1(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),s(f)}function s(f){return i=f,l(f)}function l(f){return f===i?(e.enter("thematicBreakSequence"),u(f)):r>=3&&(f===null||Re(f))?(e.exit("thematicBreak"),t(f)):n(f)}function u(f){return f===i?(e.consume(f),r++,u):(e.exit("thematicBreakSequence"),Ge(f)?et(e,l,"whitespace")(f):l(f))}}const vn={continuation:{tokenize:A1},exit:D1,name:"list",tokenize:R1},E1={partial:!0,tokenize:O1},P1={partial:!0,tokenize:I1};function R1(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return l;function l(v){const b=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:Wa(v)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(Do,n,f)(v):f(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(v)}return n(v)}function u(v){return Wa(v)&&++s<10?(e.consume(v),u):(!r.interrupt||s<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),f(v)):n(v)}function f(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(Ji,r.interrupt?n:d,e.attempt(E1,g,h))}function d(v){return r.containerState.initialBlankLine=!0,o++,g(v)}function h(v){return Ge(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),g):n(v)}function g(v){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function A1(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ji,i,o);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,et(e,t,"listItemIndent",r.containerState.size+1)(l)}function o(l){return r.containerState.furtherBlankLines||!Ge(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(P1,t,s)(l))}function s(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,et(e,e.attempt(vn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function I1(e,t,n){const r=this;return et(e,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):n(o)}}function D1(e){e.exit(this.containerState.type)}function O1(e,t,n){const r=this;return et(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const s=r.events[r.events.length-1];return!Ge(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const uc={name:"setextUnderline",resolveTo:L1,tokenize:M1};function L1(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=s,e.push(["exit",s,t]),e}function M1(e,t,n){const r=this;let i;return o;function o(f){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=f,s(f)):n(f)}function s(f){return e.enter("setextHeadingLineSequence"),l(f)}function l(f){return f===i?(e.consume(f),l):(e.exit("setextHeadingLineSequence"),Ge(f)?et(e,u,"lineSuffix")(f):u(f))}function u(f){return f===null||Re(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const j1={tokenize:z1};function z1(e){const t=this,n=e.attempt(Ji,r,e.attempt(this.parser.constructs.flowInitial,i,et(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Uv,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const N1={resolveAll:Vf()},B1=Kf("string"),F1=Kf("text");function Kf(e){return{resolveAll:Vf(e==="text"?$1:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,s,l);return s;function s(d){return f(d)?o(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return f(d)?(n.exit("data"),o(d)):(n.consume(d),u)}function f(d){if(d===null)return!0;const h=i[d];let g=-1;if(h)for(;++g<h.length;){const v=h[g];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function Vf(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function $1(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,s=-1,l=0,u;for(;o--;){const f=i[o];if(typeof f=="string"){for(s=f.length;f.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(f===-2)u=!0,l++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const f={type:n===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:r.start._bufferIndex+s,_index:r.start._index+o,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const U1={42:vn,43:vn,45:vn,48:vn,49:vn,50:vn,51:vn,52:vn,53:vn,54:vn,55:vn,56:vn,57:vn,62:Nf},q1={91:Wv},H1={[-2]:_a,[-1]:_a,32:_a},K1={35:Xv,42:Do,45:[uc,Do],60:r1,61:uc,95:Do,96:ac,126:ac},V1={38:Ff,92:Bf},W1={[-5]:ka,[-4]:ka,[-3]:ka,33:_1,38:Ff,42:Ya,60:[wv,c1],91:w1,92:[Zv,Bf],93:Rl,95:Ya,96:jv},Y1={null:[Ya,N1]},G1={null:[42,95]},J1={null:[]},Z1=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:G1,contentInitial:q1,disable:J1,document:U1,flow:K1,flowInitial:H1,insideSpan:Y1,string:V1,text:W1},Symbol.toStringTag,{value:"Module"}));function Q1(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let s=[],l=[];const u={attempt:W(V),check:W(P),consume:$,enter:O,exit:z,interrupt:W(P,{interrupt:!0})},f={code:null,containerState:{},defineSkip:C,events:[],now:b,parser:e,previous:null,sliceSerialize:g,sliceStream:v,write:h};let d=t.tokenize.call(f,u);return t.resolveAll&&o.push(t),f;function h(X){return s=On(s,X),A(),s[s.length-1]!==null?[]:(ae(t,0),f.events=_s(o,f.events,f),f.events)}function g(X,te){return e0(v(X),te)}function v(X){return X1(s,X)}function b(){const{_bufferIndex:X,_index:te,line:se,column:K,offset:Q}=r;return{_bufferIndex:X,_index:te,line:se,column:K,offset:Q}}function C(X){i[X.line]=X.column,j()}function A(){let X;for(;r._index<s.length;){const te=s[r._index];if(typeof te=="string")for(X=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===X&&r._bufferIndex<te.length;)w(te.charCodeAt(r._bufferIndex));else w(te)}}function w(X){d=d(X)}function $(X){Re(X)?(r.line++,r.column=1,r.offset+=X===-3?2:1,j()):X!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=X}function O(X,te){const se=te||{};return se.type=X,se.start=b(),f.events.push(["enter",se,f]),l.push(se),se}function z(X){const te=l.pop();return te.end=b(),f.events.push(["exit",te,f]),te}function V(X,te){ae(X,te.from)}function P(X,te){te.restore()}function W(X,te){return se;function se(K,Q,ye){let _e,Ee,Be,k;return Array.isArray(K)?Se(K):"tokenize"in K?Se([K]):Ce(K);function Ce(Me){return Xe;function Xe(rt){const ve=rt!==null&&Me[rt],bt=rt!==null&&Me.null,At=[...Array.isArray(ve)?ve:ve?[ve]:[],...Array.isArray(bt)?bt:bt?[bt]:[]];return Se(At)(rt)}}function Se(Me){return _e=Me,Ee=0,Me.length===0?ye:T(Me[Ee])}function T(Me){return Xe;function Xe(rt){return k=me(),Be=Me,Me.partial||(f.currentConstruct=Me),Me.name&&f.parser.constructs.disable.null.includes(Me.name)?ft():Me.tokenize.call(te?Object.assign(Object.create(f),te):f,u,Ze,ft)(rt)}}function Ze(Me){return X(Be,k),Q}function ft(Me){return k.restore(),++Ee<_e.length?T(_e[Ee]):ye}}}function ae(X,te){X.resolveAll&&!o.includes(X)&&o.push(X),X.resolve&&Pn(f.events,te,f.events.length-te,X.resolve(f.events.slice(te),f)),X.resolveTo&&(f.events=X.resolveTo(f.events,f))}function me(){const X=b(),te=f.previous,se=f.currentConstruct,K=f.events.length,Q=Array.from(l);return{from:K,restore:ye};function ye(){r=X,f.previous=te,f.currentConstruct=se,f.events.length=K,l=Q,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function X1(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}function e0(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}function t0(e){const r={constructs:jf([Z1,...(e||{}).extensions||[]]),content:i(gv),defined:[],document:i(yv),flow:i(j1),lazy:{},string:i(B1),text:i(F1)};return r;function i(o){return s;function s(l){return Q1(r,o,l)}}}function n0(e){for(;!$f(e););return e}const cc=/[\0\t\n\r]/g;function r0(){let e=1,t="",n=!0,r;return i;function i(o,s,l){const u=[];let f,d,h,g,v;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),h=0,t="",n&&(o.charCodeAt(0)===65279&&h++,n=void 0);h<o.length;){if(cc.lastIndex=h,f=cc.exec(o),g=f&&f.index!==void 0?f.index:o.length,v=o.charCodeAt(g),!f){t=o.slice(h);break}if(v===10&&h===g&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),h<g&&(u.push(o.slice(h,g)),e+=g-h),v){case 0:{u.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,u.push(-2);e++<d;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}h=g+1}return l&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const i0=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function o0(e){return e.replace(i0,s0)}function s0(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return zf(n.slice(o?2:1),o?16:10)}return Pl(n)||e}const Wf={}.hasOwnProperty;function a0(e,t,n){return typeof t!="string"&&(n=t,t=void 0),l0(n)(n0(t0(n).document().write(r0()(e,t,!0))))}function l0(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(pn),autolinkProtocol:me,autolinkEmail:me,atxHeading:o(Fe),blockQuote:o(bt),characterEscape:me,characterReference:me,codeFenced:o(At),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(At,s),codeText:o(Oe,s),codeTextData:me,data:me,codeFlowValue:me,definition:o(pt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Jt),hardBreakEscape:o(it),hardBreakTrailing:o(it),htmlFlow:o(xt,s),htmlFlowData:me,htmlText:o(xt,s),htmlTextData:me,image:o(It),label:s,link:o(pn),listItem:o(je),listItemValue:g,listOrdered:o(In,h),listUnordered:o(In),paragraph:o(Ct),reference:T,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Fe),strong:o($t),thematicBreak:o(mn)},exit:{atxHeading:u(),atxHeadingSequence:V,autolink:u(),autolinkEmail:ve,autolinkProtocol:rt,blockQuote:u(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:ft,characterReferenceMarkerNumeric:ft,characterReferenceValue:Me,characterReference:Xe,codeFenced:u(A),codeFencedFence:C,codeFencedFenceInfo:v,codeFencedFenceMeta:b,codeFlowValue:j,codeIndented:u(w),codeText:u(Q),codeTextData:j,data:j,definition:u(),definitionDestinationString:z,definitionLabelString:$,definitionTitleString:O,emphasis:u(),hardBreakEscape:u(te),hardBreakTrailing:u(te),htmlFlow:u(se),htmlFlowData:j,htmlText:u(K),htmlTextData:j,image:u(_e),label:Be,labelText:Ee,lineEnding:X,link:u(ye),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Ze,resourceDestinationString:k,resourceTitleString:Ce,resource:Se,setextHeading:u(ae),setextHeadingLineSequence:W,setextHeadingText:P,strong:u(),thematicBreak:u()}};Yf(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ee){let oe={type:"root",children:[]};const Te={stack:[oe],tokenStack:[],config:t,enter:l,exit:f,buffer:s,resume:d,data:n},Ie=[];let qe=-1;for(;++qe<ee.length;)if(ee[qe][1].type==="listOrdered"||ee[qe][1].type==="listUnordered")if(ee[qe][0]==="enter")Ie.push(qe);else{const st=Ie.pop();qe=i(ee,st,qe)}for(qe=-1;++qe<ee.length;){const st=t[ee[qe][0]];Wf.call(st,ee[qe][1].type)&&st[ee[qe][1].type].call(Object.assign({sliceSerialize:ee[qe][2].sliceSerialize},Te),ee[qe][1])}if(Te.tokenStack.length>0){const st=Te.tokenStack[Te.tokenStack.length-1];(st[1]||fc).call(Te,void 0,st[0])}for(oe.position={start:hr(ee.length>0?ee[0][1].start:{line:1,column:1,offset:0}),end:hr(ee.length>0?ee[ee.length-2][1].end:{line:1,column:1,offset:0})},qe=-1;++qe<t.transforms.length;)oe=t.transforms[qe](oe)||oe;return oe}function i(ee,oe,Te){let Ie=oe-1,qe=-1,st=!1,mt,gt,Et,vt;for(;++Ie<=Te;){const de=ee[Ie];switch(de[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{de[0]==="enter"?qe++:qe--,vt=void 0;break}case"lineEndingBlank":{de[0]==="enter"&&(mt&&!vt&&!qe&&!Et&&(Et=Ie),vt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vt=void 0}if(!qe&&de[0]==="enter"&&de[1].type==="listItemPrefix"||qe===-1&&de[0]==="exit"&&(de[1].type==="listUnordered"||de[1].type==="listOrdered")){if(mt){let St=Ie;for(gt=void 0;St--;){const at=ee[St];if(at[1].type==="lineEnding"||at[1].type==="lineEndingBlank"){if(at[0]==="exit")continue;gt&&(ee[gt][1].type="lineEndingBlank",st=!0),at[1].type="lineEnding",gt=St}else if(!(at[1].type==="linePrefix"||at[1].type==="blockQuotePrefix"||at[1].type==="blockQuotePrefixWhitespace"||at[1].type==="blockQuoteMarker"||at[1].type==="listItemIndent"))break}Et&&(!gt||Et<gt)&&(mt._spread=!0),mt.end=Object.assign({},gt?ee[gt][1].start:de[1].end),ee.splice(gt||Ie,0,["exit",mt,de[2]]),Ie++,Te++}if(de[1].type==="listItemPrefix"){const St={type:"listItem",_spread:!1,start:Object.assign({},de[1].start),end:void 0};mt=St,ee.splice(Ie,0,["enter",St,de[2]]),Ie++,Te++,Et=void 0,vt=!0}}}return ee[oe][1]._spread=st,Te}function o(ee,oe){return Te;function Te(Ie){l.call(this,ee(Ie),Ie),oe&&oe.call(this,Ie)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(ee,oe,Te){this.stack[this.stack.length-1].children.push(ee),this.stack.push(ee),this.tokenStack.push([oe,Te||void 0]),ee.position={start:hr(oe.start),end:void 0}}function u(ee){return oe;function oe(Te){ee&&ee.call(this,Te),f.call(this,Te)}}function f(ee,oe){const Te=this.stack.pop(),Ie=this.tokenStack.pop();if(Ie)Ie[0].type!==ee.type&&(oe?oe.call(this,ee,Ie[0]):(Ie[1]||fc).call(this,ee,Ie[0]));else throw new Error("Cannot close `"+ee.type+"` ("+Mi({start:ee.start,end:ee.end})+"): itâs not open");Te.position.end=hr(ee.end)}function d(){return El(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function g(ee){if(this.data.expectingFirstListItemValue){const oe=this.stack[this.stack.length-2];oe.start=Number.parseInt(this.sliceSerialize(ee),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.lang=ee}function b(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.meta=ee}function C(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee.replace(/(\r?\n|\r)$/g,"")}function $(ee){const oe=this.resume(),Te=this.stack[this.stack.length-1];Te.label=oe,Te.identifier=qn(this.sliceSerialize(ee)).toLowerCase()}function O(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.title=ee}function z(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.url=ee}function V(ee){const oe=this.stack[this.stack.length-1];if(!oe.depth){const Te=this.sliceSerialize(ee).length;oe.depth=Te}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function W(ee){const oe=this.stack[this.stack.length-1];oe.depth=this.sliceSerialize(ee).codePointAt(0)===61?1:2}function ae(){this.data.setextHeadingSlurpLineEnding=void 0}function me(ee){const Te=this.stack[this.stack.length-1].children;let Ie=Te[Te.length-1];(!Ie||Ie.type!=="text")&&(Ie=Qt(),Ie.position={start:hr(ee.start),end:void 0},Te.push(Ie)),this.stack.push(Ie)}function j(ee){const oe=this.stack.pop();oe.value+=this.sliceSerialize(ee),oe.position.end=hr(ee.end)}function X(ee){const oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Te=oe.children[oe.children.length-1];Te.position.end=hr(ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(oe.type)&&(me.call(this,ee),j.call(this,ee))}function te(){this.data.atHardBreak=!0}function se(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee}function K(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee}function Q(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee}function ye(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=oe,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function _e(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=oe,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function Ee(ee){const oe=this.sliceSerialize(ee),Te=this.stack[this.stack.length-2];Te.label=o0(oe),Te.identifier=qn(oe).toLowerCase()}function Be(){const ee=this.stack[this.stack.length-1],oe=this.resume(),Te=this.stack[this.stack.length-1];if(this.data.inReference=!0,Te.type==="link"){const Ie=ee.children;Te.children=Ie}else Te.alt=oe}function k(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.url=ee}function Ce(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.title=ee}function Se(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function Ze(ee){const oe=this.resume(),Te=this.stack[this.stack.length-1];Te.label=oe,Te.identifier=qn(this.sliceSerialize(ee)).toLowerCase(),this.data.referenceType="full"}function ft(ee){this.data.characterReferenceType=ee.type}function Me(ee){const oe=this.sliceSerialize(ee),Te=this.data.characterReferenceType;let Ie;Te?(Ie=zf(oe,Te==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ie=Pl(oe);const qe=this.stack[this.stack.length-1];qe.value+=Ie}function Xe(ee){const oe=this.stack.pop();oe.position.end=hr(ee.end)}function rt(ee){j.call(this,ee);const oe=this.stack[this.stack.length-1];oe.url=this.sliceSerialize(ee)}function ve(ee){j.call(this,ee);const oe=this.stack[this.stack.length-1];oe.url="mailto:"+this.sliceSerialize(ee)}function bt(){return{type:"blockquote",children:[]}}function At(){return{type:"code",lang:null,meta:null,value:""}}function Oe(){return{type:"inlineCode",value:""}}function pt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Jt(){return{type:"emphasis",children:[]}}function Fe(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function xt(){return{type:"html",value:""}}function It(){return{type:"image",title:null,url:"",alt:null}}function pn(){return{type:"link",title:null,url:"",children:[]}}function In(ee){return{type:"list",ordered:ee.type==="listOrdered",start:null,spread:ee._spread,children:[]}}function je(ee){return{type:"listItem",spread:ee._spread,checked:null,children:[]}}function Ct(){return{type:"paragraph",children:[]}}function $t(){return{type:"strong",children:[]}}function Qt(){return{type:"text",value:""}}function mn(){return{type:"thematicBreak"}}}function hr(e){return{line:e.line,column:e.column,offset:e.offset}}function Yf(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Yf(e,r):u0(e,r)}}function u0(e,t){let n;for(n in t)if(Wf.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function fc(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Mi({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Mi({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Mi({start:t.start,end:t.end})+") is still open")}function hc(e){const t=this;t.parser=n;function n(r){return a0(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function as(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function c0(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const ks=function(e){if(e==null)return p0;if(typeof e=="function")return ws(e);if(typeof e=="object")return Array.isArray(e)?f0(e):h0(e);if(typeof e=="string")return d0(e);throw new Error("Expected function, string, or object as test")};function f0(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ks(e[n]);return ws(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function h0(e){const t=e;return ws(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function d0(e){return ws(t);function t(n){return n&&n.type===e}}function ws(e){return t;function t(n,r,i){return!!(m0(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function p0(){return!0}function m0(e){return e!==null&&typeof e=="object"&&"type"in e}const Gf=[],g0=!0,Ga=!1,v0="skip";function Jf(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=ks(i),s=r?-1:1;l(e,void 0,[])();function l(u,f,d){const h=u&&typeof u=="object"?u:{};if(typeof h.type=="string"){const v=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(v?"<"+v+">":""))+")"})}return g;function g(){let v=Gf,b,C,A;if((!t||o(u,f,d[d.length-1]||void 0))&&(v=y0(n(u,d)),v[0]===Ga))return v;if("children"in u&&u.children){const w=u;if(w.children&&v[0]!==v0)for(C=(r?w.children.length:-1)+s,A=d.concat(w);C>-1&&C<w.children.length;){const $=w.children[C];if(b=l($,C,A)(),b[0]===Ga)return b;C=typeof b[1]=="number"?b[1]:C+s}}return v}}}function y0(e){return Array.isArray(e)?e:typeof e=="number"?[g0,e]:e==null?Gf:[e]}function b0(e,t,n){const i=ks((n||{}).ignore||[]),o=x0(t);let s=-1;for(;++s<o.length;)Jf(e,"text",l);function l(f,d){let h=-1,g;for(;++h<d.length;){const v=d[h],b=g?g.children:void 0;if(i(v,b?b.indexOf(v):void 0,g))return;g=v}if(g)return u(f,d)}function u(f,d){const h=d[d.length-1],g=o[s][0],v=o[s][1];let b=0;const A=h.children.indexOf(f);let w=!1,$=[];g.lastIndex=0;let O=g.exec(f.value);for(;O;){const z=O.index,V={index:O.index,input:O.input,stack:[...d,f]};let P=v(...O,V);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?g.lastIndex=z+1:(b!==z&&$.push({type:"text",value:f.value.slice(b,z)}),Array.isArray(P)?$.push(...P):P&&$.push(P),b=z+O[0].length,w=!0),!g.global)break;O=g.exec(f.value)}return w?(b<f.value.length&&$.push({type:"text",value:f.value.slice(b)}),h.children.splice(A,1,...$)):$=[f],A+$.length}}function x0(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([_0(i[0]),k0(i[1])])}return t}function _0(e){return typeof e=="string"?new RegExp(c0(e),"g"):e}function k0(e){return typeof e=="function"?e:function(){return e}}const wa="phrasing",Ca=["autolink","link","image","label"];function w0(){return{transforms:[A0],enter:{literalAutolink:S0,literalAutolinkEmail:Sa,literalAutolinkHttp:Sa,literalAutolinkWww:Sa},exit:{literalAutolink:R0,literalAutolinkEmail:P0,literalAutolinkHttp:T0,literalAutolinkWww:E0}}}function C0(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:wa,notInConstruct:Ca},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:wa,notInConstruct:Ca},{character:":",before:"[ps]",after:"\\/",inConstruct:wa,notInConstruct:Ca}]}}function S0(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Sa(e){this.config.enter.autolinkProtocol.call(this,e)}function T0(e){this.config.exit.autolinkProtocol.call(this,e)}function E0(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function P0(e){this.config.exit.autolinkEmail.call(this,e)}function R0(e){this.exit(e)}function A0(e){b0(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,I0],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,D0]],{ignore:["link","linkReference"]})}function I0(e,t,n,r,i){let o="";if(!Zf(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!O0(n)))return!1;const s=L0(n+r);if(!s[0])return!1;const l={type:"link",title:null,url:o+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function D0(e,t,n,r){return!Zf(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function O0(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function L0(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=as(e,"(");let o=as(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Zf(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||zr(n)||xs(n))&&(!t||n!==47)}Qf.peek=q0;function M0(){this.buffer()}function j0(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function z0(){this.buffer()}function N0(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function B0(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=qn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function F0(e){this.exit(e)}function $0(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=qn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function U0(e){this.exit(e)}function q0(){return"["}function Qf(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const s=n.enter("footnoteReference"),l=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),l(),s(),o+=i.move("]"),o}function H0(){return{enter:{gfmFootnoteCallString:M0,gfmFootnoteCall:j0,gfmFootnoteDefinitionLabelString:z0,gfmFootnoteDefinition:N0},exit:{gfmFootnoteCallString:B0,gfmFootnoteCall:F0,gfmFootnoteDefinitionLabelString:$0,gfmFootnoteDefinition:U0}}}function K0(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Qf},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,s){const l=o.createTracker(s);let u=l.move("[^");const f=o.enter("footnoteDefinition"),d=o.enter("label");return u+=l.move(o.safe(o.associationId(r),{before:u,after:"]"})),d(),u+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),u+=l.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,l.current()),t?Xf:V0))),f(),u}}function V0(e,t,n){return t===0?e:Xf(e,t,n)}function Xf(e,t,n){return(n?"":"    ")+e}const W0=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];eh.peek=Q0;function Y0(){return{canContainEols:["delete"],enter:{strikethrough:J0},exit:{strikethrough:Z0}}}function G0(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:W0}],handlers:{delete:eh}}}function J0(e){this.enter({type:"delete",children:[]},e)}function Z0(e){this.exit(e)}function eh(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let s=i.move("~~");return s+=n.containerPhrasing(e,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),o(),s}function Q0(){return"~"}function X0(e){return e.length}function ey(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||X0,o=[],s=[],l=[],u=[];let f=0,d=-1;for(;++d<e.length;){const C=[],A=[];let w=-1;for(e[d].length>f&&(f=e[d].length);++w<e[d].length;){const $=ty(e[d][w]);if(n.alignDelimiters!==!1){const O=i($);A[w]=O,(u[w]===void 0||O>u[w])&&(u[w]=O)}C.push($)}s[d]=C,l[d]=A}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<f;)o[h]=dc(r[h]);else{const C=dc(r);for(;++h<f;)o[h]=C}h=-1;const g=[],v=[];for(;++h<f;){const C=o[h];let A="",w="";C===99?(A=":",w=":"):C===108?A=":":C===114&&(w=":");let $=n.alignDelimiters===!1?1:Math.max(1,u[h]-A.length-w.length);const O=A+"-".repeat($)+w;n.alignDelimiters!==!1&&($=A.length+$+w.length,$>u[h]&&(u[h]=$),v[h]=$),g[h]=O}s.splice(1,0,g),l.splice(1,0,v),d=-1;const b=[];for(;++d<s.length;){const C=s[d],A=l[d];h=-1;const w=[];for(;++h<f;){const $=C[h]||"";let O="",z="";if(n.alignDelimiters!==!1){const V=u[h]-(A[h]||0),P=o[h];P===114?O=" ".repeat(V):P===99?V%2?(O=" ".repeat(V/2+.5),z=" ".repeat(V/2-.5)):(O=" ".repeat(V/2),z=O):z=" ".repeat(V)}n.delimiterStart!==!1&&!h&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&$==="")&&(n.delimiterStart!==!1||h)&&w.push(" "),n.alignDelimiters!==!1&&w.push(O),w.push($),n.alignDelimiters!==!1&&w.push(z),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||h!==f-1)&&w.push("|")}b.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return b.join(`
`)}function ty(e){return e==null?"":String(e)}function dc(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const pc={}.hasOwnProperty;function ny(e,t){const n=t||{};function r(i,...o){let s=r.invalid;const l=r.handlers;if(i&&pc.call(i,e)){const u=String(i[e]);s=pc.call(l,u)?l[u]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function ry(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const s=n.indentLines(n.containerFlow(e,o.current()),iy);return i(),s}function iy(e,t,n){return">"+(n?"":" ")+e}function oy(e,t){return mc(e,t.inConstruct,!0)&&!mc(e,t.notInConstruct,!1)}function mc(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function gc(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&oy(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function sy(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>s&&(s=o):o=1,i=r+t.length,r=n.indexOf(t,i);return s}function ay(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ly(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function uy(e,t,n,r){const i=ly(n),o=e.value||"",s=i==="`"?"GraveAccent":"Tilde";if(ay(e,n)){const h=n.enter("codeIndented"),g=n.indentLines(o,cy);return h(),g}const l=n.createTracker(r),u=i.repeat(Math.max(sy(o,i)+1,3)),f=n.enter("codeFenced");let d=l.move(u);if(e.lang){const h=n.enter(`codeFencedLang${s}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),h()}if(e.lang&&e.meta){const h=n.enter(`codeFencedMeta${s}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),h()}return d+=l.move(`
`),o&&(d+=l.move(o+`
`)),d+=l.move(u),f(),d}function cy(e,t,n){return(n?"":"    ")+e}function Al(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function fy(e,t,n,r){const i=Al(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("definition");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");return f+=u.move(n.safe(n.associationId(e),{before:f,after:"]",...u.current()})),f+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(e.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(l=n.enter("destinationRaw"),f+=u.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...u.current()}))),l(),e.title&&(l=n.enter(`title${o}`),f+=u.move(" "+i),f+=u.move(n.safe(e.title,{before:f,after:i,...u.current()})),f+=u.move(i),l()),s(),f}function hy(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Vi(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ls(e,t,n){const r=oi(e),i=oi(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}th.peek=dy;function th(e,t,n,r){const i=hy(n),o=n.enter("emphasis"),s=n.createTracker(r),l=s.move(i);let u=s.move(n.containerPhrasing(e,{after:i,before:l,...s.current()}));const f=u.charCodeAt(0),d=ls(r.before.charCodeAt(r.before.length-1),f,i);d.inside&&(u=Vi(f)+u.slice(1));const h=u.charCodeAt(u.length-1),g=ls(r.after.charCodeAt(0),h,i);g.inside&&(u=u.slice(0,-1)+Vi(h));const v=s.move(i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},l+u+v}function dy(e,t,n){return n.options.emphasis||"*"}function nh(e,t,n,r){let i,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,i=n):(o=t,s=n,i=r),Jf(e,o,l,i);function l(u,f){const d=f[f.length-1],h=d?d.children.indexOf(u):void 0;return s(u,h,d)}}function py(e,t){let n=!1;return nh(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Ga}),!!((!e.depth||e.depth<3)&&El(e)&&(t.options.setext||n))}function my(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(py(e,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),g=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return h(),d(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const s="#".repeat(i),l=n.enter("headingAtx"),u=n.enter("phrasing");o.move(s+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=Vi(f.charCodeAt(0))+f.slice(1)),f=f?s+" "+f:s,n.options.closeAtx&&(f+=" "+s),u(),l(),f}rh.peek=gy;function rh(e){return e.value||""}function gy(){return"<"}ih.peek=vy;function ih(e,t,n,r){const i=Al(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("image");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");return f+=u.move(n.safe(e.alt,{before:f,after:"]",...u.current()})),f+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(e.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(l=n.enter("destinationRaw"),f+=u.move(n.safe(e.url,{before:f,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=n.enter(`title${o}`),f+=u.move(" "+i),f+=u.move(n.safe(e.title,{before:f,after:i,...u.current()})),f+=u.move(i),l()),f+=u.move(")"),s(),f}function vy(){return"!"}oh.peek=yy;function oh(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("![");const f=n.safe(e.alt,{before:u,after:"]",...l.current()});u+=l.move(f+"]["),s();const d=n.stack;n.stack=[],s=n.enter("reference");const h=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return s(),n.stack=d,o(),i==="full"||!f||f!==h?u+=l.move(h+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function yy(){return"!"}sh.peek=by;function sh(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const s=n.unsafe[o],l=n.compilePattern(s);let u;if(s.atBreak)for(;u=l.exec(r);){let f=u.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(u.index+1)}}return i+r+i}function by(){return"`"}function ah(e,t){const n=El(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}lh.peek=xy;function lh(e,t,n,r){const i=Al(n),o=i==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let l,u;if(ah(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let h=s.move("<");return h+=s.move(n.containerPhrasing(e,{before:h,after:">",...s.current()})),h+=s.move(">"),l(),n.stack=d,h}l=n.enter("link"),u=n.enter("label");let f=s.move("[");return f+=s.move(n.containerPhrasing(e,{before:f,after:"](",...s.current()})),f+=s.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=s.move("<"),f+=s.move(n.safe(e.url,{before:f,after:">",...s.current()})),f+=s.move(">")):(u=n.enter("destinationRaw"),f+=s.move(n.safe(e.url,{before:f,after:e.title?" ":")",...s.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=s.move(" "+i),f+=s.move(n.safe(e.title,{before:f,after:i,...s.current()})),f+=s.move(i),u()),f+=s.move(")"),l(),f}function xy(e,t,n){return ah(e,n)?"<":"["}uh.peek=_y;function uh(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("[");const f=n.containerPhrasing(e,{before:u,after:"]",...l.current()});u+=l.move(f+"]["),s();const d=n.stack;n.stack=[],s=n.enter("reference");const h=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return s(),n.stack=d,o(),i==="full"||!f||f!==h?u+=l.move(h+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function _y(){return"["}function Il(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function ky(e){const t=Il(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function wy(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function ch(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Cy(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let s=e.ordered?wy(n):Il(n);const l=e.ordered?s==="."?")":".":ky(n);let u=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),ch(n)===s&&d){let h=-1;for(;++h<e.children.length;){const g=e.children[h];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=l),n.bulletCurrent=s;const f=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=o,i(),f}function Sy(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Ty(e,t,n,r){const i=Sy(n);let o=n.bulletCurrent||Il(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let s=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const l=n.createTracker(r);l.move(o+" ".repeat(s-o.length)),l.shift(s);const u=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,l.current()),d);return u(),f;function d(h,g,v){return g?(v?"":" ".repeat(s))+h:(v?o:o+" ".repeat(s-o.length))+h}}function Ey(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),s=n.containerPhrasing(e,r);return o(),i(),s}const Py=ks(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Ry(e,t,n,r){return(e.children.some(function(s){return Py(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Ay(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}fh.peek=Iy;function fh(e,t,n,r){const i=Ay(n),o=n.enter("strong"),s=n.createTracker(r),l=s.move(i+i);let u=s.move(n.containerPhrasing(e,{after:i,before:l,...s.current()}));const f=u.charCodeAt(0),d=ls(r.before.charCodeAt(r.before.length-1),f,i);d.inside&&(u=Vi(f)+u.slice(1));const h=u.charCodeAt(u.length-1),g=ls(r.after.charCodeAt(0),h,i);g.inside&&(u=u.slice(0,-1)+Vi(h));const v=s.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},l+u+v}function Iy(e,t,n){return n.options.strong||"*"}function Dy(e,t,n,r){return n.safe(e.value,r)}function Oy(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Ly(e,t,n){const r=(ch(n)+(n.options.ruleSpaces?" ":"")).repeat(Oy(n));return n.options.ruleSpaces?r.slice(0,-1):r}const hh={blockquote:ry,break:gc,code:uy,definition:fy,emphasis:th,hardBreak:gc,heading:my,html:rh,image:ih,imageReference:oh,inlineCode:sh,link:lh,linkReference:uh,list:Cy,listItem:Ty,paragraph:Ey,root:Ry,strong:fh,text:Dy,thematicBreak:Ly};function My(){return{enter:{table:jy,tableData:vc,tableHeader:vc,tableRow:Ny},exit:{codeText:By,table:zy,tableData:Ta,tableHeader:Ta,tableRow:Ta}}}function jy(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function zy(e){this.exit(e),this.data.inTable=void 0}function Ny(e){this.enter({type:"tableRow",children:[]},e)}function Ta(e){this.exit(e)}function vc(e){this.enter({type:"tableCell",children:[]},e)}function By(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Fy));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Fy(e,t){return t==="|"?t:e}function $y(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:s,tableCell:u,tableRow:l}};function s(v,b,C,A){return f(d(v,C,A),v.align)}function l(v,b,C,A){const w=h(v,C,A),$=f([w]);return $.slice(0,$.indexOf(`
`))}function u(v,b,C,A){const w=C.enter("tableCell"),$=C.enter("phrasing"),O=C.containerPhrasing(v,{...A,before:o,after:o});return $(),w(),O}function f(v,b){return ey(v,{align:b,alignDelimiters:r,padding:n,stringLength:i})}function d(v,b,C){const A=v.children;let w=-1;const $=[],O=b.enter("table");for(;++w<A.length;)$[w]=h(A[w],b,C);return O(),$}function h(v,b,C){const A=v.children;let w=-1;const $=[],O=b.enter("tableRow");for(;++w<A.length;)$[w]=u(A[w],v,b,C);return O(),$}function g(v,b,C){let A=hh.inlineCode(v,b,C);return C.stack.includes("tableCell")&&(A=A.replace(/\|/g,"\\$&")),A}}function Uy(){return{exit:{taskListCheckValueChecked:yc,taskListCheckValueUnchecked:yc,paragraph:Hy}}}function qy(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ky}}}function yc(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Hy(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,s;for(;++o<i.length;){const l=i[o];if(l.type==="paragraph"){s=l;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Ky(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);o&&l.move(s);let u=hh.listItem(e,t,n,{...r,...l.current()});return o&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),u;function f(d){return d+s}}function Vy(){return[w0(),H0(),Y0(),My(),Uy()]}function Wy(e){return{extensions:[C0(),K0(e),G0(),$y(e),qy()]}}const Yy={tokenize:eb,partial:!0},dh={tokenize:tb,partial:!0},ph={tokenize:nb,partial:!0},mh={tokenize:rb,partial:!0},Gy={tokenize:ib,partial:!0},gh={name:"wwwAutolink",tokenize:Qy,previous:yh},vh={name:"protocolAutolink",tokenize:Xy,previous:bh},lr={name:"emailAutolink",tokenize:Zy,previous:xh},Xn={};function Jy(){return{text:Xn}}let Pr=48;for(;Pr<123;)Xn[Pr]=lr,Pr++,Pr===58?Pr=65:Pr===91&&(Pr=97);Xn[43]=lr;Xn[45]=lr;Xn[46]=lr;Xn[95]=lr;Xn[72]=[lr,vh];Xn[104]=[lr,vh];Xn[87]=[lr,gh];Xn[119]=[lr,gh];function Zy(e,t,n){const r=this;let i,o;return s;function s(h){return!Ja(h)||!xh.call(r,r.previous)||Dl(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(h))}function l(h){return Ja(h)?(e.consume(h),l):h===64?(e.consume(h),u):n(h)}function u(h){return h===46?e.check(Gy,d,f)(h):h===45||h===95||rn(h)?(o=!0,e.consume(h),u):d(h)}function f(h){return e.consume(h),i=!0,u}function d(h){return o&&i&&fn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):n(h)}}function Qy(e,t,n){const r=this;return i;function i(s){return s!==87&&s!==119||!yh.call(r,r.previous)||Dl(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Yy,e.attempt(dh,e.attempt(ph,o),n),n)(s))}function o(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function Xy(e,t,n){const r=this;let i="",o=!1;return s;function s(h){return(h===72||h===104)&&bh.call(r,r.previous)&&!Dl(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),e.consume(h),l):n(h)}function l(h){if(fn(h)&&i.length<5)return i+=String.fromCodePoint(h),e.consume(h),l;if(h===58){const g=i.toLowerCase();if(g==="http"||g==="https")return e.consume(h),u}return n(h)}function u(h){return h===47?(e.consume(h),o?f:(o=!0,u)):n(h)}function f(h){return h===null||ss(h)||yt(h)||zr(h)||xs(h)?n(h):e.attempt(dh,e.attempt(ph,d),n)(h)}function d(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function eb(e,t,n){let r=0;return i;function i(s){return(s===87||s===119)&&r<3?(r++,e.consume(s),i):s===46&&r===3?(e.consume(s),o):n(s)}function o(s){return s===null?n(s):t(s)}}function tb(e,t,n){let r,i,o;return s;function s(f){return f===46||f===95?e.check(mh,u,l)(f):f===null||yt(f)||zr(f)||f!==45&&xs(f)?u(f):(o=!0,e.consume(f),s)}function l(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),s}function u(f){return i||r||!o?n(f):t(f)}}function nb(e,t){let n=0,r=0;return i;function i(s){return s===40?(n++,e.consume(s),i):s===41&&r<n?o(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(mh,t,o)(s):s===null||yt(s)||zr(s)?t(s):(e.consume(s),i)}function o(s){return s===41&&r++,e.consume(s),i}}function rb(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),o):l===93?(e.consume(l),i):l===60||l===null||yt(l)||zr(l)?t(l):n(l)}function i(l){return l===null||l===40||l===91||yt(l)||zr(l)?t(l):r(l)}function o(l){return fn(l)?s(l):n(l)}function s(l){return l===59?(e.consume(l),r):fn(l)?(e.consume(l),s):n(l)}}function ib(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return rn(o)?n(o):t(o)}}function yh(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||yt(e)}function bh(e){return!fn(e)}function xh(e){return!(e===47||Ja(e))}function Ja(e){return e===43||e===45||e===46||e===95||rn(e)}function Dl(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const ob={tokenize:db,partial:!0};function sb(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:cb,continuation:{tokenize:fb},exit:hb}},text:{91:{name:"gfmFootnoteCall",tokenize:ub},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:ab,resolveTo:lb}}}}function ab(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){s=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!s||!s._balanced)return n(u);const f=qn(r.sliceSerialize({start:s.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function lb(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function ub(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,s;return l;function l(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),u}function u(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(h){if(o>999||h===93&&!s||h===null||h===91||yt(h))return n(h);if(h===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return i.includes(qn(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(h)}return yt(h)||(s=!0),o++,e.consume(h),h===92?d:f}function d(h){return h===91||h===92||h===93?(e.consume(h),o++,f):f(h)}}function cb(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,s=0,l;return u;function u(b){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(b){return b===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(b)}function d(b){if(s>999||b===93&&!l||b===null||b===91||yt(b))return n(b);if(b===93){e.exit("chunkString");const C=e.exit("gfmFootnoteDefinitionLabelString");return o=qn(r.sliceSerialize(C)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return yt(b)||(l=!0),s++,e.consume(b),b===92?h:d}function h(b){return b===91||b===92||b===93?(e.consume(b),s++,d):d(b)}function g(b){return b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),i.includes(o)||i.push(o),et(e,v,"gfmFootnoteDefinitionWhitespace")):n(b)}function v(b){return t(b)}}function fb(e,t,n){return e.check(Ji,t,e.attempt(ob,t,n))}function hb(e){e.exit("gfmFootnoteDefinition")}function db(e,t,n){const r=this;return et(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(o):n(o)}}function pb(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(s,l){let u=-1;for(;++u<s.length;)if(s[u][0]==="enter"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._close){let f=u;for(;f--;)if(s[f][0]==="exit"&&s[f][1].type==="strikethroughSequenceTemporary"&&s[f][1]._open&&s[u][1].end.offset-s[u][1].start.offset===s[f][1].end.offset-s[f][1].start.offset){s[u][1].type="strikethroughSequence",s[f][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},s[f][1].start),end:Object.assign({},s[u][1].end)},h={type:"strikethroughText",start:Object.assign({},s[f][1].end),end:Object.assign({},s[u][1].start)},g=[["enter",d,l],["enter",s[f][1],l],["exit",s[f][1],l],["enter",h,l]],v=l.parser.constructs.insideSpan.null;v&&Pn(g,g.length,0,_s(v,s.slice(f+1,u),l)),Pn(g,g.length,0,[["exit",h,l],["enter",s[u][1],l],["exit",s[u][1],l],["exit",d,l]]),Pn(s,f-1,u-f+3,g),u=f+g.length-2;break}}for(u=-1;++u<s.length;)s[u][1].type==="strikethroughSequenceTemporary"&&(s[u][1].type="data");return s}function o(s,l,u){const f=this.previous,d=this.events;let h=0;return g;function g(b){return f===126&&d[d.length-1][1].type!=="characterEscape"?u(b):(s.enter("strikethroughSequenceTemporary"),v(b))}function v(b){const C=oi(f);if(b===126)return h>1?u(b):(s.consume(b),h++,v);if(h<2&&!n)return u(b);const A=s.exit("strikethroughSequenceTemporary"),w=oi(b);return A._open=!w||w===2&&!!C,A._close=!C||C===2&&!!w,l(b)}}}class mb{constructor(){this.map=[]}add(t,n,r){gb(this,t,n,r)}consume(t){if(this.map.sort(function(o,s){return o[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function gb(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function vb(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function yb(){return{flow:{null:{name:"table",tokenize:bb,resolveAll:xb}}}}function bb(e,t,n){const r=this;let i=0,o=0,s;return l;function l(j){let X=r.events.length-1;for(;X>-1;){const K=r.events[X][1].type;if(K==="lineEnding"||K==="linePrefix")X--;else break}const te=X>-1?r.events[X][1].type:null,se=te==="tableHead"||te==="tableRow"?P:u;return se===P&&r.parser.lazy[r.now().line]?n(j):se(j)}function u(j){return e.enter("tableHead"),e.enter("tableRow"),f(j)}function f(j){return j===124||(s=!0,o+=1),d(j)}function d(j){return j===null?n(j):Re(j)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),v):n(j):Ge(j)?et(e,d,"whitespace")(j):(o+=1,s&&(s=!1,i+=1),j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),s=!0,d):(e.enter("data"),h(j)))}function h(j){return j===null||j===124||yt(j)?(e.exit("data"),d(j)):(e.consume(j),j===92?g:h)}function g(j){return j===92||j===124?(e.consume(j),h):h(j)}function v(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(e.enter("tableDelimiterRow"),s=!1,Ge(j)?et(e,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):b(j))}function b(j){return j===45||j===58?A(j):j===124?(s=!0,e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),C):V(j)}function C(j){return Ge(j)?et(e,A,"whitespace")(j):A(j)}function A(j){return j===58?(o+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),w):j===45?(o+=1,w(j)):j===null||Re(j)?z(j):V(j)}function w(j){return j===45?(e.enter("tableDelimiterFiller"),$(j)):V(j)}function $(j){return j===45?(e.consume(j),$):j===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),O):(e.exit("tableDelimiterFiller"),O(j))}function O(j){return Ge(j)?et(e,z,"whitespace")(j):z(j)}function z(j){return j===124?b(j):j===null||Re(j)?!s||i!==o?V(j):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(j)):V(j)}function V(j){return n(j)}function P(j){return e.enter("tableRow"),W(j)}function W(j){return j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),W):j===null||Re(j)?(e.exit("tableRow"),t(j)):Ge(j)?et(e,W,"whitespace")(j):(e.enter("data"),ae(j))}function ae(j){return j===null||j===124||yt(j)?(e.exit("data"),W(j)):(e.consume(j),j===92?me:ae)}function me(j){return j===92||j===124?(e.consume(j),ae):ae(j)}}function xb(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],s=[0,0,0,0],l=!1,u=0,f,d,h;const g=new mb;for(;++n<e.length;){const v=e[n],b=v[1];v[0]==="enter"?b.type==="tableHead"?(l=!1,u!==0&&(bc(g,t,u,f,d),d=void 0,u=0),f={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,t]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,h=void 0,o=[0,0,0,0],s=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",d,t]])),i=b.type==="tableDelimiterRow"?2:d?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(o[1]!==0&&(s[0]=s[1],h=_o(g,t,o,i,void 0,h),o=[0,0,0,0]),s[2]=n)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(s[0]=s[1],h=_o(g,t,o,i,void 0,h)),o=s,s=[o[1],n,0,0])):b.type==="tableHead"?(l=!0,u=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(u=n,o[1]!==0?(s[0]=s[1],h=_o(g,t,o,i,n,h)):s[1]!==0&&(h=_o(g,t,s,i,n,h)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(s[3]=n)}for(u!==0&&bc(g,t,u,f,d),g.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=vb(t.events,n))}return e}function _o(e,t,n,r,i,o){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(o.end=Object.assign({},Qr(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const u=Qr(t.events,n[1]);if(o={type:s,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=Qr(t.events,n[2]),d=Qr(t.events,n[3]),h={type:l,start:Object.assign({},f),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",h,t]]),r!==2){const g=t.events[n[2]],v=t.events[n[3]];if(g[1].end=Object.assign({},v[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,C=n[3]-n[2]-1;e.add(b,C,[])}}e.add(n[3]+1,0,[["exit",h,t]])}return i!==void 0&&(o.end=Object.assign({},Qr(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function bc(e,t,n,r,i){const o=[],s=Qr(t.events,n);i&&(i.end=Object.assign({},s),o.push(["exit",i,t])),r.end=Object.assign({},s),o.push(["exit",r,t]),e.add(n+1,0,o)}function Qr(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const _b={name:"tasklistCheck",tokenize:wb};function kb(){return{text:{91:_b}}}function wb(e,t,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),o)}function o(u){return yt(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),s):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),s):n(u)}function s(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(u)}function l(u){return Re(u)?t(u):Ge(u)?e.check({tokenize:Cb},t,n)(u):n(u)}}function Cb(e,t,n){return et(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Sb(e){return jf([Jy(),sb(),pb(e),yb(),kb()])}const Tb={};function xc(e){const t=this,n=e||Tb,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Sb(n)),o.push(Vy()),s.push(Wy(n))}function Eb(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Pb(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Rb(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Ab(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ib(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Db(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=li(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,l+=1,e.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,u);const f={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,f),e.applyData(t,f)}function Ob(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Lb(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function _h(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function Mb(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return _h(e,t);const i={src:li(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function jb(e,t){const n={src:li(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function zb(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Nb(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return _h(e,t);const i={href:li(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function Bb(e,t){const n={href:li(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Fb(e,t,n){const r=e.all(t),i=n?$b(n):kh(t),o={},s=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(i||l!==0||d.type!=="element"||d.tagName!=="p")&&s.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?s.push(...d.children):s.push(d)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,f),e.applyData(t,f)}function $b(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=kh(n[r])}return t}function kh(e){const t=e.spread;return t??e.children.length>1}function Ub(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function qb(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Hb(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Kb(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const wh=Sh("end"),Ch=Sh("start");function Sh(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Vb(e){const t=Ch(e),n=wh(e);if(t&&n)return{start:t,end:n}}function Wb(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Ch(t.children[1]),u=wh(t.children[t.children.length-1]);l&&u&&(s.position={start:l,end:u}),i.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function Yb(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,l=s?s.length:t.children.length;let u=-1;const f=[];for(;++u<l;){const h=t.children[u],g={},v=s?s[u]:void 0;v&&(g.align=v);let b={type:"element",tagName:o,properties:g,children:[]};h&&(b.children=e.all(h),e.patch(h,b),b=e.applyData(h,b)),f.push(b)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,d),e.applyData(t,d)}function Gb(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const _c=9,kc=32;function Jb(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(wc(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(wc(t.slice(i),i>0,!1)),o.join("")}function wc(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===_c||o===kc;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===_c||o===kc;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Zb(e,t){const n={type:"text",value:Jb(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Qb(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Xb={blockquote:Eb,break:Pb,code:Rb,delete:Ab,emphasis:Ib,footnoteReference:Db,heading:Ob,html:Lb,imageReference:Mb,image:jb,inlineCode:zb,linkReference:Nb,link:Bb,listItem:Fb,list:Ub,paragraph:qb,root:Hb,strong:Kb,table:Wb,tableCell:Gb,tableRow:Yb,text:Zb,thematicBreak:Qb,toml:ko,yaml:ko,definition:ko,footnoteDefinition:ko};function ko(){}const Th=-1,Cs=0,zi=1,us=2,Ol=3,Ll=4,Ml=5,jl=6,Eh=7,Ph=8,Cc=typeof self=="object"?self:globalThis,ex=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case Cs:case Th:return n(s,i);case zi:{const l=n([],i);for(const u of s)l.push(r(u));return l}case us:{const l=n({},i);for(const[u,f]of s)l[r(u)]=r(f);return l}case Ol:return n(new Date(s),i);case Ll:{const{source:l,flags:u}=s;return n(new RegExp(l,u),i)}case Ml:{const l=n(new Map,i);for(const[u,f]of s)l.set(r(u),r(f));return l}case jl:{const l=n(new Set,i);for(const u of s)l.add(r(u));return l}case Eh:{const{name:l,message:u}=s;return n(new Cc[l](u),i)}case Ph:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return n(new DataView(l),s)}}return n(new Cc[o](s),i)};return r},Sc=e=>ex(new Map,e)(0),Zr="",{toString:tx}={},{keys:nx}=Object,Ci=e=>{const t=typeof e;if(t!=="object"||!e)return[Cs,t];const n=tx.call(e).slice(8,-1);switch(n){case"Array":return[zi,Zr];case"Object":return[us,Zr];case"Date":return[Ol,Zr];case"RegExp":return[Ll,Zr];case"Map":return[Ml,Zr];case"Set":return[jl,Zr];case"DataView":return[zi,n]}return n.includes("Array")?[zi,n]:n.includes("Error")?[Eh,n]:[us,n]},wo=([e,t])=>e===Cs&&(t==="function"||t==="symbol"),rx=(e,t,n,r)=>{const i=(s,l)=>{const u=r.push(s)-1;return n.set(l,u),u},o=s=>{if(n.has(s))return n.get(s);let[l,u]=Ci(s);switch(l){case Cs:{let d=s;switch(u){case"bigint":l=Ph,d=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return i([Th],s)}return i([l,d],s)}case zi:{if(u){let g=s;return u==="DataView"?g=new Uint8Array(s.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(s)),i([u,[...g]],s)}const d=[],h=i([l,d],s);for(const g of s)d.push(o(g));return h}case us:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const d=[],h=i([l,d],s);for(const g of nx(s))(e||!wo(Ci(s[g])))&&d.push([o(g),o(s[g])]);return h}case Ol:return i([l,s.toISOString()],s);case Ll:{const{source:d,flags:h}=s;return i([l,{source:d,flags:h}],s)}case Ml:{const d=[],h=i([l,d],s);for(const[g,v]of s)(e||!(wo(Ci(g))||wo(Ci(v))))&&d.push([o(g),o(v)]);return h}case jl:{const d=[],h=i([l,d],s);for(const g of s)(e||!wo(Ci(g)))&&d.push(o(g));return h}}const{message:f}=s;return i([l,{name:u,message:f}],s)};return o},Tc=(e,{json:t,lossy:n}={})=>{const r=[];return rx(!(t||n),!!t,new Map,r)(e),r},cs=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Sc(Tc(e,t)):structuredClone(e):(e,t)=>Sc(Tc(e,t));function ix(e,t){const n=[{type:"text",value:"â©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function ox(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function sx(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ix,r=e.options.footnoteBackLabel||ox,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[u]);if(!f)continue;const d=e.all(f),h=String(f.identifier).toUpperCase(),g=li(h.toLowerCase());let v=0;const b=[],C=e.footnoteCounts.get(h);for(;C!==void 0&&++v<=C;){b.length>0&&b.push({type:"text",value:" "});let $=typeof n=="string"?n:n(u,v);typeof $=="string"&&($={type:"text",value:$}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,v),className:["data-footnote-backref"]},children:Array.isArray($)?$:[$]})}const A=d[d.length-1];if(A&&A.type==="element"&&A.tagName==="p"){const $=A.children[A.children.length-1];$&&$.type==="text"?$.value+=" ":A.children.push({type:"text",value:" "}),A.children.push(...b)}else d.push(...b);const w={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(d,!0)};e.patch(f,w),l.push(w)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...cs(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Za={}.hasOwnProperty,ax={};function lx(e,t){const n=t||ax,r=new Map,i=new Map,o=new Map,s={...Xb,...n.handlers},l={all:f,applyData:cx,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:u,options:n,patch:ux,wrap:hx};return nh(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:i,g=String(d.identifier).toUpperCase();h.has(g)||h.set(g,d)}}),l;function u(d,h){const g=d.type,v=l.handlers[g];if(Za.call(l.handlers,g)&&v)return v(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in d){const{children:C,...A}=d,w=cs(A);return w.children=l.all(d),w}return cs(d)}return(l.options.unknownHandler||fx)(l,d,h)}function f(d){const h=[];if("children"in d){const g=d.children;let v=-1;for(;++v<g.length;){const b=l.one(g[v],d);if(b){if(v&&g[v-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=Ec(b.value)),!Array.isArray(b)&&b.type==="element")){const C=b.children[0];C&&C.type==="text"&&(C.value=Ec(C.value))}Array.isArray(b)?h.push(...b):h.push(b)}}}return h}}function ux(e,t){e.position&&(t.position=Vb(e))}function cx(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,cs(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function fx(e,t){const n=t.data||{},r="value"in t&&!(Za.call(n,"hProperties")||Za.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function hx(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ec(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Pc(e,t){const n=lx(e,t),r=n.one(e,void 0),i=sx(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function Rc(e,t){return e&&"run"in e?async function(n,r){const i=Pc(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Pc(n,{file:r,...e||t})}}const dx=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Zi{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Zi.prototype.normal={};Zi.prototype.property={};Zi.prototype.space=void 0;function Rh(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Zi(n,r,t)}function Qa(e){return e.toLowerCase()}class _n{constructor(t,n){this.attribute=n,this.property=t}}_n.prototype.attribute="";_n.prototype.booleanish=!1;_n.prototype.boolean=!1;_n.prototype.commaOrSpaceSeparated=!1;_n.prototype.commaSeparated=!1;_n.prototype.defined=!1;_n.prototype.mustUseProperty=!1;_n.prototype.number=!1;_n.prototype.overloadedBoolean=!1;_n.prototype.property="";_n.prototype.spaceSeparated=!1;_n.prototype.space=void 0;let px=0;const He=Nr(),Bt=Nr(),Xa=Nr(),ce=Nr(),kt=Nr(),ni=Nr(),Sn=Nr();function Nr(){return 2**++px}const el=Object.freeze(Object.defineProperty({__proto__:null,boolean:He,booleanish:Bt,commaOrSpaceSeparated:Sn,commaSeparated:ni,number:ce,overloadedBoolean:Xa,spaceSeparated:kt},Symbol.toStringTag,{value:"Module"})),Ea=Object.keys(el);class zl extends _n{constructor(t,n,r,i){let o=-1;if(super(t,n),Ac(this,"space",i),typeof r=="number")for(;++o<Ea.length;){const s=Ea[o];Ac(this,Ea[o],(r&el[s])===el[s])}}}zl.prototype.defined=!0;function Ac(e,t,n){n&&(e[t]=n)}function ui(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new zl(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[Qa(r)]=r,n[Qa(o.attribute)]=r}return new Zi(t,n,e.space)}const Ah=ui({properties:{ariaActiveDescendant:null,ariaAtomic:Bt,ariaAutoComplete:null,ariaBusy:Bt,ariaChecked:Bt,ariaColCount:ce,ariaColIndex:ce,ariaColSpan:ce,ariaControls:kt,ariaCurrent:null,ariaDescribedBy:kt,ariaDetails:null,ariaDisabled:Bt,ariaDropEffect:kt,ariaErrorMessage:null,ariaExpanded:Bt,ariaFlowTo:kt,ariaGrabbed:Bt,ariaHasPopup:null,ariaHidden:Bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:kt,ariaLevel:ce,ariaLive:null,ariaModal:Bt,ariaMultiLine:Bt,ariaMultiSelectable:Bt,ariaOrientation:null,ariaOwns:kt,ariaPlaceholder:null,ariaPosInSet:ce,ariaPressed:Bt,ariaReadOnly:Bt,ariaRelevant:null,ariaRequired:Bt,ariaRoleDescription:kt,ariaRowCount:ce,ariaRowIndex:ce,ariaRowSpan:ce,ariaSelected:Bt,ariaSetSize:ce,ariaSort:null,ariaValueMax:ce,ariaValueMin:ce,ariaValueNow:ce,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Ih(e,t){return t in e?e[t]:t}function Dh(e,t){return Ih(e,t.toLowerCase())}const mx=ui({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ni,acceptCharset:kt,accessKey:kt,action:null,allow:null,allowFullScreen:He,allowPaymentRequest:He,allowUserMedia:He,alt:null,as:null,async:He,autoCapitalize:null,autoComplete:kt,autoFocus:He,autoPlay:He,blocking:kt,capture:null,charSet:null,checked:He,cite:null,className:kt,cols:ce,colSpan:null,content:null,contentEditable:Bt,controls:He,controlsList:kt,coords:ce|ni,crossOrigin:null,data:null,dateTime:null,decoding:null,default:He,defer:He,dir:null,dirName:null,disabled:He,download:Xa,draggable:Bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:He,formTarget:null,headers:kt,height:ce,hidden:Xa,high:ce,href:null,hrefLang:null,htmlFor:kt,httpEquiv:kt,id:null,imageSizes:null,imageSrcSet:null,inert:He,inputMode:null,integrity:null,is:null,isMap:He,itemId:null,itemProp:kt,itemRef:kt,itemScope:He,itemType:kt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:He,low:ce,manifest:null,max:null,maxLength:ce,media:null,method:null,min:null,minLength:ce,multiple:He,muted:He,name:null,nonce:null,noModule:He,noValidate:He,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:He,optimum:ce,pattern:null,ping:kt,placeholder:null,playsInline:He,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:He,referrerPolicy:null,rel:kt,required:He,reversed:He,rows:ce,rowSpan:ce,sandbox:kt,scope:null,scoped:He,seamless:He,selected:He,shadowRootClonable:He,shadowRootDelegatesFocus:He,shadowRootMode:null,shape:null,size:ce,sizes:null,slot:null,span:ce,spellCheck:Bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ce,step:null,style:null,tabIndex:ce,target:null,title:null,translate:null,type:null,typeMustMatch:He,useMap:null,value:Bt,width:ce,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:kt,axis:null,background:null,bgColor:null,border:ce,borderColor:null,bottomMargin:ce,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:He,declare:He,event:null,face:null,frame:null,frameBorder:null,hSpace:ce,leftMargin:ce,link:null,longDesc:null,lowSrc:null,marginHeight:ce,marginWidth:ce,noResize:He,noHref:He,noShade:He,noWrap:He,object:null,profile:null,prompt:null,rev:null,rightMargin:ce,rules:null,scheme:null,scrolling:Bt,standby:null,summary:null,text:null,topMargin:ce,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ce,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:He,disableRemotePlayback:He,prefix:null,property:null,results:ce,security:null,unselectable:null},space:"html",transform:Dh}),gx=ui({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Sn,accentHeight:ce,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ce,amplitude:ce,arabicForm:null,ascent:ce,attributeName:null,attributeType:null,azimuth:ce,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ce,by:null,calcMode:null,capHeight:ce,className:kt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ce,diffuseConstant:ce,direction:null,display:null,dur:null,divisor:ce,dominantBaseline:null,download:He,dx:null,dy:null,edgeMode:null,editable:null,elevation:ce,enableBackground:null,end:null,event:null,exponent:ce,externalResourcesRequired:null,fill:null,fillOpacity:ce,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ni,g2:ni,glyphName:ni,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ce,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ce,horizOriginX:ce,horizOriginY:ce,id:null,ideographic:ce,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ce,k:ce,k1:ce,k2:ce,k3:ce,k4:ce,kernelMatrix:Sn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ce,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ce,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ce,overlineThickness:ce,paintOrder:null,panose1:null,path:null,pathLength:ce,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:kt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ce,pointsAtY:ce,pointsAtZ:ce,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sn,rev:Sn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sn,requiredFeatures:Sn,requiredFonts:Sn,requiredFormats:Sn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ce,specularExponent:ce,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ce,strikethroughThickness:ce,string:null,stroke:null,strokeDashArray:Sn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ce,strokeOpacity:ce,strokeWidth:null,style:null,surfaceScale:ce,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sn,tabIndex:ce,tableValues:null,target:null,targetX:ce,targetY:ce,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ce,underlineThickness:ce,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ce,values:null,vAlphabetic:ce,vMathematical:ce,vectorEffect:null,vHanging:ce,vIdeographic:ce,version:null,vertAdvY:ce,vertOriginX:ce,vertOriginY:ce,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ce,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ih}),Oh=ui({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Lh=ui({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Dh}),Mh=ui({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),vx=/[A-Z]/g,Ic=/-[a-z]/g,yx=/^data[-\w.:]+$/i;function bx(e,t){const n=Qa(t);let r=t,i=_n;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&yx.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Ic,_x);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Ic.test(o)){let s=o.replace(vx,xx);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}i=zl}return new i(r,t)}function xx(e){return"-"+e.toLowerCase()}function _x(e){return e.charAt(1).toUpperCase()}const kx=Rh([Ah,mx,Oh,Lh,Mh],"html"),jh=Rh([Ah,gx,Oh,Lh,Mh],"svg"),wx=/["&'<>`]/g,Cx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sx=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Tx=/[|\\{}()[\]^$+*?.]/g,Dc=new WeakMap;function Ex(e,t){if(e=e.replace(t.subset?Px(t.subset):wx,r),t.subset||t.escapeOnly)return e;return e.replace(Cx,n).replace(Sx,r);function n(i,o,s){return t.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,s.charCodeAt(o+2),t)}function r(i,o,s){return t.format(i.charCodeAt(0),s.charCodeAt(o+1),t)}}function Px(e){let t=Dc.get(e);return t||(t=Rx(e),Dc.set(e,t)),t}function Rx(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(Tx,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const Ax=/[\dA-Fa-f]/;function Ix(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!Ax.test(String.fromCharCode(t))?r:r+";"}const Dx=/\d/;function Ox(e,t,n){const r="&#"+String(e);return n&&t&&!Dx.test(String.fromCharCode(t))?r:r+";"}const Lx=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Pa={nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",Agrave:"Ã",Aacute:"Ã",Acirc:"Ã",Atilde:"Ã",Auml:"Ã",Aring:"Ã",AElig:"Ã",Ccedil:"Ã",Egrave:"Ã",Eacute:"Ã",Ecirc:"Ã",Euml:"Ã",Igrave:"Ã",Iacute:"Ã",Icirc:"Ã",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã",Ograve:"Ã",Oacute:"Ã",Ocirc:"Ã",Otilde:"Ã",Ouml:"Ã",times:"Ã",Oslash:"Ã",Ugrave:"Ã",Uacute:"Ã",Ucirc:"Ã",Uuml:"Ã",Yacute:"Ã",THORN:"Ã",szlig:"Ã",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",divide:"Ã·",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",fnof:"Æ",Alpha:"Î",Beta:"Î",Gamma:"Î",Delta:"Î",Epsilon:"Î",Zeta:"Î",Eta:"Î",Theta:"Î",Iota:"Î",Kappa:"Î",Lambda:"Î",Mu:"Î",Nu:"Î",Xi:"Î",Omicron:"Î",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï",rho:"Ï",sigmaf:"Ï",sigma:"Ï",tau:"Ï",upsilon:"Ï",phi:"Ï",chi:"Ï",psi:"Ï",omega:"Ï",thetasym:"Ï",upsih:"Ï",piv:"Ï",bull:"â¢",hellip:"â¦",prime:"â²",Prime:"â³",oline:"â¾",frasl:"â",weierp:"â",image:"â",real:"â",trade:"â¢",alefsym:"âµ",larr:"â",uarr:"â",rarr:"â",darr:"â",harr:"â",crarr:"âµ",lArr:"â",uArr:"â",rArr:"â",dArr:"â",hArr:"â",forall:"â",part:"â",exist:"â",empty:"â",nabla:"â",isin:"â",notin:"â",ni:"â",prod:"â",sum:"â",minus:"â",lowast:"â",radic:"â",prop:"â",infin:"â",ang:"â ",and:"â§",or:"â¨",cap:"â©",cup:"âª",int:"â«",there4:"â´",sim:"â¼",cong:"â",asymp:"â",ne:"â ",equiv:"â¡",le:"â¤",ge:"â¥",sub:"â",sup:"â",nsub:"â",sube:"â",supe:"â",oplus:"â",otimes:"â",perp:"â¥",sdot:"â",lceil:"â",rceil:"â",lfloor:"â",rfloor:"â",lang:"â©",rang:"âª",loz:"â",spades:"â ",clubs:"â£",hearts:"â¥",diams:"â¦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Å",oelig:"Å",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",circ:"Ë",tilde:"Ë",ensp:"â",emsp:"â",thinsp:"â",zwnj:"â",zwj:"â",lrm:"â",rlm:"â",ndash:"â",mdash:"â",lsquo:"â",rsquo:"â",sbquo:"â",ldquo:"â",rdquo:"â",bdquo:"â",dagger:"â ",Dagger:"â¡",permil:"â°",lsaquo:"â¹",rsaquo:"âº",euro:"â¬"},Mx=["cent","copy","divide","gt","lt","not","para","times"],zh={}.hasOwnProperty,tl={};let Co;for(Co in Pa)zh.call(Pa,Co)&&(tl[Pa[Co]]=Co);const jx=/[^\dA-Za-z]/;function zx(e,t,n,r){const i=String.fromCharCode(e);if(zh.call(tl,i)){const o=tl[i],s="&"+o;return n&&Lx.includes(o)&&!Mx.includes(o)&&(!r||t&&t!==61&&jx.test(String.fromCharCode(t)))?s:s+";"}return""}function Nx(e,t,n){let r=Ix(e,t,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=zx(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const o=Ox(e,t,n.omitOptionalSemicolons);o.length<r.length&&(r=o)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function ri(e,t){return Ex(e,Object.assign({format:Nx},t))}const Bx=/^>|^->|<!--|-->|--!>|<!-$/g,Fx=[">"],$x=["<",">"];function Ux(e,t,n,r){return r.settings.bogusComments?"<?"+ri(e.value,Object.assign({},r.settings.characterReferences,{subset:Fx}))+">":"<!--"+e.value.replace(Bx,i)+"-->";function i(o){return ri(o,Object.assign({},r.settings.characterReferences,{subset:$x}))}}function qx(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Hx(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Kx(e){return e.join(" ").trim()}const Vx=/[ \t\n\f\r]/g;function Nl(e){return typeof e=="object"?e.type==="text"?Oc(e.value):!1:Oc(e)}function Oc(e){return e.replace(Vx,"")===""}const Kt=Bh(1),Nh=Bh(-1),Wx=[];function Bh(e){return t;function t(n,r,i){const o=n?n.children:Wx;let s=(r||0)+e,l=o[s];if(!i)for(;l&&Nl(l);)s+=e,l=o[s];return l}}const Yx={}.hasOwnProperty;function Fh(e){return t;function t(n,r,i){return Yx.call(e,n.tagName)&&e[n.tagName](n,r,i)}}const Bl=Fh({body:Jx,caption:Ra,colgroup:Ra,dd:e_,dt:Xx,head:Ra,html:Gx,li:Qx,optgroup:t_,option:n_,p:Zx,rp:Lc,rt:Lc,tbody:i_,td:Mc,tfoot:o_,th:Mc,thead:r_,tr:s_});function Ra(e,t,n){const r=Kt(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&Nl(r.value.charAt(0)))}function Gx(e,t,n){const r=Kt(n,t);return!r||r.type!=="comment"}function Jx(e,t,n){const r=Kt(n,t);return!r||r.type!=="comment"}function Zx(e,t,n){const r=Kt(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Qx(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&r.tagName==="li"}function Xx(e,t,n){const r=Kt(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function e_(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Lc(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function t_(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function n_(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function r_(e,t,n){const r=Kt(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function i_(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function o_(e,t,n){return!Kt(n,t)}function s_(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function Mc(e,t,n){const r=Kt(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const a_=Fh({body:c_,colgroup:f_,head:u_,html:l_,tbody:h_});function l_(e){const t=Kt(e,-1);return!t||t.type!=="comment"}function u_(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function c_(e){const t=Kt(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&Nl(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function f_(e,t,n){const r=Nh(n,t),i=Kt(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Bl(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function h_(e,t,n){const r=Nh(n,t),i=Kt(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Bl(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const So={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function d_(e,t,n,r){const i=r.schema,o=i.space==="svg"?!1:r.settings.omitOptionalTags;let s=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const l=[];let u;i.space==="html"&&e.tagName==="svg"&&(r.schema=jh);const f=p_(r,e.properties),d=r.all(i.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=i,d&&(s=!1),(f||!o||!a_(e,t,n))&&(l.push("<",e.tagName,f?" "+f:""),s&&(i.space==="svg"||r.settings.closeSelfClosing)&&(u=f.charAt(f.length-1),(!r.settings.tightSelfClosing||u==="/"||u&&u!=='"'&&u!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(d),!s&&(!o||!Bl(e,t,n))&&l.push("</"+e.tagName+">"),l.join("")}function p_(e,t){const n=[];let r=-1,i;if(t){for(i in t)if(t[i]!==null&&t[i]!==void 0){const o=m_(e,i,t[i]);o&&n.push(o)}}for(;++r<n.length;){const o=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&o!=='"'&&o!=="'"&&(n[r]+=" ")}return n.join("")}function m_(e,t,n){const r=bx(e.schema,t),i=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let s=e.quote,l;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const u=ri(r.attribute,Object.assign({},e.settings.characterReferences,{subset:So.name[i][o]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?Hx:Kx)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?u:(e.settings.preferUnquoted&&(l=ri(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:So.unquoted[i][o]}))),l!==n&&(e.settings.quoteSmart&&as(n,s)>as(n,e.alternative)&&(s=e.alternative),l=s+ri(n,Object.assign({},e.settings.characterReferences,{subset:(s==="'"?So.single:So.double)[i][o],attribute:!0}))+s),u+(l&&"="+l))}const g_=["<","&"];function $h(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:ri(e.value,Object.assign({},r.settings.characterReferences,{subset:g_}))}function v_(e,t,n,r){return r.settings.allowDangerousHtml?e.value:$h(e,t,n,r)}function y_(e,t,n,r){return r.all(e)}const b_=ny("type",{invalid:x_,unknown:__,handlers:{comment:Ux,doctype:qx,element:d_,raw:v_,root:y_,text:$h}});function x_(e){throw new Error("Expected node, not `"+e+"`")}function __(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const k_={},w_={},C_=[];function S_(e,t){const n=t||k_,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:T_,all:E_,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||dx,characterReferences:n.characterReferences||w_,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?jh:kx,quote:r,alternative:i}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function T_(e,t,n){return b_(e,t,n,this)}function E_(e){const t=[],n=e&&e.children||C_;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function jc(e){const t=this,n={...t.data("settings"),...e};t.compiler=r;function r(i){return S_(i,n)}}const P_={minInterval:300,maxSize:1e6};class R_{states=[];currentIndex=-1;options;constructor(t){this.options=ag(t,P_)}undo(){if(-this.currentIndex>this.states.length)return;const t=this.states.at(this.currentIndex-1);if(t)return this.currentIndex--,t}redo(){if(this.currentIndex>=-1)return;const t=this.states.at(this.currentIndex+1);if(t)return this.currentIndex++,t}getSize=()=>this.states.reduce((t,n)=>t+n.value.length*2,0);saveState(t,n){const r=this.states.at(-1);if(r?.value===t)return;this.currentIndex<-1&&(this.states=this.states.slice(0,this.currentIndex+1)),this.currentIndex=-1,r&&Date.now()-r.timestamp.getTime()<=(this.options.minInterval??300)&&this.states.pop();let i=this.getSize();for(this.states.push({timestamp:new Date,cursor:n,value:t}),i+=t.length*2;i>(this.options.maxSize??1e6);){const o=this.states.shift();if(!o)break;i-=o.value.length*2}}}class A_{textarea;container;settings;pressedKeys;escapePressed=!1;onKeyDownValue;history;events=new EventTarget;constructor(t,n,r){this.textarea=t,this.container=n,this.settings=r,this.pressedKeys=new Set,t.addEventListener("keydown",this.handleKeyDown.bind(this)),t.addEventListener("keyup",this.handleKeyUp.bind(this)),t.addEventListener("focus",()=>{this.pressedKeys.clear(),this.escapePressed=!1}),t.addEventListener("blur",()=>{this.pressedKeys.clear()}),t.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.history=new R_(r.historyOpts),this.history.saveState(this.textarea.value,this.textarea.selectionStart);for(const i of r.listeners)t.addEventListener(...i)}isWordCharacter(t){return new RegExp(/^[a-zA-Z0-9_\-']*$/).test(t)}handleMouseDown(t){const n=this.getSelection().start,r=this.textarea.value.at(n);t.detail==2&&r!=`
`&&r!=" "&&requestAnimationFrame(()=>{const i=this.isWordCharacter(this.textarea.value[n]);let o=n,s=n;for(;o>=0&&this.isWordCharacter(this.textarea.value[o])==i&&this.textarea.value[o]!=" ";)o--;for(;s<this.textarea.value.length&&this.isWordCharacter(this.textarea.value[s])==i&&this.textarea.value[s]!=" ";)s++;this.textarea.setSelectionRange(o+1,s)})}handleKeyDown(t){const n=t.key.toLowerCase();this.pressedKeys.add(n);const r=this.settings.shortcuts.filter(i=>sg(this.pressedKeys,i.combination));if(r.length>0){t.preventDefault(),r.length>1&&console.warn(`[carta] Multiple keyboard shortcuts have the same the combination: ${this.pressedKeys}`);for(const i of r)i.action(this),i.preventSave||this.history.saveState(this.textarea.value,this.textarea.selectionStart),this.update();this.onKeyDownValue=void 0;return}if(n==="enter")this.handleNewLine(t);else if(n=="tab"&&!this.escapePressed){t.preventDefault();let i=null;const o=this.settings.tabOuts.map(s=>s.delimiter).flat();for(const s of o)if(this.textarea.value.slice(this.textarea.selectionEnd,this.textarea.selectionEnd+s.length)===s){i=s;break}if(i){const s=this.textarea.selectionEnd+i.length;this.textarea.setSelectionRange(s,s)}else{if(t.shiftKey){const s=this.getLine(),l=s.start,u=s.value,f=this.textarea.selectionStart;u.startsWith("	")&&(this.removeAt(l,1),this.textarea.selectionStart=f-1,this.textarea.selectionEnd=f-1)}else{const s=this.textarea.selectionStart;this.insertAt(this.textarea.selectionStart,"	"),this.textarea.selectionStart=s+1,this.textarea.selectionEnd=s+1}this.update()}}else n==="escape"&&(this.escapePressed=!0);this.onKeyDownValue=this.textarea.value}handleKeyUp(t){const n=t.key.toLowerCase();this.pressedKeys.delete(n),this.onKeyDownValue!==void 0&&this.textarea.value!=this.onKeyDownValue&&this.history.saveState(this.textarea.value,this.textarea.selectionStart)}handleNewLine(t){const n=this.textarea.selectionStart;let r;for(r=n;r>0&&this.textarea.value.at(r-1)!==`
`;r--);const i=this.textarea.value.slice(r,n);for(const o of this.settings.prefixes){const s=o.match(i);if(s){t.preventDefault();const l=Array.isArray(s)?s[0]:s;if(i.slice(l.length).trim()===""){const h=this.getLine(r);this.removeAt(r,h.value.length),this.textarea.setSelectionRange(h.start,h.start),this.update();return}const f=o.maker(s,i);this.insertAt(n,`
`+f),this.update();const d=n+f.length+1;this.textarea.setSelectionRange(d,d);break}}}getSelection(){const t=this.textarea.selectionStart,n=this.textarea.selectionEnd;return{start:t,end:n,direction:this.textarea.selectionDirection,slice:this.textarea.value.slice(t,n)}}getLine(t=this.textarea.selectionStart){let n,r;for(n=t;n>0&&this.textarea.value.at(n-1)!==`
`;n--);for(r=t;r<this.textarea.value.length-1&&this.textarea.value.at(r)!==`
`;r++);return{start:n,end:r,value:this.textarea.value.slice(n,r)}}insertAt(t,n){const r=this.textarea.value;this.textarea.value=r.slice(0,t)+n+r.slice(t)}removeAt(t,n=1){const r=this.textarea.value;this.textarea.value=r.slice(0,t)+r.slice(t+n)}toggleSelectionSurrounding(t){const n=this.getSelection(),r=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t[1]:t,o=this.textarea.value.slice(n.start-r.length,n.start),s=this.textarea.value.slice(n.end,n.end+i.length);o===r&&s===i?(this.removeAt(n.end,i.length),this.removeAt(n.start-r.length,r.length),this.textarea.setSelectionRange(n.start-i.length,n.end-i.length)):(this.insertAt(n.end,i),this.insertAt(n.start,r),this.textarea.setSelectionRange(n.start+r.length,n.end+r.length))}toggleLinePrefix(t,n="attach"){const r=this.getSelection();let i=r.start;for(;i>0&&this.textarea.value.at(i-1)!==`
`;)i--;let o=!0;const s=r.start;let l=r.end;for(;o;){for(this.textarea.value.slice(i,i+t.length)===t?n==="attach"&&this.textarea.value.at(i+t.length)===" "?(this.removeAt(i,t.length+1),l-=t.length+1):(this.removeAt(i,t.length),l-=t.length):n==="attach"?(this.insertAt(i,t+" "),l+=t.length+1):(this.insertAt(i,t),l+=t.length);i<this.textarea.value.length&&this.textarea.value.at(i)!==`
`;)i++;this.textarea.value.at(i)==`
`&&i++,o=i<l}this.textarea.setSelectionRange(s,l)}update=()=>this.events.dispatchEvent(new Event("update"));getCursorXY(t=this.textarea.selectionStart){const{offsetLeft:n,offsetTop:r}=this.textarea,i=document.createElement("div"),o=getComputedStyle(this.textarea);for(const g of o)i.style[g]=o[g];const l=this.textarea.tagName==="INPUT"?this.textarea.value.replace(/ /g,"."):this.textarea.value,u=l.substr(0,t);i.textContent=u,this.textarea.tagName==="TEXTAREA"&&(i.style.height="auto"),this.textarea.tagName==="INPUT"&&(i.style.width="auto");const f=document.createElement("span");f.className+="carta-font-code",f.textContent=l.substr(t)||".",i.appendChild(f),document.body.appendChild(i);const{offsetLeft:d,offsetTop:h}=f;return document.body.removeChild(i),{x:n+d,y:r+h,left:n+d,top:r+h,right:this.textarea.clientWidth-n,bottom:this.textarea.clientHeight-r}}moveElemToCaret(t){const n=t.clientWidth,r=t.clientHeight,i=this.getCursorXY(),o=this.getRowHeight();let s=i.left,l;n<this.container.clientWidth&&s+n-this.container.scrollLeft>=this.container.clientWidth&&(l=this.container.clientWidth-s,s=void 0);let u=i.top,f;r<this.container.clientHeight&&u+r-this.container.scrollTop>=this.container.clientHeight&&(f=this.container.clientHeight-u,u=void 0),t.style.left=s!==void 0?s+"px":"unset",t.style.right=l!==void 0?l+"px":"unset",t.style.top=u!==void 0?u+o+"px":"unset",t.style.bottom=f!==void 0?f+"px":"unset"}$bindToCaret(t,n){n.portal.appendChild(t);const r=Array.from(n.editorElement?.classList??[]).find(o=>o.startsWith("carta-theme__"));t.classList.add(r??"carta-theme__default"),t.style.position="fixed";const i=()=>{const o=this.getCursorXY(),s={x:o.x+this.textarea.getBoundingClientRect().left,y:o.y+this.textarea.getBoundingClientRect().top},l=this.getRowHeight(),u=t.clientWidth,f=t.clientHeight;let d=s.x,h;d+u>=window.innerWidth&&(h=window.innerWidth-d,d=void 0);let g=s.y,v;g+f>=window.innerHeight&&(v=window.innerHeight-g,g=void 0),t.style.left=d!==void 0?d+"px":"unset",t.style.right=h!==void 0?h+"px":"unset",t.style.top=g!==void 0?g+l+"px":"unset",t.style.bottom=v!==void 0?v+"px":"unset"};return this.textarea.addEventListener("input",i),window.addEventListener("resize",i),window.addEventListener("scroll",i),i(),{destroy:()=>{try{n.portal.removeChild(t)}catch{}this.textarea.removeEventListener("input",i),window.removeEventListener("resize",i),window.removeEventListener("scroll",i)}}}getRowHeight(){const t=getComputedStyle(this.container).lineHeight,n=parseFloat(t),r=parseFloat(getComputedStyle(this.container).fontSize);return isNaN(n)?Math.ceil(r*1.2):t.endsWith("em")?Math.ceil(n*r):t.endsWith("%")?Math.ceil(n/100*r):t.endsWith("px")?Math.ceil(n):Math.ceil(r*n)}}const I_=[{id:"bold",combination:new Set(["control","b"]),action:e=>e.toggleSelectionSurrounding("**")},{id:"italic",combination:new Set(["control","i"]),action:e=>e.toggleSelectionSurrounding("*")},{id:"quote",combination:new Set(["control","shift",","]),action:e=>e.toggleLinePrefix(">")},{id:"link",combination:new Set(["control","k"]),action:e=>{e.toggleSelectionSurrounding(["[","]"]);const t=e.getSelection().end+1;e.insertAt(t,"(url)"),e.textarea.setSelectionRange(t+1,t+4)}},{id:"strikethrough",combination:new Set(["control","shift","x"]),action:e=>e.toggleSelectionSurrounding("~~")},{id:"code",combination:new Set(["control","e"]),action:e=>e.toggleSelectionSurrounding("`")},{id:"undo",combination:new Set(["control","z"]),preventSave:!0,action:e=>{const t=e.history.undo();t&&(e.textarea.value=t.value,e.textarea.selectionStart=t.cursor,e.textarea.selectionEnd=t.cursor)}},{id:"redo",combination:new Set(["control","y"]),preventSave:!0,action:e=>{const t=e.history.redo();t&&(e.textarea.value=t.value,e.textarea.selectionStart=t.cursor,e.textarea.selectionEnd=t.cursor)}}];var D_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M4.5 2.75a.75.75 0 0 0-1.5 0v10.5a.75.75 0 0 0 1.5 0v-4.5h7v4.5a.75.75 0 0 0 1.5 0V2.75a.75.75 0 0 0-1.5 0v4.5h-7v-4.5Z" clip-rule="evenodd"></path></svg>');function O_(e){var t=D_();ie(e,t)}var L_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M6.5 2a.75.75 0 0 0 0 1.5h1.93l-2.412 9H4A.75.75 0 0 0 4 14h5.5a.75.75 0 0 0 0-1.5H7.57l2.412-9H12A.75.75 0 0 0 12 2H6.5Z" clip-rule="evenodd"></path></svg>');function M_(e){var t=L_();ie(e,t)}var j_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M4 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h5.5a3.5 3.5 0 0 0 1.852-6.47A3.5 3.5 0 0 0 8.5 2H4Zm4.5 5a1.5 1.5 0 1 0 0-3H5v3h3.5ZM5 9v3h4.5a1.5 1.5 0 0 0 0-3H5Z" clip-rule="evenodd"></path></svg>');function z_(e){var t=j_();ie(e,t)}var N_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M1.5 3.75a.75.75 0 0 0-1.5 0v8.5a.75.75 0 0 0 1.5 0v-8.5ZM4.75 3a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Zm0 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm-.75 5a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg>');function B_(e){var t=N_();ie(e,t)}var F_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M9.929 3.132a2.078 2.078 0 1 1 2.94 2.94l-.65.648a.75.75 0 0 0 1.061 1.06l.649-.648a3.579 3.579 0 0 0-5.06-5.06L6.218 4.72a3.578 3.578 0 0 0 0 5.06a.75.75 0 0 0 1.061-1.06a2.078 2.078 0 0 1 0-2.94L9.93 3.132Zm-.15 3.086a.75.75 0 0 0-1.057 1.064c.816.81.818 2.13.004 2.942l-2.654 2.647a2.08 2.08 0 0 1-2.94-2.944l.647-.647a.75.75 0 0 0-1.06-1.06l-.648.647a3.58 3.58 0 0 0 5.06 5.066l2.654-2.647a3.575 3.575 0 0 0-.007-5.068Z" clip-rule="evenodd"></path></svg>');function $_(e){var t=F_();ie(e,t)}var U_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M1 4.75a1 1 0 1 0 0-2a1 1 0 0 0 0 2ZM4.75 3a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm0 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm-.75 5a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75a.75.75 0 0 1-.75-.75ZM2 8a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm-1 5.25a1 1 0 1 0 0-2a1 1 0 0 0 0 2Z" clip-rule="evenodd"></path></svg>');function q_(e){var t=U_();ie(e,t)}var H_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M0 2h2v4H1V3H0V2Zm1.637 9.008H0v-1h1.637a1.382 1.382 0 0 1 .803 2.506L1.76 13H3v1H0v-.972L1.859 11.7a.382.382 0 0 0-.222-.693ZM4.75 3a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm0 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm-.75 5a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg>');function K_(e){var t=H_();ie(e,t)}var V_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M4.78 3.28a.75.75 0 0 0-1.06-1.06L1.75 4.19l-.47-.47A.75.75 0 0 0 .22 4.78l1 1a.75.75 0 0 0 1.06 0l2.5-2.5ZM6 3.75A.75.75 0 0 1 6.75 3h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 6 3.75ZM6 8a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 6 8Zm.75 3.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Zm-1.97-1.28a.75.75 0 0 1 0 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0l-1-1a.75.75 0 1 1 1.06-1.06l.47.47l1.97-1.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg>');function W_(e){var t=V_();ie(e,t)}var Y_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M9.424 2.023a.75.75 0 0 1 .556.904L7.48 13.42a.75.75 0 0 1-1.46-.348L8.52 2.58a.75.75 0 0 1 .904-.556ZM11.16 4.22a.75.75 0 0 1 1.06 0l3.25 3.25L16 8l-.53.53l-3.25 3.25a.75.75 0 1 1-1.06-1.06L13.88 8l-2.72-2.72a.75.75 0 0 1 0-1.06ZM4.84 5.28a.75.75 0 1 0-1.06-1.06L.53 7.47L0 8l.53.53l3.25 3.25a.75.75 0 0 0 1.06-1.06L2.12 8l2.72-2.72Z" clip-rule="evenodd"></path></svg>');function G_(e){var t=Y_();ie(e,t)}var J_=An('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M7.886 1a3.136 3.136 0 0 0-2.41 5.144L6.4 7.25H2.75a.75.75 0 0 0 0 1.5h4.899l1.722 2.066A1.636 1.636 0 0 1 8.114 13.5H8a1.75 1.75 0 0 1-1.75-1.75a.75.75 0 0 0-1.5 0A3.25 3.25 0 0 0 8 15h.114a3.136 3.136 0 0 0 2.41-5.144L9.6 8.75h3.649a.75.75 0 0 0 0-1.5H8.351L6.63 5.184A1.636 1.636 0 0 1 7.886 2.5H8c.966 0 1.75.784 1.75 1.75a.75.75 0 0 0 1.5 0A3.25 3.25 0 0 0 8 1h-.114Z" clip-rule="evenodd"></path></svg>');function Z_(e){var t=J_();ie(e,t)}const Q_=[{id:"heading",action:e=>e.toggleLinePrefix("###"),component:O_,label:"Heading"},{id:"bold",action:e=>e.toggleSelectionSurrounding("**"),component:z_,label:"Bold"},{id:"italic",action:e=>e.toggleSelectionSurrounding("*"),component:M_,label:"Italic"},{id:"strikethrough",action:e=>e.toggleSelectionSurrounding("~~"),component:Z_,label:"Strikethrough"},{id:"quote",action:e=>e.toggleLinePrefix(">"),component:B_,label:"Quote"},{id:"code",action:e=>e.toggleSelectionSurrounding("`"),component:G_,label:"Code"},{id:"link",action:e=>{e.toggleSelectionSurrounding(["[","]"]);const t=e.getSelection().end+1;e.insertAt(t,"(url)"),e.textarea.setSelectionRange(t+1,t+4)},component:$_,label:"Link"},{id:"bulletedList",action:e=>e.toggleLinePrefix("- ","detach"),component:q_,label:"Bulleted list"},{id:"numberedList",action:e=>e.toggleLinePrefix("1. ","detach"),component:K_,label:"Numbered list"},{id:"taskList",action:e=>e.toggleLinePrefix("- [ ] ","detach"),component:W_,label:"Task list"}],To={taskList:/^(\s*)(-\s+\[)[ xX]?(\]\s+)/,bulletedList:/^(\s*)([-*]\s+)/,numberedList:/^(\s*)(\d+)(\.\s+)/,blockquote:/^(\s*)([> ]*[>]\s+)/},X_=[{id:"taskList",match:e=>To.taskList.exec(e),maker:e=>`${e[1]}${e[2]} ${e[3]}`},{id:"bulletedList",match:e=>To.bulletedList.exec(e),maker:e=>`${e[1]}${e[2]}`},{id:"numberedList",match:e=>To.numberedList.exec(e),maker:e=>`${e[1]}${Number(e[2])+1}${e[3]}`},{id:"blockquote",match:e=>To.blockquote.exec(e),maker:e=>`${e[1]}${e[2]}`}];class ek{container;constructor(t){this.container=t}}const tk=[{id:"bold",delimiter:"**"},{id:"italic",delimiter:["*","_"]},{id:"link",delimiter:")"},{id:"strikethrough",delimiter:"~~"},{id:"inline-code",delimiter:"`"},{id:"block-code",delimiter:"\n```"}],zc=["carta-render","carta-render-ssr"];class Uh{sanitizer;historyOptions;theme;shikiOptions;rehypeOptions;rendererDebounce;keyboardShortcuts;icons;prefixes;tabOuts;grammarRules;highlightingRules;textareaListeners;cartaListeners;components;dispatcher=new EventTarget;gfmOptions;syncProcessor;asyncProcessor;mElement;mInput;mRenderer;mHighlighter;mSyncTransformers=[];mAsyncTransformers=[];get element(){return this.mElement}get input(){return this.mInput}get renderer(){return this.mRenderer}async highlighter(){return this.mHighlighter?this.mHighlighter:(this.mHighlighter=(async()=>{const t=await os(()=>import("./highlight.Ct1y-uZ_.js"),__vite__mapDeps([0,1])),{loadHighlighter:n,loadDefaultTheme:r}=t;return n({theme:this.theme??await r(),grammarRules:this.grammarRules,highlightingRules:this.highlightingRules,shiki:this.shikiOptions})})(),this.mHighlighter)}elementsToBind=[];constructor(t){this.sanitizer=t?.sanitizer||void 0,this.historyOptions=t?.historyOptions,this.theme=t?.theme,this.shikiOptions=t?.shikiOptions,this.rendererDebounce=t?.rendererDebounce??300,this.keyboardShortcuts=[],this.icons=[],this.prefixes=[],this.tabOuts=[],this.textareaListeners=[],this.cartaListeners=[],this.components=[],this.grammarRules=[],this.highlightingRules=[],this.rehypeOptions=t?.rehypeOptions??{};const n=[];for(const r of t?.extensions??[])this.keyboardShortcuts.push(...r.shortcuts??[]),this.icons.push(...r.icons??[]),this.prefixes.push(...r.prefixes??[]),this.tabOuts.push(...r.tabOuts??[]),this.components.push(...r.components??[]),this.grammarRules.push(...r.grammarRules??[]),this.highlightingRules.push(...r.highlightingRules??[]),n.push(...r.listeners??[]);this.textareaListeners=n.filter(r=>!zc.includes(r[0])),this.cartaListeners=n.filter(r=>zc.includes(r[0])),this.cartaListeners.forEach(r=>{this.dispatcher.addEventListener(...r)}),this.keyboardShortcuts.push(...I_.filter(r=>t?.disableShortcuts===!0?!1:!t?.disableShortcuts?.includes(r.id))),this.icons.unshift(...Q_.filter(r=>t?.disableIcons===!0?!1:!t?.disableIcons?.includes(r.id))),this.prefixes.push(...X_.filter(r=>t?.disablePrefixes===!0?!1:!t?.disablePrefixes?.includes(r.id))),this.tabOuts.push(...tk.filter(r=>t?.disableTabOuts===!0?!1:!t?.disableTabOuts?.includes(r.id))),this.mSyncTransformers=[],this.mAsyncTransformers=[];for(const r of t?.extensions??[])for(const i of r.transformers??[])i.execution==="sync"?this.mSyncTransformers.push(i):this.mAsyncTransformers.push(i);this.gfmOptions=t?.gfmOptions,this.syncProcessor=this.setupSynchronousProcessor({gfmOptions:this.gfmOptions,rehypeOptions:this.rehypeOptions}),this.asyncProcessor=this.setupAsynchronousProcessor({gfmOptions:this.gfmOptions,rehypeOptions:this.rehypeOptions});for(const r of t?.extensions??[])r.onLoad&&r.onLoad({carta:this})}setupSynchronousProcessor({gfmOptions:t,rehypeOptions:n}){const r=Qu(),i=this.mSyncTransformers.filter(s=>s.type==="remark"),o=this.mSyncTransformers.filter(s=>s.type==="rehype");r.use(hc),r.use(xc,t);for(const s of i)s.transform({processor:r,carta:this});r.use(Rc,n);for(const s of o)s.transform({processor:r,carta:this});return r.use(jc),r}async setupAsynchronousProcessor({gfmOptions:t,rehypeOptions:n}){const r=Qu(),i=[...this.mSyncTransformers,...this.mAsyncTransformers].filter(s=>s.type==="remark"),o=[...this.mSyncTransformers,...this.mAsyncTransformers].filter(s=>s.type==="rehype");r.use(hc),r.use(xc,t);for(const s of i)await s.transform({processor:r,carta:this});r.use(Rc,n);for(const s of o)await s.transform({processor:r,carta:this});return r.use(jc),r}async render(t){{const o=await os(()=>import("./highlight.Ct1y-uZ_.js"),__vite__mapDeps([0,1])),{loadNestedLanguages:s}=o,l=await this.highlighter();await s(l,t)}const r=await(await this.asyncProcessor).process(t);if(!r)return"";const i=String(r);return this.dispatcher.dispatchEvent(new qu("carta-render",{detail:{carta:this}})),(this.sanitizer&&this.sanitizer(i))??i}renderSSR(t){const n=String(this.syncProcessor.processSync(t));return typeof n!="string"?"":(this.dispatcher.dispatchEvent(new qu("carta-render-ssr",{detail:{carta:this}})),this.sanitizer?this.sanitizer(n):n)}$setElement(t){this.mElement=t}$setInput(t,n,r){const i=this.input;this.mInput=new A_(t,n,{shortcuts:this.keyboardShortcuts,prefixes:this.prefixes,tabOuts:this.tabOuts,listeners:this.textareaListeners,historyOpts:this.historyOptions}),i&&(i.events.removeEventListener("update",r),this.mInput.history=i.history),this.mInput.events.addEventListener("update",r),this.elementsToBind.forEach(o=>{o.callback=this.input?.$bindToCaret(o.elem,{portal:o.portal,editorElement:this.element}).destroy})}$setRenderer(t){this.mRenderer=new ek(t)}bindToCaret(t,n=document.querySelector("body")){let r;return this.input&&(r=this.input.$bindToCaret(t,{portal:n,editorElement:this.element}).destroy),this.elementsToBind.push({elem:t,portal:n,callback:r}),{destroy:()=>{r&&r(),this.elementsToBind=this.elementsToBind.filter(i=>i.elem!=t)}}}}class nk{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return rk(t).buffer}}function rk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(o,r),r+=i.byteLength}return n}function qh(e){return new ik(e).unpack()}function Hh(e){const t=new ok,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class ik{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",o,s;for(;r<t;)o=n[r],o<160?(s=o,r++):(o^192)<32?(s=(o&31)<<6|n[r+1]&63,r+=2):(o^224)<16?(s=(o&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(s=(o&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(s);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,s=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*s}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class ok{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const o=this.pack(t[i]);return o instanceof Promise?o.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,o=Math.floor(i*2**52),s=2**32,l=n<<31|r+1023<<20|o/s&1048575,u=o%s;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(u)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=o=>{if(o<n.length){const s=n[o];if(t.hasOwnProperty(s)){this.pack(s);const l=this.pack(t[s]);if(l instanceof Promise)return l.then(()=>i(o+1))}return i(o+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new nk,this._textEncoder=new TextEncoder}}let Kh=!0,Vh=!0;function Ai(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Br(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,l){if(s!==t)return i.apply(this,arguments);const u=f=>{const d=n(f);d&&(l.handleEvent?l.handleEvent(d):l(d))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,u),i.apply(this,[s,u])};const o=r.removeEventListener;r.removeEventListener=function(s,l){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const u=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,u])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function sk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Kh=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ak(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Vh=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Wh(){if(typeof window=="object"){if(Kh)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Fl(e,t){Vh&&console.warn(e+" is deprecated, please use "+t+" instead.")}function lk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Ai(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Ai(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Ai(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Ai(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Nc(e){return Object.prototype.toString.call(e)==="[object Object]"}function Yh(e){return Nc(e)?Object.keys(e).reduce(function(t,n){const r=Nc(e[n]),i=r?Yh(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function nl(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?nl(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{nl(e,e.get(i),n)})}))}function Bc(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(l=>{l.type===r&&l.trackId===s.id&&nl(e,l,i)})}),i}const Fc=Wh;function Gh(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const u={};return Object.keys(l).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const d=typeof l[f]=="object"?l[f]:{ideal:l[f]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const h=function(g,v){return g?g+v.charAt(0).toUpperCase()+v.slice(1):v==="deviceId"?"sourceId":v};if(d.ideal!==void 0){u.optional=u.optional||[];let g={};typeof d.ideal=="number"?(g[h("min",f)]=d.ideal,u.optional.push(g),g={},g[h("max",f)]=d.ideal,u.optional.push(g)):(g[h("",f)]=d.ideal,u.optional.push(g))}d.exact!==void 0&&typeof d.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[h("",f)]=d.exact):["min","max"].forEach(g=>{d[g]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[h(g,f)]=d[g])})}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},i=function(l,u){if(t.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const f=function(d,h,g){h in d&&!(g in d)&&(d[g]=d[h],delete d[h])};l=JSON.parse(JSON.stringify(l)),f(l.audio,"autoGainControl","googAutoGainControl"),f(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let f=l.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const d=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete l.video.facingMode;let h;if(f.exact==="environment"||f.ideal==="environment"?h=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(h=["front"]),h)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(b=>b.kind==="videoinput");let v=g.find(b=>h.some(C=>b.label.toLowerCase().includes(C)));return!v&&g.length&&h.includes("back")&&(v=g[g.length-1]),v&&(l.video.deviceId=f.exact?{exact:v.deviceId}:{ideal:v.deviceId}),l.video=r(l.video),Fc("chrome: "+JSON.stringify(l)),u(l)})}l.video=r(l.video)}return Fc("chrome: "+JSON.stringify(l)),u(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(l,u,f){i(l,d=>{n.webkitGetUserMedia(d,u,h=>{f&&f(o(h))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return i(u,f=>l(f).then(d=>{if(f.audio&&!d.getAudioTracks().length||f.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(o(d))))}}}function Jh(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Zh(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Br(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Qh(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){let f=i.apply(this,arguments);return f||(f=t(this,l),this._senders.push(f)),f};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const u=this._senders.indexOf(l);u!==-1&&this._senders.splice(u,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const l=this._senders.find(u=>u.track===s);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Xh(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Bc(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Br(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Bc(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(l=>{l.track===r&&(i?s=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?s=!0:o=l),l.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function ed(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(u)===-1&&this._shimmedLocalStreams[l.id].push(u):this._shimmedLocalStreams[l.id]=[l,u],u};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(f=>{if(this.getSenders().find(h=>h.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(f=>l.indexOf(f)===-1);this._shimmedLocalStreams[s.id]=[s].concat(u)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const u=this._shimmedLocalStreams[l].indexOf(s);u!==-1&&this._shimmedLocalStreams[l].splice(u,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function td(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return ed(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(h=>this._reverseStreams[h.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(h=>{if(this.getSenders().find(v=>v.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const h=new e.MediaStream(d.getTracks());this._streams[d.id]=h,this._reverseStreams[h.id]=d,d=h}r.apply(this,[d])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},e.RTCPeerConnection.prototype.addTrack=function(d,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(C=>C===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const b=this._streams[h.id];if(b)b.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new e.MediaStream([d]);this._streams[h.id]=C,this._reverseStreams[C.id]=h,this.addStream(C)}return this.getSenders().find(C=>C.track===d)};function o(f,d){let h=d.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const v=f._reverseStreams[g],b=f._streams[v.id];h=h.replace(new RegExp(b.id,"g"),v.id)}),new RTCSessionDescription({type:d.type,sdp:h})}function s(f,d){let h=d.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const v=f._reverseStreams[g],b=f._streams[v.id];h=h.replace(new RegExp(v.id,"g"),b.id)}),new RTCSessionDescription({type:d.type,sdp:h})}["createOffer","createAnswer"].forEach(function(f){const d=e.RTCPeerConnection.prototype[f],h={[f](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[b=>{const C=o(this,b);g[0].apply(null,[C])},b=>{g[1]&&g[1].apply(null,b)},arguments[2]]):d.apply(this,arguments).then(b=>o(this,b))}};e.RTCPeerConnection.prototype[f]=h[f]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=s(this,arguments[0]),l.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=u.get.apply(this);return f.type===""?f:o(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(v=>{this._streams[v].getTracks().find(C=>d.track===C)&&(g=this._streams[v])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function rl(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function nd(e,t){Br(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const $c=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:nd,shimAddTrackRemoveTrack:td,shimAddTrackRemoveTrackWithNative:ed,shimGetSendersWithDtmf:Qh,shimGetUserMedia:Gh,shimMediaStream:Jh,shimOnTrack:Zh,shimPeerConnection:rl,shimSenderReceiverGetStats:Xh},Symbol.toStringTag,{value:"Module"}));function rd(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){Fl("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,l,u){l in s&&!(u in s)&&(s[u]=s[l],delete s[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const l=s.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[l])}}}}function uk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function id(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function il(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;return r.apply(this,[o||null]).then(u=>{if(t.version<53&&!s)try{u.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;u.forEach((d,h)=>{u.set(h,Object.assign({},d,{type:n[d.type]||d.type}))})}return u}).then(s,l)}}function od(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function sd(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Br(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ad(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Fl("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function ld(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ud(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,l=s.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(l).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function cd(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function fd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function hd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Uc=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:ud,shimCreateAnswer:hd,shimCreateOffer:fd,shimGetDisplayMedia:uk,shimGetParameters:cd,shimGetUserMedia:rd,shimOnTrack:id,shimPeerConnection:il,shimRTCDataChannel:ld,shimReceiverGetStats:sd,shimRemoveStream:ad,shimSenderGetStats:od},Symbol.toStringTag,{value:"Module"}));function dd(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function pd(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function md(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(f,d){const h=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[h]);return d?(g.then(f,d),Promise.resolve()):g},t.createAnswer=function(f,d){const h=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[h]);return d?(g.then(f,d),Promise.resolve()):g};let l=function(u,f,d){const h=i.apply(this,[u]);return d?(h.then(f,d),Promise.resolve()):h};t.setLocalDescription=l,l=function(u,f,d){const h=o.apply(this,[u]);return d?(h.then(f,d),Promise.resolve()):h},t.setRemoteDescription=l,l=function(u,f,d){const h=s.apply(this,[u]);return d?(h.then(f,d),Promise.resolve()):h},t.addIceCandidate=l}function gd(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(vd(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function vd(e){return e&&e.video!==void 0?Object.assign({},e,{video:Yh(e.video)}):e}function yd(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let l=r.iceServers[s];l.urls===void 0&&l.url?(Fl("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function bd(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xd(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function _d(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const qc=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:_d,shimCallbacksAPI:md,shimConstraints:vd,shimCreateOfferLegacy:xd,shimGetUserMedia:gd,shimLocalStreamsAPI:dd,shimRTCIceServerUrls:yd,shimRemoteStreamsAPI:pd,shimTrackEventTransceiver:bd},Symbol.toStringTag,{value:"Module"}));var Aa={exports:{}},Hc;function ck(){return Hc||(Hc=1,function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");r.profile=o[2];for(let l=3;l<o.length;l++){const u=o[l],f=t.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(f){const d=t.parseRtpMap(f),h=t.matchPrefix(n,"a=fmtp:"+u+" ");switch(d.parameters=h.length?t.parseFmtp(h[0]):{},d.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(t.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(t.parseExtmap(l))});const s=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(l=>{s.forEach(u=>{l.rtcpFeedback.find(d=>d.type===u.type&&d.parameter===u.parameter)||l.rtcpFeedback.push(u)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=t.writeRtpMap(s),i+=t.writeFmtp(s),i+=t.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=t.writeExtmap(s)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),u=l.length>0&&l[0].ssrc;let f;const d=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(b=>parseInt(b,10)));d.length>0&&d[0].length>1&&d[0][0]===u&&(f=d[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let v={ssrc:u,codecPayloadType:parseInt(g.parameters.apt,10)};u&&f&&(v.rtx={ssrc:f}),r.push(v),o&&(v=JSON.parse(JSON.stringify(v)),v.fec={ssrc:u,mechanism:s?"red+ulpfec":"red"},r.push(v))}}),r.length===0&&u&&r.push({ssrc:u});let h=t.matchPrefix(n,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substring(5),10)*1e3*.95-50*40*8:h=void 0,r.forEach(g=>{g.maxBitrate=h})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=t.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=t.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){const u=l[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t}(Aa)),Aa.exports}var kd=ck();const ii=Cl(kd),fk=Mp({__proto__:null,default:ii},[kd]);function Oo(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),o=ii.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Br(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ol(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Br(e,"icecandidate",t=>{if(t.candidate){const n=ii.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Lo(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const u=ii.splitSections(l.sdp);return u.shift(),u.some(f=>{const d=ii.parseMLine(f);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(l){const u=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const f=parseInt(u[1],10);return f!==f?-1:f},i=function(l){let u=65536;return t.browser==="firefox"&&(t.version<57?l===-1?u=16384:u=2147483637:t.version<60?u=t.version===57?65535:65536:u=2147483637),u},o=function(l,u){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const d=ii.matchPrefix(l.sdp,"a=max-message-size:");return d.length>0?f=parseInt(d[0].substring(19),10):t.browser==="firefox"&&u!==-1&&(f=2147483637),f},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),f=i(u),d=o(arguments[0],u);let h;f===0&&d===0?h=Number.POSITIVE_INFINITY:f===0||d===0?h=Math.max(f,d):h=Math.min(f,d);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return h}}),this._sctp=g}return s.apply(this,arguments)}}function Mo(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const l=arguments[0],u=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Br(e,"datachannel",r=>(t(r.channel,r.target),r))}function sl(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function al(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function jo(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function zo(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}const hk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:al,shimAddIceCandidateNullOrEmpty:jo,shimConnectionState:sl,shimMaxMessageSize:Lo,shimParameterlessSetLocalDescription:zo,shimRTCIceCandidate:Oo,shimRTCIceCandidateRelayProtocol:ol,shimSendThrowTypeError:Mo},Symbol.toStringTag,{value:"Module"}));function dk({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Wh,r=lk(e),i={browserDetails:r,commonShim:hk,extractVersion:Ai,disableLog:sk,disableWarnings:ak,sdp:fk};switch(r.browser){case"chrome":if(!$c||!rl||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=$c,jo(e,r),zo(e),Gh(e,r),Jh(e),rl(e,r),Zh(e),td(e,r),Qh(e),Xh(e),nd(e,r),Oo(e),ol(e),sl(e),Lo(e,r),Mo(e),al(e,r);break;case"firefox":if(!Uc||!il||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Uc,jo(e,r),zo(e),rd(e,r),il(e,r),id(e),ad(e),od(e),sd(e),ld(e),ud(e),cd(e),fd(e),hd(e),Oo(e),sl(e),Lo(e,r),Mo(e);break;case"safari":if(!qc||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=qc,jo(e,r),zo(e),yd(e),xd(e),md(e),dd(e),pd(e),bd(e),gd(e),_d(e),Oo(e),ol(e),Lo(e,r),Mo(e),al(e,r);break;default:n("Unsupported browser!");break}return i}const Kc=dk({window:typeof window>"u"?void 0:window});function Fr(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class wd{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let o=0,s=0;for(;s<r;){const l=Math.min(r,s+this.chunkedMTU),u=t.slice(s,l),f={__peerData:this._dataCount,n:o,data:u,total:i};n.push(f),s=l,o++}return this._dataCount++,n}}}function pk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const Ia=Kc.default||Kc,Si=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Ia.browserDetails.browser}getVersion(){return Ia.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Ia.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},mk=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Cd=()=>Math.random().toString(36).slice(2),Vc={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class gk extends wd{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Vc,this.browser=Si.getBrowser(),this.browserVersion=Si.getVersion(),this.pack=Hh,this.unpack=qh,this.supports=function(){const n={browser:Si.isBrowserSupported(),webRTC:Si.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Vc),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Si.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=mk,this.randomToken=Cd}}const yn=new gk,vk="PeerJS: ";class yk{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[vk,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var we=new yk,$l={},bk=Object.prototype.hasOwnProperty,dn="~";function Wi(){}Object.create&&(Wi.prototype=Object.create(null),new Wi().__proto__||(dn=!1));function xk(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Sd(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new xk(n,r||e,i),s=dn?dn+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function No(e,t){--e._eventsCount===0?e._events=new Wi:delete e._events[t]}function on(){this._events=new Wi,this._eventsCount=0}on.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)bk.call(n,r)&&t.push(dn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};on.prototype.listeners=function(t){var n=dn?dn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s};on.prototype.listenerCount=function(t){var n=dn?dn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};on.prototype.emit=function(t,n,r,i,o,s){var l=dn?dn+t:t;if(!this._events[l])return!1;var u=this._events[l],f=arguments.length,d,h;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,n),!0;case 3:return u.fn.call(u.context,n,r),!0;case 4:return u.fn.call(u.context,n,r,i),!0;case 5:return u.fn.call(u.context,n,r,i,o),!0;case 6:return u.fn.call(u.context,n,r,i,o,s),!0}for(h=1,d=new Array(f-1);h<f;h++)d[h-1]=arguments[h];u.fn.apply(u.context,d)}else{var g=u.length,v;for(h=0;h<g;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),f){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,n);break;case 3:u[h].fn.call(u[h].context,n,r);break;case 4:u[h].fn.call(u[h].context,n,r,i);break;default:if(!d)for(v=1,d=new Array(f-1);v<f;v++)d[v-1]=arguments[v];u[h].fn.apply(u[h].context,d)}}return!0};on.prototype.on=function(t,n,r){return Sd(this,t,n,r,!1)};on.prototype.once=function(t,n,r){return Sd(this,t,n,r,!0)};on.prototype.removeListener=function(t,n,r,i){var o=dn?dn+t:t;if(!this._events[o])return this;if(!n)return No(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&No(this,o);else{for(var l=0,u=[],f=s.length;l<f;l++)(s[l].fn!==n||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=u.length===1?u[0]:u:No(this,o)}return this};on.prototype.removeAllListeners=function(t){var n;return t?(n=dn?dn+t:t,this._events[n]&&No(this,n)):(this._events=new Wi,this._eventsCount=0),this};on.prototype.off=on.prototype.removeListener;on.prototype.addListener=on.prototype.on;on.prefixed=dn;on.EventEmitter=on;$l=on;var $r={};Fr($r,"ConnectionType",()=>vr);Fr($r,"PeerErrorType",()=>Ft);Fr($r,"BaseConnectionErrorType",()=>ll);Fr($r,"DataConnectionErrorType",()=>Ul);Fr($r,"SerializationType",()=>Ss);Fr($r,"SocketEventType",()=>gr);Fr($r,"ServerMessageType",()=>nn);var vr=function(e){return e.Data="data",e.Media="media",e}({}),Ft=function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e}({}),ll=function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e}({}),Ul=function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e}({}),Ss=function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e}({}),gr=function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e}({}),nn=function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e}({});const Td="1.5.5";class _k extends $l.EventEmitter{constructor(t,n,r,i,o,s=5e3){super(),this.pingInterval=s,this._disconnected=!0,this._messagesQueue=[];const l=t?"wss://":"ws://";this._baseUrl=l+n+":"+r+i+"peerjs?key="+o}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Td),this._disconnected=!1,this._socket.onmessage=i=>{let o;try{o=JSON.parse(i.data),we.log("Server message received:",o)}catch{we.log("Invalid server message",i.data);return}this.emit(gr.Message,o)},this._socket.onclose=i=>{this._disconnected||(we.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(gr.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),we.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){we.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:nn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(gr.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Ed{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===vr.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},o=n.createDataChannel(r.label,i);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){we.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;we.log("Listening for ICE candidates."),t.onicecandidate=s=>{!s.candidate||!s.candidate.candidate||(we.log(`Received ICE candidates for ${n}:`,s.candidate),o.socket.send({type:nn.Candidate,payload:{candidate:s.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":we.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(ll.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":we.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(ll.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":we.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},we.log("Listening for data channel"),t.ondatachannel=s=>{we.log("Received data channel");const l=s.channel;o.getConnection(n,r)._initializeDataChannel(l)},we.log("Listening for remote stream"),t.ontrack=s=>{we.log("Received remote stream");const l=s.streams[0],u=o.getConnection(n,r);if(u.type===vr.Media){const f=u;this._addStreamToMediaConnection(l,f)}}}cleanup(){we.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);we.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===vr.Data){const o=this.connection;i={...i,label:o.label,reliable:o.reliable,serialization:o.serialization}}n.socket.send({type:nn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Ft.WebRTC,i),we.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Ft.WebRTC,r),we.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();we.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:nn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Ft.WebRTC,i),we.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Ft.WebRTC,r),we.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;we.log("Setting remote description",n);const o=this;try{await r.setRemoteDescription(n),we.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await o._makeAnswer()}catch(s){i.emitError(Ft.WebRTC,s),we.log("Failed to setRemoteDescription, ",s)}}async handleCandidate(t){we.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),we.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Ft.WebRTC,n),we.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(we.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return we.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){we.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class Pd extends $l.EventEmitter{emitError(t,n){we.error("Error:",n),this.emit("error",new kk(`${t}`,n))}}class kk extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class Rd extends Pd{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class fs extends Rd{static#e=this.ID_PREFIX="mc_";get type(){return vr.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||fs.ID_PREFIX+yn.randomToken(),this._negotiator=new Ed(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){we.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case nn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case nn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:we.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){we.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class wk{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:o,key:s}=this._options,l=new URL(`${n}://${r}:${i}${o}${s}/${t}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",Td),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){we.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==yn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===yn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw we.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class hs extends Rd{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return vr.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||hs.ID_PREFIX+Cd(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Ed(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{we.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Ul.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case nn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case nn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:we.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class ql extends hs{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>hs.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return we.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Da extends ql{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new wd,this.serialization=Ss.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=qh(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=pk(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=Hh(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);we.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class Ck extends ql{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Ss.None}}class Sk extends ql{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=yn.chunkedMTU){this.emitError(Ul.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Ss.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Hl extends Pd{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:Ck,json:Sk,binary:Da,"binary-utf8":Da,default:Da},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:yn.CLOUD_HOST,port:yn.CLOUD_PORT,path:"/",key:Hl.DEFAULT_KEY,token:yn.randomToken(),config:yn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==yn.CLOUD_HOST?this._options.secure=yn.isSecure():this._options.host==yn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&we.setLogFunction(this._options.logFunction),we.logLevel=this._options.debug||0,this._api=new wk(n),this._socket=this._createServerConnection(),!yn.supports.audioVideo&&!yn.supports.data){this._delayedAbort(Ft.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!yn.validateId(r)){this._delayedAbort(Ft.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Ft.ServerError,i))}_createServerConnection(){const t=new _k(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(gr.Message,n=>{this._handleMessage(n)}),t.on(gr.Error,n=>{this._abort(Ft.SocketError,n)}),t.on(gr.Disconnected,()=>{this.disconnected||(this.emitError(Ft.Network,"Lost connection to server."),this.disconnect())}),t.on(gr.Close,()=>{this.disconnected||this._abort(Ft.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case nn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case nn.Error:this._abort(Ft.ServerError,r.msg);break;case nn.IdTaken:this._abort(Ft.UnavailableID,`ID "${this.id}" is taken`);break;case nn.InvalidKey:this._abort(Ft.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case nn.Leave:we.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case nn.Expire:this.emitError(Ft.PeerUnavailable,`Could not connect to peer ${i}`);break;case nn.Offer:{const o=r.connectionId;let s=this.getConnection(i,o);if(s&&(s.close(),we.warn(`Offer received for existing Connection ID:${o}`)),r.type===vr.Media){const u=new fs(i,this,{connectionId:o,_payload:r,metadata:r.metadata});s=u,this._addConnection(i,s),this.emit("call",u)}else if(r.type===vr.Data){const u=new this._serializers[r.serialization](i,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});s=u,this._addConnection(i,s),this.emit("connection",u)}else{we.warn(`Received malformed connection type:${r.type}`);return}const l=this._getMessages(o);for(const u of l)s.handleMessage(u);break}default:{if(!r){we.warn(`You received a malformed message from ${i} of type ${n}`);return}const o=r.connectionId,s=this.getConnection(i,o);s&&s.peerConnection?s.handleMessage(t):o?this._storeMessage(o,t):we.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ft.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ft.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){we.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new fs(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){we.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){we.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(we.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;we.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)we.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)we.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Ft.ServerError,n))}}var Wc=Hl;class Tk{peer=null;connection=null;statusCallback;constructor(t){this.statusCallback=t}generateCode(){const t=["cat","dog","fish","bird","tree","star","moon","sun","rock","wave"],n=t[Math.floor(Math.random()*t.length)],r=t[Math.floor(Math.random()*t.length)],i=Math.floor(Math.random()*99).toString().padStart(2,"0");return`${n}-${r}-${i}`}async startSender(){this.cleanup();const t=this.generateCode();this.statusCallback({status:"waiting",message:"Initializing...",code:t});try{this.peer=new Wc(t),this.peer.on("open",()=>{this.statusCallback({status:"waiting",message:"Ready! Share this code with the receiving device",code:t})}),this.peer.on("connection",n=>{this.connection=n,n.on("open",()=>{this.statusCallback({status:"connected",message:"Device connected! Starting data transfer...",code:t}),this.sendData()}),n.on("error",r=>{this.statusCallback({status:"error",message:"Connection failed",error:r.message})})}),this.peer.on("error",n=>{this.statusCallback({status:"error",message:"Failed to start sender",error:n.message})})}catch(n){this.statusCallback({status:"error",message:"Failed to initialize",error:n.message})}}async connectToSender(t){this.cleanup(),this.statusCallback({status:"waiting",message:"Connecting to sender..."});try{this.peer=new Wc,this.peer.on("open",()=>{this.connection=this.peer.connect(t),this.connection.on("open",()=>{this.statusCallback({status:"connected",message:"Connected! Waiting for data..."})}),this.connection.on("data",n=>{this.receiveData(n)}),this.connection.on("error",n=>{this.statusCallback({status:"error",message:"Connection failed",error:n.message})})}),this.peer.on("error",n=>{this.statusCallback({status:"error",message:"Failed to connect",error:n.message})})}catch(n){this.statusCallback({status:"error",message:"Failed to initialize connection",error:n.message})}}async sendData(){if(this.connection)try{this.statusCallback({status:"sending",message:"Exporting data..."});const t=["ResuMateMain","svelte-persist"],n={};for(const i of t){const o=await this.openDB(i);n[i]={};for(const s of o.objectStoreNames){const u=o.transaction(s,"readonly").objectStore(s),f=[];await new Promise((d,h)=>{const g=u.openCursor();g.onerror=()=>h(g.error),g.onsuccess=v=>{const b=v.target.result;b?(f.push({key:b.key,value:b.value}),b.continue()):d()}}),n[i][s]=f}o.close()}this.statusCallback({status:"sending",message:"Sending data to receiver..."});const r=JSON.stringify(n);this.connection.send(r),this.statusCallback({status:"complete",message:"Data sent successfully!"})}catch(t){this.statusCallback({status:"error",message:"Failed to send data",error:t.message})}}async receiveData(t){try{this.statusCallback({status:"receiving",message:"Receiving and importing data..."}),await Rf(t),this.statusCallback({status:"complete",message:"Data received and imported successfully!"})}catch(n){this.statusCallback({status:"error",message:"Failed to import data",error:n.message})}}openDB(t){return new Promise((n,r)=>{const i=indexedDB.open(t);i.onerror=()=>r(i.error),i.onsuccess=()=>n(i.result)})}cleanup(){if(this.connection)try{this.connection.close()}catch{}if(this.peer)try{this.peer.destroy()}catch{}this.peer=null,this.connection=null}}function Ek(e,t){e.key==="Escape"&&(e.stopPropagation(),t())}function Pk(e,t){if(S(t)===0){ne(t,1);return}if(S(t)===1){ne(t,2);return}Om(),ne(t,0)}async function Rk(e,t){try{const n=await fetch("/ResuMate/template.md");n.ok&&Ye(jr,await n.text())}catch(n){console.error(n)}}async function Ak(e,t){try{const n=await fetch("/ResuMate/knowledge.md");n.ok&&Ye(qi,await n.text())}catch(n){console.error(n)}}var Ik=(e,t)=>ne(t,"profile"),Dk=(e,t)=>ne(t,"ai"),Ok=(e,t)=>ne(t,"advanced"),Lk=(e,t)=>ne(t,"sync"),Mk=xe('<div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">Personal Information</h2></div> <div class="glass-form-grid svelte-153tn8v"><div class="glass-form-group svelte-153tn8v"><label class="glass-label svelte-153tn8v">Full Name</label> <input class="glass-input svelte-153tn8v" placeholder="Your full name"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" class="svelte-153tn8v"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" class="svelte-153tn8v"></path></svg> Email <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label> <input class="glass-input svelte-153tn8v" placeholder="your@email.com"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" class="svelte-153tn8v"></path></svg> Phone <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label> <input class="glass-input svelte-153tn8v" placeholder="+1 (555) 123-4567"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.083 9h1.946c.089-1.546.383-2.97.837-4.118A6.004 6.004 0 004.083 9zM10 2a8 8 0 100 16 8 8 0 000-16zm0 2c-.076 0-.232.032-.465.262-.238.234-.497.623-.737 1.182-.389.907-.673 2.142-.766 3.556h3.936c-.093-1.414-.377-2.649-.766-3.556-.24-.56-.5-.948-.737-1.182C10.232 4.032 10.076 4 10 4zm3.971 5c-.089-1.546-.383-2.97-.837-4.118A6.004 6.004 0 0115.917 9h-1.946zm-2.003 2H8.032c.093 1.414.377 2.649.766 3.556.24.56.5.948.737 1.182.233.23.389.262.465.262.076 0 .232-.032.465-.262.238-.234.498-.623.737-1.182.389-.907.673-2.142.766-3.556zm1.166 4.118c.454-1.147.748-2.572.837-4.118h1.946a6.004 6.004 0 01-2.783 4.118zm-6.268 0C6.412 13.97 6.118 12.546 6.03 11H4.083a6.004 6.004 0 002.783 4.118z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Website <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label> <input class="glass-input svelte-153tn8v" placeholder="https://yourwebsite.com"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> LinkedIn <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label> <input class="glass-input svelte-153tn8v" placeholder="linkedin.com/in/username"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> GitHub <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label> <input class="glass-input svelte-153tn8v" placeholder="github.com/username"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Address <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label> <input class="glass-input svelte-153tn8v" placeholder="City, State/Country"/></div> <div class="glass-form-group svelte-153tn8v"><label class="glass-label-toggle svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> US Citizenship <input type="checkbox" class="glass-toggle svelte-153tn8v"/></label></div></div></div>'),jk=(e,t,n)=>Ye(Ui,S(n).id),zk=xe('<button class="glass-dropdown-item svelte-153tn8v"> </button>'),Nk=xe('<div class="glass-dropdown svelte-153tn8v"></div>'),Bk=(e,t)=>e.key==="Enter"&&t(),Fk=(e,t,n)=>t(S(n)),$k=xe('<div class="glass-keyword-item svelte-153tn8v"><span class="svelte-153tn8v"> </span> <button class="glass-button-danger-small svelte-153tn8v"><svg class="w-3 h-3 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg></button></div>'),Uk=xe('<div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">AI Configuration</h2></div> <div class="glass-form-grid svelte-153tn8v"><div class="glass-form-group glass-form-wide svelte-153tn8v"><label class="glass-label svelte-153tn8v">OpenRouter API Key</label> <p class="glass-description svelte-153tn8v">Get your API key from <a href="https://openrouter.ai/settings/keys" target="_blank" rel="noopener noreferrer" class="glass-link svelte-153tn8v">OpenRouter</a> to enable AI-powered resume tuning.</p> <input type="password" class="glass-input svelte-153tn8v" placeholder="sk-or-v1-..."/></div> <div class="glass-form-group glass-form-wide svelte-153tn8v"><label class="glass-label svelte-153tn8v">AI Model</label> <div class="glass-dropdown-container svelte-153tn8v"><input type="text" class="glass-input svelte-153tn8v" placeholder="Search for a model..."/> <!></div></div></div></div> <div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.243 3.03a1 1 0 01.727 1.213L9.53 6h2.94l.56-2.243a1 1 0 111.94.486L14.53 6H17a1 1 0 110 2h-2.97l-1 4H15a1 1 0 110 2h-2.47l-.56 2.242a1 1 0 11-1.94-.485L10.47 14H7.53l-.56 2.242a1 1 0 11-1.94-.485L5.47 14H3a1 1 0 110-2h2.97l1-4H5a1 1 0 110-2h2.47l.56-2.243a1 1 0 011.213-.727zM9.03 8l-1 4h2.94l1-4H9.03z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">Keywords Management</h2></div> <div class="glass-keywords-manager svelte-153tn8v"><div class="glass-keywords-actions svelte-153tn8v"><input type="text" class="glass-input flex-1 svelte-153tn8v" placeholder="Add new keyword..."/> <button class="glass-button-primary svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Add</button></div> <input type="text" class="glass-input svelte-153tn8v" placeholder="Search keywords..."/> <div class="glass-keywords-list svelte-153tn8v"></div></div></div>',1),qk=xe('<div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">Resume Template</h2></div> <div class="glass-template-section svelte-153tn8v"><button class="glass-button-secondary svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Fetch Default Template</button> <div class="glass-editor-container svelte-153tn8v"><!></div></div></div> <div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">Knowledge Base</h2></div> <div class="glass-template-section svelte-153tn8v"><button class="glass-button-secondary svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Fetch Sample Knowledge Base</button> <p class="glass-description svelte-153tn8v">Knowledge passed to the AI when tuning your resume.</p> <div class="glass-textarea-container svelte-153tn8v"><textarea class="glass-textarea svelte-153tn8v" placeholder="Enter your knowledge base content here..."></textarea></div></div></div>',1),Hk=(e,t,n)=>{ne(t,"send"),n()},Kk=(e,t,n)=>{ne(t,"receive"),n()},Vk=xe('<div class="glass-code-display svelte-153tn8v"><p class="glass-description svelte-153tn8v">Share this code:</p> <div class="glass-code svelte-153tn8v"> </div></div>'),Wk=xe('<div class="glass-sync-content svelte-153tn8v"><p class="glass-description svelte-153tn8v">Share your resume data with another device</p> <!> <button class="glass-button-primary svelte-153tn8v">Generate Code</button></div>'),Yk=xe('<div class="glass-sync-content svelte-153tn8v"><p class="glass-description svelte-153tn8v">Enter the code from the sending device</p> <input class="glass-input svelte-153tn8v" placeholder="Enter code here (e.g., cat-dog-42)"/> <button class="glass-button-primary svelte-153tn8v">Connect & Receive</button></div>'),Gk=xe('<div class="glass-status-error svelte-153tn8v"> </div>'),Jk=xe('<div><div class="glass-status-indicator svelte-153tn8v"></div> <div class="svelte-153tn8v"><div class="glass-status-title svelte-153tn8v"> </div> <div class="glass-status-message svelte-153tn8v"> </div> <!></div></div>'),Zk=(e,t)=>ne(t,!1),Qk=(e,t,n)=>{ne(t,!1),n()},Xk=xe('<div class="glass-import-confirm svelte-153tn8v"><p class="glass-import-title svelte-153tn8v">Import received data?</p> <p class="glass-description svelte-153tn8v">This will replace your current data.</p> <div class="glass-import-actions svelte-153tn8v"><button class="glass-button-success svelte-153tn8v">Import</button> <button class="glass-button-danger svelte-153tn8v">Cancel</button></div></div>'),ew=xe('<div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">Device Sync</h2></div> <div class="glass-sync-tabs svelte-153tn8v"><button>Send Data</button> <button>Receive Data</button></div> <!> <!> <!></div> <div class="glass-section svelte-153tn8v"><div class="glass-section-header svelte-153tn8v"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> <h2 class="svelte-153tn8v">Data Management</h2></div> <div class="glass-data-actions svelte-153tn8v"><button class="glass-button-secondary svelte-153tn8v"><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Download Data</button> <label class="glass-button-secondary glass-file-upload svelte-153tn8v"><input type="file" accept=".json" class="svelte-153tn8v"/> <svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Upload Data</label> <button><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" clip-rule="evenodd" class="svelte-153tn8v"></path><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 012 0v4a1 1 0 11-2 0V7zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V7a1 1 0 00-1-1z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> <!></button></div></div>',1),tw=xe('<div class="glass-settings-container svelte-153tn8v" role="dialog" aria-modal="true" aria-labelledby="settings-title"><div class="glass-settings-panel svelte-153tn8v"><header class="glass-settings-header svelte-153tn8v"><div class="flex items-center gap-3 svelte-153tn8v"><div class="w-3 h-3 rounded-full bg-purple animate-pulse svelte-153tn8v"></div> <h1 id="settings-title" class="text-2xl font-bold text-text svelte-153tn8v">Settings</h1></div> <button type="button" class="glass-icon-button p-2 transition-all focus:outline-hidden focus:ring-2 focus:ring-blue/70 svelte-153tn8v" aria-label="Close settings"><svg class="w-5 h-5 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg></button></header> <nav class="glass-settings-nav svelte-153tn8v"><button><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Profile</button> <button><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-153tn8v"></path></svg> AI & Keywords</button> <button><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" class="svelte-153tn8v"></path></svg> Advanced</button> <button><svg class="w-4 h-4 svelte-153tn8v" viewBox="0 0 20 20" fill="currentColor"><path d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" class="svelte-153tn8v"></path></svg> Sync & Data</button></nav> <div class="glass-settings-content svelte-153tn8v"><!></div></div></div>');function nw(e,t){Gt(t,!0);const[n,r]=sr(),i=()=>Ke(jr,"$resumeTemplate",n),o=()=>Ke(qi,"$knowlegeBase",n),s=()=>Ke(qo,"$name",n),l=()=>Ke(Ho,"$email",n),u=()=>Ke(Zo,"$enableEmail",n),f=()=>Ke(Ko,"$phone",n),d=()=>Ke(Qo,"$enablePhone",n),h=()=>Ke(Vo,"$website",n),g=()=>Ke(Xo,"$enableWebsite",n),v=()=>Ke(Wo,"$linkedin",n),b=()=>Ke(es,"$enableLinkedin",n),C=()=>Ke(Yo,"$github",n),A=()=>Ke(ts,"$enableGithub",n),w=()=>Ke(Go,"$address",n),$=()=>Ke(ns,"$enableAddress",n),O=()=>Ke(rs,"$showUSCitizenship",n),z=()=>Ke(Jo,"$openRouterKey",n),V=()=>Ke(Ui,"$openRouterAIModel",n),P=()=>Ke(Ar,"$keywords",n);let W=Pe("profile"),ae=Pe(0),me=Pe(""),j=Pe(""),X=Pe(Lr([])),te=Pe(!1),se=null,K=Pe(Lr({status:"idle",message:""})),Q=Pe("send"),ye=Pe(""),_e=Pe(!1),Ee=Pe(null);function Be(){jn.set("None")}hn(()=>{if(S(ae)>0){const je=setTimeout(()=>{ne(ae,0)},3e3);return()=>clearTimeout(je)}});async function k(){try{const Ct=await(await fetch("https://openrouter.ai/api/v1/models")).json();ne(X,Ct.data,!0)}catch(je){console.error(je)}}function Ce(){S(j).trim()&&(Ar.update(je=>{const Ct=[...je,S(j).trim()];return Ct.sort(($t,Qt)=>Qt.length-$t.length),Ct}),ne(j,""))}function Se(je){Ar.update(Ct=>Ct.filter($t=>$t!==je))}function T(je){const Ct=je.target.files[0];if(!Ct)return;const $t=new FileReader;$t.onload=function(Qt){try{Qt.target?.result&&typeof Qt.target.result=="string"&&Rf(Qt.target.result)}catch(mn){console.error("Error parsing JSON file:",mn)}},$t.readAsText(Ct)}function Ze(){se&&se.cleanup(),se=new Tk(je=>{ne(K,je,!0),je.status==="receiving"&&ne(_e,!0)})}function ft(){ne(Q,"send"),Ze(),se?.startSender()}function Me(){if(ne(Q,"receive"),!S(ye).trim()){ne(K,{status:"error",message:"Please enter a code",error:"No code provided"},!0);return}Ze(),se?.connectToSender(S(ye).trim())}function Xe(){se?.cleanup(),ne(K,{status:"idle",message:""},!0),ne(ye,""),ne(_e,!1)}hn(()=>(ne(Ee,new Uh({sanitizer:!1,theme:"catppuccin-mocha",extensions:[Tf]}),!0),()=>{ne(Ee,null)})),hn(()=>{s(),l(),u(),f(),d(),h(),g(),v(),b(),C(),A(),w(),$(),O(),kl()});var rt=tw();rt.__keydown=[Ek,Be];var ve=H(rt),bt=H(ve),At=J(H(bt),2);At.__click=Be,F(bt);var Oe=J(bt,2),pt=H(Oe);pt.__click=[Ik,W];var Jt=J(pt,2);Jt.__click=[Dk,W];var Fe=J(Jt,2);Fe.__click=[Ok,W];var it=J(Fe,2);it.__click=[Lk,W],F(Oe);var xt=J(Oe,2),It=H(xt);{var pn=je=>{var Ct=Mk(),$t=J(H(Ct),2),Qt=H($t),mn=J(H(Qt),2);_t(mn),F(Qt);var ee=J(Qt,2),oe=H(ee),Te=J(H(oe),2);_t(Te),F(oe);var Ie=J(oe,2);_t(Ie),F(ee);var qe=J(ee,2),st=H(qe),mt=J(H(st),2);_t(mt),F(st);var gt=J(st,2);_t(gt),F(qe);var Et=J(qe,2),vt=H(Et),de=J(H(vt),2);_t(de),F(vt);var St=J(vt,2);_t(St),F(Et);var at=J(Et,2),Ut=H(at),fe=J(H(Ut),2);_t(fe),F(Ut);var sn=J(Ut,2);_t(sn),F(at);var an=J(at,2),ln=H(an),lt=J(H(ln),2);_t(lt),F(ln);var Vt=J(ln,2);_t(Vt),F(an);var un=J(an,2),gn=H(un),qt=J(H(gn),2);_t(qt),F(gn);var Zt=J(gn,2);_t(Zt),F(un);var er=J(un,2),zn=H(er),ct=J(H(zn),2);_t(ct),F(zn),F(er),F($t),F(Ct),Je(()=>{Ie.disabled=!u(),gt.disabled=!d(),St.disabled=!g(),sn.disabled=!b(),Vt.disabled=!A(),Zt.disabled=!$()}),jt(mn,s,Ae=>Ye(qo,Ae)),dr(Te,u,Ae=>Ye(Zo,Ae)),jt(Ie,l,Ae=>Ye(Ho,Ae)),dr(mt,d,Ae=>Ye(Qo,Ae)),jt(gt,f,Ae=>Ye(Ko,Ae)),dr(de,g,Ae=>Ye(Xo,Ae)),jt(St,h,Ae=>Ye(Vo,Ae)),dr(fe,b,Ae=>Ye(es,Ae)),jt(sn,v,Ae=>Ye(Wo,Ae)),dr(lt,A,Ae=>Ye(ts,Ae)),jt(Vt,C,Ae=>Ye(Yo,Ae)),dr(qt,$,Ae=>Ye(ns,Ae)),jt(Zt,w,Ae=>Ye(Go,Ae)),dr(ct,O,Ae=>Ye(rs,Ae)),ie(je,Ct)},In=je=>{var Ct=zt(),$t=ot(Ct);{var Qt=ee=>{var oe=Uk(),Te=ot(oe),Ie=J(H(Te),2),qe=H(Ie),st=J(H(qe),4);_t(st),F(qe);var mt=J(qe,2),gt=J(H(mt),2),Et=H(gt);_t(Et);var vt=J(Et,2);{var de=lt=>{var Vt=Nk();Un(Vt,21,()=>S(X).filter(un=>!V()||un.name.toLowerCase().includes(V().toLowerCase())),$n,(un,gn)=>{var qt=zk();qt.__mousedown=[jk,V,gn];var Zt=H(qt,!0);F(qt),Je(()=>wt(Zt,S(gn).name)),ie(un,qt)}),F(Vt),ie(lt,Vt)};Le(vt,lt=>{S(te)&&S(X).length>0&&lt(de)})}F(gt),F(mt),F(Ie),F(Te);var St=J(Te,2),at=J(H(St),2),Ut=H(at),fe=H(Ut);_t(fe),fe.__keydown=[Bk,Ce];var sn=J(fe,2);sn.__click=Ce,F(Ut);var an=J(Ut,2);_t(an);var ln=J(an,2);Un(ln,5,()=>P().filter(lt=>S(me).trim()===""||lt.toLowerCase().includes(S(me).toLowerCase())),$n,(lt,Vt)=>{var un=$k(),gn=H(un),qt=H(gn,!0);F(gn);var Zt=J(gn,2);Zt.__click=[Fk,Se,Vt],F(un),Je(()=>wt(qt,S(Vt))),ie(lt,un)}),F(ln),F(at),F(St),jt(st,z,lt=>Ye(Jo,lt)),Mn("focus",Et,()=>{S(X).length===0&&k(),ne(te,!0)}),Mn("blur",Et,()=>setTimeout(()=>ne(te,!1),200)),jt(Et,V,lt=>Ye(Ui,lt)),jt(fe,()=>S(j),lt=>ne(j,lt)),jt(an,()=>S(me),lt=>ne(me,lt)),ie(ee,oe)},mn=ee=>{var oe=zt(),Te=ot(oe);{var Ie=st=>{var mt=qk(),gt=ot(mt),Et=J(H(gt),2),vt=H(Et);vt.__click=[Rk,i];var de=J(vt,2),St=H(de);{var at=lt=>{Lf(lt,{get carta(){return S(Ee)},mode:"tabs",theme:"settings",get value(){return kf(),i()},set value(Vt){Ye(jr,Vt)}})};Le(St,lt=>{S(Ee)&&lt(at)})}F(de),F(Et),F(gt);var Ut=J(gt,2),fe=J(H(Ut),2),sn=H(fe);sn.__click=[Ak,o];var an=J(sn,4),ln=H(an);pl(ln),F(an),F(fe),F(Ut),jt(ln,o,lt=>Ye(qi,lt)),ie(st,mt)},qe=st=>{var mt=zt(),gt=ot(mt);{var Et=vt=>{var de=ew(),St=ot(de),at=J(H(St),2),Ut=H(at);Ut.__click=[Hk,Q,Xe];var fe=J(Ut,2);fe.__click=[Kk,Q,Xe],F(at);var sn=J(at,2);{var an=ht=>{var Pt=Wk(),Rt=J(H(Pt),2);{var Nt=Ot=>{var Nn=Vk(),kn=J(H(Nn),2),Hr=H(kn,!0);F(kn),F(Nn),Je(()=>wt(Hr,S(K).code)),ie(Ot,Nn)};Le(Rt,Ot=>{S(K).code&&Ot(Nt)})}var Dt=J(Rt,2);Dt.__click=ft,F(Pt),Je(Ot=>Dt.disabled=Ot,[()=>["waiting","connected","sending"].includes(S(K).status)]),ie(ht,Pt)},ln=ht=>{var Pt=Yk(),Rt=J(H(Pt),2);_t(Rt);var Nt=J(Rt,2);Nt.__click=Me,F(Pt),Je(Dt=>Nt.disabled=Dt,[()=>["waiting","connected","receiving"].includes(S(K).status)]),jt(Rt,()=>S(ye),Dt=>ne(ye,Dt)),ie(ht,Pt)};Le(sn,ht=>{S(Q)==="send"?ht(an):ht(ln,!1)})}var lt=J(sn,2);{var Vt=ht=>{var Pt=Jk(),Rt=J(H(Pt),2),Nt=H(Rt),Dt=H(Nt,!0);F(Nt);var Ot=J(Nt,2),Nn=H(Ot,!0);F(Ot);var kn=J(Ot,2);{var Hr=Bn=>{var Kr=Gk(),ci=H(Kr,!0);F(Kr),Je(()=>wt(ci,S(K).error)),ie(Bn,Kr)};Le(kn,Bn=>{S(K).error&&Bn(Hr)})}F(Rt),F(Pt),Je(()=>{Ht(Pt,1,`glass-status-display glass-status-${S(K).status??""}`,"svelte-153tn8v"),wt(Dt,S(K).status),wt(Nn,S(K).message)}),ie(ht,Pt)};Le(lt,ht=>{S(K).status!=="idle"&&ht(Vt)})}var un=J(lt,2);{var gn=ht=>{var Pt=Xk(),Rt=J(H(Pt),4),Nt=H(Rt);Nt.__click=[Zk,_e];var Dt=J(Nt,2);Dt.__click=[Qk,_e,Xe],F(Rt),F(Pt),ie(ht,Pt)};Le(un,ht=>{S(_e)&&ht(gn)})}F(St);var qt=J(St,2),Zt=J(H(qt),2),er=H(Zt);er.__click=function(...ht){Dm?.apply(this,ht)};var zn=J(er,2),ct=H(zn);ct.__change=T,Tn(3),F(zn);var Ae=J(zn,2);Ae.__click=[Pk,ae];var Ts=J(H(Ae),2);{var Ur=ht=>{var Pt=ta("Reset Application");ie(ht,Pt)},qr=ht=>{var Pt=zt(),Rt=ot(Pt);{var Nt=Ot=>{var Nn=ta("Are you sure?");ie(Ot,Nn)},Dt=Ot=>{var Nn=ta("ARE YOU REALLY SURE?");ie(Ot,Nn)};Le(Rt,Ot=>{S(ae)===1?Ot(Nt):Ot(Dt,!1)},!0)}ie(ht,Pt)};Le(Ts,ht=>{S(ae)===0?ht(Ur):ht(qr,!1)})}F(Ae),F(Zt),F(qt),Je(()=>{Ht(Ut,1,`glass-sync-tab ${S(Q)==="send"?"glass-sync-tab-active":""}`,"svelte-153tn8v"),Ht(fe,1,`glass-sync-tab ${S(Q)==="receive"?"glass-sync-tab-active":""}`,"svelte-153tn8v"),Ht(Ae,1,`glass-button-danger ${S(ae)>0?"glass-button-shake":""}`,"svelte-153tn8v")}),ie(vt,de)};Le(gt,vt=>{S(W)==="sync"&&vt(Et)},!0)}ie(st,mt)};Le(Te,st=>{S(W)==="advanced"?st(Ie):st(qe,!1)},!0)}ie(ee,oe)};Le($t,ee=>{S(W)==="ai"?ee(Qt):ee(mn,!1)},!0)}ie(je,Ct)};Le(It,je=>{S(W)==="profile"?je(pn):je(In,!1)})}F(xt),F(ve),F(rt),Je(()=>{Ht(pt,1,`glass-tab ${S(W)==="profile"?"glass-tab-active":"glass-tab-inactive"}`,"svelte-153tn8v"),Ht(Jt,1,`glass-tab ${S(W)==="ai"?"glass-tab-active":"glass-tab-inactive"}`,"svelte-153tn8v"),Ht(Fe,1,`glass-tab ${S(W)==="advanced"?"glass-tab-active":"glass-tab-inactive"}`,"svelte-153tn8v"),Ht(it,1,`glass-tab ${S(W)==="sync"?"glass-tab-active":"glass-tab-inactive"}`,"svelte-153tn8v")}),ie(e,rt),Yt(),r()}bn(["keydown","click","mousedown","change"]);var rw=xe('<div role="alert" class="glass-error flex items-center gap-2 p-3 svelte-1ma3ram"><svg class="w-4 h-4 text-red flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <span class="text-sm text-red"> </span></div>'),iw=xe('<div class="w-4 h-4 border-2 border-base border-t-transparent rounded-full animate-spin"></div> <span>Creating...</span>',1),ow=xe('<svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg> <span>Create</span>',1),sw=xe('<div class="glass-dialog w-[min(480px,92vw)] p-6 svelte-1ma3ram" role="document" aria-labelledby="create-project-title"><header class="mb-4"><div class="flex items-center gap-3 mb-2"><div class="w-3 h-3 rounded-full bg-green animate-pulse"></div> <h2 id="create-project-title" class="text-xl font-bold text-text">Create New Project</h2></div> <p class="text-sm text-subtext0">Choose a name. Optionally start from your saved template.</p></header> <form class="space-y-4"><div class="flex flex-col gap-2"><label for="create-project-name" class="text-sm font-medium text-text">Project name</label> <input id="create-project-name" class="glass-input px-3 py-2 focus:glass-input-focus transition-all duration-300 svelte-1ma3ram" placeholder="e.g., Company - Role"/></div> <div class="flex flex-col gap-2"><label for="create-project-url" class="text-sm font-medium text-text">Job URL (optional)</label> <input id="create-project-url" class="glass-input px-3 py-2 focus:glass-input-focus transition-all duration-300 svelte-1ma3ram" placeholder="https://example.com/job" inputmode="url" spellcheck="false"/> <p class="text-xs text-subtext1">Used by the fetch tool to grab job description later.</p></div> <label class="glass-checkbox-label svelte-1ma3ram"><input type="checkbox" class="glass-checkbox svelte-1ma3ram"/> <span class="text-sm font-medium text-text">Start from template</span></label> <!> <div class="flex justify-end gap-3 pt-4"><button type="button" class="glass-button-secondary px-4 py-2 transition-all svelte-1ma3ram" aria-label="Cancel">Cancel</button> <button type="submit" class="glass-button-primary px-4 py-2 transition-all flex items-center gap-2 min-w-[100px] justify-center svelte-1ma3ram" aria-label="Create project"><!></button></div></form></div>');function aw(e,t){Gt(t,!0);const[n,r]=sr(),i=()=>Ke(jr,"$resumeTemplate",n);let o=Pe(""),s=Pe(""),l=Pe(!0),u=Pe(!1),f=Pe("");function d(){Ye(jn,"None")}async function h(te){if(te.preventDefault(),ne(f,""),!S(o).trim()){ne(f,"Please enter a project name.");return}ne(u,!0);try{Pf(),Ye(Ln,S(o).trim()),Ye(Qn,S(s).trim()||"https://example.com/"),S(l)?Ye(Rn,i()):Ye(Rn,""),await bs(),d()}catch(se){console.error(se),ne(f,"Failed to create project. Try again.")}finally{ne(u,!1)}}var g=sw(),v=J(H(g),2),b=H(v),C=J(H(b),2);_t(C),uf(C,!0),F(b);var A=J(b,2),w=J(H(A),2);_t(w),Tn(2),F(A);var $=J(A,2),O=H($);_t(O),Tn(2),F($);var z=J($,2);{var V=te=>{var se=rw(),K=J(H(se),2),Q=H(K,!0);F(K),F(se),Je(()=>wt(Q,S(f))),ie(te,se)};Le(z,te=>{S(f)&&te(V)})}var P=J(z,2),W=H(P);W.__click=d;var ae=J(W,2),me=H(ae);{var j=te=>{var se=iw();Tn(2),ie(te,se)},X=te=>{var se=ow();Tn(2),ie(te,se)};Le(me,te=>{S(u)?te(j):te(X,!1)})}F(ae),F(P),F(v),F(g),Je(()=>ae.disabled=S(u)),Mn("submit",v,h),jt(C,()=>S(o),te=>ne(o,te)),jt(w,()=>S(s),te=>ne(s,te)),dr(O,()=>S(l),te=>ne(l,te)),ie(e,g),Yt(),r()}bn(["click"]);function lw(e,t){e.key==="Escape"&&(e.stopPropagation(),t())}async function uw(e,t,n,r,i,o){ne(t,""),ne(n,!0);try{const s=S(r).trim();await Ef(S(i),s||void 0),o()}catch(s){console.error(s),ne(t,"Failed to duplicate project.")}finally{ne(n,!1)}}async function cw(e,t,n){if(confirm("Reset resume to template? This will discard current resume content.")){ne(t,""),ne(n,!0);try{Rn.set(De(jr))}catch(r){console.error(r),ne(t,"Failed to reset content.")}finally{ne(n,!1)}}}async function fw(e,t,n,r,i){if(confirm("Delete this project? This cannot be undone.")){ne(t,""),ne(n,!0);try{await Im(S(r)),i()}catch(o){console.error(o),ne(t,"Failed to delete project.")}finally{ne(n,!1)}}}var hw=xe('<div role="alert" class="glass-error flex items-center gap-2 p-3 svelte-byyurw"><svg class="w-4 h-4 text-red flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <span class="text-sm text-red"> </span></div>'),dw=xe('<div class="w-4 h-4 border-2 border-base border-t-transparent rounded-full animate-spin"></div> <span>Working...</span>',1),pw=xe('<svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414L2.586 8l3.707-3.707a1 1 0 011.414 0z"></path></svg> <span>Save</span>',1),mw=xe('<div class="glass-dialog w-[min(560px,92vw)] p-6 svelte-byyurw" role="document" aria-labelledby="project-options-title"><header class="mb-4"><div class="flex items-start justify-between gap-4"><div class="flex items-center gap-3"><div class="w-3 h-3 rounded-full bg-yellow animate-pulse"></div> <div><h2 id="project-options-title" class="text-xl font-bold text-text">Project Options</h2> <p class="text-sm text-subtext0">Rename, set job URL, duplicate or delete.</p></div></div> <button type="button" class="glass-icon-button p-2 transition-all focus:outline-hidden focus:ring-2 focus:ring-blue/70 svelte-byyurw" aria-label="Close dialog" title="Close"><svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></header> <form class="space-y-4"><div class="flex flex-col gap-2"><label for="po-name" class="text-sm font-medium text-text">Project name</label> <input id="po-name" class="glass-input px-3 py-2 focus:glass-input-focus transition-all duration-300 svelte-byyurw" placeholder="e.g., Company â Role"/></div> <div class="flex flex-col gap-2"><label for="po-url" class="text-sm font-medium text-text">Job URL (optional)</label> <input id="po-url" class="glass-input px-3 py-2 focus:glass-input-focus transition-all duration-300 svelte-byyurw" placeholder="https://example.com/job" inputmode="url" spellcheck="false"/> <p class="text-xs text-subtext1">Used by the fetch tool to grab job description later.</p></div> <!> <div class="flex flex-wrap items-center justify-between gap-3 pt-4"><div class="flex items-center gap-2"><button type="button" class="glass-button-danger px-3 py-2 transition-all flex items-center gap-2 svelte-byyurw" aria-label="Delete project"><img src="/ResuMate/icons/trash.svg" alt="" aria-hidden="true" class="w-4 h-4 pointer-events-none"/> <span>Delete</span></button> <button type="button" class="glass-button-warning px-3 py-2 transition-all flex items-center gap-2 svelte-byyurw" aria-label="Reset resume to template" title="Reset resume content to template"><svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path></svg> <span>Reset</span></button></div> <div class="flex items-center gap-3"><button type="button" class="glass-button-secondary px-3 py-2 transition-all flex items-center gap-2 svelte-byyurw" aria-label="Duplicate project" title="Create a copy"><svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"></path><path d="M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"></path></svg> <span>Duplicate</span></button> <button type="submit" class="glass-button-primary px-4 py-2 transition-all flex items-center gap-2 min-w-[90px] justify-center svelte-byyurw" aria-label="Save changes"><!></button></div></div></form></div>');function gw(e,t){Gt(t,!0);let n=Pe(""),r=Pe(""),i=Pe(!1),o=Pe(""),s=Pe(-1);Ln.subscribe(K=>ne(n,K,!0)),Qn.subscribe(K=>ne(r,K,!0)),Kn.subscribe(K=>ne(s,K,!0));function l(){jn.set("None")}Zn(()=>{document.getElementById("po-name")?.focus()});async function u(K){K?.preventDefault(),ne(o,"");const Q=S(n).trim();if(!Q){ne(o,"Please enter a project name.");return}ne(i,!0);try{await Am(S(s),Q),Qn.set(S(r).trim()),await bs(),l()}catch(ye){console.error(ye),ne(o,"Failed to save changes.")}finally{ne(i,!1)}}var f=mw();f.__keydown=[lw,l];var d=H(f),h=H(d),g=J(H(h),2);g.__click=l,F(h),F(d);var v=J(d,2),b=H(v),C=J(H(b),2);_t(C),F(b);var A=J(b,2),w=J(H(A),2);_t(w),Tn(2),F(A);var $=J(A,2);{var O=K=>{var Q=hw(),ye=J(H(Q),2),_e=H(ye,!0);F(ye),F(Q),Je(()=>wt(_e,S(o))),ie(K,Q)};Le($,K=>{S(o)&&K(O)})}var z=J($,2),V=H(z),P=H(V);P.__click=[fw,o,i,s,l];var W=J(P,2);W.__click=[cw,o,i],F(V);var ae=J(V,2),me=H(ae);me.__click=[uw,o,i,n,s,l];var j=J(me,2),X=H(j);{var te=K=>{var Q=dw();Tn(2),ie(K,Q)},se=K=>{var Q=pw();Tn(2),ie(K,Q)};Le(X,K=>{S(i)?K(te):K(se,!1)})}F(j),F(ae),F(z),F(v),F(f),Je(()=>{P.disabled=S(i),W.disabled=S(i),me.disabled=S(i),j.disabled=S(i)}),Mn("submit",v,u),jt(C,()=>S(n),K=>ne(n,K)),jt(w,()=>S(r),K=>ne(r,K)),ie(e,f),Yt()}bn(["keydown","click"]);function vw(e,t){t()}var yw=(e,t)=>t("None"),bw=e=>e.stopPropagation(),xw=xe("<div><!></div>"),_w=e=>e.stopPropagation(),kw=xe("<div><!></div>"),ww=e=>e.stopPropagation(),Cw=xe("<div><!></div>"),Sw=e=>e.stopPropagation(),Tw=xe('<div class="bg-crust p-4 rounded shadow text-text"> </div>'),Ew=xe('<div class="fixed inset-0 z-50 flex items-start justify-center p-8 bg-black/70" role="dialog" aria-modal="true" tabindex="-1"><!></div>'),Pw=xe('<div class="sr-only" role="status" aria-live="polite"> </div> <div class="flex flex-row w-full h-full"><!> <div class="glass-resizer w-1 cursor-ew-resize relative svelte-18euasq" role="separator" aria-orientation="vertical" aria-label="Resize sidebar"></div> <div class="flex flex-col flex-1 min-w-0 h-full"><!> <main class="flex-1 min-h-0 overflow-hidden" tabindex="-1" aria-label="Main content"><!></main> <!></div></div>',1);function Rw(e,t){Gt(t,!0);const n=nt(t,"onNewproject",3,()=>{}),r=nt(t,"onSelect",3,()=>{}),i=nt(t,"onEditProject",3,()=>{});let o=Pe("None");jn.subscribe(Se=>ne(o,Se,!0));function s(Se){jn.set(Se)}let l=Pe(!1),u=Pe(288),f=Pe(!1),d=0,h=288;const g=0,v=480;let b=288;function C(){S(l)?(ne(l,!1),ne(u,b||288,!0),ne(V,"Sidebar expanded")):(b=S(u),ne(l,!0),ne(u,0),ne(V,"Sidebar collapsed"))}function A(Se){S(l)||(ne(f,!0),d=Se.clientX,h=S(u),window.addEventListener("mousemove",w),window.addEventListener("mouseup",$,{once:!0}))}function w(Se){if(!S(f))return;const T=Se.clientX-d;ne(u,Math.min(v,Math.max(g,h+T)),!0)}function $(){ne(f,!1),window.removeEventListener("mousemove",w),S(u)<=48?(ne(l,!0),ne(u,0),ne(V,"Sidebar collapsed")):(S(l)&&ne(V,"Sidebar expanded"),ne(l,!1),b=S(u))}function O(){ne(l,!1),S(u)===0&&ne(u,b||288,!0),ne(V,"Sidebar expanded")}function z(Se){Se.key==="Escape"&&S(o)!=="None"&&s("None")}let V=Pe(""),P=null,W=null;function ae(Se){const T=["a[href]","button:not([disabled])","textarea:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(Se.querySelectorAll(T)).filter(Ze=>Ze===Se||Ze.offsetParent!==null)}function me(Se){if(S(o)==="None"||!P||Se.key!=="Tab")return;const T=ae(P);if(T.length===0){Se.preventDefault(),P.focus();return}const Ze=T[0],ft=T[T.length-1],Me=document.activeElement;Se.shiftKey?(Me===Ze||!P.contains(Me))&&(Se.preventDefault(),ft.focus()):Me===ft&&(Se.preventDefault(),Ze.focus())}hn(()=>{S(o)!=="None"?(W=document.activeElement,Lp().then(()=>{if(!P)return;(ae(P)[0]??P).focus()})):(W&&W.focus(),W=null)});var j=Pw();Mn("keydown",$o,z);var X=ot(j),te=H(X,!0);F(X);var se=J(X,2),K=H(se);Ym(K,{get collapsed(){return S(l)},get width(){return S(u)},onToggleSidebar:C,onSelect:r(),onNewproject:n(),onEditProject:i()});var Q=J(K,2);Q.__mousedown=A,Q.__dblclick=[vw,C];var ye=J(Q,2),_e=H(ye);og(_e,{get collapsed(){return S(l)},onShowSidebar:O});var Ee=J(_e,2),Be=H(Ee);$p(Be,t,"default",{}),F(Ee);var k=J(Ee,2);{var Ce=Se=>{var T=Ew();T.__click=[yw,s],T.__keydown=me;var Ze=H(T);{var ft=Xe=>{var rt=xw();rt.__click=[bw];var ve=H(rt);nw(ve,{}),F(rt),ie(Xe,rt)},Me=Xe=>{var rt=zt(),ve=ot(rt);{var bt=Oe=>{var pt=kw();pt.__click=[_w];var Jt=H(pt);aw(Jt,{}),F(pt),ie(Oe,pt)},At=Oe=>{var pt=zt(),Jt=ot(pt);{var Fe=xt=>{var It=Cw();It.__click=[ww];var pn=H(It);gw(pn,{}),F(It),ie(xt,It)},it=xt=>{var It=Tw();It.__click=[Sw];var pn=H(It);F(It),Je(()=>wt(pn,`Unimplemented modal: ${S(o)??""}`)),ie(xt,It)};Le(Jt,xt=>{S(o)==="Project Options"?xt(Fe):xt(it,!1)},!0)}ie(Oe,pt)};Le(ve,Oe=>{S(o)==="CreateProject"?Oe(bt):Oe(At,!1)},!0)}ie(Xe,rt)};Le(Ze,Xe=>{S(o)==="Settings"?Xe(ft):Xe(Me,!1)})}F(T),En(T,Xe=>P=Xe,()=>P),ie(Se,T)};Le(k,Se=>{S(o)!=="None"&&Se(Ce)})}F(ye),F(se),Je(()=>{wt(te,S(V)),ut(Q,"aria-hidden",S(l))}),ie(e,j),Yt()}bn(["mousedown","dblclick","click","keydown"]);var Aw=xe('<div class="w-full h-full"><!></div>');function Iw(e,t){Gt(t,!0);const[n,r]=sr(),i=()=>Ke(Hn,"$jobDescription",n),o=()=>Ke(ys,"$header",n),s=()=>Ke(Rn,"$resumeMd",n);let l=new Uh({sanitizer:!1,theme:"catppuccin-mocha",extensions:[Tf]}),u=null,f=null,d=null;function h(){Ye(Xr,0)}hn(()=>{i(),Ye($i,l.render(o()+Bu(s()))),h(),u!==null&&clearTimeout(u),f!==null&&clearTimeout(f),d!==null&&clearTimeout(d),u=setTimeout(()=>{wl()},500),f=setTimeout(()=>{bs()},1e3),d=setTimeout(()=>{Ye($i,l.render(o()+Bu(s())))},1e3)});var g=Aw(),v=H(g);Lf(v,{get carta(){return l},mode:"tabs",theme:"main",get value(){return kf(),s()},set value(b){Ye(Rn,b)}}),F(g),ie(e,g),Yt(),r()}var Dw=xe('<div class="w-full h-full bg-crust flex items-start justify-start p-4"><div class="relative overflow-hidden w-fit"><iframe title="Resume Preview" class="w-[8.5in] h-[11in] border-none origin-top" sandbox="allow-same-origin allow-scripts allow-downloads allow-popups allow-forms allow-modals"></iframe></div></div>');function Yc(e,t){Gt(t,!0);let n,r,i=Pe(1),o=Pe("");async function s(){try{const h=await fetch("/ResuMate/style.css");h.ok?ne(o,await h.text(),!0):console.error("Failed to load stylesheet")}catch(h){console.error("Error loading stylesheet:",h)}}s();function l(){if(n&&r){const b=window.innerHeight*.9/1056;ne(i,Math.min(b,.95),!0),r.style.transform=`scale(${S(i)})`,r.style.transformOrigin="left top";const C=816*S(i),A=1056*S(i);n.style.width=`${C}px`,n.style.height=`${A}px`;const w=n.parentElement;w&&(w.style.width=`${C+32}px`)}}hn(()=>{if(r&&t.html&&S(o)!==""){const h=r.contentDocument||r.contentWindow.document;h.open();const g=`
                <!DOCTYPE html>
                <html>
                    <head>
                        <style>
                            ${S(o)}
                            
                            body, html {
                                margin: 0;
                                padding: 0;
                                height: 100%;
                                
                            }
                            .pdf-page {
                                width: 8.5in;
                                height: 11in;
                                background-color: white;
                                padding-left: 0.2in;
                                padding-right: 0.2in;
                                padding-bottom: 0.1in;
                                box-sizing: border-box;
                                overflow: hidden;
                            }
                        </style>
                    </head>
                    <body>
                        <div class="pdf-page">${t.html}</div>
                    </body>
                </html>
            `;h.write(g),h.close()}});var u=Dw();Mn("resize",$o,l);var f=H(u),d=H(f);En(d,h=>r=h,()=>r),F(f),En(f,h=>n=h,()=>n),ml(f,h=>l?.()),F(u),ie(e,u),Yt()}async function Ow(e,t){ne(t,!0);try{await wl()}finally{ne(t,!1)}}var Lw=xe('<div class="w-3 h-3 border-2 border-blue border-t-transparent rounded-full animate-spin svelte-vxj6wp"></div> <span class="svelte-vxj6wp">Scoring...</span>',1),Mw=xe('<svg class="w-3 h-3 svelte-vxj6wp" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" class="svelte-vxj6wp"></path></svg> <span class="svelte-vxj6wp">Refresh</span>',1),jw=An('<svg class="w-3 h-3 svelte-vxj6wp" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" class="svelte-vxj6wp"></path></svg>'),zw=xe("<div><!> </div>"),Nw=An('<svg class="w-3 h-3 svelte-vxj6wp" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" class="svelte-vxj6wp"></path></svg>'),Bw=xe("<div><!> </div>"),Fw=xe('<div class="ai-button-content svelte-vxj6wp"><div class="ai-spinner svelte-vxj6wp"></div> <span class="svelte-vxj6wp">Optimizing Resume...</span></div>'),$w=xe('<div class="ai-button-content svelte-vxj6wp"><div class="ai-icon svelte-vxj6wp"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-vxj6wp"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H14V4H5V21H19V9Z" class="svelte-vxj6wp"></path></svg></div> <span class="svelte-vxj6wp">AI Optimize</span> <div class="ai-status-dot svelte-vxj6wp"></div></div>'),Uw=xe('<div class="w-full h-full glass-container svelte-vxj6wp"><div class="w-full h-full glass-panel p-4 flex flex-col svelte-vxj6wp"><div class="mb-4 svelte-vxj6wp"><div class="flex items-center justify-between mb-3 svelte-vxj6wp"><div class="flex items-center gap-3 svelte-vxj6wp"><div class="score-circle svelte-vxj6wp"><span class="text-lg font-bold text-base svelte-vxj6wp"> </span></div> <div class="svelte-vxj6wp"><h2 class="text-lg font-semibold text-text svelte-vxj6wp">Resume Match Score</h2> <p class="text-sm text-subtext0 svelte-vxj6wp"> </p></div></div> <button class="glass-button-small svelte-vxj6wp"><!></button></div> <div class="glass-progress-container svelte-vxj6wp"><div></div></div> <div class="flex justify-between text-xs text-subtext1 mt-1 px-1 svelte-vxj6wp"><span class="svelte-vxj6wp">0%</span> <span class="svelte-vxj6wp">100%</span></div></div> <div class="flex-1 min-h-0 svelte-vxj6wp"><div class="grid grid-cols-2 gap-3 h-full svelte-vxj6wp"><div class="flex flex-col min-h-0 svelte-vxj6wp"><div class="flex items-center gap-2 mb-3 svelte-vxj6wp"><div class="w-1.5 h-1.5 rounded-full bg-peach svelte-vxj6wp"></div> <h3 class="text-sm font-semibold text-text svelte-vxj6wp">Resume Keywords</h3> <div class="glass-badge-small svelte-vxj6wp"> </div></div> <div class="glass-keyword-container svelte-vxj6wp"></div></div> <div class="flex flex-col min-h-0 svelte-vxj6wp"><div class="flex items-center gap-2 mb-3 svelte-vxj6wp"><div class="w-1.5 h-1.5 rounded-full bg-blue svelte-vxj6wp"></div> <h3 class="text-sm font-semibold text-text svelte-vxj6wp">Job Keywords</h3> <div class="glass-badge-small svelte-vxj6wp"> </div></div> <div class="glass-keyword-container svelte-vxj6wp"></div></div></div></div> <div class="mt-4 svelte-vxj6wp"><button class="ai-button svelte-vxj6wp"><!></button></div></div></div>'),qw=xe('<div class="w-full h-full glass-container svelte-vxj6wp"><div class="w-full h-full glass-panel flex items-center justify-center svelte-vxj6wp"><div class="text-center p-8 svelte-vxj6wp"><div class="w-16 h-16 mx-auto mb-4 glass-icon-container svelte-vxj6wp"><svg class="w-8 h-8 text-subtext0 svelte-vxj6wp" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 3a1 1 0 012 0v5.5a.5.5 0 001 0V4a1 1 0 112 0v4.5a.5.5 0 001 0V6a1 1 0 112 0v5a7 7 0 11-14 0V9a1 1 0 012 0v2.5a.5.5 0 001 0V4a1 1 0 012 0v4.5a.5.5 0 001 0V3z" clip-rule="evenodd" class="svelte-vxj6wp"></path></svg></div> <h3 class="text-lg font-semibold text-text mb-2 svelte-vxj6wp">Ready to Analyze</h3> <p class="text-subtext0 svelte-vxj6wp">Add a job description to start analyzing your resume match</p></div></div></div>');function Hw(e,t){Gt(t,!1);const[n,r]=sr(),i=()=>Ke(br,"$jobKeywords",n),o=()=>Ke(xr,"$combinedScore",n),s=()=>Ke(yr,"$resumeKeywords",n),l=()=>Ke(vs,"$overlappingKeywords",n),u=()=>Ke(Ro,"$tuning",n);let f=Or(!1);function d(A){return A>=80?"from-green to-teal":A>=60?"from-yellow to-peach":A>=40?"from-peach to-maroon":"from-red to-maroon"}function h(A){return A>=80?"Excellent Match":A>=60?"Good Match":A>=40?"Fair Match":"Needs Work"}vl();var g=zt(),v=ot(g);{var b=A=>{var w=Uw(),$=H(w),O=H($),z=H(O),V=H(z),P=H(V),W=H(P),ae=H(W);F(W),F(P);var me=J(P,2),j=J(H(me),2),X=H(j,!0);F(j),F(me),F(V);var te=J(V,2);te.__click=[Ow,f];var se=H(te);{var K=Fe=>{var it=Lw();Tn(2),ie(Fe,it)},Q=Fe=>{var it=Mw();Tn(2),ie(Fe,it)};Le(se,Fe=>{S(f)?Fe(K):Fe(Q,!1)})}F(te),F(z);var ye=J(z,2),_e=H(ye);F(ye),Tn(2),F(O);var Ee=J(O,2),Be=H(Ee),k=H(Be),Ce=H(k),Se=J(H(Ce),4),T=H(Se,!0);F(Se),F(Ce);var Ze=J(Ce,2);Un(Ze,5,s,$n,(Fe,it)=>{var xt=zw(),It=H(xt);{var pn=je=>{var Ct=jw();ie(je,Ct)};Le(It,je=>{l().includes(S(it))&&je(pn)})}var In=J(It);F(xt),Je(je=>{Ht(xt,1,`keyword-badge ${je??""}`,"svelte-vxj6wp"),wt(In,` ${S(it)??""}`)},[()=>l().includes(S(it))?"keyword-matched":"keyword-unmatched"]),ie(Fe,xt)}),F(Ze),F(k);var ft=J(k,2),Me=H(ft),Xe=J(H(Me),4),rt=H(Xe,!0);F(Xe),F(Me);var ve=J(Me,2);Un(ve,5,i,$n,(Fe,it)=>{var xt=Bw(),It=H(xt);{var pn=je=>{var Ct=Nw();ie(je,Ct)};Le(It,je=>{l().includes(S(it))&&je(pn)})}var In=J(It);F(xt),Je(je=>{Ht(xt,1,`keyword-badge ${je??""}`,"svelte-vxj6wp"),wt(In,` ${S(it)??""}`)},[()=>l().includes(S(it))?"keyword-matched":"keyword-unmatched"]),ie(Fe,xt)}),F(ve),F(ft),F(Be),F(Ee);var bt=J(Ee,2),At=H(bt);At.__click=function(...Fe){jm?.apply(this,Fe)};var Oe=H(At);{var pt=Fe=>{var it=Fw();ie(Fe,it)},Jt=Fe=>{var it=$w();ie(Fe,it)};Le(Oe,Fe=>{u()?Fe(pt):Fe(Jt,!1)})}F(At),F(bt),F($),F(w),Je((Fe,it,xt)=>{wt(ae,`${Fe??""}%`),wt(X,it),te.disabled=S(f),Ht(_e,1,`glass-progress-bar bg-gradient-to-r ${xt??""}`,"svelte-vxj6wp"),Mr(_e,`width: ${o()??""}%`),wt(T,s().length),wt(rt,i().length),At.disabled=u()},[()=>Math.round(o()),()=>h(Math.round(o())),()=>d(Math.round(o()))]),ie(A,w)},C=A=>{var w=qw();ie(A,w)};Le(v,A=>{i()?A(b):A(C,!1)})}ie(e,g),Yt(),r()}bn(["click"]);async function Kw(e,t,n,r,i){if(t().trim()){ne(n,!0),ne(r,null);try{const s=await(await fetch("https://api.cors.lol/?url="+t())).text(),u=new DOMParser().parseFromString(s,"text/html");u.querySelectorAll("script, style, header, footer, nav").forEach(g=>g.remove());const h=(u.body.textContent||"").replace(/\s+/g," ").trim();Ye(Hn,h)}catch(o){console.error("Failed to fetch job description:",o),ne(r,"Failed to fetch content. Check the URL and try again.")}finally{ne(n,!1)}}}var Vw=xe('<div class="glass-badge svelte-1r5syiq"> </div>'),Ww=xe('<div class="absolute right-3 top-1/2 -translate-y-1/2 text-green"><svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div>'),Yw=xe('<div class="w-4 h-4 border-2 border-base border-t-transparent rounded-full animate-spin"></div> <span>Fetching...</span>',1),Gw=xe('<svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <span>Import</span>',1),Jw=xe('<div class="mt-3 p-3 glass-error flex items-center gap-2 svelte-1r5syiq"><svg class="w-4 h-4 text-red flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <span class="text-sm text-red"> </span></div>'),Zw=xe('<div class="absolute inset-0 glass-overlay flex items-center justify-center svelte-1r5syiq"><div class="flex flex-col items-center gap-3"><div class="w-8 h-8 border-4 border-blue border-t-transparent rounded-full animate-spin"></div> <div class="text-subtext0 font-medium">Importing content...</div></div></div>'),Qw=xe('<div class="w-full h-full glass-container svelte-1r5syiq"><div class="w-full h-full glass-panel p-4 flex flex-col svelte-1r5syiq"><div class="mb-4"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-3"><div class="w-3 h-3 rounded-full bg-blue animate-pulse"></div> <h2 class="text-lg font-semibold text-text">Job Description Import</h2></div> <!></div> <div class="flex gap-3"><div class="relative flex-1"><input class="w-full px-3 py-2 glass-input focus:glass-input-focus transition-all duration-300 placeholder:text-subtext1 svelte-1r5syiq" placeholder="Paste job posting URL here..."/> <!></div> <button class="glass-button px-4 py-2 font-medium flex items-center gap-2 min-w-[90px] justify-center svelte-1r5syiq"><!></button></div> <!></div> <div class="flex-1 min-h-0 relative"><div class="h-full relative glass-textarea-container svelte-1r5syiq"><textarea class="w-full h-full resize-none glass-textarea focus:glass-textarea-focus transition-all duration-300 placeholder:text-subtext1 svelte-1r5syiq" placeholder="Job description will appear here after import, or you can paste it manually..."></textarea> <!></div></div></div></div>');function Xw(e,t){Gt(t,!1);const[n,r]=sr(),i=()=>Ke(Qn,"$jobUrl",n),o=()=>Ke(Hn,"$jobDescription",n);let s=Or(!1),l=Or(null);vl();var u=Qw(),f=H(u),d=H(f),h=H(d),g=J(H(h),2);{var v=K=>{var Q=Vw(),ye=H(Q);F(Q),Je(()=>wt(ye,`${o().length??""} characters`)),ie(K,Q)};Le(g,K=>{o()&&K(v)})}F(h);var b=J(h,2),C=H(b),A=H(C);_t(A);var w=J(A,2);{var $=K=>{var Q=Ww();ie(K,Q)};Le(w,K=>{i()&&!S(s)&&K($)})}F(C);var O=J(C,2);O.__click=[Kw,i,s,l,o];var z=H(O);{var V=K=>{var Q=Yw();Tn(2),ie(K,Q)},P=K=>{var Q=Gw();Tn(2),ie(K,Q)};Le(z,K=>{S(s)?K(V):K(P,!1)})}F(O),F(b);var W=J(b,2);{var ae=K=>{var Q=Jw(),ye=J(H(Q),2),_e=H(ye,!0);F(ye),F(Q),Je(()=>wt(_e,S(l))),ie(K,Q)};Le(W,K=>{S(l)&&K(ae)})}F(d);var me=J(d,2),j=H(me),X=H(j);pl(X);var te=J(X,2);{var se=K=>{var Q=Zw();ie(K,Q)};Le(te,K=>{S(s)&&K(se)})}F(j),F(me),F(f),F(u),Je(K=>{A.disabled=S(s),O.disabled=K,X.disabled=S(s)},[()=>S(s)||!i().trim()]),jt(A,i,K=>Ye(Qn,K)),jt(X,o,K=>Ye(Hn,K)),ie(e,u),Yt(),r()}bn(["click"]);function e2(e,t){t(),window.open("https://github.com/Shlok-Bhakta/ResuMate/blob/main/README.md","_blank")}var t2=e=>e.stopPropagation(),n2=xe(`<div class="fixed inset-0 bg-crust/80 backdrop-blur-sm z-50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="welcome-title"><div class="welcome-modal max-w-md w-full mx-auto svelte-173f89h"><div class="welcome-header svelte-173f89h"><div class="flex items-center gap-3 mb-4"><div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue to-purple flex items-center justify-center"><span class="text-lg">ð</span></div> <h1 id="welcome-title" class="text-xl font-bold text-text">Welcome to ResuMate!</h1></div> <p class="text-subtext1 text-sm leading-relaxed mb-6">Thanks for trying ResuMate! This app helps you create AI-optimized resumes that match job descriptions perfectly.</p> <div class="bg-surface0/50 rounded-lg p-4 mb-6 border border-surface1/50"><h3 class="text-sm font-semibold text-text mb-2">ð Quick Start Tips:</h3> <ul class="text-xs text-subtext1 space-y-1"><li>â¢ Go to Settings first to set up your profile</li> <li>â¢ Optionally add an OpenRouter API key for AI features</li> <li>â¢ Create a new project and paste a job description</li> <li>â¢ Watch your resume score improve in real-time!</li></ul></div></div> <div class="welcome-actions svelte-173f89h"><button type="button" class="welcome-button-primary svelte-173f89h">ð Read the Guide</button> <button type="button" class="welcome-button-secondary svelte-173f89h">Let's Go!</button></div></div></div>`);function r2(e,t){Gt(t,!0);const[n,r]=sr(),i=()=>Ke(ju,"$hasSeenWelcome",n);let o=Pe(!1);Zn(()=>{i()||ne(o,!0)});function s(){ne(o,!1),Ye(ju,!0)}var l=zt(),u=ot(l);{var f=d=>{var h=n2();h.__click=s;var g=H(h);g.__click=[t2];var v=J(H(g),2),b=H(v);b.__click=[e2,s];var C=J(b,2);C.__click=s,F(v),F(g),F(h),ie(d,h)};Le(u,d=>{S(o)&&d(f)})}ie(e,l),Yt(),r()}bn(["click"]);var i2=xe('<div class="flex-1 min-w-0 svelte-nqmecn"><!></div>'),o2=xe('<div class="flex-1 min-w-0 h-full svelte-nqmecn"><!></div>'),s2=xe('<div class="w-fit flex-shrink-0 svelte-nqmecn"><!></div>'),a2=xe('<div class="w-fit flex-shrink-0 svelte-nqmecn"><!></div>'),l2=xe('<div class="fixed inset-0 pointer-events-none overflow-hidden -z-10 svelte-nqmecn"><div class="blob blob-1 svelte-nqmecn"></div> <div class="blob blob-2 svelte-nqmecn"></div> <div class="blob blob-3 svelte-nqmecn"></div></div> <div class="flex w-full h-full relative svelte-nqmecn"><div class="flex-1 min-w-0 h-full overflow-clip svelte-nqmecn"><!></div> <!></div>',1),u2=xe("<!> <!>",1);function k2(e,t){Gt(t,!1);const[n,r]=sr(),i=()=>Ke(Ar,"$keywords",n),o=()=>Ke(ys,"$header",n),s=()=>Ke(Li,"$projectEditingStage",n),l=()=>Ke($i,"$resumeHtml",n);i().length===0&&fetch("/ResuMate/keywords.txt").then(h=>h.text()).then(h=>{let g=h.split(`
`).map(v=>v.toLowerCase()).filter((v,b,C)=>C.indexOf(v)===b);g.sort((v,b)=>b.length-v.length),Ye(Ar,g)}).catch(h=>{console.log(h)}),o()===""&&kl(),vl();var u=u2(),f=ot(u);Rw(f,{children:(h,g)=>{var v=l2(),b=J(ot(v),2),C=H(b),A=H(C);Iw(A,{}),F(C);var w=J(C,2);{var $=z=>{var V=i2(),P=H(V);Xw(P,{}),F(V),ie(z,V)},O=z=>{var V=zt(),P=ot(V);{var W=me=>{var j=o2(),X=H(j);Hw(X,{}),F(j),ie(me,j)},ae=me=>{var j=zt(),X=ot(j);{var te=se=>{var K=zt(),Q=ot(K);Np(Q,l,ye=>{var _e=a2(),Ee=H(_e);Yc(Ee,{html:"<h1>Loading...</h1>"}),F(_e),ie(ye,_e)},(ye,_e)=>{var Ee=s2(),Be=H(Ee);Yc(Be,{get html(){return S(_e)}}),F(Ee),ie(ye,Ee)}),ie(se,K)};Le(X,se=>{s()==="Preview"&&se(te)},!0)}ie(me,j)};Le(P,me=>{s()==="Tuning"?me(W):me(ae,!1)},!0)}ie(z,V)};Le(w,z=>{s()==="Content"?z($):z(O,!1)})}F(b),ie(h,v)},$$slots:{default:!0}});var d=J(f,2);r2(d,{}),ie(e,u),Yt(),r()}export{k2 as A,os as _,S_ as t};
