const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/highlight.CUmUhhwc.js","assets/snippet.5f7I8aJ2.js"])))=>i.map(i=>d[i]);
import{e as Jd,c as oo,l as Gd,a as nf,u as Zt,b as ur,h as ft,d as Jr,i as rf,f as Ei,g as Su,H as Al,r as pa,s as _i,j as rr,U as el,k as ao,m as ma,n as ga,o as On,q as Il,p as Wn,t as Tu,v as Pu,w as Eu,x as po,y as ki,z as Zd,E as of,A as af,B as qa,C as Sr,D as Dl,F as eo,G as k,I as sf,J as lf,K as Qd,L as uf,M as cf,N as Ka,O as Ha,P as Xd,Q as ks,R as mo,S as ff,T as ep,V as tp,W as np,X as Ol,Y as hf,Z as rp,_ as ot,$ as ip,a0 as op,a1 as ap,a2 as Ru,a3 as sp,a4 as Co,a5 as Va,a6 as df,a7 as pf,a8 as lp,a9 as up,aa as mf,ab as cp,ac as fp,ad as hp,ae as dp,af as pp,ag as mp,ah as gp,ai as vp,aj as gn,ak as gf,al as yp,am as bp,an as xp,ao as _p,ap as vf,aq as Ll,ar as kp,as as Au,at as wp,au as yf,av as Wr,aw as Cp,ax as $,ay as tl,az as Sp,aA as Tp,aB as Ri,aC as Pp,aD as Ep,aE as Rp,aF as Ap,aG as Ip,aH as Dp,aI as Yi,aJ as bf,aK as Ee,aL as Re,aM as se,aN as Ht,aO as Vt,aP as G,aQ as ne,aR as Tr,aS as Y,aT as xt,aU as fn,aV as St,aW as mt,aX as xf,aY as Ml,aZ as zn,a_ as va,a$ as un,b0 as so,b1 as Op}from"./snippet.5f7I8aJ2.js";function Lp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Mp="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mp);Jd();function or(e){oo===null&&Gd(),nf&&oo.l!==null?jp(oo).m.push(e):Zt(()=>{const t=ur(e);if(typeof t=="function")return t})}function jp(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const ws=0,Vo=1,Cs=2;function Np(e,t,n,r,i){ft&&Jr();var o=e,a=rf(),l=oo,u=el,f,d,h,g=a?ma(void 0):ga(void 0,!1,!1),v=a?ma(void 0):ga(void 0,!1,!1),x=!1;function S(C,F){x=!0,F&&(Tu(D),Pu(D),Eu(l));try{C===ws&&n&&(f?po(f):f=On(()=>n(o))),C===Vo&&r&&(d?po(d):d=On(()=>r(o,g))),C!==ws&&f&&ki(f,()=>f=null),C!==Vo&&d&&ki(d,()=>d=null),C!==Cs&&h&&ki(h,()=>h=null)}finally{F&&(Eu(null),Pu(null),Tu(null),Zd())}}var D=Ei(()=>{if(u===(u=t()))return;let C=ft&&Su(u)===(o.data===Al);if(C&&(o=pa(),_i(o),rr(!1),C=!0),Su(u)){var F=u;x=!1,F.then(O=>{F===u&&(ao(g,O),S(Vo,!0))},O=>{if(F===u)throw ao(v,O),S(Cs,!0),v.v}),ft?n&&(f=On(()=>n(o))):Il(()=>{x||S(ws,!0)})}else ao(g,u),S(Vo,!1);return C&&rr(!0),()=>u=el});ft&&(o=Wn)}function Qe(e,t,n=!1){ft&&Jr();var r=e,i=null,o=null,a=el,l=n?of:0,u=!1;const f=(v,x=!0)=>{u=!0,g(x,v)};var d=null;function h(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var v=a?i:o,x=a?o:i;v&&po(v),x&&ki(x,()=>{a?o=null:i=null})}const g=(v,x)=>{if(a===(a=v))return;let S=!1;if(ft){const H=af(r)===Al;!!a===H&&(r=pa(),_i(r),rr(!1),S=!0)}var D=Dl(),C=r;if(D&&(d=document.createDocumentFragment(),d.append(C=qa())),a?i??=x&&On(()=>x(C)):o??=x&&On(()=>x(C)),D){var F=Sr,O=a?i:o,z=a?o:i;O&&F.skipped_effects.delete(O),z&&F.skipped_effects.add(z),F.add_callback(h)}else h();S&&rr(!0)};Ei(()=>{u=!1,t(f),u||g(null,null)},l),ft&&(r=Wn)}function Ln(e,t){return t}function Bp(e,t,n){for(var r=e.items,i=[],o=t.length,a=0;a<o;a++)ep(t[a].e,i,!0);var l=o>0&&i.length===0&&n!==null;if(l){var u=n.parentNode;tp(u),u.append(n),r.clear(),Hn(e,t[0].prev,t[o-1].next)}np(i,()=>{for(var f=0;f<o;f++){var d=t[f];l||(r.delete(d.k),Hn(e,d.prev,d.next)),mo(d.e,!l)}})}function Mn(e,t,n,r,i,o=null){var a=e,l={flags:t,items:new Map,first:null},u=(t&hf)!==0;if(u){var f=e;a=ft?_i(eo(f)):f.appendChild(qa())}ft&&Jr();var d=null,h=!1,g=new Map,v=sf(()=>{var C=n();return cf(C)?C:C==null?[]:uf(C)}),x,S;function D(){zp(S,x,l,g,a,i,t,r,n),o!==null&&(x.length===0?d?po(d):d=On(()=>o(a)):d!==null&&ki(d,()=>{d=null}))}Ei(()=>{S??=Ol,x=k(v);var C=x.length;if(h&&C===0)return;h=C===0;let F=!1;if(ft){var O=af(a)===Al;O!==(C===0)&&(a=pa(),_i(a),rr(!1),F=!0)}if(ft){for(var z=null,H,E=0;E<C;E++){if(Wn.nodeType===lf&&Wn.data===Qd){a=Wn,F=!0,rr(!1);break}var W=x[E],oe=r(W,E);H=nl(Wn,l,z,null,W,oe,E,i,t,n),l.items.set(oe,H),z=H}C>0&&_i(pa())}if(ft)C===0&&o&&(d=On(()=>o(a)));else if(Dl()){var ye=new Set,j=Sr;for(E=0;E<C;E+=1){W=x[E],oe=r(W,E);var Q=l.items.get(oe)??g.get(oe);Q?(t&(Ha|Ka))!==0&&_f(Q,W,E,t):(H=nl(null,l,null,null,W,oe,E,i,t,n,!0),g.set(oe,H)),ye.add(oe)}for(const[ee,pe]of l.items)ye.has(ee)||j.skipped_effects.add(pe.e);j.add_callback(D)}else D();F&&rr(!0),k(v)}),ft&&(a=Wn)}function zp(e,t,n,r,i,o,a,l,u){var f=(a&rp)!==0,d=(a&(Ha|Ka))!==0,h=t.length,g=n.items,v=n.first,x=v,S,D=null,C,F=[],O=[],z,H,E,W;if(f)for(W=0;W<h;W+=1)z=t[W],H=l(z,W),E=g.get(H),E!==void 0&&(E.a?.measure(),(C??=new Set).add(E));for(W=0;W<h;W+=1){if(z=t[W],H=l(z,W),E=g.get(H),E===void 0){var oe=r.get(H);if(oe!==void 0){r.delete(H),g.set(H,oe);var ye=D?D.next:x;Hn(n,D,oe),Hn(n,oe,ye),Ss(oe,ye,i),D=oe}else{var j=x?x.e.nodes_start:i;D=nl(j,n,D,D===null?n.first:D.next,z,H,W,o,a,u)}g.set(H,D),F=[],O=[],x=D.next;continue}if(d&&_f(E,z,W,a),(E.e.f&ks)!==0&&(po(E.e),f&&(E.a?.unfix(),(C??=new Set).delete(E))),E!==x){if(S!==void 0&&S.has(E)){if(F.length<O.length){var Q=O[0],ee;D=Q.prev;var pe=F[0],ie=F[F.length-1];for(ee=0;ee<F.length;ee+=1)Ss(F[ee],Q,i);for(ee=0;ee<O.length;ee+=1)S.delete(O[ee]);Hn(n,pe.prev,ie.next),Hn(n,D,pe),Hn(n,ie,Q),x=Q,D=ie,W-=1,F=[],O=[]}else S.delete(E),Ss(E,x,i),Hn(n,E.prev,E.next),Hn(n,E,D===null?n.first:D.next),Hn(n,D,E),D=E;continue}for(F=[],O=[];x!==null&&x.k!==H;)(x.e.f&ks)===0&&(S??=new Set).add(x),O.push(x),x=x.next;if(x===null)continue;E=x}F.push(E),D=E,x=E.next}if(x!==null||S!==void 0){for(var re=S===void 0?[]:uf(S);x!==null;)(x.e.f&ks)===0&&re.push(x),x=x.next;var ae=re.length;if(ae>0){var de=(a&hf)!==0&&h===0?i:null;if(f){for(W=0;W<ae;W+=1)re[W].a?.measure();for(W=0;W<ae;W+=1)re[W].a?.fix()}Bp(n,re,de)}}f&&Il(()=>{if(C!==void 0)for(E of C)E.a?.apply()}),e.first=n.first&&n.first.e,e.last=D&&D.e;for(var me of r.values())mo(me.e);r.clear()}function _f(e,t,n,r){(r&Ha)!==0&&ao(e.v,t),(r&Ka)!==0?ao(e.i,n):e.i=n}function nl(e,t,n,r,i,o,a,l,u,f,d){var h=(u&Ha)!==0,g=(u&Xd)===0,v=h?g?ga(i,!1,!1):ma(i):i,x=(u&Ka)===0?a:ma(a),S={i:x,v,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var D=document.createDocumentFragment();D.append(e=qa())}return S.e=On(()=>l(e,v,x,f),ft),S.e.prev=n&&n.e,S.e.next=r&&r.e,n===null?d||(t.first=S):(n.next=S,n.e.next=S.e),r!==null&&(r.prev=S,r.e.prev=S.e),S}finally{}}function Ss(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var a=ff(o);i.before(o),o=a}}function Hn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function kf(e,t,n=!1,r=!1,i=!1){var o=e,a="";ot(()=>{var l=Ol;if(a===(a=t()??"")){ft&&Jr();return}if(l.nodes_start!==null&&(ip(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),a!==""){if(ft){Wn.data;for(var u=Jr(),f=u;u!==null&&(u.nodeType!==lf||u.data!=="");)f=u,u=ff(u);if(u===null)throw op(),ap;Ru(Wn,f),o=_i(u);return}var d=a+"";n?d=`<svg>${d}</svg>`:r&&(d=`<math>${d}</math>`);var h=sp(d);if((n||r)&&(h=eo(h)),Ru(eo(h),h.lastChild),n||r)for(;eo(h);)o.before(eo(h));else o.before(h)}})}function Fp(e,t,n,r,i){ft&&Jr();var o=t.$$slots?.[n],a=!1;o===!0&&(o=t.children,a=!0),o===void 0||o(e,a?()=>r:r)}function lo(e,t,n){ft&&Jr();var r=e,i,o,a=null,l=null;function u(){o&&(ki(o),o=null),a&&(a.lastChild.remove(),r.before(a),a=null),o=l,l=null}Ei(()=>{if(i!==(i=t())){var f=Dl();if(i){var d=r;f&&(a=document.createDocumentFragment(),a.append(d=qa())),l=On(()=>n(d,i))}f?Sr.add_callback(u):u()}},of),ft&&(r=Wn)}function jl(e,t,n){Co(()=>{var r=ur(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};Va(()=>{var a=n();df(a),i&&pf(o,a)&&(o=a,r.update(a))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function $p(e,t){var n=void 0,r;Ei(()=>{n!==(n=t())&&(r&&(mo(r),r=null),n&&(r=On(()=>{Co(()=>n(e))})))})}function wf(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=wf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Up(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=wf(e))&&(r&&(r+=" "),r+=t);return r}function rl(e){return typeof e=="object"?Up(e):e??""}const Iu=[...` 	
\r\fÂ \v\uFEFF`];function qp(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+o;(a===0||Iu.includes(r[a-1]))&&(l===r.length||Iu.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Du(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function Ts(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Kp(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,a=0,l=!1,u=[];r&&u.push(...Object.keys(r).map(Ts)),i&&u.push(...Object.keys(i).map(Ts));var f=0,d=-1;const S=e.length;for(var h=0;h<S;h++){var g=e[h];if(l?g==="/"&&e[h-1]==="*"&&(l=!1):o?o===g&&(o=!1):g==="/"&&e[h+1]==="*"?l=!0:g==='"'||g==="'"?o=g:g==="("?a++:g===")"&&a--,!l&&o===!1&&a===0){if(g===":"&&d===-1)d=h;else if(g===";"||h===S-1){if(d!==-1){var v=Ts(e.substring(f,d).trim());if(!u.includes(v)){g!==";"&&h++;var x=e.substring(f,h).trim();n+=" "+x+";"}}f=h+1,d=-1}}}}return r&&(n+=Du(r)),i&&(n+=Du(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function hn(e,t,n,r,i,o){var a=e.__className;if(ft||a!==n||a===void 0){var l=qp(n,r,o);(!ft||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):t?e.className=l:e.setAttribute("class",l)),e.__className=n}else if(o&&i!==o)for(var u in o){var f=!!o[u];(i==null||f!==!!i[u])&&e.classList.toggle(u,f)}return o}function Ps(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function Gr(e,t,n,r){var i=e.__style;if(ft||i!==t){var o=Kp(t,r);(!ft||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else r&&(Array.isArray(r)?(Ps(e,n?.[0],r[0]),Ps(e,n?.[1],r[1],"important")):Ps(e,n,r));return r}function il(e,t,n=!1){if(e.multiple){if(t==null)return;if(!cf(t))return lp();for(var r of e.options)r.selected=t.includes(Ou(r));return}for(r of e.options){var i=Ou(r);if(up(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Hp(e){var t=new MutationObserver(()=>{il(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),mf(()=>{t.disconnect()})}function Ou(e){return"__value"in e?e.__value:e.value}const Wo=Symbol("class"),Ji=Symbol("style"),Cf=Symbol("is custom element"),Sf=Symbol("is html");function dt(e){if(ft){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;at(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;at(e,"checked",null),e.checked=i}}};e.__on_r=n,cp(n),fp()}}function Vp(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function at(e,t,n,r){var i=Tf(e);ft&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[hp]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Pf(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Wp(e,t,n,r,i=!1){var o=Tf(e),a=o[Cf],l=!o[Sf];let u=ft&&a;u&&rr(!1);var f=t||{},d=e.tagName==="OPTION";for(var h in t)h in n||(n[h]=null);n.class?n.class=rl(n.class):n.class=null,n[Ji]&&(n.style??=null);var g=Pf(e);for(const O in n){let z=n[O];if(d&&O==="value"&&z==null){e.value=e.__value="",f[O]=z;continue}if(O==="class"){var v=e.namespaceURI==="http://www.w3.org/1999/xhtml";hn(e,v,z,r,t?.[Wo],n[Wo]),f[O]=z,f[Wo]=n[Wo];continue}if(O==="style"){Gr(e,z,t?.[Ji],n[Ji]),f[O]=z,f[Ji]=n[Ji];continue}var x=f[O];if(!(z===x&&!(z===void 0&&e.hasAttribute(O)))){f[O]=z;var S=O[0]+O[1];if(S!=="$$")if(S==="on"){const H={},E="$$"+O;let W=O.slice(2);var D=xp(W);if(gp(W)&&(W=W.slice(0,-7),H.capture=!0),!D&&x){if(z!=null)continue;e.removeEventListener(W,f[E],H),f[E]=null}if(z!=null)if(D)e[`__${W}`]=z,gn([W]);else{let oe=function(ye){f[O].call(this,ye)};f[E]=vp(W,e,oe,H)}else D&&(e[`__${W}`]=void 0)}else if(O==="style")at(e,O,z);else if(O==="autofocus")gf(e,!!z);else if(!a&&(O==="__value"||O==="value"&&z!=null))e.value=e.__value=z;else if(O==="selected"&&d)Vp(e,z);else{var C=O;l||(C=yp(C));var F=C==="defaultValue"||C==="defaultChecked";if(z==null&&!a&&!F)if(o[O]=null,C==="value"||C==="checked"){let H=e;const E=t===void 0;if(C==="value"){let W=H.defaultValue;H.removeAttribute(C),H.defaultValue=W,H.value=H.__value=E?W:null}else{let W=H.defaultChecked;H.removeAttribute(C),H.defaultChecked=W,H.checked=E?W:!1}}else e.removeAttribute(O);else F||g.includes(C)&&(a||typeof z!="string")?e[C]=z:typeof z!="function"&&at(e,C,z)}}}return u&&rr(!0),f}function Yp(e,t,n=[],r=[],i,o=!1){pp(n,r,a=>{var l=void 0,u={},f=e.nodeName==="SELECT",d=!1;if(Ei(()=>{var g=t(...a.map(k)),v=Wp(e,l,g,i,o);d&&f&&"value"in g&&il(e,g.value);for(let S of Object.getOwnPropertySymbols(u))g[S]||mo(u[S]);for(let S of Object.getOwnPropertySymbols(g)){var x=g[S];S.description===mp&&(!l||x!==l[S])&&(u[S]&&mo(u[S]),u[S]=On(()=>$p(e,()=>x))),v[S]=x}l=v}),f){var h=e;Co(()=>{il(h,l.value,!0),Hp(h)})}d=!0})}function Tf(e){return e.__attributes??={[Cf]:e.nodeName.includes("-"),[Sf]:e.namespaceURI===dp}}var Lu=new Map;function Pf(e){var t=Lu.get(e.nodeName);if(t)return t;Lu.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=_p(r);for(var o in n)n[o].set&&t.push(o);r=bp(r)}return t}function Ct(e,t,n=t){var r=rf(),i=new WeakSet;vf(e,"input",o=>{var a=o?e.defaultValue:e.value;if(a=Es(e)?Rs(a):a,n(a),Sr!==null&&i.add(Sr),r&&a!==(a=t())){var l=e.selectionStart,u=e.selectionEnd;e.value=a??"",u!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(u,e.value.length))}}),(ft&&e.defaultValue!==e.value||ur(t)==null&&e.value)&&(n(Es(e)?Rs(e.value):e.value),Sr!==null&&i.add(Sr)),Va(()=>{var o=t();e===document.activeElement&&i.has(Sr)||Es(e)&&o===Rs(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Cr(e,t,n=t){vf(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(ft&&e.defaultChecked!==e.checked||ur(t)==null)&&n(e.checked),Va(()=>{var r=t();e.checked=!!r})}function Es(e){var t=e.type;return t==="number"||t==="range"}function Rs(e){return e===""?null:+e}class Nl{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#e.get(t);i.delete(n),i.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Nl.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var Jp=new Nl({box:"border-box"});function na(e,t,n){var r=Jp.observe(e,()=>n(e[t]));Co(()=>(ur(()=>n(e[t])),r))}function Mu(e,t){return e===t||e?.[Ll]===t}function cn(e={},t,n,r){return Co(()=>{var i,o;return Va(()=>{i=o,o=[],ur(()=>{e!==n(...o)&&(t(e,...o),i&&Mu(n(...i),e)&&t(null,...i))})}),()=>{Il(()=>{o&&Mu(n(...o),e)&&t(null,...o)})}}),e}function Ef(e=!1){const t=oo,n=t.l.u;if(!n)return;let r=()=>df(t.s);if(e){let i=0,o={};const a=yf(()=>{let l=!1;const u=t.s;for(const f in u)u[f]!==o[f]&&(o[f]=u[f],l=!0);return l&&i++,i});r=()=>k(a)}n.b.length&&kp(()=>{ju(t,r),Au(n.b)}),Zt(()=>{const i=ur(()=>n.m.map(wp));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Zt(()=>{ju(t,r),Au(n.a)})}function ju(e,t){if(e.l.s)for(const n of e.l.s)k(n);t()}function Rf(e,t,n){if(e==null)return t(void 0),Wr;const r=ur(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const vi=[];function Bl(e,t=Wr){let n=null;const r=new Set;function i(l){if(pf(e,l)&&(e=l,n)){const u=!vi.length;for(const f of r)f[1](),vi.push(f,e);if(u){for(let f=0;f<vi.length;f+=2)vi[f][0](vi[f+1]);vi.length=0}}}function o(l){i(l(e))}function a(l,u=Wr){const f=[l,u];return r.add(f),r.size===1&&(n=t(i,o)||Wr),l(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:a}}function Oe(e){let t;return Rf(e,n=>t=n)(),t}let to=!1,ol=Symbol();function Fe(e,t,n){const r=n[t]??={store:null,source:ga(void 0),unsubscribe:Wr};if(r.store!==e&&!(ol in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Wr;else{var i=!0;r.unsubscribe=Rf(e,o=>{i?r.source.v=o:$(r.source,o)}),i=!1}return e&&ol in n?Oe(e):k(r.source)}function $e(e,t){return e.set(t),t}function Xr(){const e={};function t(){mf(()=>{for(var n in e)e[n].unsubscribe();Cp(e,ol,{enumerable:!1,value:!0})})}return[e,t]}function Af(){to=!0}function Gp(e){var t=to;try{return to=!1,[e(),to]}finally{to=t}}const Zp={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Yi(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Yi(i)&&(i=i());const o=tl(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Yi(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=tl(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Ll||t===bf)return!1;for(let n of e.props)if(Yi(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Yi(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function As(...e){return new Proxy({props:e},Zp)}function it(e,t,n,r){var i=!nf||(n&Ip)!==0,o=(n&Ap)!==0,a=(n&Rp)!==0,l=r,u=!0,f=()=>(u&&(u=!1,l=a?ur(r):r),l),d;if(o){var h=Ll in e||bf in e;d=tl(e,t)?.set??(h&&t in e?O=>e[t]=O:void 0)}var g,v=!1;o?[g,v]=Gp(()=>e[t]):g=e[t],g===void 0&&r!==void 0&&(g=f(),d&&(i&&Sp(),d(g)));var x;if(i?x=()=>{var O=e[t];return O===void 0?f():(u=!0,O)}:x=()=>{var O=e[t];return O!==void 0&&(l=void 0),O===void 0?l:O},i&&(n&Tp)===0)return x;if(d){var S=e.$$legacy;return function(O,z){return arguments.length>0?((!i||!z||S||v)&&d(z?x():O),O):x()}}var D=!1,C=((n&Dp)!==0?yf:sf)(()=>(D=!1,x()));o&&k(C);var F=Ol;return function(O,z){if(arguments.length>0){const H=z?k(C):i&&o?Ri(O):O;return $(C,H),D=!0,l!==void 0&&(l=H),O}return Pp&&D||(F.f&Ep)!==0?C.v:k(C)}}var al=function(e,t){return al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},al(e,t)},ya=function(){return ya=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ya.apply(this,arguments)};function Nu(e,t,n){for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var Bu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}al(n,r),n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}(t,e),t}(Error),If={},Qp=new Set,go={};function no(e,t){if(typeof e=="string"||typeof e=="number"&&!isNaN(e)&&Math.abs(e)!==1/0||e==null||typeof e=="boolean")return e;var n=t.indexOf(e);if(n!==-1)return"#$@__instance__"+n;t.push(e);var r=t.length-1;if(e.constructor===Array){var i=e.map(function(u){return no(u,t)});return i.unshift("#$@__reference__"+r),i}if(e.constructor===Object){var o=Object.fromEntries(Object.entries(e).map(function(u){return[u[0],no(u[1],t)]}));return o["#$@__reference__"]=r,o}Qp.add(e.constructor);var a={};a=Object.defineProperty(a,"#$@__constructor__",{value:e.constructor.name,enumerable:!0}),a=Object.defineProperty(a,"#$@__reference__",{value:r,enumerable:!0});var l=function(u,f){if(Object.keys(go).includes(u.constructor.name))return go[u.constructor.name].toPlain(u,function(d){return no(d,f)})}(e,t);return l!==void 0?ya(ya({},l),a):(Object.getOwnPropertyNames(e).forEach(function(u){Object.defineProperty(a,u,{value:no(e[u],t),enumerable:!0})}),a)}function ro(e,t,n){var r;if(typeof e=="string"&&e.indexOf("#$@__instance__")===0)return n[l=parseInt(e.slice(15))];if(typeof e=="string"||typeof e=="number"||e==null||typeof e=="boolean")return e;if(e.constructor===Array){if(e.length===0)return[];var i=e.shift();if(typeof i!="string"||i.substring(0,16)!=="#$@__reference__"){if(Object.keys(n).length===0)return e.unshift(i),e;throw new Bu}var o=[];n[l=i.slice(16)]=o;for(var a=0;a<e.length;a++)o[a]=ro(e[a],t,n);return o}if(e.constructor===Object){var l;if((l=(r=e["#$@__reference__"])!==null&&r!==void 0?r:null)===null){if(Object.keys(n).length===0)return e;throw new Bu}if(delete e["#$@__reference__"],!Object.keys(e).includes("#$@__constructor__")){for(var u in o={},n[l]=o,e)o[u]=ro(e[u],t,n);return o}var f=e["#$@__constructor__"];delete e["#$@__constructor__"];var d=function(g,v,x,S){if(Object.keys(go).includes(v))return go[v].fromPlain(g,function(D){return ro(D,x,S)})}(e,f,t,n);if(d!==void 0)return d;if(!Object.keys(t).includes(f))throw new Error("The class "+f+" is not allowed");var h={};for(var u in n[l]=h,e)h[u]=ro(e[u],t,n);return Object.setPrototypeOf(h,t[f].prototype),h}}function Xp(e){If[e.name]=e}function Df(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e,t){e("Date",n=>({time:n.getTime()}),function(n){let r=new Date;return r.setTime(n.time),r}),e("BigInt",n=>({number:n.toString()}),n=>BigInt(n.number)),e("String",n=>({text:n.toString()}),n=>new String(n.text)),e("RegExp",n=>({source:n.source,flags:n.flags}),n=>new RegExp(n.source,n.flags)),e("Number",function(n){let r={nan:!1,infinity:!1,positive:!0,number:null};return Math.abs(n)===1/0?(r.infinity=!0,r.positive=Math.abs(n)===n,r):isNaN(n)?(r.nan=!0,r):(r.number=n.valueOf(),r)},function(n){return n.nan?NaN:n.infinity?1/0*(n.positive?1:-1):new Number(n.number)}),e("Map",(n,r)=>({data:Array.from(n.entries()).map(i=>r(i))}),function(n,r){const i=new Map;return n.data.map(o=>r(o)).forEach(([o,a])=>i.set(o,a)),i}),e("Set",(n,r)=>({data:Array.from(n.values()).map(i=>r(i))}),function(n,r){const i=new Set;return n.data.map(o=>r(o)).forEach(o=>i.add(o)),i}),e("ArrayBuffer",(n,r)=>({data:r(new Uint8Array(n))}),(n,r)=>r(n.data).buffer),e("DataView",(n,r)=>({buffer:r(n.buffer),offset:n.byteOffset,length:n.byteLength}),(n,r)=>new DataView(r(n.buffer),n.offset,n.length)),[Error,EvalError,RangeError,AggregateError,ReferenceError,SyntaxError,TypeError,URIError,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].forEach(n=>t(n))})(function(e,t,n){go[e]={toPlain:t,fromPlain:n}},Xp);var Hr,em={};function ra(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Of(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=ra(n);return(i,o)=>r.then(a=>o(a.transaction(t,i).objectStore(t)))}let Is;function Ds(){return Is||(Is=Of("keyval-store","keyval")),Is}function tm(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=o(n)):i!=="call"&&i!=="optionalCall"||(n=o((...a)=>n.call(t,...a)),t=void 0)}return n}(Hr=em).defaults={},Hr.set=function(e,t,n){var r=n||{},i=Hr.defaults,o=r.expires||i.expires,a=r.domain||i.domain,l=r.path!==void 0?r.path:i.path!==void 0?i.path:"/",u=r.secure!==void 0?r.secure:i.secure,f=r.httponly!==void 0?r.httponly:i.httponly,d=r.samesite!==void 0?r.samesite:i.samesite,h=o?new Date(typeof o=="number"?new Date().getTime()+864e5*o:o):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(h&&h.getTime()>=0?";expires="+h.toUTCString():"")+(a?";domain="+a:"")+(l?";path="+l:"")+(u?";secure":"")+(f?";httponly":"")+(d?";samesite="+d:"")},Hr.get=function(e){for(var t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");if(r=r<0?n.length:r,decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))===e)return decodeURIComponent(n.slice(r+1))}return null},Hr.erase=function(e,t){Hr.set(e,"",{expires:-1,domain:t&&t.domain,path:t&&t.path,secure:0,httponly:0})},Hr.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");r=r<0?n.length:r,e[decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))]=decodeURIComponent(n.slice(r+1))}return e};const zu=[],nm=e=>{(t=>{const n=typeof process<"u"&&tm([process,"access",r=>r.env,"optionalAccess",r=>r.NODE_ENV])==="production";zu.includes(t)||n||(typeof window>"u"&&(t+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(t),zu.push(t))})(`Unable to find the ${e}. No data will be persisted.`)};let rm=function(e){return e===void 0?"undefined":JSON.stringify(no(e,[]))},im=function(e,t){if(t===void 0&&(t=void 0),typeof e!="string")return e;if(t===void 0&&(t={}),e!=="undefined"){t=Object.fromEntries(Nu(Nu([],Object.entries(t),!0),Object.entries(If)));try{return ro(JSON.parse(e),t,{})}catch{return e}}};function om(e,t,n){const r=t.getValue(n);return r!==null&&e.set(r),t.addListener&&t.addListener(n,i=>{e.set(i)}),e.subscribe(i=>{t.setValue(n,i)}),{...e,delete(){t.deleteValue(n)}}}function Fu(){}function am(e=Fu,t=Fu){const n=[];return{callListeners(r,i){i!==void 0&&n.filter(({key:o})=>o===r).forEach(({listener:o})=>o(i))},addListener(r,i){n.push({key:r,listener:i}),n.length===1&&e()},removeListener(r,i){const o=n.indexOf({key:r,listener:i});o!==-1&&n.splice(o,1),n.length===0&&t()}}}function sm(e){try{return typeof window[e]=="object"}catch{return!1}}function lm(){if(typeof indexedDB!="object"||!sm("indexedDB"))return nm("IndexedDB"),cm();const{removeListener:e,callListeners:t,addListener:n}=am(),r=Of("svelte-persist","persist");return{addListener:n,removeListener:e,getValue:i=>(function(o,a=Ds()){return a("readonly",l=>ra(l.get(o)))}(i,r).then(o=>t(i,im(o))),null),setValue(i,o){(function(a,l,u=Ds()){u("readwrite",f=>(f.put(l,a),ra(f.transaction)))})(i,rm(o),r)},deleteValue(i){(function(o,a=Ds()){a("readwrite",l=>(l.delete(o),ra(l.transaction)))})(i,r)}}}var $u;function um(){return{getValue:()=>null,deleteValue(){},setValue(){}}}function cm(){return{...um(),addListener(){},removeListener(){}}}(function(e){e[e.LOCAL=0]="LOCAL",e[e.SESSION=1]="SESSION",e[e.SYNC=2]="SYNC"})($u||($u={}));var Uu,fm=function(e){return Math.round(e/1099511627776)||32},hm=function(e){var t,n=e.length;return n===0?0:(t=e[n-1],32*(n-1)+fm(t))},dm=function(e){var t,n="",r=e.length;for(t=0;t<r;t++)n+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return n.substr(0,hm(e)/4)};Df(dm);var pm=function(e,t,n){return e===32?t:(0|t)+1099511627776*e},mm=function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=pm(t,e[n-1]&2147483648>>t-1)),e},gm=function(e){var t,n,r,i=[];for(r=(e=e.replace(/\s|0x/g,"")).length,n=(e+="00000000").length,t=0;t<n;t+=8)i.push(0^parseInt(e.substr(t,8),16));return mm(i,4*r)};Df(gm);var ze={cipher:{},mode:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e}}};ze.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var t,n,r,i,o,a=this._tables[0][4],l=this._tables[1],u=e.length,f=1;if(u!==4&&u!==6&&u!==8)throw new ze.exception.invalid("invalid aes key size");for(this._key=[i=e.slice(0),o=[]],t=u;t<4*u+28;t++)r=i[t-1],(t%u==0||u===8&&t%u==4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],t%u==0&&(r=r<<8^r>>>24^f<<24,f=f<<1^283*(f>>7))),i[t]=i[t-u]^r;for(n=0;t;n++,t--)r=i[3&n?t:t-4],o[n]=t<=4||n<4?r:l[0][a[r>>>24]]^l[1][a[r>>16&255]]^l[2][a[r>>8&255]]^l[3][a[255&r]]},ze.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,n,r,i,o,a,l,u=this._tables[0],f=this._tables[1],d=u[4],h=f[4],g=[],v=[];for(e=0;e<256;e++)v[(g[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=r||1,n=v[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,d[t]=o,h[o]=t,l=16843009*g[i=g[r=g[t]]]^65537*i^257*r^16843008*t,a=257*g[o]^16843008*o,e=0;e<4;e++)u[e][t]=a=a<<24^a>>>8,f[e][o]=l=l<<24^l>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),f[e]=f[e].slice(0)},_crypt:function(e,t){if(e.length!==4)throw new ze.exception.invalid("invalid aes block size");var n,r,i,o,a=this._key[t],l=e[0]^a[0],u=e[t?3:1]^a[1],f=e[2]^a[2],d=e[t?1:3]^a[3],h=a.length/4-2,g=4,v=[0,0,0,0],x=this._tables[t],S=x[0],D=x[1],C=x[2],F=x[3],O=x[4];for(o=0;o<h;o++)n=S[l>>>24]^D[u>>16&255]^C[f>>8&255]^F[255&d]^a[g],r=S[u>>>24]^D[f>>16&255]^C[d>>8&255]^F[255&l]^a[g+1],i=S[f>>>24]^D[d>>16&255]^C[l>>8&255]^F[255&u]^a[g+2],d=S[d>>>24]^D[l>>16&255]^C[u>>8&255]^F[255&f]^a[g+3],g+=4,l=n,u=r,f=i;for(o=0;o<4;o++)v[t?3&-o:o]=O[l>>>24]<<24^O[u>>16&255]<<16^O[f>>8&255]<<8^O[255&d]^a[g++],n=l,l=u,u=f,f=d,d=n;return v}},ze.bitArray={bitSlice:function(e,t,n){return e=ze.bitArray._shiftRight(e.slice(t/32),32-(31&t)).slice(1),n===void 0?e:ze.bitArray.clamp(e,n-t)},extract:function(e,t,n){var r=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r)&(1<<n)-1},concat:function(e,t){if(e.length===0||t.length===0)return e.concat(t);var n=e[e.length-1],r=ze.bitArray.getPartial(n);return r===32?e.concat(t):ze.bitArray._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t,n=e.length;return n===0?0:(t=e[n-1],32*(n-1)+ze.bitArray.getPartial(t))},clamp:function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=ze.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return e===32?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(ze.bitArray.bitLength(e)!==ze.bitArray.bitLength(t))return!1;var n,r=0;for(n=0;n<e.length;n++)r|=e[n]^t[n];return r===0},_shiftRight:function(e,t,n,r){var i,o,a;for(r===void 0&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(t===0)return r.concat(e);for(i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;return o=e.length?e[e.length-1]:0,a=ze.bitArray.getPartial(o),r.push(ze.bitArray.partial(t+a&31,t+a>32?n:r.pop(),1)),r},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},ze.codec.utf8String={fromBits:function(e){var t,n,r="",i=ze.bitArray.bitLength(e);for(t=0;t<i/8;t++)(3&t)==0&&(n=e[t/4]),r+=String.fromCharCode(n>>>8>>>8>>>8),n<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e.charCodeAt(t),(3&t)==3&&(n.push(r),r=0);return 3&t&&n.push(ze.bitArray.partial(8*(3&t),r)),n}},ze.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var r,i="",o=0,a=ze.codec.base64._chars,l=0,u=ze.bitArray.bitLength(e);for(n&&(a=a.substr(0,62)+"-_"),r=0;6*i.length<u;)i+=a.charAt((l^e[r]>>>o)>>>26),o<6?(l=e[r]<<6-o,o+=26,r++):(l<<=6,o-=6);for(;3&i.length&&!t;)i+="=";return i},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n,r,i=[],o=0,a=ze.codec.base64._chars,l=0;for(t&&(a=a.substr(0,62)+"-_"),n=0;n<e.length;n++){if((r=a.indexOf(e.charAt(n)))<0)throw new ze.exception.invalid("this isn't base64!");o>26?(o-=26,i.push(l^r>>>o),l=r<<32-o):l^=r<<32-(o+=6)}return 56&o&&i.push(ze.bitArray.partial(56&o,l,1)),i}},ze.codec.base64url={fromBits:function(e){return ze.codec.base64.fromBits(e,1,1)},toBits:function(e){return ze.codec.base64.toBits(e,1)}},ze.mode.gcm={name:"gcm",encrypt:function(e,t,n,r,i){var o,a=t.slice(0),l=ze.bitArray;return i=i||128,r=r||[],o=ze.mode.gcm._ctrMode(!0,e,a,r,n,i),l.concat(o.data,o.tag)},decrypt:function(e,t,n,r,i){var o,a,l=t.slice(0),u=ze.bitArray,f=u.bitLength(l);if(r=r||[],(i=i||128)<=f?(a=u.bitSlice(l,f-i),l=u.bitSlice(l,0,f-i)):(a=l,l=[]),o=ze.mode.gcm._ctrMode(!1,e,l,r,n,i),!u.equal(o.tag,a))throw new ze.exception.corrupt("gcm: tag doesn't match");return o.data},_galoisMultiply:function(e,t){var n,r,i,o,a,l=ze.bitArray._xor4;for(i=[0,0,0,0],o=t.slice(0),n=0;n<128;n++){for((e[Math.floor(n/32)]&1<<31-n%32)!=0&&(i=l(i,o)),a=(1&o[3])!=0,r=3;r>0;r--)o[r]=o[r]>>>1|(1&o[r-1])<<31;o[0]=o[0]>>>1,a&&(o[0]=o[0]^225<<24)}return i},_ghash:function(e,t,n){var r,i,o=n.length;for(r=t.slice(0),i=0;i<o;i+=4)r[0]^=4294967295&n[i],r[1]^=4294967295&n[i+1],r[2]^=4294967295&n[i+2],r[3]^=4294967295&n[i+3],r=ze.mode.gcm._galoisMultiply(r,e);return r},_ctrMode:function(e,t,n,r,i,o){var a,l,u,f,d,h,g,v,x,S,D,C,F=ze.bitArray;for(x=n.length,S=F.bitLength(n),D=F.bitLength(r),C=F.bitLength(i),a=t.encrypt([0,0,0,0]),C===96?(l=i.slice(0),l=F.concat(l,[1])):(l=ze.mode.gcm._ghash(a,[0,0,0,0],i),l=ze.mode.gcm._ghash(a,l,[0,0,Math.floor(C/4294967296),4294967295&C])),u=ze.mode.gcm._ghash(a,[0,0,0,0],r),h=l.slice(0),g=u.slice(0),e||(g=ze.mode.gcm._ghash(a,u,n)),d=0;d<x;d+=4)h[3]++,f=t.encrypt(h),n[d]^=f[0],n[d+1]^=f[1],n[d+2]^=f[2],n[d+3]^=f[3];return n=F.clamp(n,S),e&&(g=ze.mode.gcm._ghash(a,u,n)),v=[Math.floor(D/4294967296),4294967295&D,Math.floor(S/4294967296),4294967295&S],g=ze.mode.gcm._ghash(a,g,v),f=t.encrypt(l),g[0]^=f[0],g[1]^=f[1],g[2]^=f[2],g[3]^=f[3],{tag:F.bitSlice(g,0,o),data:n}}},function(e){e[e.EXCEPTION=0]="EXCEPTION",e[e.NO_ENCRYPTION=1]="NO_ENCRYPTION",e[e.NO_STORAGE=2]="NO_STORAGE"}(Uu||(Uu={}));function Ue(e,t){return om(Bl(t),lm(),e)}const pn=Ue("resumeMd","# Go to settings and fetch my resume template from the settings! Also Update your info!"),vo=Bl("<h1>Hi</h1>"),Nn=Ue("jobDescription","Paste your job description here, or paste a link and try to fetch it"),Yn=Ue("jobUrl","https://example.com/"),mn=Ue("navstate","None"),uo=Ue("pagestate","Content"),Pn=Ue("jobName","Change Me"),ar=Ue("resumeKeywords",[]),sr=Ue("jobKeywords",[]),yo=Ue("overlappingKeywords",[]),lr=Ue("combinedScore",0),zl=Ue("createdTime",[]),Fl=Ue("updatedTime",[]),Pr=Ue("keywords",[]),Yr=Ue("saveCount",0),xi=Ue("saveState",0),Bn=Ue("projectId",-1),$l=Ue("availableProjects",[]),Wa=Ue("header",""),ia=Bl(!1),Zr=Ue("resumeTemplate","# Go to settings and fetch my resume template from the settings! Also Update your info!"),ba=Ue("name","John Doe"),xa=Ue("email","example@gmail.com"),_a=Ue("phone","999-999-9999"),ka=Ue("website","example.com"),wa=Ue("linkedin","linkedin.com/in/example"),Ca=Ue("github","github.com/example"),Sa=Ue("address","Moon Street 123"),vm=Ue("cssTheme","/ResuMate/style.css"),Ta=Ue("openRouterKey","your_api_key_here"),Ti=Ue("openRouterAIModel","openai/gpt-4.1"),bo=Ue("knowlegeBase","Fetch some example knowlege to see what it looks like"),Pa=Ue("enableEmail",!0),Ea=Ue("enablePhone",!0),Ra=Ue("enableWebsite",!0),Aa=Ue("enableLinkedin",!1),Ia=Ue("enableGithub",!0),Da=Ue("enableAddress",!0),ym=Ue("enableAddressLink",!0),Oa=Ue("showUSCitizenship",!1),bm=Ue("customHeader",""),xm=Ue("enableCustomHeader",!1),_m=Ue("customCSS",""),km=Ue("enableCustomCSS",!1);function Ul(){let e=[];e.push("# "+Oe(ba));const t=[];if(Oe(Ea)&&t.push("![Phone](https://shlok-bhakta.github.io/ResuMate/icons/phone.svg) "+Oe(_a)),Oe(Pa)){const n=Oe(xa);t.push("![Mail](https://shlok-bhakta.github.io/ResuMate/icons/mail.svg) ["+n+"](mailto:"+n+")")}if(Oe(Da)&&t.push("![Globe](https://shlok-bhakta.github.io/ResuMate/icons/globe.svg) "+Oe(Sa)),Oe(Ra)){const n=Oe(ka);t.push("![Website](https://shlok-bhakta.github.io/ResuMate/icons/internet.svg) ["+n+"](https://"+n+")")}if(Oe(Ia)){const n=Oe(Ca);t.push("![Github](https://shlok-bhakta.github.io/ResuMate/icons/github.svg) ["+n+"](https://"+n+")")}if(Oe(Aa)){const n=Oe(wa);t.push("![Linkedin](https://shlok-bhakta.github.io/ResuMate/icons/linkedin.svg) ["+n+"](https://"+n+")")}Oe(Oa)&&t.push("![Passport](https://shlok-bhakta.github.io/ResuMate/icons/passport.svg) US CITIZEN"),t.length>0&&(e.push(""),e.push("#### "+t.join(" | "))),e.push("",""),Wa.set(e.join(`
`))}function qu(e,t){if(!e||t.length===0)return[];let n=e.toLowerCase();n=n.replace(/<!--[\s\S]*?-->/g,"");const r=[];for(let i=0;i<t.length;i++){const o=t[i],a=o.toLowerCase(),l=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=a.includes(" "),f=/[^\w\s]/.test(a),d=a.includes(".");let h;u||f||d?h=new RegExp(`(?:^|\\s)${l}(?:\\s|$|\\.|,|;|:|\\))`,"i"):h=new RegExp(`\\b${l}\\b`,"i"),h.test(n)&&(r.push(o),n=n.replace(new RegExp(h.source,"gi")," __MATCHED__ "))}return r}function ql(){const e=Oe(Pr),t=Oe(Nn),n=Oe(pn),r=qu(t,e),i=qu(n,e);let o=0;const a=[];if(r.length>0){const l=100/r.length;for(let u=0;u<r.length;u++){const f=r[u];i.find(d=>d.toLowerCase()===f.toLowerCase())&&(a.push(f),o+=l)}}o>99.95&&(o=100),r.sort((l,u)=>l.localeCompare(u)),i.sort((l,u)=>l.localeCompare(u)),Ku(r,a),Ku(i,a),yo.set(a),sr.set(r),ar.set(i),lr.set(o)}function Ku(e,t){for(let n=0;n<e.length;n++){const r=e[n];t.includes(r)&&(e.splice(n,1),e.unshift(r))}}function wm(e){const t=e.getSelection();if(t.end>t.start){const n=e.getLine(t.start),r=e.getLine(t.end),o=e.textarea.value.substring(n.start,r.end).split(`
`),a=o.every(u=>{const f=u.trim();return f===""||f.startsWith("<!--")&&f.endsWith("-->")}),l=o.map(u=>{const f=u.trim();if(f==="")return u;const d=f.startsWith("<!--")&&f.endsWith("-->");return a&&d?u.replace(/^\s*<!--\s*/,"").replace(/\s*-->\s*$/,""):!a&&!d?`<!-- ${u} -->`:u});e.removeAt(n.start,r.end-n.start),e.insertAt(n.start,l.join(`
`))}else{const n=e.getLine(),r=n.value.trim();if(r.startsWith("<!--")&&r.endsWith("-->")){const i=n.value.replace(/^\s*<!--\s*/,"").replace(/\s*-->\s*$/,"");e.removeAt(n.start,n.value.length),e.insertAt(n.start,i)}else r!==""&&(e.removeAt(n.start,n.value.length),e.insertAt(n.start,`<!-- ${n.value} -->`))}e.textarea.setSelectionRange(t.start,t.end)}const Lf={shortcuts:[{id:"commentselection",combination:new Set(["control","/"]),action:e=>wm(e)},{id:"underline",combination:new Set(["control","u"]),action:e=>e.toggleSelectionSurrounding("__")}]};function Hu(e){const t=e.split(`
`);for(let n=0;n<t.length;n++){const r=t[n];if(!r.startsWith("<!--")&&r.includes("||")){let i=r.split("||").slice(0,2);t[n]="| "+i.join(" | ")+` |
|:-|-:|
`}}return t.join(`
`)}var Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oa={exports:{}},Sm=oa.exports,Vu;function Tm(){return Vu||(Vu=1,function(e,t){(function(n,r){e.exports=r()})(Sm,function(){var n=function(s,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])})(s,c)},r=function(){return(r=Object.assign||function(s){for(var c,p=1,m=arguments.length;p<m;p++)for(var y in c=arguments[p])Object.prototype.hasOwnProperty.call(c,y)&&(s[y]=c[y]);return s}).apply(this,arguments)};function i(s,c,p){for(var m,y=0,b=c.length;y<b;y++)!m&&y in c||((m=m||Array.prototype.slice.call(c,0,y))[y]=c[y]);return s.concat(m||Array.prototype.slice.call(c))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Cm,a=Object.keys,l=Array.isArray;function u(s,c){return typeof c!="object"||a(c).forEach(function(p){s[p]=c[p]}),s}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var f=Object.getPrototypeOf,d={}.hasOwnProperty;function h(s,c){return d.call(s,c)}function g(s,c){typeof c=="function"&&(c=c(f(s))),(typeof Reflect>"u"?a:Reflect.ownKeys)(c).forEach(function(p){x(s,p,c[p])})}var v=Object.defineProperty;function x(s,c,p,m){v(s,c,u(p&&h(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},m))}function S(s){return{from:function(c){return s.prototype=Object.create(c.prototype),x(s.prototype,"constructor",s),{extend:g.bind(null,s.prototype)}}}}var D=Object.getOwnPropertyDescriptor,C=[].slice;function F(s,c,p){return C.call(s,c,p)}function O(s,c){return c(s)}function z(s){if(!s)throw new Error("Assertion Failed")}function H(s){o.setImmediate?setImmediate(s):setTimeout(s,0)}function E(s,c){if(typeof c=="string"&&h(s,c))return s[c];if(!c)return s;if(typeof c!="string"){for(var p=[],m=0,y=c.length;m<y;++m){var b=E(s,c[m]);p.push(b)}return p}var _=c.indexOf(".");if(_!==-1){var P=s[c.substr(0,_)];return P==null?void 0:E(P,c.substr(_+1))}}function W(s,c,p){if(s&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof c!="string"&&"length"in c){z(typeof p!="string"&&"length"in p);for(var m=0,y=c.length;m<y;++m)W(s,c[m],p[m])}else{var b,_,P=c.indexOf(".");P!==-1?(b=c.substr(0,P),(_=c.substr(P+1))===""?p===void 0?l(s)&&!isNaN(parseInt(b))?s.splice(b,1):delete s[b]:s[b]=p:W(P=!(P=s[b])||!h(s,b)?s[b]={}:P,_,p)):p===void 0?l(s)&&!isNaN(parseInt(c))?s.splice(c,1):delete s[c]:s[c]=p}}function oe(s){var c,p={};for(c in s)h(s,c)&&(p[c]=s[c]);return p}var ye=[].concat;function j(s){return ye.apply([],s)}var X="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(c){return c+s+"Array"})}))).filter(function(s){return o[s]}),Q=new Set(X.map(function(s){return o[s]})),ee=null;function pe(s){return ee=new WeakMap,s=function c(p){if(!p||typeof p!="object")return p;var m=ee.get(p);if(m)return m;if(l(p)){m=[],ee.set(p,m);for(var y=0,b=p.length;y<b;++y)m.push(c(p[y]))}else if(Q.has(p.constructor))m=p;else{var _,P=f(p);for(_ in m=P===Object.prototype?{}:Object.create(P),ee.set(p,m),p)h(p,_)&&(m[_]=c(p[_]))}return m}(s),ee=null,s}var ie={}.toString;function re(s){return ie.call(s).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof ae=="symbol"?function(s){var c;return s!=null&&(c=s[ae])&&c.apply(s)}:function(){return null};function me(s,c){return c=s.indexOf(c),0<=c&&s.splice(c,1),0<=c}var Ae={};function w(s){var c,p,m,y;if(arguments.length===1){if(l(s))return s.slice();if(this===Ae&&typeof s=="string")return[s];if(y=de(s)){for(p=[];!(m=y.next()).done;)p.push(m.value);return p}if(s==null)return[s];if(typeof(c=s.length)!="number")return[s];for(p=new Array(c);c--;)p[c]=s[c];return p}for(c=arguments.length,p=new Array(c);c--;)p[c]=arguments[c];return p}var Te=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Rn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Sn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Rn),Pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function T(s,c){this.name=s,this.message=c}function Xe(s,c){return s+". Errors: "+Object.keys(c).map(function(p){return c[p].toString()}).filter(function(p,m,y){return y.indexOf(p)===m}).join(`
`)}function Je(s,c,p,m){this.failures=c,this.failedKeys=m,this.successCount=p,this.message=Xe(s,c)}function Ne(s,c){this.name="BulkError",this.failures=Object.keys(c).map(function(p){return c[p]}),this.failuresByPos=c,this.message=Xe(s,this.failures)}S(T).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(Je).from(T),S(Ne).from(T);var rt=Sn.reduce(function(s,c){return s[c]=c+"Error",s},{}),st=T,_e=Sn.reduce(function(s,c){var p=c+"Error";function m(y,b){this.name=p,y?typeof y=="string"?(this.message="".concat(y).concat(b?`
 `+b:""),this.inner=b||null):typeof y=="object"&&(this.message="".concat(y.name," ").concat(y.message),this.inner=y):(this.message=Pe[c]||p,this.inner=null)}return S(m).from(st),s[c]=m,s},{});_e.Syntax=SyntaxError,_e.Type=TypeError,_e.Range=RangeError;var _t=Rn.reduce(function(s,c){return s[c+"Error"]=_e[c],s},{}),Dt=Sn.reduce(function(s,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(s[c+"Error"]=_e[c]),s},{});function Me(){}function yt(s){return s}function on(s,c){return s==null||s===yt?c:function(p){return c(s(p))}}function Ot(s,c){return function(){s.apply(this,arguments),c.apply(this,arguments)}}function vn(s,c){return s===Me?c:function(){var p=s.apply(this,arguments);p!==void 0&&(arguments[0]=p);var m=this.onsuccess,y=this.onerror;this.onsuccess=null,this.onerror=null;var b=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Ot(m,this.onsuccess):m),y&&(this.onerror=this.onerror?Ot(y,this.onerror):y),b!==void 0?b:p}}function Wt(s,c){return s===Me?c:function(){s.apply(this,arguments);var p=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Ot(p,this.onsuccess):p),m&&(this.onerror=this.onerror?Ot(m,this.onerror):m)}}function Nt(s,c){return s===Me?c:function(p){var m=s.apply(this,arguments);u(p,m);var y=this.onsuccess,b=this.onerror;return this.onsuccess=null,this.onerror=null,p=c.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?Ot(y,this.onsuccess):y),b&&(this.onerror=this.onerror?Ot(b,this.onerror):b),m===void 0?p===void 0?void 0:p:u(m,p)}}function yn(s,c){return s===Me?c:function(){return c.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function hr(s,c){return s===Me?c:function(){var p=s.apply(this,arguments);if(p&&typeof p.then=="function"){for(var m=this,y=arguments.length,b=new Array(y);y--;)b[y]=arguments[y];return p.then(function(){return c.apply(m,b)})}return c.apply(this,arguments)}}Dt.ModifyError=Je,Dt.DexieError=T,Dt.BulkError=Ne;var Yt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function dr(s){Yt=s}var En={},Ir=100,X=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,f(s),s];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),s]}(),Rn=X[0],Sn=X[1],X=X[2],Sn=Sn&&Sn.then,fe=Rn&&Rn.constructor,De=!!X,Le=function(s,c){Bt.push([s,c]),Tt&&(queueMicrotask(Mi),Tt=!1)},et=!0,Tt=!0,At=[],Mt=[],bn=yt,Lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Me,pgp:!1,env:{},finalize:Me},ke=Lt,Bt=[],Pt=0,Dr=[];function be(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=ke;if(typeof s!="function"){if(s!==En)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&oi(this,this._value))}this._state=null,this._value=null,++c.ref,function p(m,y){try{y(function(b){if(m._state===null){if(b===m)throw new TypeError("A promise cannot be resolved with itself.");var _=m._lib&&Gn();b&&typeof b.then=="function"?p(m,function(P,A){b instanceof be?b._then(P,A):b.then(P,A)}):(m._state=!0,m._value=b,Oi(m)),_&&Zn()}},oi.bind(null,m))}catch(b){oi(m,b)}}(this,s)}var Or={get:function(){var s=ke,c=jr;function p(m,y){var b=this,_=!s.global&&(s!==ke||c!==jr),P=_&&!An(),A=new be(function(L,B){Lr(b,new ii(Nr(m,s,_,P),Nr(y,s,_,P),L,B,s))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return p.prototype=En,p},set:function(s){x(this,"then",s&&s.prototype===En?Or:{get:function(){return s},set:Or.set})}};function ii(s,c,p,m,y){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof c=="function"?c:null,this.resolve=p,this.reject=m,this.psd=y}function oi(s,c){var p,m;Mt.push(c),s._state===null&&(p=s._lib&&Gn(),c=bn(c),s._state=!1,s._value=c,m=s,At.some(function(y){return y._value===m._value})||At.push(m),Oi(s),p&&Zn())}function Oi(s){var c=s._listeners;s._listeners=[];for(var p=0,m=c.length;p<m;++p)Lr(s,c[p]);var y=s._PSD;--y.ref||y.finalize(),Pt===0&&(++Pt,Le(function(){--Pt==0&&Mr()},[]))}function Lr(s,c){if(s._state!==null){var p=s._state?c.onFulfilled:c.onRejected;if(p===null)return(s._state?c.resolve:c.reject)(s._value);++c.psd.ref,++Pt,Le(Li,[p,s,c])}else s._listeners.push(c)}function Li(s,c,p){try{var m,y=c._value;!c._state&&Mt.length&&(Mt=[]),m=Yt&&c._consoleTask?c._consoleTask.run(function(){return s(y)}):s(y),c._state||Mt.indexOf(y)!==-1||function(b){for(var _=At.length;_;)if(At[--_]._value===b._value)return At.splice(_,1)}(c),p.resolve(m)}catch(b){p.reject(b)}finally{--Pt==0&&Mr(),--p.psd.ref||p.psd.finalize()}}function Mi(){In(Lt,function(){Gn()&&Zn()})}function Gn(){var s=et;return Tt=et=!1,s}function Zn(){var s,c,p;do for(;0<Bt.length;)for(s=Bt,Bt=[],p=s.length,c=0;c<p;++c){var m=s[c];m[0].apply(null,m[1])}while(0<Bt.length);Tt=et=!0}function Mr(){var s=At;At=[],s.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=Dr.slice(0),p=c.length;p;)c[--p]()}function pr(s){return new be(En,!1,s)}function ut(s,c){var p=ke;return function(){var m=Gn(),y=ke;try{return Un(p,!0),s.apply(this,arguments)}catch(b){c&&c(b)}finally{Un(y,!1),m&&Zn()}}}g(be.prototype,{then:Or,_then:function(s,c){Lr(this,new ii(null,null,s,c,ke))},catch:function(s){if(arguments.length===1)return this.then(null,s);var c=s,p=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?p:pr)(m)}):this.then(null,function(m){return(m&&m.name===c?p:pr)(m)})},finally:function(s){return this.then(function(c){return be.resolve(s()).then(function(){return c})},function(c){return be.resolve(s()).then(function(){return pr(c)})})},timeout:function(s,c){var p=this;return s<1/0?new be(function(m,y){var b=setTimeout(function(){return y(new _e.Timeout(c))},s);p.then(m,y).finally(clearTimeout.bind(null,b))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&x(be.prototype,Symbol.toStringTag,"Dexie.Promise"),Lt.env=ai(),g(be,{all:function(){var s=w.apply(null,arguments).map($n);return new be(function(c,p){s.length===0&&c([]);var m=s.length;s.forEach(function(y,b){return be.resolve(y).then(function(_){s[b]=_,--m||c(s)},p)})})},resolve:function(s){return s instanceof be?s:s&&typeof s.then=="function"?new be(function(c,p){s.then(c,p)}):new be(En,!0,s)},reject:pr,race:function(){var s=w.apply(null,arguments).map($n);return new be(function(c,p){s.map(function(m){return be.resolve(m).then(c,p)})})},PSD:{get:function(){return ke},set:function(s){return ke=s}},totalEchoes:{get:function(){return jr}},newPSD:xn,usePSD:In,scheduler:{get:function(){return Le},set:function(s){Le=s}},rejectionMapper:{get:function(){return bn},set:function(s){bn=s}},follow:function(s,c){return new be(function(p,m){return xn(function(y,b){var _=ke;_.unhandleds=[],_.onunhandled=b,_.finalize=Ot(function(){var P,A=this;P=function(){A.unhandleds.length===0?y():b(A.unhandleds[0])},Dr.push(function L(){P(),Dr.splice(Dr.indexOf(L),1)}),++Pt,Le(function(){--Pt==0&&Mr()},[])},_.finalize),s()},c,p,m)})}}),fe&&(fe.allSettled&&x(be,"allSettled",function(){var s=w.apply(null,arguments).map($n);return new be(function(c){s.length===0&&c([]);var p=s.length,m=new Array(p);s.forEach(function(y,b){return be.resolve(y).then(function(_){return m[b]={status:"fulfilled",value:_}},function(_){return m[b]={status:"rejected",reason:_}}).then(function(){return--p||c(m)})})})}),fe.any&&typeof AggregateError<"u"&&x(be,"any",function(){var s=w.apply(null,arguments).map($n);return new be(function(c,p){s.length===0&&p(new AggregateError([]));var m=s.length,y=new Array(m);s.forEach(function(b,_){return be.resolve(b).then(function(P){return c(P)},function(P){y[_]=P,--m||p(new AggregateError(y))})})})}),fe.withResolvers&&(be.withResolvers=fe.withResolvers));var kt={awaits:0,echoes:0,id:0},Eo=0,mr=[],gr=0,jr=0,Ro=0;function xn(s,c,p,m){var y=ke,b=Object.create(y);return b.parent=y,b.ref=0,b.global=!1,b.id=++Ro,Lt.env,b.env=De?{Promise:be,PromiseProp:{value:be,configurable:!0,writable:!0},all:be.all,race:be.race,allSettled:be.allSettled,any:be.any,resolve:be.resolve,reject:be.reject}:{},c&&u(b,c),++y.ref,b.finalize=function(){--this.parent.ref||this.parent.finalize()},m=In(b,s,p,m),b.ref===0&&b.finalize(),m}function Fn(){return kt.id||(kt.id=++Eo),++kt.awaits,kt.echoes+=Ir,kt.id}function An(){return!!kt.awaits&&(--kt.awaits==0&&(kt.id=0),kt.echoes=kt.awaits*Ir,!0)}function $n(s){return kt.echoes&&s&&s.constructor===fe?(Fn(),s.then(function(c){return An(),c},function(c){return An(),gt(c)})):s}function ts(){var s=mr[mr.length-1];mr.pop(),Un(s,!1)}function Un(s,c){var p,m=ke;(c?!kt.echoes||gr++&&s===ke:!gr||--gr&&s===ke)||queueMicrotask(c?function(y){++jr,kt.echoes&&--kt.echoes!=0||(kt.echoes=kt.awaits=kt.id=0),mr.push(ke),Un(y,!0)}.bind(null,s):ts),s!==ke&&(ke=s,m===Lt&&(Lt.env=ai()),De&&(p=Lt.env.Promise,c=s.env,(m.global||s.global)&&(Object.defineProperty(o,"Promise",c.PromiseProp),p.all=c.all,p.race=c.race,p.resolve=c.resolve,p.reject=c.reject,c.allSettled&&(p.allSettled=c.allSettled),c.any&&(p.any=c.any))))}function ai(){var s=o.Promise;return De?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function In(s,c,p,m,y){var b=ke;try{return Un(s,!0),c(p,m,y)}finally{Un(b,!1)}}function Nr(s,c,p,m){return typeof s!="function"?s:function(){var y=ke;p&&Fn(),Un(c,!0);try{return s.apply(this,arguments)}finally{Un(y,!1),m&&queueMicrotask(An)}}}function ji(s){Promise===fe&&kt.echoes===0?gr===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Sn).indexOf("[native code]")===-1&&(Fn=An=Me);var gt=be.reject,_n="ï¿¿",kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",si="String expected.",qn=[],Qn="__dbnames",li="readonly",Ni="readwrite";function Xn(s,c){return s?c?function(){return s.apply(this,arguments)&&c.apply(this,arguments)}:s:c}var Ao={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Br(s){return typeof s!="string"||/\./.test(s)?function(c){return c}:function(c){return c[s]===void 0&&s in c&&delete(c=pe(c))[s],c}}function Bi(){throw _e.Type()}function Ve(s,c){try{var p=Io(s),m=Io(c);if(p!==m)return p==="Array"?1:m==="Array"?-1:p==="binary"?1:m==="binary"?-1:p==="string"?1:m==="string"?-1:p==="Date"?1:m!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return c<s?1:s<c?-1:0;case"binary":return function(y,b){for(var _=y.length,P=b.length,A=_<P?_:P,L=0;L<A;++L)if(y[L]!==b[L])return y[L]<b[L]?-1:1;return _===P?0:_<P?-1:1}(zi(s),zi(c));case"Array":return function(y,b){for(var _=y.length,P=b.length,A=_<P?_:P,L=0;L<A;++L){var B=Ve(y[L],b[L]);if(B!==0)return B}return _===P?0:_<P?-1:1}(s,c)}}catch{}return NaN}function Io(s){var c=typeof s;return c!="object"?c:ArrayBuffer.isView(s)?"binary":(s=re(s),s==="ArrayBuffer"?"binary":s)}function zi(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var ui=(lt.prototype._trans=function(s,c,p){var m=this._tx||ke.trans,y=this.name,b=Yt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function _(L,B,R){if(!R.schema[y])throw new _e.NotFound("Table "+y+" not part of transaction");return c(R.idbtrans,R)}var P=Gn();try{var A=m&&m.db._novip===this.db._novip?m===ke.trans?m._promise(s,_,p):xn(function(){return m._promise(s,_,p)},{trans:m,transless:ke.transless||ke}):function L(B,R,q,I){if(B.idbdb&&(B._state.openComplete||ke.letThrough||B._vip)){var N=B._createTransaction(R,q,B._dbSchema);try{N.create(),B._state.PR1398_maxLoop=3}catch(U){return U.name===rt.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return L(B,R,q,I)})):gt(U)}return N._promise(R,function(U,M){return xn(function(){return ke.trans=N,I(U,M,N)})}).then(function(U){if(R==="readwrite")try{N.idbtrans.commit()}catch{}return R==="readonly"?U:N._completion.then(function(){return U})})}if(B._state.openComplete)return gt(new _e.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return gt(new _e.DatabaseClosed);B.open().catch(Me)}return B._state.dbReadyPromise.then(function(){return L(B,R,q,I)})}(this.db,s,[this.name],_);return b&&(A._consoleTask=b,A=A.catch(function(L){return console.trace(L),gt(L)})),A}finally{P&&Zn()}},lt.prototype.get=function(s,c){var p=this;return s&&s.constructor===Object?this.where(s).first(c):s==null?gt(new _e.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return p.core.get({trans:m,key:s}).then(function(y){return p.hook.reading.fire(y)})}).then(c)},lt.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(l(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var c=a(s);if(c.length===1)return this.where(c[0]).equals(s[c[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&c.every(function(L){return 0<=P.keyPath.indexOf(L)})){for(var A=0;A<c.length;++A)if(c.indexOf(P.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(P,A){return P.keyPath.length-A.keyPath.length})[0];if(p&&this.db._maxKey!==_n){var b=p.keyPath.slice(0,c.length);return this.where(b).equals(b.map(function(A){return s[A]}))}!p&&Yt&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function y(P,A){return Ve(P,A)===0}var _=c.reduce(function(R,A){var L=R[0],B=R[1],R=m[A],q=s[A];return[L||R,L||!R?Xn(B,R&&R.multi?function(I){return I=E(I,A),l(I)&&I.some(function(N){return y(q,N)})}:function(I){return y(q,E(I,A))}):B]},[null,null]),b=_[0],_=_[1];return b?this.where(b.name).equals(s[b.keyPath]).filter(_):p?this.filter(_):this.where(c).equals("")},lt.prototype.filter=function(s){return this.toCollection().and(s)},lt.prototype.count=function(s){return this.toCollection().count(s)},lt.prototype.offset=function(s){return this.toCollection().offset(s)},lt.prototype.limit=function(s){return this.toCollection().limit(s)},lt.prototype.each=function(s){return this.toCollection().each(s)},lt.prototype.toArray=function(s){return this.toCollection().toArray(s)},lt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},lt.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,l(s)?"[".concat(s.join("+"),"]"):s))},lt.prototype.reverse=function(){return this.toCollection().reverse()},lt.prototype.mapToClass=function(s){var c,p=this.db,m=this.name;function y(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof Bi&&(function(A,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function B(){this.constructor=A}n(A,L),A.prototype=L===null?Object.create(L):(B.prototype=L.prototype,new B)}(y,c=s),Object.defineProperty(y.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),y.prototype.table=function(){return m},s=y);for(var b=new Set,_=s.prototype;_;_=f(_))Object.getOwnPropertyNames(_).forEach(function(A){return b.add(A)});function P(A){if(!A)return A;var L,B=Object.create(s.prototype);for(L in A)if(!b.has(L))try{B[L]=A[L]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),s},lt.prototype.defineClass=function(){return this.mapToClass(function(s){u(this,s)})},lt.prototype.add=function(s,c){var p=this,m=this.schema.primKey,y=m.auto,b=m.keyPath,_=s;return b&&y&&(_=Br(b)(s)),this._trans("readwrite",function(P){return p.core.mutate({trans:P,type:"add",keys:c!=null?[c]:null,values:[_]})}).then(function(P){return P.numFailures?be.reject(P.failures[0]):P.lastResult}).then(function(P){if(b)try{W(s,b,P)}catch{}return P})},lt.prototype.update=function(s,c){return typeof s!="object"||l(s)?this.where(":id").equals(s).modify(c):(s=E(s,this.schema.primKey.keyPath),s===void 0?gt(new _e.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(c))},lt.prototype.put=function(s,c){var p=this,m=this.schema.primKey,y=m.auto,b=m.keyPath,_=s;return b&&y&&(_=Br(b)(s)),this._trans("readwrite",function(P){return p.core.mutate({trans:P,type:"put",values:[_],keys:c!=null?[c]:null})}).then(function(P){return P.numFailures?be.reject(P.failures[0]):P.lastResult}).then(function(P){if(b)try{W(s,b,P)}catch{}return P})},lt.prototype.delete=function(s){var c=this;return this._trans("readwrite",function(p){return c.core.mutate({trans:p,type:"delete",keys:[s]})}).then(function(p){return p.numFailures?be.reject(p.failures[0]):void 0})},lt.prototype.clear=function(){var s=this;return this._trans("readwrite",function(c){return s.core.mutate({trans:c,type:"deleteRange",range:Ao})}).then(function(c){return c.numFailures?be.reject(c.failures[0]):void 0})},lt.prototype.bulkGet=function(s){var c=this;return this._trans("readonly",function(p){return c.core.getMany({keys:s,trans:p}).then(function(m){return m.map(function(y){return c.hook.reading.fire(y)})})})},lt.prototype.bulkAdd=function(s,c,p){var m=this,y=Array.isArray(c)?c:void 0,b=(p=p||(y?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(_){var L=m.schema.primKey,P=L.auto,L=L.keyPath;if(L&&y)throw new _e.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(y&&y.length!==s.length)throw new _e.InvalidArgument("Arguments objects and keys must have the same length");var A=s.length,L=L&&P?s.map(Br(L)):s;return m.core.mutate({trans:_,type:"add",keys:y,values:L,wantResults:b}).then(function(N){var R=N.numFailures,q=N.results,I=N.lastResult,N=N.failures;if(R===0)return b?q:I;throw new Ne("".concat(m.name,".bulkAdd(): ").concat(R," of ").concat(A," operations failed"),N)})})},lt.prototype.bulkPut=function(s,c,p){var m=this,y=Array.isArray(c)?c:void 0,b=(p=p||(y?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(_){var L=m.schema.primKey,P=L.auto,L=L.keyPath;if(L&&y)throw new _e.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(y&&y.length!==s.length)throw new _e.InvalidArgument("Arguments objects and keys must have the same length");var A=s.length,L=L&&P?s.map(Br(L)):s;return m.core.mutate({trans:_,type:"put",keys:y,values:L,wantResults:b}).then(function(N){var R=N.numFailures,q=N.results,I=N.lastResult,N=N.failures;if(R===0)return b?q:I;throw new Ne("".concat(m.name,".bulkPut(): ").concat(R," of ").concat(A," operations failed"),N)})})},lt.prototype.bulkUpdate=function(s){var c=this,p=this.core,m=s.map(function(_){return _.key}),y=s.map(function(_){return _.changes}),b=[];return this._trans("readwrite",function(_){return p.getMany({trans:_,keys:m,cache:"clone"}).then(function(P){var A=[],L=[];s.forEach(function(R,q){var I=R.key,N=R.changes,U=P[q];if(U){for(var M=0,V=Object.keys(N);M<V.length;M++){var J=V[M],Z=N[J];if(J===c.schema.primKey.keyPath){if(Ve(Z,I)!==0)throw new _e.Constraint("Cannot update primary key in bulkUpdate()")}else W(U,J,Z)}b.push(q),A.push(I),L.push(U)}});var B=A.length;return p.mutate({trans:_,type:"put",keys:A,values:L,updates:{keys:m,changeSpecs:y}}).then(function(R){var q=R.numFailures,I=R.failures;if(q===0)return B;for(var N=0,U=Object.keys(I);N<U.length;N++){var M,V=U[N],J=b[Number(V)];J!=null&&(M=I[V],delete I[V],I[J]=M)}throw new Ne("".concat(c.name,".bulkUpdate(): ").concat(q," of ").concat(B," operations failed"),I)})})})},lt.prototype.bulkDelete=function(s){var c=this,p=s.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:s})}).then(function(_){var y=_.numFailures,b=_.lastResult,_=_.failures;if(y===0)return b;throw new Ne("".concat(c.name,".bulkDelete(): ").concat(y," of ").concat(p," operations failed"),_)})},lt);function lt(){}function vr(s){function c(_,P){if(P){for(var A=arguments.length,L=new Array(A-1);--A;)L[A-1]=arguments[A];return p[_].subscribe.apply(null,L),s}if(typeof _=="string")return p[_]}var p={};c.addEventType=b;for(var m=1,y=arguments.length;m<y;++m)b(arguments[m]);return c;function b(_,P,A){if(typeof _!="object"){var L;P=P||yn;var B={subscribers:[],fire:A=A||Me,subscribe:function(R){B.subscribers.indexOf(R)===-1&&(B.subscribers.push(R),B.fire=P(B.fire,R))},unsubscribe:function(R){B.subscribers=B.subscribers.filter(function(q){return q!==R}),B.fire=B.subscribers.reduce(P,A)}};return p[_]=c[_]=B}a(L=_).forEach(function(R){var q=L[R];if(l(q))b(R,L[R][0],L[R][1]);else{if(q!=="asap")throw new _e.InvalidArgument("Invalid event config");var I=b(R,yt,function(){for(var N=arguments.length,U=new Array(N);N--;)U[N]=arguments[N];I.subscribers.forEach(function(M){H(function(){M.apply(null,U)})})})}})}}function yr(s,c){return S(c).from({prototype:s}),c}function er(s,c){return!(s.filter||s.algorithm||s.or)&&(c?s.justLimit:!s.replayFilter)}function ci(s,c){s.filter=Xn(s.filter,c)}function Fi(s,c,p){var m=s.replayFilter;s.replayFilter=m?function(){return Xn(m(),c())}:c,s.justLimit=p&&!m}function fi(s,c){if(s.isPrimKey)return c.primaryKey;var p=c.getIndexByKeyPath(s.index);if(!p)throw new _e.Schema("KeyPath "+s.index+" on object store "+c.name+" is not indexed");return p}function $i(s,c,p){var m=fi(s,c.schema);return c.openCursor({trans:p,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:m,range:s.range}})}function zr(s,c,p,m){var y=s.replayFilter?Xn(s.filter,s.replayFilter()):s.filter;if(s.or){var b={},_=function(P,A,L){var B,R;y&&!y(A,L,function(q){return A.stop(q)},function(q){return A.fail(q)})||((R=""+(B=A.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(B)),h(b,R)||(b[R]=!0,c(P,A,L)))};return Promise.all([s.or._iterate(_,p),Do($i(s,m,p),s.algorithm,_,!s.keysOnly&&s.valueMapper)])}return Do($i(s,m,p),Xn(s.algorithm,y),c,!s.keysOnly&&s.valueMapper)}function Do(s,c,p,m){var y=ut(m?function(b,_,P){return p(m(b),_,P)}:p);return s.then(function(b){if(b)return b.start(function(){var _=function(){return b.continue()};c&&!c(b,function(P){return _=P},function(P){b.stop(P),_=Me},function(P){b.fail(P),_=Me})||y(b.value,b,function(P){return _=P}),_()})})}var Fr=(Ui.prototype.execute=function(s){var c=this["@@propmod"];if(c.add!==void 0){var p=c.add;if(l(p))return i(i([],l(s)?s:[],!0),p).sort();if(typeof p=="number")return(Number(s)||0)+p;if(typeof p=="bigint")try{return BigInt(s)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(c.remove!==void 0){var m=c.remove;if(l(m))return l(s)?s.filter(function(y){return!m.includes(y)}).sort():[];if(typeof m=="number")return Number(s)-m;if(typeof m=="bigint")try{return BigInt(s)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}return p=(p=c.replacePrefix)===null||p===void 0?void 0:p[0],p&&typeof s=="string"&&s.startsWith(p)?c.replacePrefix[1]+s.substring(p.length):s},Ui);function Ui(s){this["@@propmod"]=s}var ns=(tt.prototype._read=function(s,c){var p=this._ctx;return p.error?p.table._trans(null,gt.bind(null,p.error)):p.table._trans("readonly",s).then(c)},tt.prototype._write=function(s){var c=this._ctx;return c.error?c.table._trans(null,gt.bind(null,c.error)):c.table._trans("readwrite",s,"locked")},tt.prototype._addAlgorithm=function(s){var c=this._ctx;c.algorithm=Xn(c.algorithm,s)},tt.prototype._iterate=function(s,c){return zr(this._ctx,s,c,this._ctx.table.core)},tt.prototype.clone=function(s){var c=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return s&&u(p,s),c._ctx=p,c},tt.prototype.raw=function(){return this._ctx.valueMapper=null,this},tt.prototype.each=function(s){var c=this._ctx;return this._read(function(p){return zr(c,s,p,c.table.core)})},tt.prototype.count=function(s){var c=this;return this._read(function(p){var m=c._ctx,y=m.table.core;if(er(m,!0))return y.count({trans:p,query:{index:fi(m,y.schema),range:m.range}}).then(function(_){return Math.min(_,m.limit)});var b=0;return zr(m,function(){return++b,!1},p,y).then(function(){return b})}).then(s)},tt.prototype.sortBy=function(s,c){var p=s.split(".").reverse(),m=p[0],y=p.length-1;function b(A,L){return L?b(A[p[L]],L-1):A[m]}var _=this._ctx.dir==="next"?1:-1;function P(A,L){return Ve(b(A,y),b(L,y))*_}return this.toArray(function(A){return A.sort(P)}).then(c)},tt.prototype.toArray=function(s){var c=this;return this._read(function(p){var m=c._ctx;if(m.dir==="next"&&er(m,!0)&&0<m.limit){var y=m.valueMapper,b=fi(m,m.table.core.schema);return m.table.core.query({trans:p,limit:m.limit,values:!0,query:{index:b,range:m.range}}).then(function(P){return P=P.result,y?P.map(y):P})}var _=[];return zr(m,function(P){return _.push(P)},p,m.table.core).then(function(){return _})},s)},tt.prototype.offset=function(s){var c=this._ctx;return s<=0||(c.offset+=s,er(c)?Fi(c,function(){var p=s;return function(m,y){return p===0||(p===1?--p:y(function(){m.advance(p),p=0}),!1)}}):Fi(c,function(){var p=s;return function(){return--p<0}})),this},tt.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Fi(this._ctx,function(){var c=s;return function(p,m,y){return--c<=0&&m(y),0<=c}},!0),this},tt.prototype.until=function(s,c){return ci(this._ctx,function(p,m,y){return!s(p.value)||(m(y),c)}),this},tt.prototype.first=function(s){return this.limit(1).toArray(function(c){return c[0]}).then(s)},tt.prototype.last=function(s){return this.reverse().first(s)},tt.prototype.filter=function(s){var c;return ci(this._ctx,function(p){return s(p.value)}),(c=this._ctx).isMatch=Xn(c.isMatch,s),this},tt.prototype.and=function(s){return this.filter(s)},tt.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},tt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tt.prototype.desc=function(){return this.reverse()},tt.prototype.eachKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,m){s(m.key,m)})},tt.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},tt.prototype.eachPrimaryKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,m){s(m.primaryKey,m)})},tt.prototype.keys=function(s){var c=this._ctx;c.keysOnly=!c.isMatch;var p=[];return this.each(function(m,y){p.push(y.key)}).then(function(){return p}).then(s)},tt.prototype.primaryKeys=function(s){var c=this._ctx;if(c.dir==="next"&&er(c,!0)&&0<c.limit)return this._read(function(m){var y=fi(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:y,range:c.range}})}).then(function(m){return m.result}).then(s);c.keysOnly=!c.isMatch;var p=[];return this.each(function(m,y){p.push(y.primaryKey)}).then(function(){return p}).then(s)},tt.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},tt.prototype.firstKey=function(s){return this.limit(1).keys(function(c){return c[0]}).then(s)},tt.prototype.lastKey=function(s){return this.reverse().firstKey(s)},tt.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var c={};return ci(this._ctx,function(y){var m=y.primaryKey.toString(),y=h(c,m);return c[m]=!0,!y}),this},tt.prototype.modify=function(s){var c=this,p=this._ctx;return this._write(function(m){var y,b,_;_=typeof s=="function"?s:(y=a(s),b=y.length,function(M){for(var V=!1,J=0;J<b;++J){var Z=y[J],te=s[Z],le=E(M,Z);te instanceof Fr?(W(M,Z,te.execute(le)),V=!0):le!==te&&(W(M,Z,te),V=!0)}return V});var P=p.table.core,R=P.schema.primaryKey,A=R.outbound,L=R.extractKey,B=200,R=c.db._options.modifyChunkSize;R&&(B=typeof R=="object"?R[P.name]||R["*"]||200:R);function q(M,Z){var J=Z.failures,Z=Z.numFailures;N+=M-Z;for(var te=0,le=a(J);te<le.length;te++){var ve=le[te];I.push(J[ve])}}var I=[],N=0,U=[];return c.clone().primaryKeys().then(function(M){function V(Z){var te=Math.min(B,M.length-Z);return P.getMany({trans:m,keys:M.slice(Z,Z+te),cache:"immutable"}).then(function(le){for(var ve=[],ue=[],he=A?[]:null,xe=[],ge=0;ge<te;++ge){var Ce=le[ge],Be={value:pe(Ce),primKey:M[Z+ge]};_.call(Be,Be.value,Be)!==!1&&(Be.value==null?xe.push(M[Z+ge]):A||Ve(L(Ce),L(Be.value))===0?(ue.push(Be.value),A&&he.push(M[Z+ge])):(xe.push(M[Z+ge]),ve.push(Be.value)))}return Promise.resolve(0<ve.length&&P.mutate({trans:m,type:"add",values:ve}).then(function(We){for(var Ye in We.failures)xe.splice(parseInt(Ye),1);q(ve.length,We)})).then(function(){return(0<ue.length||J&&typeof s=="object")&&P.mutate({trans:m,type:"put",keys:he,values:ue,criteria:J,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<Z}).then(function(We){return q(ue.length,We)})}).then(function(){return(0<xe.length||J&&s===qi)&&P.mutate({trans:m,type:"delete",keys:xe,criteria:J,isAdditionalChunk:0<Z}).then(function(We){return q(xe.length,We)})}).then(function(){return M.length>Z+te&&V(Z+B)})})}var J=er(p)&&p.limit===1/0&&(typeof s!="function"||s===qi)&&{index:p.index,range:p.range};return V(0).then(function(){if(0<I.length)throw new Je("Error modifying one or more objects",I,N,U);return M.length})})})},tt.prototype.delete=function(){var s=this._ctx,c=s.range;return er(s)&&(s.isPrimKey||c.type===3)?this._write(function(p){var m=s.table.core.schema.primaryKey,y=c;return s.table.core.count({trans:p,query:{index:m,range:y}}).then(function(b){return s.table.core.mutate({trans:p,type:"deleteRange",range:y}).then(function(_){var P=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new Je("Could not delete some values",Object.keys(P).map(function(A){return P[A]}),b-_);return b-_})})}):this.modify(qi)},tt);function tt(){}var qi=function(s,c){return c.value=null};function Oo(s,c){return s<c?-1:s===c?0:1}function Lo(s,c){return c<s?-1:s===c?0:1}function jt(s,c,p){return s=s instanceof Hi?new s.Collection(s):s,s._ctx.error=new(p||TypeError)(c),s}function br(s){return new s.Collection(s,function(){return Ki("")}).limit(0)}function hi(s,c,p,m){var y,b,_,P,A,L,B,R=p.length;if(!p.every(function(N){return typeof N=="string"}))return jt(s,si);function q(N){y=N==="next"?function(M){return M.toUpperCase()}:function(M){return M.toLowerCase()},b=N==="next"?function(M){return M.toLowerCase()}:function(M){return M.toUpperCase()},_=N==="next"?Oo:Lo;var U=p.map(function(M){return{lower:b(M),upper:y(M)}}).sort(function(M,V){return _(M.lower,V.lower)});P=U.map(function(M){return M.upper}),A=U.map(function(M){return M.lower}),B=(L=N)==="next"?"":m}q("next"),s=new s.Collection(s,function(){return Dn(P[0],A[R-1]+m)}),s._ondirectionchange=function(N){q(N)};var I=0;return s._addAlgorithm(function(N,U,M){var V=N.key;if(typeof V!="string")return!1;var J=b(V);if(c(J,A,I))return!0;for(var Z=null,te=I;te<R;++te){var le=function(ve,ue,he,xe,ge,Ce){for(var Be=Math.min(ve.length,xe.length),We=-1,Ye=0;Ye<Be;++Ye){var sn=ue[Ye];if(sn!==xe[Ye])return ge(ve[Ye],he[Ye])<0?ve.substr(0,Ye)+he[Ye]+he.substr(Ye+1):ge(ve[Ye],xe[Ye])<0?ve.substr(0,Ye)+xe[Ye]+he.substr(Ye+1):0<=We?ve.substr(0,We)+ue[We]+he.substr(We+1):null;ge(ve[Ye],sn)<0&&(We=Ye)}return Be<xe.length&&Ce==="next"?ve+he.substr(ve.length):Be<ve.length&&Ce==="prev"?ve.substr(0,he.length):We<0?null:ve.substr(0,We)+xe[We]+he.substr(We+1)}(V,J,P[te],A[te],_,L);le===null&&Z===null?I=te+1:(Z===null||0<_(Z,le))&&(Z=le)}return U(Z!==null?function(){N.continue(Z+B)}:M),!1}),s}function Dn(s,c,p,m){return{type:2,lower:s,upper:c,lowerOpen:p,upperOpen:m}}function Ki(s){return{type:1,lower:s,upper:s}}var Hi=(Object.defineProperty(K.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),K.prototype.between=function(s,c,p,m){p=p!==!1,m=m===!0;try{return 0<this._cmp(s,c)||this._cmp(s,c)===0&&(p||m)&&(!p||!m)?br(this):new this.Collection(this,function(){return Dn(s,c,!p,!m)})}catch{return jt(this,kn)}},K.prototype.equals=function(s){return s==null?jt(this,kn):new this.Collection(this,function(){return Ki(s)})},K.prototype.above=function(s){return s==null?jt(this,kn):new this.Collection(this,function(){return Dn(s,void 0,!0)})},K.prototype.aboveOrEqual=function(s){return s==null?jt(this,kn):new this.Collection(this,function(){return Dn(s,void 0,!1)})},K.prototype.below=function(s){return s==null?jt(this,kn):new this.Collection(this,function(){return Dn(void 0,s,!1,!0)})},K.prototype.belowOrEqual=function(s){return s==null?jt(this,kn):new this.Collection(this,function(){return Dn(void 0,s)})},K.prototype.startsWith=function(s){return typeof s!="string"?jt(this,si):this.between(s,s+_n,!0,!0)},K.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):hi(this,function(c,p){return c.indexOf(p[0])===0},[s],_n)},K.prototype.equalsIgnoreCase=function(s){return hi(this,function(c,p){return c===p[0]},[s],"")},K.prototype.anyOfIgnoreCase=function(){var s=w.apply(Ae,arguments);return s.length===0?br(this):hi(this,function(c,p){return p.indexOf(c)!==-1},s,"")},K.prototype.startsWithAnyOfIgnoreCase=function(){var s=w.apply(Ae,arguments);return s.length===0?br(this):hi(this,function(c,p){return p.some(function(m){return c.indexOf(m)===0})},s,_n)},K.prototype.anyOf=function(){var s=this,c=w.apply(Ae,arguments),p=this._cmp;try{c.sort(p)}catch{return jt(this,kn)}if(c.length===0)return br(this);var m=new this.Collection(this,function(){return Dn(c[0],c[c.length-1])});m._ondirectionchange=function(b){p=b==="next"?s._ascending:s._descending,c.sort(p)};var y=0;return m._addAlgorithm(function(b,_,P){for(var A=b.key;0<p(A,c[y]);)if(++y===c.length)return _(P),!1;return p(A,c[y])===0||(_(function(){b.continue(c[y])}),!1)}),m},K.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},K.prototype.noneOf=function(){var s=w.apply(Ae,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return jt(this,kn)}var c=s.reduce(function(p,m){return p?p.concat([[p[p.length-1][1],m]]):[[-1/0,m]]},null);return c.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},K.prototype.inAnyRange=function(V,c){var p=this,m=this._cmp,y=this._ascending,b=this._descending,_=this._min,P=this._max;if(V.length===0)return br(this);if(!V.every(function(J){return J[0]!==void 0&&J[1]!==void 0&&y(J[0],J[1])<=0}))return jt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",_e.InvalidArgument);var A=!c||c.includeLowers!==!1,L=c&&c.includeUppers===!0,B,R=y;function q(J,Z){return R(J[0],Z[0])}try{(B=V.reduce(function(J,Z){for(var te=0,le=J.length;te<le;++te){var ve=J[te];if(m(Z[0],ve[1])<0&&0<m(Z[1],ve[0])){ve[0]=_(ve[0],Z[0]),ve[1]=P(ve[1],Z[1]);break}}return te===le&&J.push(Z),J},[])).sort(q)}catch{return jt(this,kn)}var I=0,N=L?function(J){return 0<y(J,B[I][1])}:function(J){return 0<=y(J,B[I][1])},U=A?function(J){return 0<b(J,B[I][0])}:function(J){return 0<=b(J,B[I][0])},M=N,V=new this.Collection(this,function(){return Dn(B[0][0],B[B.length-1][1],!A,!L)});return V._ondirectionchange=function(J){R=J==="next"?(M=N,y):(M=U,b),B.sort(q)},V._addAlgorithm(function(J,Z,te){for(var le,ve=J.key;M(ve);)if(++I===B.length)return Z(te),!1;return!N(le=ve)&&!U(le)||(p._cmp(ve,B[I][1])===0||p._cmp(ve,B[I][0])===0||Z(function(){R===y?J.continue(B[I][0]):J.continue(B[I][1])}),!1)}),V},K.prototype.startsWithAnyOf=function(){var s=w.apply(Ae,arguments);return s.every(function(c){return typeof c=="string"})?s.length===0?br(this):this.inAnyRange(s.map(function(c){return[c,c+_n]})):jt(this,"startsWithAnyOf() only works with strings")},K);function K(){}function we(s){return ut(function(c){return Ke(c),s(c.target.error),!1})}function Ke(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var He="storagemutated",ct="x-storagemutated-1",Ze=vr(null,He),bt=(vt.prototype._lock=function(){return z(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},vt.prototype._unlock=function(){if(z(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{In(s[1],s[0])}catch{}}return this},vt.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},vt.prototype.create=function(s){var c=this;if(!this.mode)return this;var p=this.db.idbdb,m=this.db._state.dbOpenError;if(z(!this.idbtrans),!s&&!p)switch(m&&m.name){case"DatabaseClosedError":throw new _e.DatabaseClosed(m);case"MissingAPIError":throw new _e.MissingAPI(m.message,m);default:throw new _e.OpenFailed(m)}if(!this.active)throw new _e.TransactionInactive;return z(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(y){Ke(y),c._reject(s.error)}),s.onabort=ut(function(y){Ke(y),c.active&&c._reject(new _e.Abort(s.error)),c.active=!1,c.on("abort").fire(y)}),s.oncomplete=ut(function(){c.active=!1,c._resolve(),"mutatedParts"in s&&Ze.storagemutated.fire(s.mutatedParts)}),this},vt.prototype._promise=function(s,c,p){var m=this;if(s==="readwrite"&&this.mode!=="readwrite")return gt(new _e.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new _e.TransactionInactive);if(this._locked())return new be(function(b,_){m._blockedFuncs.push([function(){m._promise(s,c,p).then(b,_)},ke])});if(p)return xn(function(){var b=new be(function(_,P){m._lock();var A=c(_,P,m);A&&A.then&&A.then(_,P)});return b.finally(function(){return m._unlock()}),b._lib=!0,b});var y=new be(function(b,_){var P=c(b,_,m);P&&P.then&&P.then(b,_)});return y._lib=!0,y},vt.prototype._root=function(){return this.parent?this.parent._root():this},vt.prototype.waitFor=function(s){var c,p=this._root(),m=be.resolve(s);p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return m}):(p._waitingFor=m,p._waitingQueue=[],c=p.idbtrans.objectStore(p.storeNames[0]),function b(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(c.get(-1/0).onsuccess=b)}());var y=p._waitingFor;return new be(function(b,_){m.then(function(P){return p._waitingQueue.push(ut(b.bind(null,P)))},function(P){return p._waitingQueue.push(ut(_.bind(null,P)))}).finally(function(){p._waitingFor===y&&(p._waitingFor=null)})})},vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new _e.Abort))},vt.prototype.table=function(s){var c=this._memoizedTables||(this._memoizedTables={});if(h(c,s))return c[s];var p=this.schema[s];if(!p)throw new _e.NotFound("Table "+s+" not part of transaction");return p=new this.db.Table(s,p,this),p.core=this.db.core.table(s),c[s]=p},vt);function vt(){}function an(s,c,p,m,y,b,_){return{name:s,keyPath:c,unique:p,multi:m,auto:y,compound:b,src:(p&&!_?"&":"")+(m?"*":"")+(y?"++":"")+Kn(c)}}function Kn(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Xt(s,c,p){return{name:s,primKey:c,indexes:p,mappedClass:null,idxByName:(m=function(y){return[y.name,y]},p.reduce(function(y,b,_){return _=m(b,_),_&&(y[_[0]]=_[1]),y},{}))};var m}var wn=function(s){try{return s.only([[]]),wn=function(){return[[]]},[[]]}catch{return wn=function(){return _n},_n}};function tr(s){return s==null?function(){}:typeof s=="string"?(c=s).split(".").length===1?function(p){return p[c]}:function(p){return E(p,c)}:function(p){return E(p,s)};var c}function di(s){return[].slice.call(s)}var xr=0;function Cn(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function pi(s,c,A){function m(M){if(M.type===3)return null;if(M.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var I=M.lower,N=M.upper,U=M.lowerOpen,M=M.upperOpen;return I===void 0?N===void 0?null:c.upperBound(N,!!M):N===void 0?c.lowerBound(I,!!U):c.bound(I,N,!!U,!!M)}function y(q){var I,N=q.name;return{name:N,schema:q,mutate:function(U){var M=U.trans,V=U.type,J=U.keys,Z=U.values,te=U.range;return new Promise(function(le,ve){le=ut(le);var ue=M.objectStore(N),he=ue.keyPath==null,xe=V==="put"||V==="add";if(!xe&&V!=="delete"&&V!=="deleteRange")throw new Error("Invalid operation type: "+V);var ge,Ce=(J||Z||{length:1}).length;if(J&&Z&&J.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(Ce===0)return le({numFailures:0,failures:{},results:[],lastResult:void 0});function Be(Jt){++sn,Ke(Jt)}var We=[],Ye=[],sn=0;if(V==="deleteRange"){if(te.type===4)return le({numFailures:sn,failures:Ye,results:[],lastResult:void 0});te.type===3?We.push(ge=ue.clear()):We.push(ge=ue.delete(m(te)))}else{var he=xe?he?[Z,J]:[Z,null]:[J,null],je=he[0],Ft=he[1];if(xe)for(var $t=0;$t<Ce;++$t)We.push(ge=Ft&&Ft[$t]!==void 0?ue[V](je[$t],Ft[$t]):ue[V](je[$t])),ge.onerror=Be;else for($t=0;$t<Ce;++$t)We.push(ge=ue[V](je[$t])),ge.onerror=Be}function Ho(Jt){Jt=Jt.target.result,We.forEach(function(Kr,_s){return Kr.error!=null&&(Ye[_s]=Kr.error)}),le({numFailures:sn,failures:Ye,results:V==="delete"?J:We.map(function(Kr){return Kr.result}),lastResult:Jt})}ge.onerror=function(Jt){Be(Jt),Ho(Jt)},ge.onsuccess=Ho})},getMany:function(U){var M=U.trans,V=U.keys;return new Promise(function(J,Z){J=ut(J);for(var te,le=M.objectStore(N),ve=V.length,ue=new Array(ve),he=0,xe=0,ge=function(We){We=We.target,ue[We._pos]=We.result,++xe===he&&J(ue)},Ce=we(Z),Be=0;Be<ve;++Be)V[Be]!=null&&((te=le.get(V[Be]))._pos=Be,te.onsuccess=ge,te.onerror=Ce,++he);he===0&&J(ue)})},get:function(U){var M=U.trans,V=U.key;return new Promise(function(J,Z){J=ut(J);var te=M.objectStore(N).get(V);te.onsuccess=function(le){return J(le.target.result)},te.onerror=we(Z)})},query:(I=L,function(U){return new Promise(function(M,V){M=ut(M);var J,Z,te,he=U.trans,le=U.values,ve=U.limit,ge=U.query,ue=ve===1/0?void 0:ve,xe=ge.index,ge=ge.range,he=he.objectStore(N),xe=xe.isPrimaryKey?he:he.index(xe.name),ge=m(ge);if(ve===0)return M({result:[]});I?((ue=le?xe.getAll(ge,ue):xe.getAllKeys(ge,ue)).onsuccess=function(Ce){return M({result:Ce.target.result})},ue.onerror=we(V)):(J=0,Z=!le&&"openKeyCursor"in xe?xe.openKeyCursor(ge):xe.openCursor(ge),te=[],Z.onsuccess=function(Ce){var Be=Z.result;return Be?(te.push(le?Be.value:Be.primaryKey),++J===ve?M({result:te}):void Be.continue()):M({result:te})},Z.onerror=we(V))})}),openCursor:function(U){var M=U.trans,V=U.values,J=U.query,Z=U.reverse,te=U.unique;return new Promise(function(le,ve){le=ut(le);var xe=J.index,ue=J.range,he=M.objectStore(N),he=xe.isPrimaryKey?he:he.index(xe.name),xe=Z?te?"prevunique":"prev":te?"nextunique":"next",ge=!V&&"openKeyCursor"in he?he.openKeyCursor(m(ue),xe):he.openCursor(m(ue),xe);ge.onerror=we(ve),ge.onsuccess=ut(function(Ce){var Be,We,Ye,sn,je=ge.result;je?(je.___id=++xr,je.done=!1,Be=je.continue.bind(je),We=(We=je.continuePrimaryKey)&&We.bind(je),Ye=je.advance.bind(je),sn=function(){throw new Error("Cursor not stopped")},je.trans=M,je.stop=je.continue=je.continuePrimaryKey=je.advance=function(){throw new Error("Cursor not started")},je.fail=ut(ve),je.next=function(){var Ft=this,$t=1;return this.start(function(){return $t--?Ft.continue():Ft.stop()}).then(function(){return Ft})},je.start=function(Ft){function $t(){if(ge.result)try{Ft()}catch(Jt){je.fail(Jt)}else je.done=!0,je.start=function(){throw new Error("Cursor behind last entry")},je.stop()}var Ho=new Promise(function(Jt,Kr){Jt=ut(Jt),ge.onerror=we(Kr),je.fail=Kr,je.stop=function(_s){je.stop=je.continue=je.continuePrimaryKey=je.advance=sn,Jt(_s)}});return ge.onsuccess=ut(function(Jt){ge.onsuccess=$t,$t()}),je.continue=Be,je.continuePrimaryKey=We,je.advance=Ye,$t(),Ho},le(je)):le(null)},ve)})},count:function(U){var M=U.query,V=U.trans,J=M.index,Z=M.range;return new Promise(function(te,le){var ve=V.objectStore(N),ue=J.isPrimaryKey?ve:ve.index(J.name),ve=m(Z),ue=ve?ue.count(ve):ue.count();ue.onsuccess=ut(function(he){return te(he.target.result)}),ue.onerror=we(le)})}}}var b,_,P,B=(_=A,P=di((b=s).objectStoreNames),{schema:{name:b.name,tables:P.map(function(q){return _.objectStore(q)}).map(function(q){var I=q.keyPath,M=q.autoIncrement,N=l(I),U={},M={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:I==null,compound:N,keyPath:I,autoIncrement:M,unique:!0,extractKey:tr(I)},indexes:di(q.indexNames).map(function(V){return q.index(V)}).map(function(te){var J=te.name,Z=te.unique,le=te.multiEntry,te=te.keyPath,le={name:J,compound:l(te),keyPath:te,unique:Z,multiEntry:le,extractKey:tr(te)};return U[Cn(te)]=le}),getIndexByKeyPath:function(V){return U[Cn(V)]}};return U[":id"]=M.primaryKey,I!=null&&(U[Cn(I)]=M.primaryKey),M})},hasGetAll:0<P.length&&"getAll"in _.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=B.schema,L=B.hasGetAll,B=A.tables.map(y),R={};return B.forEach(function(q){return R[q.name]=q}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(q){if(!R[q])throw new Error("Table '".concat(q,"' not found"));return R[q]},MIN_KEY:-1/0,MAX_KEY:wn(c),schema:A}}function rs(s,c,p,m){var y=p.IDBKeyRange;return p.indexedDB,{dbcore:(m=pi(c,y,m),s.dbcore.reduce(function(b,_){return _=_.create,r(r({},b),_(b))},m))}}function mi(s,m){var p=m.db,m=rs(s._middlewares,p,s._deps,m);s.core=m.dbcore,s.tables.forEach(function(y){var b=y.name;s.core.schema.tables.some(function(_){return _.name===b})&&(y.core=s.core.table(b),s[b]instanceof s.Table&&(s[b].core=y.core))})}function _r(s,c,p,m){p.forEach(function(y){var b=m[y];c.forEach(function(_){var P=function A(L,B){return D(L,B)||(L=f(L))&&A(L,B)}(_,y);(!P||"value"in P&&P.value===void 0)&&(_===s.Transaction.prototype||_ instanceof s.Transaction?x(_,y,{get:function(){return this.table(y)},set:function(A){v(this,y,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):_[y]=new s.Table(y,b))})})}function $r(s,c){c.forEach(function(p){for(var m in p)p[m]instanceof s.Table&&delete p[m]})}function is(s,c){return s._cfg.version-c._cfg.version}function Nd(s,c,p,m){var y=s._dbSchema;p.objectStoreNames.contains("$meta")&&!y.$meta&&(y.$meta=Xt("$meta",hu("")[0],[]),s._storeNames.push("$meta"));var b=s._createTransaction("readwrite",s._storeNames,y);b.create(p),b._completion.catch(m);var _=b._reject.bind(b),P=ke.transless||ke;xn(function(){return ke.trans=b,ke.transless=P,c!==0?(mi(s,p),L=c,((A=b).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(B){return B??L}):be.resolve(L)).then(function(B){return q=B,I=b,N=p,U=[],B=(R=s)._versions,M=R._dbSchema=jo(0,R.idbdb,N),(B=B.filter(function(V){return V._cfg.version>=q})).length!==0?(B.forEach(function(V){U.push(function(){var J=M,Z=V._cfg.dbschema;No(R,J,N),No(R,Z,N),M=R._dbSchema=Z;var te=os(J,Z);te.add.forEach(function(xe){as(N,xe[0],xe[1].primKey,xe[1].indexes)}),te.change.forEach(function(xe){if(xe.recreate)throw new _e.Upgrade("Not yet support for changing primary key");var ge=N.objectStore(xe.name);xe.add.forEach(function(Ce){return Mo(ge,Ce)}),xe.change.forEach(function(Ce){ge.deleteIndex(Ce.name),Mo(ge,Ce)}),xe.del.forEach(function(Ce){return ge.deleteIndex(Ce)})});var le=V._cfg.contentUpgrade;if(le&&V._cfg.version>q){mi(R,N),I._memoizedTables={};var ve=oe(Z);te.del.forEach(function(xe){ve[xe]=J[xe]}),$r(R,[R.Transaction.prototype]),_r(R,[R.Transaction.prototype],a(ve),ve),I.schema=ve;var ue,he=Te(le);return he&&Fn(),te=be.follow(function(){var xe;(ue=le(I))&&he&&(xe=An.bind(null,null),ue.then(xe,xe))}),ue&&typeof ue.then=="function"?be.resolve(ue):te.then(function(){return ue})}}),U.push(function(J){var Z,te,le=V._cfg.dbschema;Z=le,te=J,[].slice.call(te.db.objectStoreNames).forEach(function(ve){return Z[ve]==null&&te.db.deleteObjectStore(ve)}),$r(R,[R.Transaction.prototype]),_r(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),I.schema=R._dbSchema}),U.push(function(J){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===V._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(Z){return Z!=="$meta"})):J.objectStore("$meta").put(V._cfg.version,"version"))})}),function V(){return U.length?be.resolve(U.shift()(I.idbtrans)).then(V):be.resolve()}().then(function(){fu(M,N)})):be.resolve();var R,q,I,N,U,M}).catch(_)):(a(y).forEach(function(B){as(p,B,y[B].primKey,y[B].indexes)}),mi(s,p),void be.follow(function(){return s.on.populate.fire(b)}).catch(_));var A,L})}function Bd(s,c){fu(s._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var p=jo(0,s.idbdb,c);No(s,s._dbSchema,c);for(var m=0,y=os(p,s._dbSchema).change;m<y.length;m++){var b=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=c.objectStore(_.name);_.add.forEach(function(A){Yt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(A.src)),Mo(P,A)})}(y[m]);if(typeof b=="object")return b.value}}function os(s,c){var p,m={del:[],add:[],change:[]};for(p in s)c[p]||m.del.push(p);for(p in c){var y=s[p],b=c[p];if(y){var _={name:p,def:b,recreate:!1,del:[],add:[],change:[]};if(""+(y.primKey.keyPath||"")!=""+(b.primKey.keyPath||"")||y.primKey.auto!==b.primKey.auto)_.recreate=!0,m.change.push(_);else{var P=y.idxByName,A=b.idxByName,L=void 0;for(L in P)A[L]||_.del.push(L);for(L in A){var B=P[L],R=A[L];B?B.src!==R.src&&_.change.push(R):_.add.push(R)}(0<_.del.length||0<_.add.length||0<_.change.length)&&m.change.push(_)}}else m.add.push([p,b])}return m}function as(s,c,p,m){var y=s.db.createObjectStore(c,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});return m.forEach(function(b){return Mo(y,b)}),y}function fu(s,c){a(s).forEach(function(p){c.db.objectStoreNames.contains(p)||(Yt&&console.debug("Dexie: Creating missing table",p),as(c,p,s[p].primKey,s[p].indexes))})}function Mo(s,c){s.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function jo(s,c,p){var m={};return F(c.objectStoreNames,0).forEach(function(y){for(var b=p.objectStore(y),_=an(Kn(L=b.keyPath),L||"",!0,!1,!!b.autoIncrement,L&&typeof L!="string",!0),P=[],A=0;A<b.indexNames.length;++A){var B=b.index(b.indexNames[A]),L=B.keyPath,B=an(B.name,L,!!B.unique,!!B.multiEntry,!1,L&&typeof L!="string",!1);P.push(B)}m[y]=Xt(y,_,P)}),m}function No(s,c,p){for(var m=p.db.objectStoreNames,y=0;y<m.length;++y){var b=m[y],_=p.objectStore(b);s._hasGetAll="getAll"in _;for(var P=0;P<_.indexNames.length;++P){var A=_.indexNames[P],L=_.index(A).keyPath,B=typeof L=="string"?L:"["+F(L).join("+")+"]";!c[b]||(L=c[b].idxByName[B])&&(L.name=A,delete c[b].idxByName[B],c[b].idxByName[A]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function hu(s){return s.split(",").map(function(c,p){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return an(m,y||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(y),p===0)})}var zd=(Bo.prototype._parseStoresSpec=function(s,c){a(s).forEach(function(p){if(s[p]!==null){var m=hu(s[p]),y=m.shift();if(y.unique=!0,y.multi)throw new _e.Schema("Primary key cannot be multi-valued");m.forEach(function(b){if(b.auto)throw new _e.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new _e.Schema("Index must have a name and cannot be an empty string")}),c[p]=Xt(p,y,m)}})},Bo.prototype.stores=function(p){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,p):p;var p=c._versions,m={},y={};return p.forEach(function(b){u(m,b._cfg.storesSource),y=b._cfg.dbschema={},b._parseStoresSpec(m,y)}),c._dbSchema=y,$r(c,[c._allTables,c,c.Transaction.prototype]),_r(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],a(y),y),c._storeNames=a(y),this},Bo.prototype.upgrade=function(s){return this._cfg.contentUpgrade=hr(this._cfg.contentUpgrade||Me,s),this},Bo);function Bo(){}function ss(s,c){var p=s._dbNamesDB;return p||(p=s._dbNamesDB=new nr(Qn,{addons:[],indexedDB:s,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function ls(s){return s&&typeof s.databases=="function"}function us(s){return xn(function(){return ke.letThrough=!0,s()})}function cs(s){return!("from"in s)}var zt=function(s,c){if(!this){var p=new zt;return s&&"d"in s&&u(p,s),p}u(this,arguments.length?{d:1,from:s,to:1<arguments.length?c:s}:{d:0})};function Vi(s,c,p){var m=Ve(c,p);if(!isNaN(m)){if(0<m)throw RangeError();if(cs(s))return u(s,{from:c,to:p,d:1});var y=s.l,m=s.r;if(Ve(p,s.from)<0)return y?Vi(y,c,p):s.l={from:c,to:p,d:1,l:null,r:null},pu(s);if(0<Ve(c,s.to))return m?Vi(m,c,p):s.r={from:c,to:p,d:1,l:null,r:null},pu(s);Ve(c,s.from)<0&&(s.from=c,s.l=null,s.d=m?m.d+1:1),0<Ve(p,s.to)&&(s.to=p,s.r=null,s.d=s.l?s.l.d+1:1),p=!s.r,y&&!s.l&&Wi(s,y),m&&p&&Wi(s,m)}}function Wi(s,c){cs(c)||function p(m,A){var b=A.from,_=A.to,P=A.l,A=A.r;Vi(m,b,_),P&&p(m,P),A&&p(m,A)}(s,c)}function du(s,c){var p=zo(c),m=p.next();if(m.done)return!1;for(var y=m.value,b=zo(s),_=b.next(y.from),P=_.value;!m.done&&!_.done;){if(Ve(P.from,y.to)<=0&&0<=Ve(P.to,y.from))return!0;Ve(y.from,P.from)<0?y=(m=p.next(P.from)).value:P=(_=b.next(y.from)).value}return!1}function zo(s){var c=cs(s)?null:{s:0,n:s};return{next:function(p){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&Ve(p,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||Ve(p,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function pu(s){var c,p,m=(((c=s.r)===null||c===void 0?void 0:c.d)||0)-(((p=s.l)===null||p===void 0?void 0:p.d)||0),y=1<m?"r":m<-1?"l":"";y&&(c=y=="r"?"l":"r",p=r({},s),m=s[y],s.from=m.from,s.to=m.to,s[y]=m[y],p[y]=m[c],(s[c]=p).d=mu(p)),s.d=mu(s)}function mu(p){var c=p.r,p=p.l;return(c?p?Math.max(c.d,p.d):c.d:p?p.d:0)+1}function Fo(s,c){return a(c).forEach(function(p){s[p]?Wi(s[p],c[p]):s[p]=function m(y){var b,_,P={};for(b in y)h(y,b)&&(_=y[b],P[b]=!_||typeof _!="object"||Q.has(_.constructor)?_:m(_));return P}(c[p])}),s}function fs(s,c){return s.all||c.all||Object.keys(s).some(function(p){return c[p]&&du(c[p],s[p])})}g(zt.prototype,((Sn={add:function(s){return Wi(this,s),this},addKey:function(s){return Vi(this,s,s),this},addKeys:function(s){var c=this;return s.forEach(function(p){return Vi(c,p,p)}),this},hasKey:function(s){var c=zo(this).next(s).value;return c&&Ve(c.from,s)<=0&&0<=Ve(c.to,s)}})[ae]=function(){return zo(this)},Sn));var Ur={},hs={},ds=!1;function $o(s){Fo(hs,s),ds||(ds=!0,setTimeout(function(){ds=!1,ps(hs,!(hs={}))},0))}function ps(s,c){c===void 0&&(c=!1);var p=new Set;if(s.all)for(var m=0,y=Object.values(Ur);m<y.length;m++)gu(_=y[m],s,p,c);else for(var b in s){var _,P=/^idb\:\/\/(.*)\/(.*)\//.exec(b);P&&(b=P[1],P=P[2],(_=Ur["idb://".concat(b,"/").concat(P)])&&gu(_,s,p,c))}p.forEach(function(A){return A()})}function gu(s,c,p,m){for(var y=[],b=0,_=Object.entries(s.queries.query);b<_.length;b++){for(var P=_[b],A=P[0],L=[],B=0,R=P[1];B<R.length;B++){var q=R[B];fs(c,q.obsSet)?q.subscribers.forEach(function(M){return p.add(M)}):m&&L.push(q)}m&&y.push([A,L])}if(m)for(var I=0,N=y;I<N.length;I++){var U=N[I],A=U[0],L=U[1];s.queries.query[A]=L}}function Fd(s){var c=s._state,p=s._deps.indexedDB;if(c.isBeingOpened||s.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?gt(c.dbOpenError):s});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,y=Math.round(10*s.verno),b=!1;function _(){if(c.openCanceller!==m)throw new _e.DatabaseClosed("db.open() was cancelled")}function P(){return new be(function(q,I){if(_(),!p)throw new _e.MissingAPI;var N=s.name,U=c.autoSchema||!y?p.open(N):p.open(N,y);if(!U)throw new _e.MissingAPI;U.onerror=we(I),U.onblocked=ut(s._fireOnBlocked),U.onupgradeneeded=ut(function(M){var V;B=U.transaction,c.autoSchema&&!s._options.allowEmptyDB?(U.onerror=Ke,B.abort(),U.result.close(),(V=p.deleteDatabase(N)).onsuccess=V.onerror=ut(function(){I(new _e.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(B.onerror=we(I),M=M.oldVersion>Math.pow(2,62)?0:M.oldVersion,R=M<1,s.idbdb=U.result,b&&Bd(s,B),Nd(s,M/10,B,I))},I),U.onsuccess=ut(function(){B=null;var M,V,J,Z,te,le=s.idbdb=U.result,ve=F(le.objectStoreNames);if(0<ve.length)try{var ue=le.transaction((Z=ve).length===1?Z[0]:Z,"readonly");if(c.autoSchema)V=le,J=ue,(M=s).verno=V.version/10,J=M._dbSchema=jo(0,V,J),M._storeNames=F(V.objectStoreNames,0),_r(M,[M._allTables],a(J),J);else if(No(s,s._dbSchema,ue),((te=os(jo(0,(te=s).idbdb,ue),te._dbSchema)).add.length||te.change.some(function(he){return he.add.length||he.change.length}))&&!b)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),le.close(),y=le.version+1,b=!0,q(P());mi(s,ue)}catch{}qn.push(s),le.onversionchange=ut(function(he){c.vcFired=!0,s.on("versionchange").fire(he)}),le.onclose=ut(function(he){s.on("close").fire(he)}),R&&(te=s._deps,ue=N,le=te.indexedDB,te=te.IDBKeyRange,ls(le)||ue===Qn||ss(le,te).put({name:ue}).catch(Me)),q()},I)}).catch(function(q){switch(q?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<y)return y=0,P()}return be.reject(q)})}var A,L=c.dbReadyResolve,B=null,R=!1;return be.race([m,(typeof navigator>"u"?be.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function I(){return indexedDB.databases().finally(q)}A=setInterval(I,100),I()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(P)]).then(function(){return _(),c.onReadyBeingFired=[],be.resolve(us(function(){return s.on.ready.fire(s.vip)})).then(function q(){if(0<c.onReadyBeingFired.length){var I=c.onReadyBeingFired.reduce(hr,Me);return c.onReadyBeingFired=[],be.resolve(us(function(){return I(s.vip)})).then(q)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(q){c.dbOpenError=q;try{B&&B.abort()}catch{}return m===c.openCanceller&&s._close(),gt(q)}).finally(function(){c.openComplete=!0,L()}).then(function(){var q;return R&&(q={},s.tables.forEach(function(I){I.schema.indexes.forEach(function(N){N.name&&(q["idb://".concat(s.name,"/").concat(I.name,"/").concat(N.name)]=new zt(-1/0,[[[]]]))}),q["idb://".concat(s.name,"/").concat(I.name,"/")]=q["idb://".concat(s.name,"/").concat(I.name,"/:dels")]=new zt(-1/0,[[[]]])}),Ze(He).fire(q),ps(q,!0)),s})}function ms(s){function c(b){return s.next(b)}var p=y(c),m=y(function(b){return s.throw(b)});function y(b){return function(A){var P=b(A),A=P.value;return P.done?A:A&&typeof A.then=="function"?A.then(p,m):l(A)?Promise.all(A).then(p,m):p(A)}}return y(c)()}function Uo(s,c,p){for(var m=l(s)?s.slice():[s],y=0;y<p;++y)m.push(c);return m}var $d={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(c){var p=s.table(c),m=p.schema,y={},b=[];function _(R,q,I){var N=Cn(R),U=y[N]=y[N]||[],M=R==null?0:typeof R=="string"?1:R.length,V=0<q,V=r(r({},I),{name:V?"".concat(N,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:V,keyTail:q,keyLength:M,extractKey:tr(R),unique:!V&&I.unique});return U.push(V),V.isPrimaryKey||b.push(V),1<M&&_(M===2?R[0]:R.slice(0,M-1),q+1,I),U.sort(function(J,Z){return J.keyTail-Z.keyTail}),V}c=_(m.primaryKey.keyPath,0,m.primaryKey),y[":id"]=[c];for(var P=0,A=m.indexes;P<A.length;P++){var L=A[P];_(L.keyPath,0,L)}function B(R){var q,I=R.query.index;return I.isVirtual?r(r({},R),{query:{index:I.lowLevelIndex,range:(q=R.query.range,I=I.keyTail,{type:q.type===1?2:q.type,lower:Uo(q.lower,q.lowerOpen?s.MAX_KEY:s.MIN_KEY,I),lowerOpen:!0,upper:Uo(q.upper,q.upperOpen?s.MIN_KEY:s.MAX_KEY,I),upperOpen:!0})}}):R}return r(r({},p),{schema:r(r({},m),{primaryKey:c,indexes:b,getIndexByKeyPath:function(R){return(R=y[Cn(R)])&&R[0]}}),count:function(R){return p.count(B(R))},query:function(R){return p.query(B(R))},openCursor:function(R){var q=R.query.index,I=q.keyTail,N=q.isVirtual,U=q.keyLength;return N?p.openCursor(B(R)).then(function(V){return V&&M(V)}):p.openCursor(R);function M(V){return Object.create(V,{continue:{value:function(J){J!=null?V.continue(Uo(J,R.reverse?s.MAX_KEY:s.MIN_KEY,I)):R.unique?V.continue(V.key.slice(0,U).concat(R.reverse?s.MIN_KEY:s.MAX_KEY,I)):V.continue()}},continuePrimaryKey:{value:function(J,Z){V.continuePrimaryKey(Uo(J,s.MAX_KEY,I),Z)}},primaryKey:{get:function(){return V.primaryKey}},key:{get:function(){var J=V.key;return U===1?J[0]:J.slice(0,U)}},value:{get:function(){return V.value}}})}}})}})}};function gs(s,c,p,m){return p=p||{},m=m||"",a(s).forEach(function(y){var b,_,P;h(c,y)?(b=s[y],_=c[y],typeof b=="object"&&typeof _=="object"&&b&&_?(P=re(b))!==re(_)?p[m+y]=c[y]:P==="Object"?gs(b,_,p,m+y+"."):b!==_&&(p[m+y]=c[y]):b!==_&&(p[m+y]=c[y])):p[m+y]=void 0}),a(c).forEach(function(y){h(s,y)||(p[m+y]=c[y])}),p}function vs(s,c){return c.type==="delete"?c.keys:c.keys||c.values.map(s.extractKey)}var Ud={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(c){var p=s.table(c),m=p.schema.primaryKey;return r(r({},p),{mutate:function(y){var b=ke.trans,_=b.table(c).hook,P=_.deleting,A=_.creating,L=_.updating;switch(y.type){case"add":if(A.fire===Me)break;return b._promise("readwrite",function(){return B(y)},!0);case"put":if(A.fire===Me&&L.fire===Me)break;return b._promise("readwrite",function(){return B(y)},!0);case"delete":if(P.fire===Me)break;return b._promise("readwrite",function(){return B(y)},!0);case"deleteRange":if(P.fire===Me)break;return b._promise("readwrite",function(){return function R(q,I,N){return p.query({trans:q,values:!1,query:{index:m,range:I},limit:N}).then(function(U){var M=U.result;return B({type:"delete",keys:M,trans:q}).then(function(V){return 0<V.numFailures?Promise.reject(V.failures[0]):M.length<N?{failures:[],numFailures:0,lastResult:void 0}:R(q,r(r({},I),{lower:M[M.length-1],lowerOpen:!0}),N)})})}(y.trans,y.range,1e4)},!0)}return p.mutate(y);function B(R){var q,I,N,U=ke.trans,M=R.keys||vs(m,R);if(!M)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?r(r({},R),{keys:M}):r({},R)).type!=="delete"&&(R.values=i([],R.values)),R.keys&&(R.keys=i([],R.keys)),q=p,N=M,((I=R).type==="add"?Promise.resolve([]):q.getMany({trans:I.trans,keys:N,cache:"immutable"})).then(function(V){var J=M.map(function(Z,te){var le,ve,ue,he=V[te],xe={onerror:null,onsuccess:null};return R.type==="delete"?P.fire.call(xe,Z,he,U):R.type==="add"||he===void 0?(le=A.fire.call(xe,Z,R.values[te],U),Z==null&&le!=null&&(R.keys[te]=Z=le,m.outbound||W(R.values[te],m.keyPath,Z))):(le=gs(he,R.values[te]),(ve=L.fire.call(xe,le,Z,he,U))&&(ue=R.values[te],Object.keys(ve).forEach(function(ge){h(ue,ge)?ue[ge]=ve[ge]:W(ue,ge,ve[ge])}))),xe});return p.mutate(R).then(function(Z){for(var te=Z.failures,le=Z.results,ve=Z.numFailures,Z=Z.lastResult,ue=0;ue<M.length;++ue){var he=(le||M)[ue],xe=J[ue];he==null?xe.onerror&&xe.onerror(te[ue]):xe.onsuccess&&xe.onsuccess(R.type==="put"&&V[ue]?R.values[ue]:he)}return{failures:te,results:le,numFailures:ve,lastResult:Z}}).catch(function(Z){return J.forEach(function(te){return te.onerror&&te.onerror(Z)}),Promise.reject(Z)})})}}})}})}};function vu(s,c,p){try{if(!c||c.keys.length<s.length)return null;for(var m=[],y=0,b=0;y<c.keys.length&&b<s.length;++y)Ve(c.keys[y],s[b])===0&&(m.push(p?pe(c.values[y]):c.values[y]),++b);return m.length===s.length?m:null}catch{return null}}var qd={stack:"dbcore",level:-1,create:function(s){return{table:function(c){var p=s.table(c);return r(r({},p),{getMany:function(m){if(!m.cache)return p.getMany(m);var y=vu(m.keys,m.trans._cache,m.cache==="clone");return y?be.resolve(y):p.getMany(m).then(function(b){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?pe(b):b},b})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),p.mutate(m)}})}}}};function yu(s,c){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function bu(s,c){switch(s){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kd={stack:"dbcore",level:0,name:"Observability",create:function(s){var c=s.schema.name,p=new zt(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(m,y,b){if(ke.subscr&&y!=="readonly")throw new _e.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return s.transaction(m,y,b)},table:function(m){var y=s.table(m),b=y.schema,_=b.primaryKey,R=b.indexes,P=_.extractKey,A=_.outbound,L=_.autoIncrement&&R.filter(function(I){return I.compound&&I.keyPath.includes(_.keyPath)}),B=r(r({},y),{mutate:function(I){function N(ge){return ge="idb://".concat(c,"/").concat(m,"/").concat(ge),Z[ge]||(Z[ge]=new zt)}var U,M,V,J=I.trans,Z=I.mutatedParts||(I.mutatedParts={}),te=N(""),le=N(":dels"),ve=I.type,xe=I.type==="deleteRange"?[I.range]:I.type==="delete"?[I.keys]:I.values.length<50?[vs(_,I).filter(function(ge){return ge}),I.values]:[],ue=xe[0],he=xe[1],xe=I.trans._cache;return l(ue)?(te.addKeys(ue),(xe=ve==="delete"||ue.length===he.length?vu(ue,xe):null)||le.addKeys(ue),(xe||he)&&(U=N,M=xe,V=he,b.indexes.forEach(function(ge){var Ce=U(ge.name||"");function Be(Ye){return Ye!=null?ge.extractKey(Ye):null}function We(Ye){return ge.multiEntry&&l(Ye)?Ye.forEach(function(sn){return Ce.addKey(sn)}):Ce.addKey(Ye)}(M||V).forEach(function(Ye,Ft){var je=M&&Be(M[Ft]),Ft=V&&Be(V[Ft]);Ve(je,Ft)!==0&&(je!=null&&We(je),Ft!=null&&We(Ft))})}))):ue?(he={from:(he=ue.lower)!==null&&he!==void 0?he:s.MIN_KEY,to:(he=ue.upper)!==null&&he!==void 0?he:s.MAX_KEY},le.add(he),te.add(he)):(te.add(p),le.add(p),b.indexes.forEach(function(ge){return N(ge.name).add(p)})),y.mutate(I).then(function(ge){return!ue||I.type!=="add"&&I.type!=="put"||(te.addKeys(ge.results),L&&L.forEach(function(Ce){for(var Be=I.values.map(function(je){return Ce.extractKey(je)}),We=Ce.keyPath.findIndex(function(je){return je===_.keyPath}),Ye=0,sn=ge.results.length;Ye<sn;++Ye)Be[Ye][We]=ge.results[Ye];N(Ce.name).addKeys(Be)})),J.mutatedParts=Fo(J.mutatedParts||{},Z),ge})}}),R=function(N){var U=N.query,N=U.index,U=U.range;return[N,new zt((N=U.lower)!==null&&N!==void 0?N:s.MIN_KEY,(U=U.upper)!==null&&U!==void 0?U:s.MAX_KEY)]},q={get:function(I){return[_,new zt(I.key)]},getMany:function(I){return[_,new zt().addKeys(I.keys)]},count:R,query:R,openCursor:R};return a(q).forEach(function(I){B[I]=function(N){var U=ke.subscr,M=!!U,V=yu(ke,y)&&bu(I,N)?N.obsSet={}:U;if(M){var J=function(he){return he="idb://".concat(c,"/").concat(m,"/").concat(he),V[he]||(V[he]=new zt)},Z=J(""),te=J(":dels"),U=q[I](N),M=U[0],U=U[1];if((I==="query"&&M.isPrimaryKey&&!N.values?te:J(M.name||"")).add(U),!M.isPrimaryKey){if(I!=="count"){var le=I==="query"&&A&&N.values&&y.query(r(r({},N),{values:!1}));return y[I].apply(this,arguments).then(function(he){if(I==="query"){if(A&&N.values)return le.then(function(Be){return Be=Be.result,Z.addKeys(Be),he});var xe=N.values?he.result.map(P):he.result;(N.values?Z:te).addKeys(xe)}else if(I==="openCursor"){var ge=he,Ce=N.values;return ge&&Object.create(ge,{key:{get:function(){return te.addKey(ge.primaryKey),ge.key}},primaryKey:{get:function(){var Be=ge.primaryKey;return te.addKey(Be),Be}},value:{get:function(){return Ce&&Z.addKey(ge.primaryKey),ge.value}}})}return he})}te.add(p)}}return y[I].apply(this,arguments)}}),B}})}};function xu(s,c,p){if(p.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return p.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(y,b){return!(b in p.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(y,b){return!(b in p.failures)})),c)}function ys(s,c){return p=s,((m=c).lower===void 0||(m.lowerOpen?0<Ve(p,m.lower):0<=Ve(p,m.lower)))&&(s=s,(c=c).upper===void 0||(c.upperOpen?Ve(s,c.upper)<0:Ve(s,c.upper)<=0));var p,m}function _u(s,c,q,m,y,b){if(!q||q.length===0)return s;var _=c.query.index,P=_.multiEntry,A=c.query.range,L=m.schema.primaryKey.extractKey,B=_.extractKey,R=(_.lowLevelIndex||_).extractKey,q=q.reduce(function(I,N){var U=I,M=[];if(N.type==="add"||N.type==="put")for(var V=new zt,J=N.values.length-1;0<=J;--J){var Z,te=N.values[J],le=L(te);V.hasKey(le)||(Z=B(te),(P&&l(Z)?Z.some(function(ge){return ys(ge,A)}):ys(Z,A))&&(V.addKey(le),M.push(te)))}switch(N.type){case"add":var ve=new zt().addKeys(c.values?I.map(function(Ce){return L(Ce)}):I),U=I.concat(c.values?M.filter(function(Ce){return Ce=L(Ce),!ve.hasKey(Ce)&&(ve.addKey(Ce),!0)}):M.map(function(Ce){return L(Ce)}).filter(function(Ce){return!ve.hasKey(Ce)&&(ve.addKey(Ce),!0)}));break;case"put":var ue=new zt().addKeys(N.values.map(function(Ce){return L(Ce)}));U=I.filter(function(Ce){return!ue.hasKey(c.values?L(Ce):Ce)}).concat(c.values?M:M.map(function(Ce){return L(Ce)}));break;case"delete":var he=new zt().addKeys(N.keys);U=I.filter(function(Ce){return!he.hasKey(c.values?L(Ce):Ce)});break;case"deleteRange":var xe=N.range;U=I.filter(function(Ce){return!ys(L(Ce),xe)})}return U},s);return q===s?s:(q.sort(function(I,N){return Ve(R(I),R(N))||Ve(L(I),L(N))}),c.limit&&c.limit<1/0&&(q.length>c.limit?q.length=c.limit:s.length===c.limit&&q.length<c.limit&&(y.dirty=!0)),b?Object.freeze(q):q)}function ku(s,c){return Ve(s.lower,c.lower)===0&&Ve(s.upper,c.upper)===0&&!!s.lowerOpen==!!c.lowerOpen&&!!s.upperOpen==!!c.upperOpen}function Hd(s,c){return function(p,m,y,b){if(p===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Ve(p,m))===0){if(y&&b)return 0;if(y)return 1;if(b)return-1}return m}(s.lower,c.lower,s.lowerOpen,c.lowerOpen)<=0&&0<=function(p,m,y,b){if(p===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Ve(p,m))===0){if(y&&b)return 0;if(y)return-1;if(b)return 1}return m}(s.upper,c.upper,s.upperOpen,c.upperOpen)}function Vd(s,c,p,m){s.subscribers.add(p),m.addEventListener("abort",function(){var y,b;s.subscribers.delete(p),s.subscribers.size===0&&(y=s,b=c,setTimeout(function(){y.subscribers.size===0&&me(b,y)},3e3))})}var Wd={stack:"dbcore",level:0,name:"Cache",create:function(s){var c=s.schema.name;return r(r({},s),{transaction:function(p,m,y){var b,_,P=s.transaction(p,m,y);return m==="readwrite"&&(_=(b=new AbortController).signal,y=function(A){return function(){if(b.abort(),m==="readwrite"){for(var L=new Set,B=0,R=p;B<R.length;B++){var q=R[B],I=Ur["idb://".concat(c,"/").concat(q)];if(I){var N=s.table(q),U=I.optimisticOps.filter(function(Ce){return Ce.trans===P});if(P._explicit&&A&&P.mutatedParts)for(var M=0,V=Object.values(I.queries.query);M<V.length;M++)for(var J=0,Z=(ve=V[M]).slice();J<Z.length;J++)fs((ue=Z[J]).obsSet,P.mutatedParts)&&(me(ve,ue),ue.subscribers.forEach(function(Ce){return L.add(Ce)}));else if(0<U.length){I.optimisticOps=I.optimisticOps.filter(function(Ce){return Ce.trans!==P});for(var te=0,le=Object.values(I.queries.query);te<le.length;te++)for(var ve,ue,he,xe=0,ge=(ve=le[te]).slice();xe<ge.length;xe++)(ue=ge[xe]).res!=null&&P.mutatedParts&&(A&&!ue.dirty?(he=Object.isFrozen(ue.res),he=_u(ue.res,ue.req,U,N,ue,he),ue.dirty?(me(ve,ue),ue.subscribers.forEach(function(Ce){return L.add(Ce)})):he!==ue.res&&(ue.res=he,ue.promise=be.resolve({result:he}))):(ue.dirty&&me(ve,ue),ue.subscribers.forEach(function(Ce){return L.add(Ce)})))}}}L.forEach(function(Ce){return Ce()})}}},P.addEventListener("abort",y(!1),{signal:_}),P.addEventListener("error",y(!1),{signal:_}),P.addEventListener("complete",y(!0),{signal:_})),P},table:function(p){var m=s.table(p),y=m.schema.primaryKey;return r(r({},m),{mutate:function(b){var _=ke.trans;if(y.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return m.mutate(b);var P=Ur["idb://".concat(c,"/").concat(p)];return P?(_=m.mutate(b),b.type!=="add"&&b.type!=="put"||!(50<=b.values.length||vs(y,b).some(function(A){return A==null}))?(P.optimisticOps.push(b),b.mutatedParts&&$o(b.mutatedParts),_.then(function(A){0<A.numFailures&&(me(P.optimisticOps,b),(A=xu(0,b,A))&&P.optimisticOps.push(A),b.mutatedParts&&$o(b.mutatedParts))}),_.catch(function(){me(P.optimisticOps,b),b.mutatedParts&&$o(b.mutatedParts)})):_.then(function(A){var L=xu(0,r(r({},b),{values:b.values.map(function(B,R){var q;return A.failures[R]?B:(B=(q=y.keyPath)!==null&&q!==void 0&&q.includes(".")?pe(B):r({},B),W(B,y.keyPath,A.results[R]),B)})}),A);P.optimisticOps.push(L),queueMicrotask(function(){return b.mutatedParts&&$o(b.mutatedParts)})}),_):m.mutate(b)},query:function(b){if(!yu(ke,m)||!bu("query",b))return m.query(b);var _=((L=ke.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",R=ke,P=R.requery,A=R.signal,L=function(N,U,M,V){var J=Ur["idb://".concat(N,"/").concat(U)];if(!J)return[];if(!(U=J.queries[M]))return[null,!1,J,null];var Z=U[(V.query?V.query.index.name:null)||""];if(!Z)return[null,!1,J,null];switch(M){case"query":var te=Z.find(function(le){return le.req.limit===V.limit&&le.req.values===V.values&&ku(le.req.query.range,V.query.range)});return te?[te,!0,J,Z]:[Z.find(function(le){return("limit"in le.req?le.req.limit:1/0)>=V.limit&&(!V.values||le.req.values)&&Hd(le.req.query.range,V.query.range)}),!1,J,Z];case"count":return te=Z.find(function(le){return ku(le.req.query.range,V.query.range)}),[te,!!te,J,Z]}}(c,p,"query",b),B=L[0],R=L[1],q=L[2],I=L[3];return B&&R?B.obsSet=b.obsSet:(R=m.query(b).then(function(N){var U=N.result;if(B&&(B.res=U),_){for(var M=0,V=U.length;M<V;++M)Object.freeze(U[M]);Object.freeze(U)}else N.result=pe(U);return N}).catch(function(N){return I&&B&&me(I,B),Promise.reject(N)}),B={obsSet:b.obsSet,promise:R,subscribers:new Set,type:"query",req:b,dirty:!1},I?I.push(B):(I=[B],(q=q||(Ur["idb://".concat(c,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[b.query.index.name||""]=I)),Vd(B,I,P,A),B.promise.then(function(N){return{result:_u(N.result,b,q?.optimisticOps,m,B,_)}})}})}})}};function qo(s,c){return new Proxy(s,{get:function(p,m,y){return m==="db"?c:Reflect.get(p,m,y)}})}var nr=(wt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new _e.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new _e.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var c=this._versions,p=c.filter(function(m){return m._cfg.version===s})[0];return p||(p=new this.Version(s),c.push(p),c.sort(is),p.stores({}),this._state.autoSchema=!1,p)},wt.prototype._whenReady=function(s){var c=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?s():new be(function(p,m){if(c._state.openComplete)return m(new _e.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new _e.DatabaseClosed);c.open().catch(Me)}c._state.dbReadyPromise.then(p,m)}).then(s)},wt.prototype.use=function(s){var c=s.stack,p=s.create,m=s.level,y=s.name;return y&&this.unuse({stack:c,name:y}),s=this._middlewares[c]||(this._middlewares[c]=[]),s.push({stack:c,create:p,level:m??10,name:y}),s.sort(function(b,_){return b.level-_.level}),this},wt.prototype.unuse=function(s){var c=s.stack,p=s.name,m=s.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(y){return m?y.create!==m:!!p&&y.name!==p})),this},wt.prototype.open=function(){var s=this;return In(Lt,function(){return Fd(s)})},wt.prototype._close=function(){var s=this._state,c=qn.indexOf(this);if(0<=c&&qn.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new be(function(p){s.dbReadyResolve=p}),s.openCanceller=new be(function(p,m){s.cancelOpen=m}))},wt.prototype.close=function(p){var c=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,p=this._state;c?(p.isBeingOpened&&p.cancelOpen(new _e.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new _e.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},wt.prototype.delete=function(s){var c=this;s===void 0&&(s={disableAutoOpen:!0});var p=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new be(function(y,b){function _(){c.close(s);var P=c._deps.indexedDB.deleteDatabase(c.name);P.onsuccess=ut(function(){var A,L,B;A=c._deps,L=c.name,B=A.indexedDB,A=A.IDBKeyRange,ls(B)||L===Qn||ss(B,A).delete(L).catch(Me),y()}),P.onerror=we(b),P.onblocked=c._fireOnBlocked}if(p)throw new _e.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(_):_()})},wt.prototype.backendDB=function(){return this.idbdb},wt.prototype.isOpen=function(){return this.idbdb!==null},wt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(wt.prototype,"tables",{get:function(){var s=this;return a(this._allTables).map(function(c){return s._allTables[c]})},enumerable:!1,configurable:!0}),wt.prototype.transaction=function(){var s=function(c,p,m){var y=arguments.length;if(y<2)throw new _e.InvalidArgument("Too few arguments");for(var b=new Array(y-1);--y;)b[y-1]=arguments[y];return m=b.pop(),[c,j(b),m]}.apply(this,arguments);return this._transaction.apply(this,s)},wt.prototype._transaction=function(s,c,p){var m=this,y=ke.trans;y&&y.db===this&&s.indexOf("!")===-1||(y=null);var b,_,P=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(_=c.map(function(L){if(L=L instanceof m.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),s=="r"||s===li)b=li;else{if(s!="rw"&&s!=Ni)throw new _e.InvalidArgument("Invalid transaction mode: "+s);b=Ni}if(y){if(y.mode===li&&b===Ni){if(!P)throw new _e.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");y=null}y&&_.forEach(function(L){if(y&&y.storeNames.indexOf(L)===-1){if(!P)throw new _e.SubTransaction("Table "+L+" not included in parent transaction.");y=null}}),P&&y&&!y.active&&(y=null)}}catch(L){return y?y._promise(null,function(B,R){R(L)}):gt(L)}var A=function L(B,R,q,I,N){return be.resolve().then(function(){var U=ke.transless||ke,M=B._createTransaction(R,q,B._dbSchema,I);if(M.explicit=!0,U={trans:M,transless:U},I)M.idbtrans=I.idbtrans;else try{M.create(),M.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(Z){return Z.name===rt.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return L(B,R,q,null,N)})):gt(Z)}var V,J=Te(N);return J&&Fn(),U=be.follow(function(){var Z;(V=N.call(M,M))&&(J?(Z=An.bind(null,null),V.then(Z,Z)):typeof V.next=="function"&&typeof V.throw=="function"&&(V=ms(V)))},U),(V&&typeof V.then=="function"?be.resolve(V).then(function(Z){return M.active?Z:gt(new _e.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):U.then(function(){return V})).then(function(Z){return I&&M._resolve(),M._completion.then(function(){return Z})}).catch(function(Z){return M._reject(Z),gt(Z)})})}.bind(null,this,b,_,y,p);return y?y._promise(b,A,"lock"):ke.trans?In(ke.transless,function(){return m._whenReady(A)}):this._whenReady(A)},wt.prototype.table=function(s){if(!h(this._allTables,s))throw new _e.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},wt);function wt(s,c){var p=this;this._middlewares={},this.verno=0;var m=wt.dependencies;this._options=c=r({addons:wt.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var y,b,_,P,A,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Me,dbReadyPromise:null,cancelOpen:Me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};L.dbReadyPromise=new be(function(R){L.dbReadyResolve=R}),L.openCanceller=new be(function(R,q){L.cancelOpen=q}),this._state=L,this.name=s,this.on=vr(this,"populate","blocked","versionchange","close",{ready:[hr,Me]}),this.on.ready.subscribe=O(this.on.ready.subscribe,function(R){return function(q,I){wt.vip(function(){var N,U=p._state;U.openComplete?(U.dbOpenError||be.resolve().then(q),I&&R(q)):U.onReadyBeingFired?(U.onReadyBeingFired.push(q),I&&R(q)):(R(q),N=p,I||R(function M(){N.on.ready.unsubscribe(q),N.on.ready.unsubscribe(M)}))})}}),this.Collection=(y=this,yr(ns.prototype,function(V,M){this.db=y;var I=Ao,N=null;if(M)try{I=M()}catch(J){N=J}var U=V._ctx,M=U.table,V=M.hook.reading.fire;this._ctx={table:M,index:U.index,isPrimKey:!U.index||M.schema.primKey.keyPath&&U.index===M.schema.primKey.name,range:I,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:U.or,valueMapper:V!==yt?V:null}})),this.Table=(b=this,yr(ui.prototype,function(R,q,I){this.db=b,this._tx=I,this.name=R,this.schema=q,this.hook=b._allTables[R]?b._allTables[R].hook:vr(null,{creating:[vn,Me],reading:[on,yt],updating:[Nt,Me],deleting:[Wt,Me]})})),this.Transaction=(_=this,yr(bt.prototype,function(R,q,I,N,U){var M=this;this.db=_,this.mode=R,this.storeNames=q,this.schema=I,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=vr(this,"complete","error","abort"),this.parent=U||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new be(function(V,J){M._resolve=V,M._reject=J}),this._completion.then(function(){M.active=!1,M.on.complete.fire()},function(V){var J=M.active;return M.active=!1,M.on.error.fire(V),M.parent?M.parent._reject(V):J&&M.idbtrans&&M.idbtrans.abort(),gt(V)})})),this.Version=(P=this,yr(zd.prototype,function(R){this.db=P,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,yr(Hi.prototype,function(R,q,I){if(this.db=A,this._ctx={table:R,index:q===":id"?null:q,or:I},this._cmp=this._ascending=Ve,this._descending=function(N,U){return Ve(U,N)},this._max=function(N,U){return 0<Ve(N,U)?N:U},this._min=function(N,U){return Ve(N,U)<0?N:U},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new _e.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=wn(c.IDBKeyRange),this._createTransaction=function(R,q,I,N){return new p.Transaction(R,q,I,p._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(R){p.on("blocked").fire(R),qn.filter(function(q){return q.name===p.name&&q!==p&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(R)})},this.use(qd),this.use(Wd),this.use(Kd),this.use($d),this.use(Ud);var B=new Proxy(this,{get:function(R,q,I){if(q==="_vip")return!0;if(q==="table")return function(U){return qo(p.table(U),B)};var N=Reflect.get(R,q,I);return N instanceof ui?qo(N,B):q==="tables"?N.map(function(U){return qo(U,B)}):q==="_createTransaction"?function(){return qo(N.apply(this,arguments),B)}:N}});this.vip=B,m.forEach(function(R){return R(p)})}var Ko,Sn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yd=(bs.prototype.subscribe=function(s,c,p){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:c,complete:p})},bs.prototype[Sn]=function(){return this},bs);function bs(s){this._subscribe=s}try{Ko={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Ko={indexedDB:null,IDBKeyRange:null}}function wu(s){var c,p=!1,m=new Yd(function(y){var b=Te(s),_,P=!1,A={},L={},B={get closed(){return P},unsubscribe:function(){P||(P=!0,_&&_.abort(),R&&Ze.storagemutated.unsubscribe(I))}};y.start&&y.start(B);var R=!1,q=function(){return ji(N)},I=function(U){Fo(A,U),fs(L,A)&&q()},N=function(){var U,M,V;!P&&Ko.indexedDB&&(A={},U={},_&&_.abort(),_=new AbortController,V=function(J){var Z=Gn();try{b&&Fn();var te=xn(s,J);return te=b?te.finally(An):te}finally{Z&&Zn()}}(M={subscr:U,signal:_.signal,requery:q,querier:s,trans:null}),Promise.resolve(V).then(function(J){p=!0,c=J,P||M.signal.aborted||(A={},function(Z){for(var te in Z)if(h(Z,te))return;return 1}(L=U)||R||(Ze(He,I),R=!0),ji(function(){return!P&&y.next&&y.next(J)}))},function(J){p=!1,["DatabaseClosedError","AbortError"].includes(J?.name)||P||ji(function(){P||y.error&&y.error(J)})}))};return setTimeout(q,0),B});return m.hasValue=function(){return p},m.getValue=function(){return c},m}var qr=nr;function xs(s){var c=kr;try{kr=!0,Ze.storagemutated.fire(s),ps(s,!0)}finally{kr=c}}g(qr,r(r({},Dt),{delete:function(s){return new qr(s,{addons:[]}).delete()},exists:function(s){return new qr(s,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return c=qr.dependencies,p=c.indexedDB,c=c.IDBKeyRange,(ls(p)?Promise.resolve(p.databases()).then(function(m){return m.map(function(y){return y.name}).filter(function(y){return y!==Qn})}):ss(p,c).toCollection().primaryKeys()).then(s)}catch{return gt(new _e.MissingAPI)}var c,p},defineClass:function(){return function(s){u(this,s)}},ignoreTransaction:function(s){return ke.trans?In(ke.transless,s):s()},vip:us,async:function(s){return function(){try{var c=ms(s.apply(this,arguments));return c&&typeof c.then=="function"?c:be.resolve(c)}catch(p){return gt(p)}}},spawn:function(s,c,p){try{var m=ms(s.apply(p,c||[]));return m&&typeof m.then=="function"?m:be.resolve(m)}catch(y){return gt(y)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(s,c){return c=be.resolve(typeof s=="function"?qr.ignoreTransaction(s):s).timeout(c||6e4),ke.trans?ke.trans.waitFor(c):c},Promise:be,debug:{get:function(){return Yt},set:function(s){dr(s)}},derive:S,extend:u,props:g,override:O,Events:vr,on:Ze,liveQuery:wu,extendObservabilitySet:Fo,getByKeyPath:E,setByKeyPath:W,delByKeyPath:function(s,c){typeof c=="string"?W(s,c,void 0):"length"in c&&[].map.call(c,function(p){W(s,p,void 0)})},shallowClone:oe,deepClone:pe,getObjectDiff:gs,cmp:Ve,asap:H,minKey:-1/0,addons:[],connections:qn,errnames:rt,dependencies:Ko,cache:Ur,semVer:"4.0.11",version:"4.0.11".split(".").map(function(s){return parseInt(s)}).reduce(function(s,c,p){return s+c/Math.pow(10,2*p)})})),qr.maxKey=wn(qr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ze(He,function(s){kr||(s=new CustomEvent(ct,{detail:s}),kr=!0,dispatchEvent(s),kr=!1)}),addEventListener(ct,function(s){s=s.detail,kr||xs(s)}));var gi,kr=!1,Cu=function(){};return typeof BroadcastChannel<"u"&&((Cu=function(){(gi=new BroadcastChannel(ct)).onmessage=function(s){return s.data&&xs(s.data)}})(),typeof gi.unref=="function"&&gi.unref(),Ze(He,function(s){kr||gi.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!nr.disableBfCache&&s.persisted){Yt&&console.debug("Dexie: handling persisted pagehide"),gi?.close();for(var c=0,p=qn;c<p.length;c++)p[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!nr.disableBfCache&&s.persisted&&(Yt&&console.debug("Dexie: handling persisted pageshow"),Cu(),xs({all:new zt(-1/0,[[]])}))})),be.rejectionMapper=function(s,c){return!s||s instanceof T||s instanceof TypeError||s instanceof SyntaxError||!s.name||!_t[s.name]?s:(c=new _t[s.name](c||s.message,s),"stack"in s&&x(c,"stack",{get:function(){return this.inner.stack}}),c)},dr(Yt),r(nr,Object.freeze({__proto__:null,Dexie:nr,liveQuery:wu,Entity:Bi,cmp:Ve,PropModification:Fr,replacePrefix:function(s,c){return new Fr({replacePrefix:[s,c]})},add:function(s){return new Fr({add:s})},remove:function(s){return new Fr({remove:s})},default:nr,RangeSet:zt,mergeRanges:Wi,rangesOverlap:du}),{default:nr}),nr})}(oa)),oa.exports}var Pm=Tm();const sl=Kl(Pm),Wu=Symbol.for("Dexie"),La=globalThis[Wu]||(globalThis[Wu]=sl);if(sl.semVer!==La.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${sl.semVer} and ${La.semVer}`);const{liveQuery:Bw,mergeRanges:zw,rangesOverlap:Fw,RangeSet:$w,cmp:Uw,Entity:qw,PropModification:Kw,replacePrefix:Hw,add:Vw,remove:Ww}=La;class Em extends La{project;constructor(){super("ResuMateMain"),this.version(1).stores({project:"++id, name, md, mdKeywords, jobUrl, jobDesc, jobKeywords, score, saves, created, modified"})}}const ir=new Em;async function Ya(){const e=new Date,t=Oe(Bn);if(Oe(Pn)===""||Oe(Pn)==="Change Me")return xi.set(-1),-1;try{if(t===-1){const n=await ir.project.add({name:Oe(Pn),md:Oe(pn),mdKeywords:Oe(ar),jobUrl:Oe(Yn),jobDesc:Oe(Nn),jobKeywords:Oe(sr),score:Oe(lr),saves:1,created:e,modified:e});Bn.set(n),Yr.set(1),xi.set(1)}else{const n=await ir.project.get(t),r=(n?.saves??Oe(Yr))+1;await ir.project.update(t,{name:Oe(Pn),md:Oe(pn),mdKeywords:Oe(ar),jobUrl:Oe(Yn),jobDesc:Oe(Nn),jobKeywords:Oe(sr),score:Oe(lr),saves:r,created:n?.created??e,modified:e}),Yr.set(r),xi.set(2)}return await Ai(),0}catch(n){return console.error(n),xi.set(-1),-1}}async function ll(e){const t=await ir.project.get(e);if(!t){console.warn("Project not found:",e);return}Pn.set(t.name),pn.set(t.md),ar.set(t.mdKeywords),Yn.set(t.jobUrl),Nn.set(t.jobDesc),sr.set(t.jobKeywords),lr.set(t.score),zl.set(t.created??new Date),Fl.set(t.modified??new Date),Yr.set(t.saves),Bn.set(e),ql()}async function Ai(){const e=await ir.project.toArray();e.reverse(),$l.set(e.map(t=>[t.name,t.id]))}async function Rm(e,t){const n=t.trim();n&&(await ir.project.update(e,{name:n,modified:new Date}),Oe(Bn)===e&&Pn.set(n),await Ai())}async function Mf(e,t){const n=await ir.project.get(e);if(!n)return console.warn("Project to duplicate not found:",e),-1;const r=new Date,i=(t??`${n.name} (Copy)`).trim(),o=await ir.project.add({name:i,md:n.md,mdKeywords:n.mdKeywords,jobUrl:n.jobUrl,jobDesc:n.jobDesc,jobKeywords:n.jobKeywords,score:n.score,saves:0,created:r,modified:r});return Bn.set(o),Pn.set(i),Yr.set(0),await Ai(),await ll(o),o}async function Am(e){await ir.project.delete(e),Oe(Bn)===e&&jf(),await Ai()}function jf(){Pn.set("Change Me"),pn.set(Oe(Zr)),ar.set([]),Yn.set("https://example.com/"),Nn.set("Paste your job description here, or paste a link and try to fetch it"),sr.set([]),yo.set([]),lr.set(0),zl.set(new Date),Fl.set(new Date),Yr.set(0),Bn.set(-1),console.log("Project cleared")}async function Im(){const e=["ResuMateMain","svelte-persist"],t={};for(const r of e){const i=await Hl(r);t[r]={};for(const o of i.objectStoreNames){const l=i.transaction(o,"readonly").objectStore(o),u=[];await new Promise((f,d)=>{const h=l.openCursor();h.onerror=()=>d(h.error),h.onsuccess=g=>{const v=g.target.result;v?(u.push({key:v.key,value:v.value}),v.continue()):f()}}),t[r][o]=u}i.close()}const n=JSON.stringify(t,null,2);Lm(n,"indexeddb_export.json")}async function Yu(e){const t=JSON.parse(e);if(!(t.ResuMateMain&&t["svelte-persist"])){console.error("Required databases not found in import payload");return}for(const n of Object.keys(t)){const r=await Hl(n);for(const i of Object.keys(t[n])){if(!Array.from(r.objectStoreNames).includes(i)){console.warn(`Store ${i} missing in ${n}, skipping`);continue}const o=r.transaction(i,"readwrite"),a=o.objectStore(i);await Nf(a);const l=t[n][i];for(const u of l)a.keyPath===null?await new Promise((f,d)=>{const h=a.put(u.value,u.key);h.onerror=()=>d(h.error),h.onsuccess=()=>f()}):await Om(a,u.value);await new Promise(u=>{o.oncomplete=()=>u()})}r.close()}await Ai(),console.log("Import completed")}async function Dm(){console.log("Resetting application data...");const e=["ResuMateMain","svelte-persist"];for(const t of e){const n=await Hl(t);for(const r of n.objectStoreNames){const i=n.transaction(r,"readwrite");await Nf(i.objectStore(r)),await new Promise(o=>{i.oncomplete=()=>o()})}n.close()}pn.set("# Go to settings and fetch my resume template from the settings! Also Update your info!"),vo.set("<h1>Hi</h1>"),Nn.set("Paste your job description here, or paste a link and try to fetch it"),Yn.set("https://example.com/"),mn.set("None"),uo.set("Content"),Pn.set("Change Me"),ar.set([]),sr.set([]),yo.set([]),lr.set(0),zl.set([]),Fl.set([]),Pr.set([]),Yr.set(0),Bn.set(-1),$l.set([]),Wa.set(""),Zr.set("# Go to settings and fetch my resume template from the settings! Also Update your info!"),ba.set("John Doe"),xa.set("example@gmail.com"),_a.set("999-999-9999"),ka.set("example.com"),wa.set("linkedin.com/in/example"),Ca.set("github.com/example"),Sa.set("Moon Street 123"),vm.set("/ResuMate/style.css"),Ta.set("your_api_key_here"),Ti.set("openai/gpt-4.1"),bo.set("Fetch some example knowlege to see what it looks like"),Pa.set(!0),Ea.set(!0),Ra.set(!0),Aa.set(!1),Ia.set(!0),Da.set(!0),ym.set(!0),Oa.set(!0),bm.set(""),xm.set(!1),_m.set(""),km.set(!1),Ul(),console.log("Application reset complete")}function Hl(e){return new Promise((t,n)=>{const r=indexedDB.open(e);r.onerror=()=>n(r.error),r.onsuccess=()=>t(r.result)})}function Nf(e){return new Promise((t,n)=>{const r=e.clear();r.onerror=()=>n(r.error),r.onsuccess=()=>t()})}function Om(e,t){return new Promise((n,r)=>{const i=e.add(t);i.onerror=()=>r(i.error),i.onsuccess=()=>n()})}function Lm(e,t){const n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,i.click(),URL.revokeObjectURL(r)}async function Mm(){if(!Oe(ia)){ia.set(!0);try{const e=jm(),t=Nm(),n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe(Ta)}`},body:JSON.stringify({model:Oe(Ti),messages:[{role:"system",content:e},{role:"user",content:t}]})});if(!n.ok){console.error("OpenRouter request failed",n.status,n.statusText);return}let i=(await n.json())?.choices?.[0]?.message?.content??"";if(i=i.replace(/```\n.*?\n```/,""),i=i.replace(/```/g,""),!i.startsWith("#")){const o=i.indexOf("#");o!==-1&&(i=i.slice(o))}i.trim().length>0?pn.set(i):console.warn("Tuned content empty; resumeMd left unchanged")}catch(e){console.error("Error tuning resume:",e)}finally{ia.set(!1)}}}function jm(){return`
You are a Resume Tuner who cannot tell a lie!

You must truthfully tune a resume to match the job description and requirements.

The resume is markdown. '||' denotes a two-column left/right alignment transform later.

You are a tool: output ONLY the final markdown resume. The first character MUST be the first header (# ...)
Do NOT add explanations or fences. Remove HTML comments (<!-- -->). Keep overall uncommented length stable.

Guidelines:
- Delete irrelevant content; substitute with relevant knowledge-base content ONLY if present (no fabrications).
- Use XYZ bullet format:
  Buzzword X by doing Y resulting in Z (quantitative where possible, but truthful).
- Maintain existing section headers (##, ###, etc.) unless removing an irrelevant section.
- Skills ordering should mirror job description ordering of technologies.
- Adjust casing to exactly match job description tokens (e.g. C++ vs c++).
- Avoid bolding inside skills list to prevent parser issues.
- Coursework: only refine to include technologies explicitly mentioned (e.g. "Database Systems" -> "Database Systems in MySQL & MongoDB" if applicable).
- Experience: Reword bullets to highlight relevant stack items when justified by existing knowledge base or resume comments.
- Projects: Reorder most relevant first; swap or modify to maximize truthful relevance.
- Events/Certifications: Keep only those relevant to the job focus area (e.g. security vs development).
- No lying. If evidence not present in knowledge base/resume, omit.

Scoring system is simplistic keyword overlap; optimize overlap AND authentic recruiter impact.

ONE SHOT: Provide final best version.
NO extraneous text.`}function Nm(){return`
JOB DESCRIPTION:
${Oe(Nn)}

JOB KEYWORDS (maximize overlap):
${JSON.stringify(Oe(sr))}

CURRENT RESUME (markdown):
${Oe(pn)}

RESUME KEYWORDS:
${JSON.stringify(Oe(ar))}

CURRENT COMBINED SCORE:
${Oe(lr)}

KNOWLEDGE BASE (safe source of truthful additions):
${Oe(bo)}

Remember:
- Remove comments
- Keep section structure logical
- Maintain approximate length of uncommented material
- Start output with first '#' header
`}var Bm=Re('<p class="text-xs px-2 py-1"> </p>'),zm=(e,t,n)=>t(k(n)),Fm=(e,t,n)=>t(k(n)),$m=Re('<li class="list-none"><div class="flex items-center gap-2 min-w-0"><button type="button"><span class="truncate block"> </span></button> <button type="button" class="px-2 py-1 rounded text-xs bg-mantle hover:bg-overlay0 focus:ring-2 focus:ring-blue/70 focus:ring-offset-1" title="Project options">â®</button></div></li>'),Um=Re('<ul role="list" class="flex flex-col gap-1 flex-1 min-h-0 overflow-y-auto overflow-x-hidden pr-1"></ul>'),qm=Re('<nav aria-label="Projects" class="flex flex-col gap-2 flex-1 min-h-0"><div class="px-1"><input type="text" class="w-full px-2 py-1 rounded bg-mantle text-text text-sm focus:outline-none focus:ring-1 focus:ring-blue placeholder:text-overlay1" placeholder="Search projects..." aria-label="Search projects"/></div> <!></nav>');function Km(e,t){Vt(t,!0);const n=it(t,"onSelect",3,()=>{});it(t,"onNewproject",3,()=>{});const r=it(t,"onEditProject",3,()=>{});let i=Ee(Ri([]));$l.subscribe(z=>$(i,z,!0));let o=Ee("");const a=Tr(()=>k(o).trim()?k(i).filter(z=>z[0].toLowerCase().includes(k(o).toLowerCase())):k(i));Zt(()=>{k(u)>=k(a).length&&$(u,k(a).length-1),k(u)<-1&&$(u,-1)});let l=[],u=Ee(-1);or(()=>{Ai()});function f(z){if(z<0)return;const H=l[z];H&&(H.focus(),$(u,z,!0))}function d(z){ll(z[1]),n()({name:z[0],id:z[1]})}function h(z){Bn.set(z[1]),ll(z[1]),mn.set("Project Options"),r()({name:z[0],id:z[1]})}function g(z,H,E){switch(z.key){case"ArrowDown":case"ArrowRight":z.preventDefault(),f((H+1)%E);break;case"ArrowUp":case"ArrowLeft":z.preventDefault(),f((H-1+E)%E);break;case"Home":z.preventDefault(),f(0);break;case"End":z.preventDefault(),f(E-1);break}}function v(z,H){return l[H]=z,{destroy(){l[H]=void 0}}}var x=qm(),S=G(x),D=G(S);dt(D),Y(S);var C=ne(S,2);{var F=z=>{var H=Bm(),E=G(H,!0);Y(H),ot(()=>xt(E,k(i).length===0?"No projects yet. Create one to begin.":"No matches.")),se(z,H)},O=z=>{var H=Um();Mn(H,21,()=>k(a),Ln,(E,W,oe)=>{var ye=$m(),j=G(ye),Q=G(j);Q.__keydown=re=>g(re,oe,k(a).length),at(Q,"data-index",oe),Q.__click=[zm,d,W];var ee=G(Q),pe=G(ee,!0);Y(ee),Y(Q),jl(Q,(re,ae)=>v?.(re,ae),()=>oe);var ie=ne(Q,2);ie.__click=[Fm,h,W],Y(j),Y(ye),ot(()=>{hn(Q,1,`flex-1 min-w-0 text-left text-sm px-2 py-1 rounded outline-hidden focus:outline-hidden focus:ring-2 focus:ring-blue/70 focus:ring-offset-1 transition-colors ${k(u)===oe?"bg-overlay0":"bg-mantle hover:bg-surface0"}`),at(Q,"aria-label",`Load project ${k(W)[0]}`),at(Q,"title",`Open ${k(W)[0]}`),xt(pe,k(W)[0]),at(ie,"aria-label",`Edit project ${k(W)[0]}`)}),fn("focus",Q,()=>$(u,oe,!0)),se(E,ye)}),Y(H),se(z,H)};Qe(C,z=>{(k(a)?.length||0)===0?z(F):z(O,!1)})}Y(x),Ct(D,()=>k(o),z=>$(o,z)),se(e,x),Ht()}gn(["keydown","click"]);function Ju(e,t,n){$e(mn,"CreateProject"),n()()}function Hm(e,t){$e(mn,t()==="Settings"?"None":"Settings")}var Vm=Re('<aside class="flex flex-col gap-4 p-3 h-svh border-r-1 border-overlay0 bg-crust overflow-hidden" aria-label="Primary"><header class="flex items-center gap-2"><button type="button" class="p-1 rounded hover:bg-overlay0 transition-colors text-text focus:outline-hidden focus:ring-2 focus:ring-blue/70"><img alt="" class="w-5 h-5 pointer-events-none" aria-hidden="true"/></button> <button type="button" class="text-left" aria-label="Create new project"><h1 class="text-blue text-2xl font-bold tracking-tight">ResuMate</h1></button></header> <div class="flex flex-col gap-2"><button type="button" class="px-2 py-1 rounded text-sm bg-blue text-mantle hover:bg-sapphire transition-colors w-full text-left" aria-label="New Project"><span class="font-semibold">New Project</span> <span aria-hidden="true">+</span></button></div> <div class="flex flex-col gap-2 flex-1 min-h-0"><h2 class="text-xs uppercase tracking-wide opacity-70 px-1">Projects</h2> <!></div> <footer class="mt-auto pt-2 flex flex-col gap-2"><button type="button" class="px-2 py-1 rounded text-sm bg-mantle hover:bg-overlay0 transition-colors text-text w-full text-left" aria-label="Toggle settings">Settings</button></footer></aside>');function Wm(e,t){Vt(t,!0);const[n,r]=Xr(),i=()=>Fe(mn,"$modalState",n);let o=it(t,"collapsed",3,!1),a=it(t,"width",3,288),l=it(t,"onToggleSidebar",3,()=>{}),u=it(t,"onSelect",3,()=>{}),f=it(t,"onNewproject",3,()=>{}),d=it(t,"onEditProject",3,()=>{});var h=Vm(),g=G(h),v=G(g);v.__click=function(...E){l()?.apply(this,E)};var x=G(v);Y(v);var S=ne(v,2);S.__click=[Ju,i,f],Y(g);var D=ne(g,2),C=G(D);C.__click=[Ju,i,f],Y(D);var F=ne(D,2),O=ne(G(F),2);Km(O,{onSelect:u(),onNewproject:f(),onEditProject:d()}),Y(F);var z=ne(F,2),H=G(z);H.__click=[Hm,i],Y(z),Y(h),ot(()=>{Gr(h,`width:${o()?"0px":a()+"px"}; ${o()?"padding:0;border-right-width:0":""}`),at(h,"aria-hidden",o()),at(v,"aria-label",o()?"Expand sidebar":"Collapse sidebar"),at(v,"aria-expanded",!o()),at(v,"title",o()?"Show sidebar":"Hide sidebar"),at(x,"src",o()?"/ResuMate/icons/sidebaropen.svg":"/ResuMate/icons/sidebarclose.svg"),at(D,"aria-hidden",o()),at(F,"aria-hidden",o()),at(z,"aria-hidden",o()),at(H,"aria-pressed",i()==="Settings")}),se(e,h),Ht(),r()}gn(["click"]);var Ym=(e,t,n)=>t(k(n)),Jm=Re('<button role="tab" type="button"> </button>'),Gm=Re('<div role="tablist" aria-label="Editor modes" class="flex flex-row gap-1"></div>');function Zm(e,t){Vt(t,!0);const n=["Content","Tuning","Preview"];let r=Ee("Content"),i=[],o=Ee(0);uo.subscribe(d=>{$(r,d,!0);const h=n.indexOf(k(r));h!==-1&&$(o,h,!0)});function a(d){uo.set(d),$(r,d,!0),$(o,n.indexOf(d),!0),queueMicrotask(()=>{i[k(o)]?.focus()})}function l(d){const h=n.length;let g=k(o);switch(d.key){case"ArrowRight":case"ArrowDown":d.preventDefault(),g=(k(o)+1)%h;break;case"ArrowLeft":case"ArrowUp":d.preventDefault(),g=(k(o)-1+h)%h;break;case"Home":d.preventDefault(),g=0;break;case"End":d.preventDefault(),g=h-1;break;case"Enter":case" ":d.preventDefault(),a(n[k(o)]);return;default:return}$(o,g,!0),i[k(o)]?.focus()}function u(d,h){return i[h]=d,{destroy(){i[h]=void 0}}}or(()=>{uo.subscribe(d=>{const h=n.indexOf(d);h!==-1&&$(o,h,!0)})});var f=Gm();f.__keydown=l,Mn(f,21,()=>n,Ln,(d,h,g)=>{var v=Jm();v.__click=[Ym,a,h];var x=G(v,!0);Y(v),jl(v,(S,D)=>u?.(S,D),()=>g),ot(()=>{at(v,"tabindex",g===k(o)?0:-1),at(v,"aria-selected",g===k(o)),hn(v,1,`px-2 py-1 rounded text-sm transition-colors ${g===k(o)?"bg-blue text-mantle":"bg-mantle text-text hover:bg-overlay0"}`),xt(x,k(h))}),fn("focus",v,()=>$(o,g,!0)),se(d,v)}),Y(f),se(e,f),Ht()}gn(["keydown","click"]);function Qm(e,t){$e(mn,"Project Options")}async function Xm(e,t){await Mf(t())}function eg(){Ya()}async function tg(e,t,n,r){if(t()&&k(n)!==""){const i=`
			         <!DOCTYPE html>
			         <html>
			         <head>
			             <style>
			                 ${k(n)}
			                 body, html {
			                     margin: 0;
			                     padding: 0;
			                     height: 100%;
			                     }
			                     .pdf-page {
			                         width: 8.5in;
			                         height: 11in;
			                         background-color: white;
			                         padding-top: 0.0in;
			                         padding-left: 0.2in;
			                         padding-right: 0.2in;
			                         box-sizing: border-box;
			                         overflow: hidden;
			                         max-height: 11in;
			                     @page {
			                         size: letter;
			                         scale: 1;
			                         margin: 0;
			                         width: 8.5in;
			                         height: 11in;
			                     }
			                     
			                     .pdf-page {
			                         overflow: hidden;
			                         max-height: 11in;
			                     }

			                     }

			                     </style>
			                 </head>
			                 <body>
			                     <div class="pdf-page">${await t()}</div>
			                 </body>
			             </html>
			         `,o=new Blob([i],{type:"text/html;charset=utf-8"}),a=URL.createObjectURL(o),l=window.open(a,"_blank");l&&(l.onload=()=>{l.document.title=r()||"ResuMate",setTimeout(()=>{l.focus(),l.print(),setTimeout(()=>{l.close(),URL.revokeObjectURL(a)},100)},100)})}}var ng=Re('<button type="button" class="p-1 rounded bg-mantle text-text hover:bg-overlay0 transition-colors focus:outline-hidden focus:ring-2 focus:ring-blue/70" aria-label="Show sidebar" title="Show sidebar"><img src="/ResuMate/icons/sidebaropen.svg" alt="" aria-hidden="true" class="w-5 h-5 pointer-events-none"/></button>'),rg=Re('<div class="flex items-center gap-3 px-3 py-2 border-b-1 border-overlay0 bg-crust bg-[linear-gradient(90deg,rgba(137,180,250,0.12),rgba(203,166,247,0.12))]" role="banner" aria-label="Application top bar"><!> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 rounded bg-mantle text-text text-sm hover:bg-overlay0 transition-colors" aria-label="Edit project" title="Edit project">Edit</button> <button type="button" class="px-2 py-1 rounded bg-mantle text-text text-sm hover:bg-overlay0 transition-colors" aria-label="Duplicate project" title="Duplicate project">Duplicate</button></div> <div class="flex items-center gap-2"><button type="button" class="px-2 py-1 rounded bg-blue text-mantle text-sm hover:bg-sapphire transition-colors relative" aria-describedby="save-status-text" aria-label="Save project">Save <span aria-hidden="true"></span></button> <div id="save-status-text" role="status" aria-live="polite" class="text-xs min-w-[4ch]"> </div></div> <div class="flex-1"></div> <div class="w-fit nerdfont"> </div> <div class="flex-1"></div> <!> <button type="button" class="ml-2 px-2 py-1 rounded bg-mantle text-text text-sm hover:bg-overlay0 transition-colors" aria-label="Download / Print resume" title="Download / Print resume">Download</button></div>');function ig(e,t){Vt(t,!0);const[n,r]=Xr(),i=()=>Fe(mn,"$modalState",n),o=()=>Fe(Bn,"$projectId",n),a=()=>Fe(vo,"$resumeHtml",n),l=()=>Fe(Pn,"$jobName",n),u=()=>Fe(xi,"$saveState",n),f=it(t,"collapsed",3,!1),d=it(t,"onShowSidebar",3,()=>{});let h=Ee("");async function g(){try{const ie=await fetch("/ResuMate/style.css");ie.ok?$(h,await ie.text(),!0):console.error("Failed to load stylesheet")}catch(ie){console.error("Error loading stylesheet:",ie)}}g();function v(ie){switch(ie){case-1:return"Error saving";case 0:return"Saving...";case 1:case 2:return"Saved";default:return""}}function x(ie){switch(ie){case-1:return"bg-red";case 0:return"bg-yellow";case 1:case 2:return"bg-green";default:return"bg-overlay0"}}var S=rg(),D=G(S);{var C=ie=>{var re=ng();re.__click=function(...ae){d()?.apply(this,ae)},se(ie,re)};Qe(D,ie=>{f()&&ie(C)})}var F=ne(D,2),O=G(F);O.__click=[Qm,i];var z=ne(O,2);z.__click=[Xm,o],Y(F);var H=ne(F,2),E=G(H);E.__click=[eg];var W=ne(G(E));Y(E);var oe=ne(E,2),ye=G(oe,!0);Y(oe),Y(H);var j=ne(H,4),Q=G(j,!0);Y(j);var ee=ne(j,4);Zm(ee,{});var pe=ne(ee,2);pe.__click=[tg,a,h,l],Y(S),ot((ie,re,ae)=>{hn(W,1,ie),xt(ye,re),xt(Q,ae)},[()=>"absolute -top-1 -right-1 w-3 h-3 rounded-full "+x(u()),()=>v(u()),()=>l().length<60?l():l().slice(0,60)+"..."]),se(e,S),Ht(),r()}gn(["click"]);function xo(e,t=1e3){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t)}}function og(e,t){if(e.size!==t.size)return!1;const n=new Set(e),r=new Set(t);for(const i of n)if(r.add(i),r.size!==t.size)return!1;for(const i of r)if(n.add(i),n.size!==e.size)return!1;return!0}function ag(e,t){if(!e)return t;const n={...t};return Object.entries(e).forEach(([r,i])=>{n[r]=i}),n}let Gu=class extends Event{detail;constructor(t,n){super(t,n),this.detail=n.detail}};const sg={writeTab:"Write",previewTab:"Preview",iconsLabels:{}};var lg=Re('<div class="carta-renderer markdown-body svelte-r6n2gn"><!> <!></div>');function ug(e,t){Vt(t,!0);let n=it(t,"elem",15),r=it(t,"hidden",3,!1),i=Ee(!1),o=Ee(Ri(t.carta.renderSSR(t.value)));const a=xo(g=>{t.carta.render(g).then(v=>{$(o,""),$(o,v,!0)}).then(()=>t.onrender())},t.carta.rendererDebounce??300),l=g=>{a(g)};Zt(()=>{k(i)&&l(t.value)}),or(()=>{n()&&t.carta.$setRenderer(n()),$(i,!0)});var u=lg(),f=G(u);kf(f,()=>k(o));var d=ne(f,2);{var h=g=>{var v=St(),x=mt(v);xf(x,()=>t.children??Wr),se(g,v)};Qe(d,g=>{k(i)&&g(h)})}Y(u),cn(u,g=>n(g),()=>n()),ot(()=>Gr(u,`display: ${r()?"none":"unset"};`)),fn("scroll",u,function(...g){t.onscroll?.apply(this,g)}),se(e,u),Ht()}const cg="modulepreload",fg=function(e){return"/ResuMate/"+e},Zu={},Ma=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=a(n.map(f=>{if(f=fg(f),f in Zu)return;Zu[f]=!0;const d=f.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${h}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":cg,d||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function cr(){}cr.prototype={diff:function(t,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var a=this;function l(z){return o?(setTimeout(function(){o(void 0,z)},0),!0):z}t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t)),n=this.removeEmpty(this.tokenize(n));var u=n.length,f=t.length,d=1,h=u+f;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var g=(r=i.timeout)!==null&&r!==void 0?r:1/0,v=Date.now()+g,x=[{oldPos:-1,lastComponent:void 0}],S=this.extractCommon(x[0],n,t,0);if(x[0].oldPos+1>=f&&S+1>=u)return l([{value:this.join(n),count:n.length}]);var D=-1/0,C=1/0;function F(){for(var z=Math.max(D,-d);z<=Math.min(C,d);z+=2){var H=void 0,E=x[z-1],W=x[z+1];E&&(x[z-1]=void 0);var oe=!1;if(W){var ye=W.oldPos-z;oe=W&&0<=ye&&ye<u}var j=E&&E.oldPos+1<f;if(!oe&&!j){x[z]=void 0;continue}if(!j||oe&&E.oldPos+1<W.oldPos?H=a.addToPath(W,!0,void 0,0):H=a.addToPath(E,void 0,!0,1),S=a.extractCommon(H,n,t,z),H.oldPos+1>=f&&S+1>=u)return l(hg(a,H.lastComponent,n,t,a.useLongestToken));x[z]=H,H.oldPos+1>=f&&(C=Math.min(C,z-1)),S+1>=u&&(D=Math.max(D,z+1))}d++}if(o)(function z(){setTimeout(function(){if(d>h||Date.now()>v)return o();F()||z()},0)})();else for(;d<=h&&Date.now()<=v;){var O=F();if(O)return O}},addToPath:function(t,n,r,i){var o=t.lastComponent;return o&&o.added===n&&o.removed===r?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}},extractCommon:function(t,n,r,i){for(var o=n.length,a=r.length,l=t.oldPos,u=l-i,f=0;u+1<o&&l+1<a&&this.equals(n[u+1],r[l+1]);)u++,l++,f++;return f&&(t.lastComponent={count:f,previousComponent:t.lastComponent}),t.oldPos=l,u},equals:function(t,n){return this.options.comparator?this.options.comparator(t,n):t===n||this.options.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(t[r]);return n},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function hg(e,t,n,r,i){for(var o=[],a;t;)o.push(t),a=t.previousComponent,delete t.previousComponent,t=a;o.reverse();for(var l=0,u=o.length,f=0,d=0;l<u;l++){var h=o[l];if(h.removed){if(h.value=e.join(r.slice(d,d+h.count)),d+=h.count,l&&o[l-1].added){var v=o[l-1];o[l-1]=o[l],o[l]=v}}else{if(!h.added&&i){var g=n.slice(f,f+h.count);g=g.map(function(S,D){var C=r[d+D];return C.length>S.length?C:S}),h.value=e.join(g)}else h.value=e.join(n.slice(f,f+h.count));f+=h.count,h.added||(d+=h.count)}}var x=o[u-1];return u>1&&typeof x.value=="string"&&(x.added||x.removed)&&e.equals("",x.value)&&(o[u-2].value+=x.value,o.pop()),o}var dg=new cr;function pg(e,t,n){return dg.diff(e,t,n)}var Qu=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Xu=/\S/,Bf=new cr;Bf.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Xu.test(e)&&!Xu.test(t)};Bf.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&Qu.test(t[n])&&Qu.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var zf=new cr;zf.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};var mg=new cr;mg.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var gg=new cr;gg.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function aa(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?aa=function(t){return typeof t}:aa=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aa(e)}var vg=Object.prototype.toString,_o=new cr;_o.useLongestToken=!0;_o.tokenize=zf.tokenize;_o.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof e=="string"?e:JSON.stringify(ul(e,null,null,i),i,"  ")};_o.equals=function(e,t){return cr.prototype.equals.call(_o,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function ul(e,t,n,r,i){t=t||[],n=n||[],r&&(e=r(i,e));var o;for(o=0;o<t.length;o+=1)if(t[o]===e)return n[o];var a;if(vg.call(e)==="[object Array]"){for(t.push(e),a=new Array(e.length),n.push(a),o=0;o<e.length;o+=1)a[o]=ul(e[o],t,n,r,i);return t.pop(),n.pop(),a}if(e&&e.toJSON&&(e=e.toJSON()),aa(e)==="object"&&e!==null){t.push(e),a={},n.push(a);var l=[],u;for(u in e)e.hasOwnProperty(u)&&l.push(u);for(l.sort(),o=0;o<l.length;o+=1)u=l[o],a[u]=ul(e[u],t,n,r,u);t.pop(),n.pop()}else a=e;return a}var cl=new cr;cl.tokenize=function(e){return e.slice()};cl.join=cl.removeEmpty=function(e){return e};function yg(e,t,n){const r=pg(e.replaceAll(`\r
`,`
`),t.replaceAll(`\r
`,`
`)),i=document.createElement("div");i.innerHTML=n;const o=Array.from(i.querySelectorAll(".line"));let a={line:0,span:0,char:0},l={line:0,span:0,char:0};if(o.length===0)return t;const u=v=>(Yo(v,o).textContent??"")[v.char],f=()=>{a=structuredClone(l),a.char++,xg(l,o)||(l=bg(l,o))},d=v=>{if(v===`
`){a.char=0,a.span=0,a.line++,l=structuredClone(a);return}const x=u(l);x!==v&&console.warn(`Character mismatch: "${v}" !== "${x}" at: `,l,o),f()},h=v=>{if(v===`
`){const D=Yo(a,o),C=[];for(;;){const W=C.at(-1)??D;if(!W.nextElementSibling)break;C.push(W.nextElementSibling)}const F=D.textContent??"",O=F.slice(a.char);D.textContent=F.slice(0,a.char);const z=document.createElement("span");z.classList.add("line");const H=document.createTextNode(`
`);if(O!==""){const W=document.createElement("span");z.appendChild(W),W.textContent=O,W.style.cssText=D.style.cssText}for(const W of C)z.appendChild(W);o[a.line].after(H,z),o.splice(a.line+1,0,z),l={line:l.line+1,span:0,char:0},a=structuredClone(l);return}const x=Yo(a,o),S=x.textContent??"";x.textContent=S.slice(0,a.char)+v+S.slice(a.char),a.char++,a.line===l.line&&a.span===l.span&&l.char++},g=v=>{if(v===`
`){const C=o[l.line-1],F=o[l.line],O=Array.from(F.children);for(const H of O)C.appendChild(H);C.nextSibling?.remove(),F.remove(),o.splice(l.line,1),l=structuredClone(a),l=Os(l,o);return}const x=Yo(l,o),S=x.textContent??"",D=S[l.char];D!==v&&console.warn(`Character mismatch: "${v}" !== "${D}" at: `,l,o),x.textContent=S.slice(0,l.char)+S.slice(l.char+1),x.textContent===""&&x.remove(),l=Os(l,o)};l=Os(l,o);for(const v of r)switch(!0){case v.added:for(const x of v.value)h(x);break;case v.removed:for(const x of v.value)g(x);break;default:for(const x of v.value)d(x);break}return i.innerHTML}function Ff(e){const t=document.createElement("span");return e.appendChild(t),t}function Os(e,t){const{line:n,span:r,char:i}=e,o=t[n],l=Array.from(o.children).at(r)?.textContent??"",u={line:n,span:r,char:i};return i>=l.length&&(u.char=0,u.span=r+1),u.span>=o.children.length&&(u.char=0,u.span=0,u.line=n+1),u}function bg(e,t){const{line:n,span:r,char:i}=e,o=t[n],l=(o.children[r]??Ff(o)).textContent??"",u={line:n,span:r,char:i+1};return i+1>=l.length&&(u.char=0,u.span=r+1,u.span>=o.children.length&&(u.span=0,u.line=n+1)),u}function xg(e,t){return e.line>=t.length-1&&_g(e,t)}function _g(e,t){const n=t[e.line];return e.span>=n.children.length-1&&kg(e,t)}function kg(e,t){const n=t[e.line],r=n.children[e.span]??n;return e.char>=(r.textContent??"").length-1}function Yo(e,t){const n=t[e.line];return n.children[e.span]??Ff(n)}var wg=Re('<div role="tooltip" class="editor-unfocus-suggestion svelte-1g4r752">Press ESC then TAB to move the focus off the field</div> <div role="textbox" tabindex="-1" class="carta-input svelte-1g4r752"><div class="carta-input-wrapper svelte-1g4r752"><div class="carta-highlight carta-font-code svelte-1g4r752" tabindex="-1" aria-hidden="true"><!></div> <textarea></textarea></div> <!></div>',1);function Cg(e,t){Vt(t,!0);let n=it(t,"value",15,""),r=it(t,"placeholder",3,""),i=it(t,"elem",15),o=it(t,"props",19,()=>({})),a=it(t,"hidden",3,!1),l,u,f,d=Ee(Ri(n())),h=Ee(!1),g=n();const v=Math.random().toString(36).substring(2),x=()=>{if(!k(h)||!l||(l.style.height="0",l.style.minHeight="0",l.style.height=l.scrollHeight+"px",l.style.minHeight=f.clientHeight+"px",l.scrollTop=0,!(document.activeElement===l))||!t.carta.input)return;const re=t.carta.input.getCursorXY();re&&i()&&(re.top<0||re.top+t.carta.input.getRowHeight()>=i().scrollTop+i().clientHeight)&&i().scrollTo({top:re?.top,behavior:"instant"})},S=()=>{window.getSelection()?.toString()||l?.focus()},C=xo(async ie=>{const re=await t.carta.highlighter();if(!re)return;let ae;const de=await Ma(()=>import("./highlight.CUmUhhwc.js"),__vite__mapDeps([0,1])),{isSingleTheme:me}=de;me(re.theme)?ae=re.codeToHtml(ie,{lang:re.lang,theme:re.theme}):ae=re.codeToHtml(ie,{lang:re.lang,themes:re.theme}),t.carta.sanitizer?$(d,t.carta.sanitizer(ae),!0):$(d,ae,!0),g=n(),requestAnimationFrame(x)},t.highlightDelay),F=xo(async ie=>{const re=await t.carta.highlighter(),ae=await Ma(()=>import("./highlight.CUmUhhwc.js"),__vite__mapDeps([0,1])),{loadNestedLanguages:de}=ae;if(!re)return;const{updated:me}=await de(re,ie);me&&C(ie)},300),O=ie=>{if(u)try{$(d,yg(g,ie,k(d)),!0),g=ie,requestAnimationFrame(x)}catch(re){console.error(`Error executing speculative update: ${re}.`)}C(ie),F(ie)};Zt(()=>{O(n())}),or(()=>{$(h,!0),requestAnimationFrame(x)}),or(()=>{t.carta.$setInput(l,i(),()=>{n(l.value)})});var z=wg(),H=mt(z),E=ne(H,2);E.__click=S,E.__keydown=S;var W=G(E),oe=G(W),ye=G(oe);kf(ye,()=>k(d)),Y(oe),cn(oe,ie=>u=ie,()=>u);var j=ne(oe,2);Ml(j);var Q=()=>l.scrollTop=0;Yp(j,()=>({class:"carta-font-code","aria-multiline":"true","aria-describedby":`editor-unfocus-suggestion-${v??""}`,spellcheck:o().spellcheck===!0,tabindex:"0",placeholder:r(),...o(),onscroll:Q}),void 0,void 0,"svelte-1g4r752"),cn(j,ie=>l=ie,()=>l),Y(W),cn(W,ie=>f=ie,()=>f);var ee=ne(W,2);{var pe=ie=>{var re=St(),ae=mt(re);xf(ae,()=>t.children),se(ie,re)};Qe(ee,ie=>{k(h)&&ie(pe)})}return Y(E),cn(E,ie=>i(ie),()=>i()),ot(()=>{at(H,"id",`editor-unfocus-suggestion-${v??""}`),Gr(H,`display: ${a()?"none":"unset"};`),Gr(E,`display: ${a()?"none":"unset"};`)}),fn("scroll",E,function(...ie){t.onscroll?.apply(this,ie)}),Ct(j,n),se(e,z),Ht({resize:x})}gn(["click","keydown"]);function Gi(e){if(e.key!=="ArrowLeft"&&e.key!=="ArrowRight")return;e.preventDefault();const t=e.currentTarget.parentElement?.children;if(!t)return;const n=e.currentTarget.nextElementSibling??t[0],r=e.currentTarget.previousElementSibling??t[t.length-1];e.key==="ArrowRight"?n.focus():r.focus()}var Sg=zn('<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" d="M4 8a2 2 0 1 1-3.999.001A2 2 0 0 1 4 8m6 0a2 2 0 1 1-3.999.001A2 2 0 0 1 10 8m6 0a2 2 0 1 1-3.999.001A2 2 0 0 1 16 8"></path></svg>');function Tg(e){var t=Sg();se(e,t)}var Pg=(e,t)=>t("write"),Eg=(e,t)=>t("preview"),Rg=Re('<button type="button"> </button> <button type="button"> </button>',1),Ag=(e,t,n)=>{e.stopPropagation(),e.preventDefault(),t.carta.input&&k(n).action(t.carta.input),t.carta.input?.update(),t.carta.input?.textarea.focus()},Ig=Re('<button class="carta-icon svelte-1c77udu"><!></button>'),Dg=(e,t)=>{e.stopPropagation(),e.preventDefault(),$(t,!k(t))},Og=Re('<button class="carta-icon svelte-1c77udu"><!></button>'),Lg=Re("<!> <!>",1),Mg=(e,t,n,r)=>{e.stopPropagation(),e.preventDefault(),t.carta.input&&k(n).action(t.carta.input),t.carta.input?.update(),t.carta.input?.textarea.focus(),$(r,!1)},jg=Re('<button class="carta-icon-full svelte-1c77udu"><!> <span> </span></button>'),Ng=Re('<div class="carta-icons-menu svelte-1c77udu"></div>'),Bg=Re('<div class="carta-toolbar svelte-1c77udu" role="toolbar"><div class="carta-toolbar-left svelte-1c77udu"><!></div> <div class="carta-filler svelte-1c77udu"></div> <div class="carta-toolbar-right svelte-1c77udu"><!></div></div> <!>',1);function zg(e,t){Vt(t,!0);let n=it(t,"tab",15),r=Ee(void 0),i=Ee(void 0),o=Ee(void 0),a=Ee(Ri([...t.carta.icons])),l=Ee(0),u=Ee(0),f=Ee(0),d=Ee(!1),h=Ee(!1);const g=8,v=()=>new Promise(requestAnimationFrame),x=xo(async()=>{if(!k(r)||!k(o))return;const Q=()=>k(r)?k(r).scrollWidth-k(r).clientWidth>0:!1;for(;Q();)k(a).pop(),$(a,k(a),!0),await v();const ee=()=>k(l)>2*k(u)+g;for(;k(a).length<t.carta.icons.length&&ee();)k(a).push(t.carta.icons[k(a).length]),$(a,k(a),!0),await v()},100);function S(Q){const ee=Q.target;k(i)&&!k(i).contains(ee)&&$(h,!1)}or(x),Zt(()=>{$(d,k(a).length!==t.carta.icons.length)});var D=Bg();fn("resize",va,x),fn("click",va,S);var C=mt(D),F=G(C),O=G(F);{var z=Q=>{var ee=Rg(),pe=mt(ee);at(pe,"tabindex",0),pe.__click=[Pg,n],pe.__keydown=function(...de){Gi?.apply(this,de)};var ie=G(pe,!0);Y(pe);var re=ne(pe,2);at(re,"tabindex",-1),re.__click=[Eg,n],re.__keydown=function(...de){Gi?.apply(this,de)};var ae=G(re,!0);Y(re),ot(()=>{hn(pe,1,rl(n()==="write"?"carta-active":"")),xt(ie,t.labels.writeTab),hn(re,1,rl(n()==="preview"?"carta-active":"")),xt(ae,t.labels.previewTab)}),se(Q,ee)};Qe(O,Q=>{t.mode=="tabs"&&Q(z)})}Y(F);var H=ne(F,2),E=ne(H,2),W=G(E);{var oe=Q=>{var ee=Lg(),pe=mt(ee);Mn(pe,17,()=>k(a),Ln,(ae,de,me)=>{var Ae=Ig();const w=Tr(()=>t.labels.iconsLabels[k(de).id]??k(de).label);at(Ae,"tabindex",me==0?0:-1),Ae.__click=[Ag,t,de],Ae.__keydown=function(...Pe){Gi?.apply(this,Pe)};var Te=G(Ae);lo(Te,()=>k(de).component,(Pe,T)=>{T(Pe,{})}),Y(Ae),ot(()=>{at(Ae,"title",k(w)),at(Ae,"aria-label",k(w))}),na(Ae,"clientWidth",Pe=>$(u,Pe)),se(ae,Ae)});var ie=ne(pe,2);{var re=ae=>{var de=Og();const me=Tr(()=>t.labels.iconsLabels.menu??"Menu");at(de,"tabindex",-1),de.__keydown=function(...w){Gi?.apply(this,w)},de.__click=[Dg,h];var Ae=G(de);Tg(Ae),Y(de),ot(()=>{at(de,"title",k(me)),at(de,"aria-label",k(me))}),se(ae,de)};Qe(ie,ae=>{k(d)&&ae(re)})}se(Q,ee)};Qe(W,Q=>{t.mode==="tabs"&&n()==="preview"||Q(oe)})}Y(E),cn(E,Q=>$(o,Q),()=>k(o)),Y(C),cn(C,Q=>$(r,Q),()=>k(r));var ye=ne(C,2);{var j=Q=>{var ee=Ng();Mn(ee,21,()=>t.carta.icons.filter(pe=>!k(a).includes(pe)),Ln,(pe,ie)=>{var re=jg();const ae=Tr(()=>t.labels.iconsLabels[k(ie).id]??k(ie).label);re.__click=[Mg,t,ie,h],re.__keydown=function(...w){Gi?.apply(this,w)};var de=G(re);lo(de,()=>k(ie).component,(w,Te)=>{Te(w,{})});var me=ne(de,2),Ae=G(me,!0);Y(me),Y(re),ot(()=>{at(re,"aria-label",k(ae)),xt(Ae,k(ae))}),se(pe,re)}),Y(ee),cn(ee,pe=>$(i,pe),()=>k(i)),ot(()=>Gr(ee,`top: ${k(f)??""}px;`)),se(Q,ee)};Qe(ye,Q=>{k(h)&&k(d)&&Q(j)})}na(H,"clientWidth",Q=>$(l,Q)),na(C,"clientHeight",Q=>$(f,Q)),se(e,D),Ht()}gn(["click","keydown"]);var Fg=Re('<div><!> <div class="carta-wrapper"><div><!> <!></div></div>  <!></div>');function $f(e,t){Vt(t,!0);let n=it(t,"theme",3,"default"),r=it(t,"value",15,""),i=it(t,"mode",3,"auto"),o=it(t,"scroll",3,"sync"),a=it(t,"disableToolbar",3,!1),l=it(t,"placeholder",3,""),u=it(t,"textarea",19,()=>({})),f=it(t,"selectedTab",7,"write"),d=it(t,"userLabels",19,()=>({})),h=it(t,"highlightDelay",3,250);const g=Tr(()=>({...sg,...d()}));let v=Ee(0),x=Ee(!1),S,D=Ee(void 0),C=Ee(void 0),F,O=0,z=Ee(void 0);const H=Tr(()=>i()==="auto"?k(v)&&k(v)>768?"split":"tabs":i());Zt(()=>{k(H),k(z)&&k(z).resize()}),Zt(()=>{k(D),k(C),j(f())});function E(w){const Te=w.scrollHeight-w.clientHeight;return w.scrollTop*(1+w.clientHeight/Te)/w.scrollHeight}const W=xo(()=>{F=null},1e3);function oe(w){const[Te,Pe]=w.target==k(D)?[k(D),k(C)]:[k(C),k(D)];k(H)=="split"&&o()=="sync"&&Te&&Pe&&ye(Te,Pe)}function ye(w,Te){const Pe=E(w);if(O=Pe,F&&F!=w)return;F=w;const T=Te.scrollHeight-Te.clientHeight;Te.scrollTo({top:Pe*T,behavior:"auto"}),W()}function j(w){if(k(H)!=="tabs")return;const Te=w==="write"?k(D):k(C);if(!Te)return;const Pe=Te.scrollHeight-Te.clientHeight;Te.scroll({top:Pe*O,behavior:"instant"})}or(()=>t.carta.$setElement(S)),or(()=>$(x,!0));var Q=Fg(),ee=G(Q);{var pe=w=>{zg(w,{get carta(){return t.carta},get labels(){return k(g)},get mode(){return k(H)},get tab(){return f()},set tab(Te){f(Te)}})};Qe(ee,w=>{a()||w(pe)})}var ie=ne(ee,2),re=G(ie),ae=G(re);{let w=Tr(()=>!(k(H)=="split"||f()=="write"));cn(Cg(ae,{get carta(){return t.carta},get placeholder(){return l()},get highlightDelay(){return h()},get props(){return u()},get hidden(){return k(w)},onscroll:oe,get value(){return r()},set value(Te){r(Te)},get elem(){return k(D)},set elem(Te){$(D,Te,!0)},children:(Te,Pe)=>{var T=St(),Xe=mt(T);{var Je=Ne=>{var rt=St(),st=mt(rt);Mn(st,17,()=>t.carta.components.filter(({parent:_e})=>[_e].flat().includes("input")),Ln,(_e,_t)=>{let Dt=()=>k(_t).component,Me=()=>k(_t).props;var yt=St(),on=mt(yt);lo(on,Dt,(Ot,vn)=>{vn(Ot,As({get carta(){return t.carta}},Me))}),se(_e,yt)}),se(Ne,rt)};Qe(Xe,Ne=>{k(x)&&Ne(Je)})}se(Te,T)},$$slots:{default:!0}}),Te=>$(z,Te,!0),()=>k(z))}var de=ne(ae,2);{let w=Tr(()=>!(k(H)=="split"||f()=="preview"));ug(de,{get carta(){return t.carta},get value(){return r()},get hidden(){return k(w)},onscroll:oe,onrender:()=>{k(H)=="split"&&o()=="sync"&&k(D)&&k(C)&&ye(k(D),k(C))},get elem(){return k(C)},set elem(Te){$(C,Te,!0)},children:(Te,Pe)=>{var T=St(),Xe=mt(T);{var Je=Ne=>{var rt=St(),st=mt(rt);Mn(st,17,()=>t.carta.components.filter(({parent:_e})=>[_e].flat().includes("renderer")),Ln,(_e,_t)=>{let Dt=()=>k(_t).component,Me=()=>k(_t).props;var yt=St(),on=mt(yt);lo(on,Dt,(Ot,vn)=>{vn(Ot,As({get carta(){return t.carta}},Me))}),se(_e,yt)}),se(Ne,rt)};Qe(Xe,Ne=>{k(x)&&Ne(Je)})}se(Te,T)},$$slots:{default:!0}})}Y(re),Y(ie);var me=ne(ie,2);{var Ae=w=>{var Te=St(),Pe=mt(Te);Mn(Pe,17,()=>t.carta.components.filter(({parent:T})=>[T].flat().includes("editor")),Ln,(T,Xe)=>{let Je=()=>k(Xe).component,Ne=()=>k(Xe).props;var rt=St(),st=mt(rt);lo(st,Je,(_e,_t)=>{_t(_e,As({get carta(){return t.carta}},Ne))}),se(T,rt)}),se(w,Te)};Qe(me,w=>{k(x)&&w(Ae)})}Y(Q),cn(Q,w=>S=w,()=>S),ot(()=>{hn(Q,1,`carta-editor carta-theme__${n()??""}`,"svelte-11jlii3"),hn(re,1,`carta-container mode-${k(H)??""}`,"svelte-11jlii3")}),na(Q,"clientWidth",w=>$(v,w)),se(e,Q),Ht()}function ec(e){if(e)throw e}var Ls,tc;function $g(){if(tc)return Ls;tc=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var d=e.call(f,"constructor"),h=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!d&&!h)return!1;var g;for(g in f);return typeof g>"u"||e.call(f,g)},a=function(f,d){n&&d.name==="__proto__"?n(f,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):f[d.name]=d.newValue},l=function(f,d){if(d==="__proto__")if(e.call(f,d)){if(r)return r(f,d).value}else return;return f[d]};return Ls=function u(){var f,d,h,g,v,x,S=arguments[0],D=1,C=arguments.length,F=!1;for(typeof S=="boolean"&&(F=S,S=arguments[1]||{},D=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});D<C;++D)if(f=arguments[D],f!=null)for(d in f)h=l(S,d),g=l(f,d),S!==g&&(F&&g&&(o(g)||(v=i(g)))?(v?(v=!1,x=h&&i(h)?h:[]):x=h&&o(h)?h:{},a(S,{name:d,newValue:u(F,x,g)})):typeof g<"u"&&a(S,{name:d,newValue:g}));return S},Ls}var Ug=$g();const Ms=Kl(Ug);function fl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function qg(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...i);function l(u,...f){const d=e[++o];let h=-1;if(u){a(u);return}for(;++h<i.length;)(f[h]===null||f[h]===void 0)&&(f[h]=i[h]);i=f,d?Kg(d,l)(...f):a(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Kg(e,t){let n;return r;function r(...a){const l=e.length>a.length;let u;l&&a.push(i);try{u=e.apply(this,a)}catch(f){const d=f;if(l&&n)throw d;return i(d)}l||(u&&u.then&&typeof u.then=="function"?u.then(o,i):u instanceof Error?i(u):o(u))}function i(a,...l){n||(n=!0,t(a,...l))}function o(a){i(null,a)}}function co(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?nc(e.position):"start"in e||"end"in e?nc(e):"line"in e||"column"in e?hl(e):""}function hl(e){return rc(e&&e.line)+":"+rc(e&&e.column)}function nc(e){return hl(e&&e.start)+"-"+hl(e&&e.end)}function rc(e){return e&&typeof e=="number"?e:1}class nn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(a=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const l=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=co(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}nn.prototype.file="";nn.prototype.name="";nn.prototype.reason="";nn.prototype.message="";nn.prototype.stack="";nn.prototype.column=void 0;nn.prototype.line=void 0;nn.prototype.ancestors=void 0;nn.prototype.cause=void 0;nn.prototype.fatal=void 0;nn.prototype.place=void 0;nn.prototype.ruleId=void 0;nn.prototype.source=void 0;const Vn={basename:Hg,dirname:Vg,extname:Wg,join:Yg,sep:"/"};function Hg(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');So(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function Vg(e){if(So(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Wg(e){So(e);let t=e.length,n=-1,r=0,i=-1,o=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Yg(...e){let t=-1,n;for(;++t<e.length;)So(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Jg(n)}function Jg(e){So(e);const t=e.codePointAt(0)===47;let n=Gg(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Gg(e,t){let n="",r=0,i=-1,o=0,a=-1,l,u;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,o=0}else l===46&&o>-1?o++:o=-1}return n}function So(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Zg={cwd:Qg};function Qg(){return"/"}function dl(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Xg(e){if(typeof e=="string")e=new URL(e);else if(!dl(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ev(e)}function ev(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const js=["history","path","basename","stem","extname","dirname"];class tv{constructor(t){let n;t?dl(t)?n={path:t}:typeof t=="string"||nv(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Zg.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<js.length;){const o=js[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)js.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Vn.basename(this.path):void 0}set basename(t){Bs(t,"basename"),Ns(t,"basename"),this.path=Vn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vn.dirname(this.path):void 0}set dirname(t){ic(this.basename,"dirname"),this.path=Vn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vn.extname(this.path):void 0}set extname(t){if(Ns(t,"extname"),ic(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){dl(t)&&(t=Xg(t)),Bs(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vn.basename(this.path,this.extname):void 0}set stem(t){Bs(t,"stem"),Ns(t,"stem"),this.path=Vn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new nn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ns(e,t){if(e&&e.includes(Vn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vn.sep+"`")}function Bs(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ic(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function nv(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const rv=function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},iv={}.hasOwnProperty;class Vl extends rv{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qg()}copy(){const t=new Vl;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Ms(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?($s("data",this.frozen),this.namespace[t]=n,this):iv.call(this.namespace,t)&&this.namespace[t]||void 0:t?($s("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Jo(t),r=this.parser||this.Parser;return zs("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),zs("process",this.parser||this.Parser),Fs("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,a){const l=Jo(t),u=r.parse(l);r.run(u,l,function(d,h,g){if(d||!h||!g)return f(d);const v=h,x=r.stringify(v,g);av(x)?g.value=x:g.result=x,f(d,g)});function f(d,h){d||!h?a(d):o?o(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),zs("processSync",this.parser||this.Parser),Fs("processSync",this.compiler||this.Compiler),this.process(t,i),sc("processSync","process",n),r;function i(o,a){n=!0,ec(o),r=a}}run(t,n,r){ac(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,l){const u=Jo(n);i.run(t,u,f);function f(d,h,g){const v=h||t;d?l(d):a?a(v):r(void 0,v,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),sc("runSync","run",r),i;function o(a,l){ec(a),i=l,r=!0}}stringify(t,n){this.freeze();const r=Jo(n),i=this.compiler||this.Compiler;return Fs("stringify",i),ac(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if($s("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")u(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[d,...h]=f;u(d,h)}else a(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function a(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(f.plugins),f.settings&&(i.settings=Ms(!0,i.settings,f.settings))}function l(f){let d=-1;if(f!=null)if(Array.isArray(f))for(;++d<f.length;){const h=f[d];o(h)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function u(f,d){let h=-1,g=-1;for(;++h<r.length;)if(r[h][0]===f){g=h;break}if(g===-1)r.push([f,...d]);else if(d.length>0){let[v,...x]=d;const S=r[g][1];fl(S)&&fl(v)&&(v=Ms(!0,S,v)),r[g]=[f,v,...x]}}}}const oc=new Vl().freeze();function zs(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Fs(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function $s(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ac(e){if(!fl(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function sc(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Jo(e){return ov(e)?e:new tv(e)}function ov(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function av(e){return typeof e=="string"||sv(e)}function sv(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const lv={};function Wl(e,t){const n=lv,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Uf(e,r,i)}function Uf(e,t,n){if(uv(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return lc(e.children,t,n)}return Array.isArray(e)?lc(e,t,n):""}function lc(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Uf(e[i],t,n);return r.join("")}function uv(e){return!!(e&&typeof e=="object")}const uc=document.createElement("i");function Yl(e){const t="&"+e+";";uc.innerHTML=t;const n=uc.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function dn(e,t,n,r){const i=e.length;let o=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),e.splice(...a),o+=1e4,t+=1e4}function Tn(e,t){return e.length>0?(dn(e,e.length,0,t),e):t}const cc={}.hasOwnProperty;function qf(e){const t={};let n=-1;for(;++n<e.length;)cv(t,e[n]);return t}function cv(e,t){let n;for(n in t){const i=(cc.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let a;if(o)for(a in o){cc.call(i,a)||(i[a]=[]);const l=o[a];fv(i[a],Array.isArray(l)?l:l?[l]:[])}}}function fv(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);dn(e,0,0,r)}function Kf(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function jn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Gt=Ar(/[A-Za-z]/),qt=Ar(/[\dA-Za-z]/),hv=Ar(/[#-'*+\--9=?A-Z^-~]/);function ja(e){return e!==null&&(e<32||e===127)}const pl=Ar(/\d/),dv=Ar(/[\dA-Fa-f]/),pv=Ar(/[!-/:-@[-`{-~]/);function Ie(e){return e!==null&&e<-2}function ht(e){return e!==null&&(e<0||e===32)}function Ge(e){return e===-2||e===-1||e===32}const Ja=Ar(/\p{P}|\p{S}/u),Qr=Ar(/\s/);function Ar(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ii(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(o===37&&qt(e.charCodeAt(n+1))&&qt(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const l=e.charCodeAt(n+1);o<56320&&l>56319&&l<57344?(a=String.fromCharCode(o,l),i=1):a="ï¿½"}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function nt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(u){return Ge(u)?(e.enter(n),l(u)):t(u)}function l(u){return Ge(u)&&o++<i?(e.consume(u),l):(e.exit(n),t(u))}}const mv={tokenize:gv};function gv(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),nt(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),o(l)}function o(l){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Ie(l)?(e.consume(l),e.exit("chunkText"),o):(e.consume(l),a)}}const vv={tokenize:yv},fc={tokenize:bv};function yv(e){const t=this,n=[];let r=0,i,o,a;return l;function l(O){if(r<n.length){const z=n[r];return t.containerState=z[1],e.attempt(z[0].continuation,u,f)(O)}return f(O)}function u(O){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&F();const z=t.events.length;let H=z,E;for(;H--;)if(t.events[H][0]==="exit"&&t.events[H][1].type==="chunkFlow"){E=t.events[H][1].end;break}C(r);let W=z;for(;W<t.events.length;)t.events[W][1].end={...E},W++;return dn(t.events,H+1,0,t.events.slice(z)),t.events.length=W,f(O)}return l(O)}function f(O){if(r===n.length){if(!i)return g(O);if(i.currentConstruct&&i.currentConstruct.concrete)return x(O);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(fc,d,h)(O)}function d(O){return i&&F(),C(r),g(O)}function h(O){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,x(O)}function g(O){return t.containerState={},e.attempt(fc,v,x)(O)}function v(O){return r++,n.push([t.currentConstruct,t.containerState]),g(O)}function x(O){if(O===null){i&&F(),C(0),e.consume(O);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),S(O)}function S(O){if(O===null){D(e.exit("chunkFlow"),!0),C(0),e.consume(O);return}return Ie(O)?(e.consume(O),D(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(O),S)}function D(O,z){const H=t.sliceStream(O);if(z&&H.push(null),O.previous=o,o&&(o.next=O),o=O,i.defineSkip(O.start),i.write(H),t.parser.lazy[O.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<a&&(!i.events[E][1].end||i.events[E][1].end.offset>a))return;const W=t.events.length;let oe=W,ye,j;for(;oe--;)if(t.events[oe][0]==="exit"&&t.events[oe][1].type==="chunkFlow"){if(ye){j=t.events[oe][1].end;break}ye=!0}for(C(r),E=W;E<t.events.length;)t.events[E][1].end={...j},E++;dn(t.events,oe+1,0,t.events.slice(W)),t.events.length=E}}function C(O){let z=n.length;for(;z-- >O;){const H=n[z];t.containerState=H[1],H[0].exit.call(t,e)}n.length=O}function F(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function bv(e,t,n){return nt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Pi(e){if(e===null||ht(e)||Qr(e))return 1;if(Ja(e))return 2}function Ga(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const ml={name:"attention",resolveAll:xv,tokenize:_v};function xv(e,t){let n=-1,r,i,o,a,l,u,f,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},g={...e[n][1].start};hc(h,-u),hc(g,u),a={type:u>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},o={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=Tn(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=Tn(f,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",o,t]]),f=Tn(f,Ga(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=Tn(f,[["exit",o,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,f=Tn(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,dn(e,r-1,n-r+3,f),n=r+f.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function _v(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Pi(r);let o;return a;function a(u){return o=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===o)return e.consume(u),l;const f=e.exit("attentionSequence"),d=Pi(u),h=!d||d===2&&i||n.includes(u),g=!i||i===2&&d||n.includes(r);return f._open=!!(o===42?h:h&&(i||!g)),f._close=!!(o===42?g:g&&(d||!h)),t(u)}}function hc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const kv={name:"autolink",tokenize:wv};function wv(e,t,n){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(v){return Gt(v)?(e.consume(v),a):v===64?n(v):f(v)}function a(v){return v===43||v===45||v===46||qt(v)?(r=1,l(v)):f(v)}function l(v){return v===58?(e.consume(v),r=0,u):(v===43||v===45||v===46||qt(v))&&r++<32?(e.consume(v),l):(r=0,f(v))}function u(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||ja(v)?n(v):(e.consume(v),u)}function f(v){return v===64?(e.consume(v),d):hv(v)?(e.consume(v),f):n(v)}function d(v){return qt(v)?h(v):n(v)}function h(v){return v===46?(e.consume(v),r=0,d):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):g(v)}function g(v){if((v===45||qt(v))&&r++<63){const x=v===45?g:h;return e.consume(v),x}return n(v)}}const To={partial:!0,tokenize:Cv};function Cv(e,t,n){return r;function r(o){return Ge(o)?nt(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Ie(o)?t(o):n(o)}}const Hf={continuation:{tokenize:Tv},exit:Pv,name:"blockQuote",tokenize:Sv};function Sv(e,t,n){const r=this;return i;function i(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return n(a)}function o(a){return Ge(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Tv(e,t,n){const r=this;return i;function i(a){return Ge(a)?nt(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return e.attempt(Hf,t,n)(a)}}function Pv(e){e.exit("blockQuote")}const Vf={name:"characterEscape",tokenize:Ev};function Ev(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return pv(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Wf={name:"characterReference",tokenize:Rv};function Rv(e,t,n){const r=this;let i=0,o,a;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),u}function u(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,a=qt,d(h))}function f(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=dv,d):(e.enter("characterReferenceValue"),o=7,a=pl,d(h))}function d(h){if(h===59&&i){const g=e.exit("characterReferenceValue");return a===qt&&!Yl(r.sliceSerialize(g))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&i++<o?(e.consume(h),d):n(h)}}const dc={partial:!0,tokenize:Iv},pc={concrete:!0,name:"codeFenced",tokenize:Av};function Av(e,t,n){const r=this,i={partial:!0,tokenize:H};let o=0,a=0,l;return u;function u(E){return f(E)}function f(E){const W=r.events[r.events.length-1];return o=W&&W[1].type==="linePrefix"?W[2].sliceSerialize(W[1],!0).length:0,l=E,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(E)}function d(E){return E===l?(a++,e.consume(E),d):a<3?n(E):(e.exit("codeFencedFenceSequence"),Ge(E)?nt(e,h,"whitespace")(E):h(E))}function h(E){return E===null||Ie(E)?(e.exit("codeFencedFence"),r.interrupt?t(E):e.check(dc,S,z)(E)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===null||Ie(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(E)):Ge(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),nt(e,v,"whitespace")(E)):E===96&&E===l?n(E):(e.consume(E),g)}function v(E){return E===null||Ie(E)?h(E):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(E))}function x(E){return E===null||Ie(E)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(E)):E===96&&E===l?n(E):(e.consume(E),x)}function S(E){return e.attempt(i,z,D)(E)}function D(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),C}function C(E){return o>0&&Ge(E)?nt(e,F,"linePrefix",o+1)(E):F(E)}function F(E){return E===null||Ie(E)?e.check(dc,S,z)(E):(e.enter("codeFlowValue"),O(E))}function O(E){return E===null||Ie(E)?(e.exit("codeFlowValue"),F(E)):(e.consume(E),O)}function z(E){return e.exit("codeFenced"),t(E)}function H(E,W,oe){let ye=0;return j;function j(re){return E.enter("lineEnding"),E.consume(re),E.exit("lineEnding"),Q}function Q(re){return E.enter("codeFencedFence"),Ge(re)?nt(E,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(re):ee(re)}function ee(re){return re===l?(E.enter("codeFencedFenceSequence"),pe(re)):oe(re)}function pe(re){return re===l?(ye++,E.consume(re),pe):ye>=a?(E.exit("codeFencedFenceSequence"),Ge(re)?nt(E,ie,"whitespace")(re):ie(re)):oe(re)}function ie(re){return re===null||Ie(re)?(E.exit("codeFencedFence"),W(re)):oe(re)}}}function Iv(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Us={name:"codeIndented",tokenize:Ov},Dv={partial:!0,tokenize:Lv};function Ov(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),nt(e,o,"linePrefix",5)(f)}function o(f){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(f):n(f)}function a(f){return f===null?u(f):Ie(f)?e.attempt(Dv,a,u)(f):(e.enter("codeFlowValue"),l(f))}function l(f){return f===null||Ie(f)?(e.exit("codeFlowValue"),a(f)):(e.consume(f),l)}function u(f){return e.exit("codeIndented"),t(f)}}function Lv(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Ie(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):nt(e,o,"linePrefix",5)(a)}function o(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):Ie(a)?i(a):n(a)}}const Mv={name:"codeText",previous:Nv,resolve:jv,tokenize:Bv};function jv(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Nv(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Bv(e,t,n){let r=0,i,o;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),u(h))}function u(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),u):h===96?(o=e.enter("codeTextSequence"),i=0,d(h)):Ie(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("codeTextData"),f(h))}function f(h){return h===null||h===32||h===96||Ie(h)?(e.exit("codeTextData"),u(h)):(e.consume(h),f)}function d(h){return h===96?(e.consume(h),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(o.type="codeTextData",f(h))}}class zv{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Zi(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Zi(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Zi(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Zi(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Zi(this.left,n.reverse())}}}function Zi(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Yf(e){const t={};let n=-1,r,i,o,a,l,u,f;const d=new zv(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Fv(d,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=d.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},l=d.slice(i,n),l.unshift(r),d.splice(i,n-i+1,l))}}return dn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!f}function Fv(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,u=[],f={};let d,h,g=-1,v=n,x=0,S=0;const D=[S];for(;v;){for(;e.get(++i)[1]!==v;);o.push(i),v._tokenizer||(d=r.sliceStream(v),v.next||d.push(null),h&&a.defineSkip(v.start),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=v,v=v.next}for(v=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(S=g+1,D.push(S),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(a.events=[],v?(v._tokenizer=void 0,v.previous=void 0):D.pop(),g=D.length;g--;){const C=l.slice(D[g],D[g+1]),F=o.pop();u.push([F,F+C.length-1]),e.splice(F,2,C)}for(u.reverse(),g=-1;++g<u.length;)f[x+u[g][0]]=x+u[g][1],x+=u[g][1]-u[g][0]-1;return f}const $v={resolve:qv,tokenize:Kv},Uv={partial:!0,tokenize:Hv};function qv(e){return Yf(e),e}function Kv(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?o(l):Ie(l)?e.check(Uv,a,o)(l):(e.consume(l),i)}function o(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Hv(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),nt(e,o,"linePrefix")}function o(a){if(a===null||Ie(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Jf(e,t,n,r,i,o,a,l,u){const f=u||Number.POSITIVE_INFINITY;let d=0;return h;function h(C){return C===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(C),e.exit(o),g):C===null||C===32||C===41||ja(C)?n(C):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),S(C))}function g(C){return C===62?(e.enter(o),e.consume(C),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),v(C))}function v(C){return C===62?(e.exit("chunkString"),e.exit(l),g(C)):C===null||C===60||Ie(C)?n(C):(e.consume(C),C===92?x:v)}function x(C){return C===60||C===62||C===92?(e.consume(C),v):v(C)}function S(C){return!d&&(C===null||C===41||ht(C))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(C)):d<f&&C===40?(e.consume(C),d++,S):C===41?(e.consume(C),d--,S):C===null||C===32||C===40||ja(C)?n(C):(e.consume(C),C===92?D:S)}function D(C){return C===40||C===41||C===92?(e.consume(C),S):S(C)}}function Gf(e,t,n,r,i,o){const a=this;let l=0,u;return f;function f(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(o),d}function d(v){return l>999||v===null||v===91||v===93&&!u||v===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(v):v===93?(e.exit(o),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):Ie(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===null||v===91||v===93||Ie(v)||l++>999?(e.exit("chunkString"),d(v)):(e.consume(v),u||(u=!Ge(v)),v===92?g:h)}function g(v){return v===91||v===92||v===93?(e.consume(v),l++,h):h(v)}}function Zf(e,t,n,r,i,o){let a;return l;function l(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),a=g===40?41:g,u):n(g)}function u(g){return g===a?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(o),f(g))}function f(g){return g===a?(e.exit(o),u(a)):g===null?n(g):Ie(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),nt(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===a||g===null||Ie(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?h:d)}function h(g){return g===a||g===92?(e.consume(g),d):d(g)}}function fo(e,t){let n;return r;function r(i){return Ie(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ge(i)?nt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Vv={name:"definition",tokenize:Yv},Wv={partial:!0,tokenize:Jv};function Yv(e,t,n){const r=this;let i;return o;function o(v){return e.enter("definition"),a(v)}function a(v){return Gf.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function l(v){return i=jn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),u):n(v)}function u(v){return ht(v)?fo(e,f)(v):f(v)}function f(v){return Jf(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function d(v){return e.attempt(Wv,h,h)(v)}function h(v){return Ge(v)?nt(e,g,"whitespace")(v):g(v)}function g(v){return v===null||Ie(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):n(v)}}function Jv(e,t,n){return r;function r(l){return ht(l)?fo(e,i)(l):n(l)}function i(l){return Zf(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function o(l){return Ge(l)?nt(e,a,"whitespace")(l):a(l)}function a(l){return l===null||Ie(l)?t(l):n(l)}}const Gv={name:"hardBreakEscape",tokenize:Zv};function Zv(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Ie(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const Qv={name:"headingAtx",resolve:Xv,tokenize:ey};function Xv(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},dn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function ey(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),o(d)}function o(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||ht(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),u(d)):d===null||Ie(d)?(e.exit("atxHeading"),t(d)):Ge(d)?nt(e,l,"whitespace")(d):(e.enter("atxHeadingText"),f(d))}function u(d){return d===35?(e.consume(d),u):(e.exit("atxHeadingSequence"),l(d))}function f(d){return d===null||d===35||ht(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),f)}}const ty=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],mc=["pre","script","style","textarea"],ny={concrete:!0,name:"htmlFlow",resolveTo:oy,tokenize:ay},ry={partial:!0,tokenize:ly},iy={partial:!0,tokenize:sy};function oy(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ay(e,t,n){const r=this;let i,o,a,l,u;return f;function f(T){return d(T)}function d(T){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(T),h}function h(T){return T===33?(e.consume(T),g):T===47?(e.consume(T),o=!0,S):T===63?(e.consume(T),i=3,r.interrupt?t:w):Gt(T)?(e.consume(T),a=String.fromCharCode(T),D):n(T)}function g(T){return T===45?(e.consume(T),i=2,v):T===91?(e.consume(T),i=5,l=0,x):Gt(T)?(e.consume(T),i=4,r.interrupt?t:w):n(T)}function v(T){return T===45?(e.consume(T),r.interrupt?t:w):n(T)}function x(T){const Xe="CDATA[";return T===Xe.charCodeAt(l++)?(e.consume(T),l===Xe.length?r.interrupt?t:ee:x):n(T)}function S(T){return Gt(T)?(e.consume(T),a=String.fromCharCode(T),D):n(T)}function D(T){if(T===null||T===47||T===62||ht(T)){const Xe=T===47,Je=a.toLowerCase();return!Xe&&!o&&mc.includes(Je)?(i=1,r.interrupt?t(T):ee(T)):ty.includes(a.toLowerCase())?(i=6,Xe?(e.consume(T),C):r.interrupt?t(T):ee(T)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):o?F(T):O(T))}return T===45||qt(T)?(e.consume(T),a+=String.fromCharCode(T),D):n(T)}function C(T){return T===62?(e.consume(T),r.interrupt?t:ee):n(T)}function F(T){return Ge(T)?(e.consume(T),F):j(T)}function O(T){return T===47?(e.consume(T),j):T===58||T===95||Gt(T)?(e.consume(T),z):Ge(T)?(e.consume(T),O):j(T)}function z(T){return T===45||T===46||T===58||T===95||qt(T)?(e.consume(T),z):H(T)}function H(T){return T===61?(e.consume(T),E):Ge(T)?(e.consume(T),H):O(T)}function E(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),u=T,W):Ge(T)?(e.consume(T),E):oe(T)}function W(T){return T===u?(e.consume(T),u=null,ye):T===null||Ie(T)?n(T):(e.consume(T),W)}function oe(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||ht(T)?H(T):(e.consume(T),oe)}function ye(T){return T===47||T===62||Ge(T)?O(T):n(T)}function j(T){return T===62?(e.consume(T),Q):n(T)}function Q(T){return T===null||Ie(T)?ee(T):Ge(T)?(e.consume(T),Q):n(T)}function ee(T){return T===45&&i===2?(e.consume(T),ae):T===60&&i===1?(e.consume(T),de):T===62&&i===4?(e.consume(T),Te):T===63&&i===3?(e.consume(T),w):T===93&&i===5?(e.consume(T),Ae):Ie(T)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(ry,Pe,pe)(T)):T===null||Ie(T)?(e.exit("htmlFlowData"),pe(T)):(e.consume(T),ee)}function pe(T){return e.check(iy,ie,Pe)(T)}function ie(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),re}function re(T){return T===null||Ie(T)?pe(T):(e.enter("htmlFlowData"),ee(T))}function ae(T){return T===45?(e.consume(T),w):ee(T)}function de(T){return T===47?(e.consume(T),a="",me):ee(T)}function me(T){if(T===62){const Xe=a.toLowerCase();return mc.includes(Xe)?(e.consume(T),Te):ee(T)}return Gt(T)&&a.length<8?(e.consume(T),a+=String.fromCharCode(T),me):ee(T)}function Ae(T){return T===93?(e.consume(T),w):ee(T)}function w(T){return T===62?(e.consume(T),Te):T===45&&i===2?(e.consume(T),w):ee(T)}function Te(T){return T===null||Ie(T)?(e.exit("htmlFlowData"),Pe(T)):(e.consume(T),Te)}function Pe(T){return e.exit("htmlFlow"),t(T)}}function sy(e,t,n){const r=this;return i;function i(a){return Ie(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function ly(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(To,t,n)}}const uy={name:"htmlText",tokenize:cy};function cy(e,t,n){const r=this;let i,o,a;return l;function l(w){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(w),u}function u(w){return w===33?(e.consume(w),f):w===47?(e.consume(w),H):w===63?(e.consume(w),O):Gt(w)?(e.consume(w),oe):n(w)}function f(w){return w===45?(e.consume(w),d):w===91?(e.consume(w),o=0,x):Gt(w)?(e.consume(w),F):n(w)}function d(w){return w===45?(e.consume(w),v):n(w)}function h(w){return w===null?n(w):w===45?(e.consume(w),g):Ie(w)?(a=h,de(w)):(e.consume(w),h)}function g(w){return w===45?(e.consume(w),v):h(w)}function v(w){return w===62?ae(w):w===45?g(w):h(w)}function x(w){const Te="CDATA[";return w===Te.charCodeAt(o++)?(e.consume(w),o===Te.length?S:x):n(w)}function S(w){return w===null?n(w):w===93?(e.consume(w),D):Ie(w)?(a=S,de(w)):(e.consume(w),S)}function D(w){return w===93?(e.consume(w),C):S(w)}function C(w){return w===62?ae(w):w===93?(e.consume(w),C):S(w)}function F(w){return w===null||w===62?ae(w):Ie(w)?(a=F,de(w)):(e.consume(w),F)}function O(w){return w===null?n(w):w===63?(e.consume(w),z):Ie(w)?(a=O,de(w)):(e.consume(w),O)}function z(w){return w===62?ae(w):O(w)}function H(w){return Gt(w)?(e.consume(w),E):n(w)}function E(w){return w===45||qt(w)?(e.consume(w),E):W(w)}function W(w){return Ie(w)?(a=W,de(w)):Ge(w)?(e.consume(w),W):ae(w)}function oe(w){return w===45||qt(w)?(e.consume(w),oe):w===47||w===62||ht(w)?ye(w):n(w)}function ye(w){return w===47?(e.consume(w),ae):w===58||w===95||Gt(w)?(e.consume(w),j):Ie(w)?(a=ye,de(w)):Ge(w)?(e.consume(w),ye):ae(w)}function j(w){return w===45||w===46||w===58||w===95||qt(w)?(e.consume(w),j):Q(w)}function Q(w){return w===61?(e.consume(w),ee):Ie(w)?(a=Q,de(w)):Ge(w)?(e.consume(w),Q):ye(w)}function ee(w){return w===null||w===60||w===61||w===62||w===96?n(w):w===34||w===39?(e.consume(w),i=w,pe):Ie(w)?(a=ee,de(w)):Ge(w)?(e.consume(w),ee):(e.consume(w),ie)}function pe(w){return w===i?(e.consume(w),i=void 0,re):w===null?n(w):Ie(w)?(a=pe,de(w)):(e.consume(w),pe)}function ie(w){return w===null||w===34||w===39||w===60||w===61||w===96?n(w):w===47||w===62||ht(w)?ye(w):(e.consume(w),ie)}function re(w){return w===47||w===62||ht(w)?ye(w):n(w)}function ae(w){return w===62?(e.consume(w),e.exit("htmlTextData"),e.exit("htmlText"),t):n(w)}function de(w){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),me}function me(w){return Ge(w)?nt(e,Ae,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):Ae(w)}function Ae(w){return e.enter("htmlTextData"),a(w)}}const Jl={name:"labelEnd",resolveAll:py,resolveTo:my,tokenize:gy},fy={tokenize:vy},hy={tokenize:yy},dy={tokenize:by};function py(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&dn(e,0,e.length,n),e}function my(e,t){let n=e.length,r=0,i,o,a,l;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const u={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",u,t],["enter",f,t]],l=Tn(l,e.slice(o+1,o+r+3)),l=Tn(l,[["enter",d,t]]),l=Tn(l,Ga(t.parser.constructs.insideSpan.null,e.slice(o+r+4,a-3),t)),l=Tn(l,[["exit",d,t],e[a-2],e[a-1],["exit",f,t]]),l=Tn(l,e.slice(a+1)),l=Tn(l,[["exit",u,t]]),dn(e,o,e.length,l),e}function gy(e,t,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return l;function l(g){return o?o._inactive?h(g):(a=r.parser.defined.includes(jn(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),u):n(g)}function u(g){return g===40?e.attempt(fy,d,a?d:h)(g):g===91?e.attempt(hy,d,a?f:h)(g):a?d(g):h(g)}function f(g){return e.attempt(dy,d,h)(g)}function d(g){return t(g)}function h(g){return o._balanced=!0,n(g)}}function vy(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return ht(h)?fo(e,o)(h):o(h)}function o(h){return h===41?d(h):Jf(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return ht(h)?fo(e,u)(h):d(h)}function l(h){return n(h)}function u(h){return h===34||h===39||h===40?Zf(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function f(h){return ht(h)?fo(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function yy(e,t,n){const r=this;return i;function i(l){return Gf.call(r,e,o,a,"reference","referenceMarker","referenceString")(l)}function o(l){return r.parser.defined.includes(jn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function by(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const xy={name:"labelStartImage",resolveAll:Jl.resolveAll,tokenize:_y};function _y(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),o}function o(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ky={name:"labelStartLink",resolveAll:Jl.resolveAll,tokenize:wy};function wy(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const qs={name:"lineEnding",tokenize:Cy};function Cy(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),nt(e,t,"linePrefix")}}const sa={name:"thematicBreak",tokenize:Sy};function Sy(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),a(f)}function a(f){return i=f,l(f)}function l(f){return f===i?(e.enter("thematicBreakSequence"),u(f)):r>=3&&(f===null||Ie(f))?(e.exit("thematicBreak"),t(f)):n(f)}function u(f){return f===i?(e.consume(f),r++,u):(e.exit("thematicBreakSequence"),Ge(f)?nt(e,l,"whitespace")(f):l(f))}}const en={continuation:{tokenize:Ry},exit:Iy,name:"list",tokenize:Ey},Ty={partial:!0,tokenize:Dy},Py={partial:!0,tokenize:Ay};function Ey(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return l;function l(v){const x=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:pl(v)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(sa,n,f)(v):f(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(v)}return n(v)}function u(v){return pl(v)&&++a<10?(e.consume(v),u):(!r.interrupt||a<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),f(v)):n(v)}function f(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(To,r.interrupt?n:d,e.attempt(Ty,g,h))}function d(v){return r.containerState.initialBlankLine=!0,o++,g(v)}function h(v){return Ge(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),g):n(v)}function g(v){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function Ry(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(To,i,o);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,nt(e,t,"listItemIndent",r.containerState.size+1)(l)}function o(l){return r.containerState.furtherBlankLines||!Ge(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Py,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,nt(e,e.attempt(en,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Ay(e,t,n){const r=this;return nt(e,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(o):n(o)}}function Iy(e){e.exit(this.containerState.type)}function Dy(e,t,n){const r=this;return nt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!Ge(o)&&a&&a[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const gc={name:"setextUnderline",resolveTo:Oy,tokenize:Ly};function Oy(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function Ly(e,t,n){const r=this;let i;return o;function o(f){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=f,a(f)):n(f)}function a(f){return e.enter("setextHeadingLineSequence"),l(f)}function l(f){return f===i?(e.consume(f),l):(e.exit("setextHeadingLineSequence"),Ge(f)?nt(e,u,"lineSuffix")(f):u(f))}function u(f){return f===null||Ie(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const My={tokenize:jy};function jy(e){const t=this,n=e.attempt(To,r,e.attempt(this.parser.constructs.flowInitial,i,nt(e,e.attempt(this.parser.constructs.flow,i,e.attempt($v,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Ny={resolveAll:Xf()},By=Qf("string"),zy=Qf("text");function Qf(e){return{resolveAll:Xf(e==="text"?Fy:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,a,l);return a;function a(d){return f(d)?o(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return f(d)?(n.exit("data"),o(d)):(n.consume(d),u)}function f(d){if(d===null)return!0;const h=i[d];let g=-1;if(h)for(;++g<h.length;){const v=h[g];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function Xf(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function Fy(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,a=-1,l=0,u;for(;o--;){const f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(f===-2)u=!0,l++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const f={type:n===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const $y={42:en,43:en,45:en,48:en,49:en,50:en,51:en,52:en,53:en,54:en,55:en,56:en,57:en,62:Hf},Uy={91:Vv},qy={[-2]:Us,[-1]:Us,32:Us},Ky={35:Qv,42:sa,45:[gc,sa],60:ny,61:gc,95:sa,96:pc,126:pc},Hy={38:Wf,92:Vf},Vy={[-5]:qs,[-4]:qs,[-3]:qs,33:xy,38:Wf,42:ml,60:[kv,uy],91:ky,92:[Gv,Vf],93:Jl,95:ml,96:Mv},Wy={null:[ml,Ny]},Yy={null:[42,95]},Jy={null:[]},Gy=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Yy,contentInitial:Uy,disable:Jy,document:$y,flow:Ky,flowInitial:qy,insideSpan:Wy,string:Hy,text:Vy},Symbol.toStringTag,{value:"Module"}));function Zy(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],l=[];const u={attempt:W(H),check:W(E),consume:F,enter:O,exit:z,interrupt:W(E,{interrupt:!0})},f={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:e,previous:null,sliceSerialize:g,sliceStream:v,write:h};let d=t.tokenize.call(f,u);return t.resolveAll&&o.push(t),f;function h(Q){return a=Tn(a,Q),D(),a[a.length-1]!==null?[]:(oe(t,0),f.events=Ga(o,f.events,f),f.events)}function g(Q,ee){return Xy(v(Q),ee)}function v(Q){return Qy(a,Q)}function x(){const{_bufferIndex:Q,_index:ee,line:pe,column:ie,offset:re}=r;return{_bufferIndex:Q,_index:ee,line:pe,column:ie,offset:re}}function S(Q){i[Q.line]=Q.column,j()}function D(){let Q;for(;r._index<a.length;){const ee=a[r._index];if(typeof ee=="string")for(Q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Q&&r._bufferIndex<ee.length;)C(ee.charCodeAt(r._bufferIndex));else C(ee)}}function C(Q){d=d(Q)}function F(Q){Ie(Q)?(r.line++,r.column=1,r.offset+=Q===-3?2:1,j()):Q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=Q}function O(Q,ee){const pe=ee||{};return pe.type=Q,pe.start=x(),f.events.push(["enter",pe,f]),l.push(pe),pe}function z(Q){const ee=l.pop();return ee.end=x(),f.events.push(["exit",ee,f]),ee}function H(Q,ee){oe(Q,ee.from)}function E(Q,ee){ee.restore()}function W(Q,ee){return pe;function pe(ie,re,ae){let de,me,Ae,w;return Array.isArray(ie)?Pe(ie):"tokenize"in ie?Pe([ie]):Te(ie);function Te(Ne){return rt;function rt(st){const _e=st!==null&&Ne[st],_t=st!==null&&Ne.null,Dt=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(_t)?_t:_t?[_t]:[]];return Pe(Dt)(st)}}function Pe(Ne){return de=Ne,me=0,Ne.length===0?ae:T(Ne[me])}function T(Ne){return rt;function rt(st){return w=ye(),Ae=Ne,Ne.partial||(f.currentConstruct=Ne),Ne.name&&f.parser.constructs.disable.null.includes(Ne.name)?Je():Ne.tokenize.call(ee?Object.assign(Object.create(f),ee):f,u,Xe,Je)(st)}}function Xe(Ne){return Q(Ae,w),re}function Je(Ne){return w.restore(),++me<de.length?T(de[me]):ae}}}function oe(Q,ee){Q.resolveAll&&!o.includes(Q)&&o.push(Q),Q.resolve&&dn(f.events,ee,f.events.length-ee,Q.resolve(f.events.slice(ee),f)),Q.resolveTo&&(f.events=Q.resolveTo(f.events,f))}function ye(){const Q=x(),ee=f.previous,pe=f.currentConstruct,ie=f.events.length,re=Array.from(l);return{from:ie,restore:ae};function ae(){r=Q,f.previous=ee,f.currentConstruct=pe,f.events.length=ie,l=re,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Qy(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,o)];else{if(a=e.slice(n,i),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}function Xy(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function eb(e){const r={constructs:qf([Gy,...(e||{}).extensions||[]]),content:i(mv),defined:[],document:i(vv),flow:i(My),lazy:{},string:i(By),text:i(zy)};return r;function i(o){return a;function a(l){return Zy(r,o,l)}}}function tb(e){for(;!Yf(e););return e}const vc=/[\0\t\n\r]/g;function nb(){let e=1,t="",n=!0,r;return i;function i(o,a,l){const u=[];let f,d,h,g,v;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),h=0,t="",n&&(o.charCodeAt(0)===65279&&h++,n=void 0);h<o.length;){if(vc.lastIndex=h,f=vc.exec(o),g=f&&f.index!==void 0?f.index:o.length,v=o.charCodeAt(g),!f){t=o.slice(h);break}if(v===10&&h===g&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),h<g&&(u.push(o.slice(h,g)),e+=g-h),v){case 0:{u.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,u.push(-2);e++<d;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}h=g+1}return l&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const rb=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ib(e){return e.replace(rb,ob)}function ob(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Kf(n.slice(o?2:1),o?16:10)}return Yl(n)||e}const eh={}.hasOwnProperty;function ab(e,t,n){return typeof t!="string"&&(n=t,t=void 0),sb(n)(tb(eb(n).document().write(nb()(e,t,!0))))}function sb(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(yn),autolinkProtocol:ye,autolinkEmail:ye,atxHeading:o(Ot),blockQuote:o(_t),characterEscape:ye,characterReference:ye,codeFenced:o(Dt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Dt,a),codeText:o(Me,a),codeTextData:ye,data:ye,codeFlowValue:ye,definition:o(yt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(on),hardBreakEscape:o(vn),hardBreakTrailing:o(vn),htmlFlow:o(Wt,a),htmlFlowData:ye,htmlText:o(Wt,a),htmlTextData:ye,image:o(Nt),label:a,link:o(yn),listItem:o(Yt),listItemValue:g,listOrdered:o(hr,h),listUnordered:o(hr),paragraph:o(dr),reference:T,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(Ot),strong:o(En),thematicBreak:o(Rn)},exit:{atxHeading:u(),atxHeadingSequence:H,autolink:u(),autolinkEmail:_e,autolinkProtocol:st,blockQuote:u(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:Je,characterReferenceMarkerNumeric:Je,characterReferenceValue:Ne,characterReference:rt,codeFenced:u(D),codeFencedFence:S,codeFencedFenceInfo:v,codeFencedFenceMeta:x,codeFlowValue:j,codeIndented:u(C),codeText:u(re),codeTextData:j,data:j,definition:u(),definitionDestinationString:z,definitionLabelString:F,definitionTitleString:O,emphasis:u(),hardBreakEscape:u(ee),hardBreakTrailing:u(ee),htmlFlow:u(pe),htmlFlowData:j,htmlText:u(ie),htmlTextData:j,image:u(de),label:Ae,labelText:me,lineEnding:Q,link:u(ae),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Xe,resourceDestinationString:w,resourceTitleString:Te,resource:Pe,setextHeading:u(oe),setextHeadingLineSequence:W,setextHeadingText:E,strong:u(),thematicBreak:u()}};th(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(X){let fe={type:"root",children:[]};const De={stack:[fe],tokenStack:[],config:t,enter:l,exit:f,buffer:a,resume:d,data:n},Le=[];let et=-1;for(;++et<X.length;)if(X[et][1].type==="listOrdered"||X[et][1].type==="listUnordered")if(X[et][0]==="enter")Le.push(et);else{const Tt=Le.pop();et=i(X,Tt,et)}for(et=-1;++et<X.length;){const Tt=t[X[et][0]];eh.call(Tt,X[et][1].type)&&Tt[X[et][1].type].call(Object.assign({sliceSerialize:X[et][2].sliceSerialize},De),X[et][1])}if(De.tokenStack.length>0){const Tt=De.tokenStack[De.tokenStack.length-1];(Tt[1]||yc).call(De,void 0,Tt[0])}for(fe.position={start:wr(X.length>0?X[0][1].start:{line:1,column:1,offset:0}),end:wr(X.length>0?X[X.length-2][1].end:{line:1,column:1,offset:0})},et=-1;++et<t.transforms.length;)fe=t.transforms[et](fe)||fe;return fe}function i(X,fe,De){let Le=fe-1,et=-1,Tt=!1,At,Mt,bn,Lt;for(;++Le<=De;){const ke=X[Le];switch(ke[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ke[0]==="enter"?et++:et--,Lt=void 0;break}case"lineEndingBlank":{ke[0]==="enter"&&(At&&!Lt&&!et&&!bn&&(bn=Le),Lt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Lt=void 0}if(!et&&ke[0]==="enter"&&ke[1].type==="listItemPrefix"||et===-1&&ke[0]==="exit"&&(ke[1].type==="listUnordered"||ke[1].type==="listOrdered")){if(At){let Bt=Le;for(Mt=void 0;Bt--;){const Pt=X[Bt];if(Pt[1].type==="lineEnding"||Pt[1].type==="lineEndingBlank"){if(Pt[0]==="exit")continue;Mt&&(X[Mt][1].type="lineEndingBlank",Tt=!0),Pt[1].type="lineEnding",Mt=Bt}else if(!(Pt[1].type==="linePrefix"||Pt[1].type==="blockQuotePrefix"||Pt[1].type==="blockQuotePrefixWhitespace"||Pt[1].type==="blockQuoteMarker"||Pt[1].type==="listItemIndent"))break}bn&&(!Mt||bn<Mt)&&(At._spread=!0),At.end=Object.assign({},Mt?X[Mt][1].start:ke[1].end),X.splice(Mt||Le,0,["exit",At,ke[2]]),Le++,De++}if(ke[1].type==="listItemPrefix"){const Bt={type:"listItem",_spread:!1,start:Object.assign({},ke[1].start),end:void 0};At=Bt,X.splice(Le,0,["enter",Bt,ke[2]]),Le++,De++,bn=void 0,Lt=!0}}}return X[fe][1]._spread=Tt,De}function o(X,fe){return De;function De(Le){l.call(this,X(Le),Le),fe&&fe.call(this,Le)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(X,fe,De){this.stack[this.stack.length-1].children.push(X),this.stack.push(X),this.tokenStack.push([fe,De||void 0]),X.position={start:wr(fe.start),end:void 0}}function u(X){return fe;function fe(De){X&&X.call(this,De),f.call(this,De)}}function f(X,fe){const De=this.stack.pop(),Le=this.tokenStack.pop();if(Le)Le[0].type!==X.type&&(fe?fe.call(this,X,Le[0]):(Le[1]||yc).call(this,X,Le[0]));else throw new Error("Cannot close `"+X.type+"` ("+co({start:X.start,end:X.end})+"): itâs not open");De.position.end=wr(X.end)}function d(){return Wl(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function g(X){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(X),10),this.data.expectingFirstListItemValue=void 0}}function v(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=X}function x(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=X}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function D(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.value=X.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.value=X.replace(/(\r?\n|\r)$/g,"")}function F(X){const fe=this.resume(),De=this.stack[this.stack.length-1];De.label=fe,De.identifier=jn(this.sliceSerialize(X)).toLowerCase()}function O(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.title=X}function z(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.url=X}function H(X){const fe=this.stack[this.stack.length-1];if(!fe.depth){const De=this.sliceSerialize(X).length;fe.depth=De}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function W(X){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(X).codePointAt(0)===61?1:2}function oe(){this.data.setextHeadingSlurpLineEnding=void 0}function ye(X){const De=this.stack[this.stack.length-1].children;let Le=De[De.length-1];(!Le||Le.type!=="text")&&(Le=Ir(),Le.position={start:wr(X.start),end:void 0},De.push(Le)),this.stack.push(Le)}function j(X){const fe=this.stack.pop();fe.value+=this.sliceSerialize(X),fe.position.end=wr(X.end)}function Q(X){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=fe.children[fe.children.length-1];De.position.end=wr(X.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(fe.type)&&(ye.call(this,X),j.call(this,X))}function ee(){this.data.atHardBreak=!0}function pe(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.value=X}function ie(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.value=X}function re(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.value=X}function ae(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=fe,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function de(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=fe,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function me(X){const fe=this.sliceSerialize(X),De=this.stack[this.stack.length-2];De.label=ib(fe),De.identifier=jn(fe).toLowerCase()}function Ae(){const X=this.stack[this.stack.length-1],fe=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const Le=X.children;De.children=Le}else De.alt=fe}function w(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.url=X}function Te(){const X=this.resume(),fe=this.stack[this.stack.length-1];fe.title=X}function Pe(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function Xe(X){const fe=this.resume(),De=this.stack[this.stack.length-1];De.label=fe,De.identifier=jn(this.sliceSerialize(X)).toLowerCase(),this.data.referenceType="full"}function Je(X){this.data.characterReferenceType=X.type}function Ne(X){const fe=this.sliceSerialize(X),De=this.data.characterReferenceType;let Le;De?(Le=Kf(fe,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Le=Yl(fe);const et=this.stack[this.stack.length-1];et.value+=Le}function rt(X){const fe=this.stack.pop();fe.position.end=wr(X.end)}function st(X){j.call(this,X);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(X)}function _e(X){j.call(this,X);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(X)}function _t(){return{type:"blockquote",children:[]}}function Dt(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function yt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function on(){return{type:"emphasis",children:[]}}function Ot(){return{type:"heading",depth:0,children:[]}}function vn(){return{type:"break"}}function Wt(){return{type:"html",value:""}}function Nt(){return{type:"image",title:null,url:"",alt:null}}function yn(){return{type:"link",title:null,url:"",children:[]}}function hr(X){return{type:"list",ordered:X.type==="listOrdered",start:null,spread:X._spread,children:[]}}function Yt(X){return{type:"listItem",spread:X._spread,checked:null,children:[]}}function dr(){return{type:"paragraph",children:[]}}function En(){return{type:"strong",children:[]}}function Ir(){return{type:"text",value:""}}function Rn(){return{type:"thematicBreak"}}}function wr(e){return{line:e.line,column:e.column,offset:e.offset}}function th(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?th(e,r):lb(e,r)}}function lb(e,t){let n;for(n in t)if(eh.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function yc(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+co({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+co({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+co({start:t.start,end:t.end})+") is still open")}function bc(e){const t=this;t.parser=n;function n(r){return ab(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Na(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function ub(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const Za=function(e){if(e==null)return db;if(typeof e=="function")return Qa(e);if(typeof e=="object")return Array.isArray(e)?cb(e):fb(e);if(typeof e=="string")return hb(e);throw new Error("Expected function, string, or object as test")};function cb(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Za(e[n]);return Qa(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function fb(e){const t=e;return Qa(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function hb(e){return Qa(t);function t(n){return n&&n.type===e}}function Qa(e){return t;function t(n,r,i){return!!(pb(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function db(){return!0}function pb(e){return e!==null&&typeof e=="object"&&"type"in e}const nh=[],mb=!0,gl=!1,gb="skip";function rh(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Za(i),a=r?-1:1;l(e,void 0,[])();function l(u,f,d){const h=u&&typeof u=="object"?u:{};if(typeof h.type=="string"){const v=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(v?"<"+v+">":""))+")"})}return g;function g(){let v=nh,x,S,D;if((!t||o(u,f,d[d.length-1]||void 0))&&(v=vb(n(u,d)),v[0]===gl))return v;if("children"in u&&u.children){const C=u;if(C.children&&v[0]!==gb)for(S=(r?C.children.length:-1)+a,D=d.concat(C);S>-1&&S<C.children.length;){const F=C.children[S];if(x=l(F,S,D)(),x[0]===gl)return x;S=typeof x[1]=="number"?x[1]:S+a}}return v}}}function vb(e){return Array.isArray(e)?e:typeof e=="number"?[mb,e]:e==null?nh:[e]}function yb(e,t,n){const i=Za((n||{}).ignore||[]),o=bb(t);let a=-1;for(;++a<o.length;)rh(e,"text",l);function l(f,d){let h=-1,g;for(;++h<d.length;){const v=d[h],x=g?g.children:void 0;if(i(v,x?x.indexOf(v):void 0,g))return;g=v}if(g)return u(f,d)}function u(f,d){const h=d[d.length-1],g=o[a][0],v=o[a][1];let x=0;const D=h.children.indexOf(f);let C=!1,F=[];g.lastIndex=0;let O=g.exec(f.value);for(;O;){const z=O.index,H={index:O.index,input:O.input,stack:[...d,f]};let E=v(...O,H);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?g.lastIndex=z+1:(x!==z&&F.push({type:"text",value:f.value.slice(x,z)}),Array.isArray(E)?F.push(...E):E&&F.push(E),x=z+O[0].length,C=!0),!g.global)break;O=g.exec(f.value)}return C?(x<f.value.length&&F.push({type:"text",value:f.value.slice(x)}),h.children.splice(D,1,...F)):F=[f],D+F.length}}function bb(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([xb(i[0]),_b(i[1])])}return t}function xb(e){return typeof e=="string"?new RegExp(ub(e),"g"):e}function _b(e){return typeof e=="function"?e:function(){return e}}const Ks="phrasing",Hs=["autolink","link","image","label"];function kb(){return{transforms:[Rb],enter:{literalAutolink:Cb,literalAutolinkEmail:Vs,literalAutolinkHttp:Vs,literalAutolinkWww:Vs},exit:{literalAutolink:Eb,literalAutolinkEmail:Pb,literalAutolinkHttp:Sb,literalAutolinkWww:Tb}}}function wb(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ks,notInConstruct:Hs},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ks,notInConstruct:Hs},{character:":",before:"[ps]",after:"\\/",inConstruct:Ks,notInConstruct:Hs}]}}function Cb(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Vs(e){this.config.enter.autolinkProtocol.call(this,e)}function Sb(e){this.config.exit.autolinkProtocol.call(this,e)}function Tb(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Pb(e){this.config.exit.autolinkEmail.call(this,e)}function Eb(e){this.exit(e)}function Rb(e){yb(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ab],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,Ib]],{ignore:["link","linkReference"]})}function Ab(e,t,n,r,i){let o="";if(!ih(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!Db(n)))return!1;const a=Ob(n+r);if(!a[0])return!1;const l={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function Ib(e,t,n,r){return!ih(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Db(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Ob(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Na(e,"(");let o=Na(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function ih(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Qr(n)||Ja(n))&&(!t||n!==47)}oh.peek=Ub;function Lb(){this.buffer()}function Mb(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function jb(){this.buffer()}function Nb(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Bb(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=jn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function zb(e){this.exit(e)}function Fb(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=jn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function $b(e){this.exit(e)}function Ub(){return"["}function oh(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),l(),a(),o+=i.move("]"),o}function qb(){return{enter:{gfmFootnoteCallString:Lb,gfmFootnoteCall:Mb,gfmFootnoteDefinitionLabelString:jb,gfmFootnoteDefinition:Nb},exit:{gfmFootnoteCallString:Bb,gfmFootnoteCall:zb,gfmFootnoteDefinitionLabelString:Fb,gfmFootnoteDefinition:$b}}}function Kb(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:oh},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,a){const l=o.createTracker(a);let u=l.move("[^");const f=o.enter("footnoteDefinition"),d=o.enter("label");return u+=l.move(o.safe(o.associationId(r),{before:u,after:"]"})),d(),u+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),u+=l.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,l.current()),t?ah:Hb))),f(),u}}function Hb(e,t,n){return t===0?e:ah(e,t,n)}function ah(e,t,n){return(n?"":"    ")+e}const Vb=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];sh.peek=Zb;function Wb(){return{canContainEols:["delete"],enter:{strikethrough:Jb},exit:{strikethrough:Gb}}}function Yb(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Vb}],handlers:{delete:sh}}}function Jb(e){this.enter({type:"delete",children:[]},e)}function Gb(e){this.exit(e)}function sh(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function Zb(){return"~"}function Qb(e){return e.length}function Xb(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Qb,o=[],a=[],l=[],u=[];let f=0,d=-1;for(;++d<e.length;){const S=[],D=[];let C=-1;for(e[d].length>f&&(f=e[d].length);++C<e[d].length;){const F=e0(e[d][C]);if(n.alignDelimiters!==!1){const O=i(F);D[C]=O,(u[C]===void 0||O>u[C])&&(u[C]=O)}S.push(F)}a[d]=S,l[d]=D}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<f;)o[h]=xc(r[h]);else{const S=xc(r);for(;++h<f;)o[h]=S}h=-1;const g=[],v=[];for(;++h<f;){const S=o[h];let D="",C="";S===99?(D=":",C=":"):S===108?D=":":S===114&&(C=":");let F=n.alignDelimiters===!1?1:Math.max(1,u[h]-D.length-C.length);const O=D+"-".repeat(F)+C;n.alignDelimiters!==!1&&(F=D.length+F+C.length,F>u[h]&&(u[h]=F),v[h]=F),g[h]=O}a.splice(1,0,g),l.splice(1,0,v),d=-1;const x=[];for(;++d<a.length;){const S=a[d],D=l[d];h=-1;const C=[];for(;++h<f;){const F=S[h]||"";let O="",z="";if(n.alignDelimiters!==!1){const H=u[h]-(D[h]||0),E=o[h];E===114?O=" ".repeat(H):E===99?H%2?(O=" ".repeat(H/2+.5),z=" ".repeat(H/2-.5)):(O=" ".repeat(H/2),z=O):z=" ".repeat(H)}n.delimiterStart!==!1&&!h&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&F==="")&&(n.delimiterStart!==!1||h)&&C.push(" "),n.alignDelimiters!==!1&&C.push(O),C.push(F),n.alignDelimiters!==!1&&C.push(z),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||h!==f-1)&&C.push("|")}x.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return x.join(`
`)}function e0(e){return e==null?"":String(e)}function xc(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const _c={}.hasOwnProperty;function t0(e,t){const n=t||{};function r(i,...o){let a=r.invalid;const l=r.handlers;if(i&&_c.call(i,e)){const u=String(i[e]);a=_c.call(l,u)?l[u]:r.unknown}if(a)return a.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function n0(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(e,o.current()),r0);return i(),a}function r0(e,t,n){return">"+(n?"":" ")+e}function i0(e,t){return kc(e,t.inConstruct,!0)&&!kc(e,t.notInConstruct,!1)}function kc(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function wc(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&i0(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function o0(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+t.length,r=n.indexOf(t,i);return a}function a0(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function s0(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function l0(e,t,n,r){const i=s0(n),o=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(a0(e,n)){const h=n.enter("codeIndented"),g=n.indentLines(o,u0);return h(),g}const l=n.createTracker(r),u=i.repeat(Math.max(o0(o,i)+1,3)),f=n.enter("codeFenced");let d=l.move(u);if(e.lang){const h=n.enter(`codeFencedLang${a}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),h()}if(e.lang&&e.meta){const h=n.enter(`codeFencedMeta${a}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),h()}return d+=l.move(`
`),o&&(d+=l.move(o+`
`)),d+=l.move(u),f(),d}function u0(e,t,n){return(n?"":"    ")+e}function Gl(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function c0(e,t,n,r){const i=Gl(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("[");return f+=u.move(n.safe(n.associationId(e),{before:f,after:"]",...u.current()})),f+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(e.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(l=n.enter("destinationRaw"),f+=u.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...u.current()}))),l(),e.title&&(l=n.enter(`title${o}`),f+=u.move(" "+i),f+=u.move(n.safe(e.title,{before:f,after:i,...u.current()})),f+=u.move(i),l()),a(),f}function f0(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ko(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ba(e,t,n){const r=Pi(e),i=Pi(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}lh.peek=h0;function lh(e,t,n,r){const i=f0(n),o=n.enter("emphasis"),a=n.createTracker(r),l=a.move(i);let u=a.move(n.containerPhrasing(e,{after:i,before:l,...a.current()}));const f=u.charCodeAt(0),d=Ba(r.before.charCodeAt(r.before.length-1),f,i);d.inside&&(u=ko(f)+u.slice(1));const h=u.charCodeAt(u.length-1),g=Ba(r.after.charCodeAt(0),h,i);g.inside&&(u=u.slice(0,-1)+ko(h));const v=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},l+u+v}function h0(e,t,n){return n.options.emphasis||"*"}function uh(e,t,n,r){let i,o,a;typeof t=="function"&&typeof n!="function"?(o=void 0,a=t,i=n):(o=t,a=n,i=r),rh(e,o,l,i);function l(u,f){const d=f[f.length-1],h=d?d.children.indexOf(u):void 0;return a(u,h,d)}}function d0(e,t){let n=!1;return uh(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,gl}),!!((!e.depth||e.depth<3)&&Wl(e)&&(t.options.setext||n))}function p0(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(d0(e,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),g=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return h(),d(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const a="#".repeat(i),l=n.enter("headingAtx"),u=n.enter("phrasing");o.move(a+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=ko(f.charCodeAt(0))+f.slice(1)),f=f?a+" "+f:a,n.options.closeAtx&&(f+=" "+a),u(),l(),f}ch.peek=m0;function ch(e){return e.value||""}function m0(){return"<"}fh.peek=g0;function fh(e,t,n,r){const i=Gl(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const u=n.createTracker(r);let f=u.move("![");return f+=u.move(n.safe(e.alt,{before:f,after:"]",...u.current()})),f+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(e.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(l=n.enter("destinationRaw"),f+=u.move(n.safe(e.url,{before:f,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=n.enter(`title${o}`),f+=u.move(" "+i),f+=u.move(n.safe(e.title,{before:f,after:i,...u.current()})),f+=u.move(i),l()),f+=u.move(")"),a(),f}function g0(){return"!"}hh.peek=v0;function hh(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");const f=n.safe(e.alt,{before:u,after:"]",...l.current()});u+=l.move(f+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return a(),n.stack=d,o(),i==="full"||!f||f!==h?u+=l.move(h+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function v0(){return"!"}dh.peek=y0;function dh(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],l=n.compilePattern(a);let u;if(a.atBreak)for(;u=l.exec(r);){let f=u.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(u.index+1)}}return i+r+i}function y0(){return"`"}function ph(e,t){const n=Wl(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}mh.peek=b0;function mh(e,t,n,r){const i=Gl(n),o=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let l,u;if(ph(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let h=a.move("<");return h+=a.move(n.containerPhrasing(e,{before:h,after:">",...a.current()})),h+=a.move(">"),l(),n.stack=d,h}l=n.enter("link"),u=n.enter("label");let f=a.move("[");return f+=a.move(n.containerPhrasing(e,{before:f,after:"](",...a.current()})),f+=a.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=a.move("<"),f+=a.move(n.safe(e.url,{before:f,after:">",...a.current()})),f+=a.move(">")):(u=n.enter("destinationRaw"),f+=a.move(n.safe(e.url,{before:f,after:e.title?" ":")",...a.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=a.move(" "+i),f+=a.move(n.safe(e.title,{before:f,after:i,...a.current()})),f+=a.move(i),u()),f+=a.move(")"),l(),f}function b0(e,t,n){return ph(e,n)?"<":"["}gh.peek=x0;function gh(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");const f=n.containerPhrasing(e,{before:u,after:"]",...l.current()});u+=l.move(f+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return a(),n.stack=d,o(),i==="full"||!f||f!==h?u+=l.move(h+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function x0(){return"["}function Zl(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function _0(e){const t=Zl(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function k0(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function vh(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function w0(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?k0(n):Zl(n);const l=e.ordered?a==="."?")":".":_0(n);let u=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),vh(n)===a&&d){let h=-1;for(;++h<e.children.length;){const g=e.children[h];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=l),n.bulletCurrent=a;const f=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),f}function C0(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function S0(e,t,n,r){const i=C0(n);let o=n.bulletCurrent||Zl(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(r);l.move(o+" ".repeat(a-o.length)),l.shift(a);const u=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,l.current()),d);return u(),f;function d(h,g,v){return g?(v?"":" ".repeat(a))+h:(v?o:o+" ".repeat(a-o.length))+h}}function T0(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,r);return o(),i(),a}const P0=Za(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function E0(e,t,n,r){return(e.children.some(function(a){return P0(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function R0(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}yh.peek=A0;function yh(e,t,n,r){const i=R0(n),o=n.enter("strong"),a=n.createTracker(r),l=a.move(i+i);let u=a.move(n.containerPhrasing(e,{after:i,before:l,...a.current()}));const f=u.charCodeAt(0),d=Ba(r.before.charCodeAt(r.before.length-1),f,i);d.inside&&(u=ko(f)+u.slice(1));const h=u.charCodeAt(u.length-1),g=Ba(r.after.charCodeAt(0),h,i);g.inside&&(u=u.slice(0,-1)+ko(h));const v=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},l+u+v}function A0(e,t,n){return n.options.strong||"*"}function I0(e,t,n,r){return n.safe(e.value,r)}function D0(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function O0(e,t,n){const r=(vh(n)+(n.options.ruleSpaces?" ":"")).repeat(D0(n));return n.options.ruleSpaces?r.slice(0,-1):r}const bh={blockquote:n0,break:wc,code:l0,definition:c0,emphasis:lh,hardBreak:wc,heading:p0,html:ch,image:fh,imageReference:hh,inlineCode:dh,link:mh,linkReference:gh,list:w0,listItem:S0,paragraph:T0,root:E0,strong:yh,text:I0,thematicBreak:O0};function L0(){return{enter:{table:M0,tableData:Cc,tableHeader:Cc,tableRow:N0},exit:{codeText:B0,table:j0,tableData:Ws,tableHeader:Ws,tableRow:Ws}}}function M0(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function j0(e){this.exit(e),this.data.inTable=void 0}function N0(e){this.enter({type:"tableRow",children:[]},e)}function Ws(e){this.exit(e)}function Cc(e){this.enter({type:"tableCell",children:[]},e)}function B0(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,z0));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function z0(e,t){return t==="|"?t:e}function F0(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:a,tableCell:u,tableRow:l}};function a(v,x,S,D){return f(d(v,S,D),v.align)}function l(v,x,S,D){const C=h(v,S,D),F=f([C]);return F.slice(0,F.indexOf(`
`))}function u(v,x,S,D){const C=S.enter("tableCell"),F=S.enter("phrasing"),O=S.containerPhrasing(v,{...D,before:o,after:o});return F(),C(),O}function f(v,x){return Xb(v,{align:x,alignDelimiters:r,padding:n,stringLength:i})}function d(v,x,S){const D=v.children;let C=-1;const F=[],O=x.enter("table");for(;++C<D.length;)F[C]=h(D[C],x,S);return O(),F}function h(v,x,S){const D=v.children;let C=-1;const F=[],O=x.enter("tableRow");for(;++C<D.length;)F[C]=u(D[C],v,x,S);return O(),F}function g(v,x,S){let D=bh.inlineCode(v,x,S);return S.stack.includes("tableCell")&&(D=D.replace(/\|/g,"\\$&")),D}}function $0(){return{exit:{taskListCheckValueChecked:Sc,taskListCheckValueUnchecked:Sc,paragraph:q0}}}function U0(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:K0}}}function Sc(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function q0(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,a;for(;++o<i.length;){const l=i[o];if(l.type==="paragraph"){a=l;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function K0(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);o&&l.move(a);let u=bh.listItem(e,t,n,{...r,...l.current()});return o&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),u;function f(d){return d+a}}function H0(){return[kb(),qb(),Wb(),L0(),$0()]}function V0(e){return{extensions:[wb(),Kb(e),Yb(),F0(e),U0()]}}const W0={tokenize:X0,partial:!0},xh={tokenize:e1,partial:!0},_h={tokenize:t1,partial:!0},kh={tokenize:n1,partial:!0},Y0={tokenize:r1,partial:!0},wh={name:"wwwAutolink",tokenize:Z0,previous:Sh},Ch={name:"protocolAutolink",tokenize:Q0,previous:Th},fr={name:"emailAutolink",tokenize:G0,previous:Ph},Jn={};function J0(){return{text:Jn}}let Vr=48;for(;Vr<123;)Jn[Vr]=fr,Vr++,Vr===58?Vr=65:Vr===91&&(Vr=97);Jn[43]=fr;Jn[45]=fr;Jn[46]=fr;Jn[95]=fr;Jn[72]=[fr,Ch];Jn[104]=[fr,Ch];Jn[87]=[fr,wh];Jn[119]=[fr,wh];function G0(e,t,n){const r=this;let i,o;return a;function a(h){return!vl(h)||!Ph.call(r,r.previous)||Ql(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(h))}function l(h){return vl(h)?(e.consume(h),l):h===64?(e.consume(h),u):n(h)}function u(h){return h===46?e.check(Y0,d,f)(h):h===45||h===95||qt(h)?(o=!0,e.consume(h),u):d(h)}function f(h){return e.consume(h),i=!0,u}function d(h){return o&&i&&Gt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):n(h)}}function Z0(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!Sh.call(r,r.previous)||Ql(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(W0,e.attempt(xh,e.attempt(_h,o),n),n)(a))}function o(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function Q0(e,t,n){const r=this;let i="",o=!1;return a;function a(h){return(h===72||h===104)&&Th.call(r,r.previous)&&!Ql(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),e.consume(h),l):n(h)}function l(h){if(Gt(h)&&i.length<5)return i+=String.fromCodePoint(h),e.consume(h),l;if(h===58){const g=i.toLowerCase();if(g==="http"||g==="https")return e.consume(h),u}return n(h)}function u(h){return h===47?(e.consume(h),o?f:(o=!0,u)):n(h)}function f(h){return h===null||ja(h)||ht(h)||Qr(h)||Ja(h)?n(h):e.attempt(xh,e.attempt(_h,d),n)(h)}function d(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function X0(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),o):n(a)}function o(a){return a===null?n(a):t(a)}}function e1(e,t,n){let r,i,o;return a;function a(f){return f===46||f===95?e.check(kh,u,l)(f):f===null||ht(f)||Qr(f)||f!==45&&Ja(f)?u(f):(o=!0,e.consume(f),a)}function l(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),a}function u(f){return i||r||!o?n(f):t(f)}}function t1(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?o(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(kh,t,o)(a):a===null||ht(a)||Qr(a)?t(a):(e.consume(a),i)}function o(a){return a===41&&r++,e.consume(a),i}}function n1(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),o):l===93?(e.consume(l),i):l===60||l===null||ht(l)||Qr(l)?t(l):n(l)}function i(l){return l===null||l===40||l===91||ht(l)||Qr(l)?t(l):r(l)}function o(l){return Gt(l)?a(l):n(l)}function a(l){return l===59?(e.consume(l),r):Gt(l)?(e.consume(l),a):n(l)}}function r1(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return qt(o)?n(o):t(o)}}function Sh(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ht(e)}function Th(e){return!Gt(e)}function Ph(e){return!(e===47||vl(e))}function vl(e){return e===43||e===45||e===46||e===95||qt(e)}function Ql(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const i1={tokenize:h1,partial:!0};function o1(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:u1,continuation:{tokenize:c1},exit:f1}},text:{91:{name:"gfmFootnoteCall",tokenize:l1},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:a1,resolveTo:s1}}}}function a1(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!a||!a._balanced)return n(u);const f=jn(r.sliceSerialize({start:a.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function s1(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function l1(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,a;return l;function l(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),u}function u(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(h){if(o>999||h===93&&!a||h===null||h===91||ht(h))return n(h);if(h===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return i.includes(jn(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(h)}return ht(h)||(a=!0),o++,e.consume(h),h===92?d:f}function d(h){return h===91||h===92||h===93?(e.consume(h),o++,f):f(h)}}function u1(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0,l;return u;function u(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(x)}function d(x){if(a>999||x===93&&!l||x===null||x===91||ht(x))return n(x);if(x===93){e.exit("chunkString");const S=e.exit("gfmFootnoteDefinitionLabelString");return o=jn(r.sliceSerialize(S)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return ht(x)||(l=!0),a++,e.consume(x),x===92?h:d}function h(x){return x===91||x===92||x===93?(e.consume(x),a++,d):d(x)}function g(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),i.includes(o)||i.push(o),nt(e,v,"gfmFootnoteDefinitionWhitespace")):n(x)}function v(x){return t(x)}}function c1(e,t,n){return e.check(To,t,e.attempt(i1,t,n))}function f1(e){e.exit("gfmFootnoteDefinition")}function h1(e,t,n){const r=this;return nt(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(o):n(o)}}function d1(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,l){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let f=u;for(;f--;)if(a[f][0]==="exit"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[f][1].end.offset-a[f][1].start.offset){a[u][1].type="strikethroughSequence",a[f][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[f][1].start),end:Object.assign({},a[u][1].end)},h={type:"strikethroughText",start:Object.assign({},a[f][1].end),end:Object.assign({},a[u][1].start)},g=[["enter",d,l],["enter",a[f][1],l],["exit",a[f][1],l],["enter",h,l]],v=l.parser.constructs.insideSpan.null;v&&dn(g,g.length,0,Ga(v,a.slice(f+1,u),l)),dn(g,g.length,0,[["exit",h,l],["enter",a[u][1],l],["exit",a[u][1],l],["exit",d,l]]),dn(a,f-1,u-f+3,g),u=f+g.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function o(a,l,u){const f=this.previous,d=this.events;let h=0;return g;function g(x){return f===126&&d[d.length-1][1].type!=="characterEscape"?u(x):(a.enter("strikethroughSequenceTemporary"),v(x))}function v(x){const S=Pi(f);if(x===126)return h>1?u(x):(a.consume(x),h++,v);if(h<2&&!n)return u(x);const D=a.exit("strikethroughSequenceTemporary"),C=Pi(x);return D._open=!C||C===2&&!!S,D._close=!S||S===2&&!!C,l(x)}}}class p1{constructor(){this.map=[]}add(t,n,r){m1(this,t,n,r)}consume(t){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function m1(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function g1(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function v1(){return{flow:{null:{name:"table",tokenize:y1,resolveAll:b1}}}}function y1(e,t,n){const r=this;let i=0,o=0,a;return l;function l(j){let Q=r.events.length-1;for(;Q>-1;){const ie=r.events[Q][1].type;if(ie==="lineEnding"||ie==="linePrefix")Q--;else break}const ee=Q>-1?r.events[Q][1].type:null,pe=ee==="tableHead"||ee==="tableRow"?E:u;return pe===E&&r.parser.lazy[r.now().line]?n(j):pe(j)}function u(j){return e.enter("tableHead"),e.enter("tableRow"),f(j)}function f(j){return j===124||(a=!0,o+=1),d(j)}function d(j){return j===null?n(j):Ie(j)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),v):n(j):Ge(j)?nt(e,d,"whitespace")(j):(o+=1,a&&(a=!1,i+=1),j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),a=!0,d):(e.enter("data"),h(j)))}function h(j){return j===null||j===124||ht(j)?(e.exit("data"),d(j)):(e.consume(j),j===92?g:h)}function g(j){return j===92||j===124?(e.consume(j),h):h(j)}function v(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(e.enter("tableDelimiterRow"),a=!1,Ge(j)?nt(e,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):x(j))}function x(j){return j===45||j===58?D(j):j===124?(a=!0,e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),S):H(j)}function S(j){return Ge(j)?nt(e,D,"whitespace")(j):D(j)}function D(j){return j===58?(o+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),C):j===45?(o+=1,C(j)):j===null||Ie(j)?z(j):H(j)}function C(j){return j===45?(e.enter("tableDelimiterFiller"),F(j)):H(j)}function F(j){return j===45?(e.consume(j),F):j===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),O):(e.exit("tableDelimiterFiller"),O(j))}function O(j){return Ge(j)?nt(e,z,"whitespace")(j):z(j)}function z(j){return j===124?x(j):j===null||Ie(j)?!a||i!==o?H(j):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(j)):H(j)}function H(j){return n(j)}function E(j){return e.enter("tableRow"),W(j)}function W(j){return j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),W):j===null||Ie(j)?(e.exit("tableRow"),t(j)):Ge(j)?nt(e,W,"whitespace")(j):(e.enter("data"),oe(j))}function oe(j){return j===null||j===124||ht(j)?(e.exit("data"),W(j)):(e.consume(j),j===92?ye:oe)}function ye(j){return j===92||j===124?(e.consume(j),oe):oe(j)}}function b1(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],a=[0,0,0,0],l=!1,u=0,f,d,h;const g=new p1;for(;++n<e.length;){const v=e[n],x=v[1];v[0]==="enter"?x.type==="tableHead"?(l=!1,u!==0&&(Tc(g,t,u,f,d),d=void 0,u=0),f={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",f,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,h=void 0,o=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",d,t]])),i=x.type==="tableDelimiterRow"?2:d?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],h=Go(g,t,o,i,void 0,h),o=[0,0,0,0]),a[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],h=Go(g,t,o,i,void 0,h)),o=a,a=[o[1],n,0,0])):x.type==="tableHead"?(l=!0,u=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(u=n,o[1]!==0?(a[0]=a[1],h=Go(g,t,o,i,n,h)):a[1]!==0&&(h=Go(g,t,a,i,n,h)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&Tc(g,t,u,f,d),g.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=g1(t.events,n))}return e}function Go(e,t,n,r,i,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(o.end=Object.assign({},bi(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const u=bi(t.events,n[1]);if(o={type:a,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=bi(t.events,n[2]),d=bi(t.events,n[3]),h={type:l,start:Object.assign({},f),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",h,t]]),r!==2){const g=t.events[n[2]],v=t.events[n[3]];if(g[1].end=Object.assign({},v[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,S=n[3]-n[2]-1;e.add(x,S,[])}}e.add(n[3]+1,0,[["exit",h,t]])}return i!==void 0&&(o.end=Object.assign({},bi(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function Tc(e,t,n,r,i){const o=[],a=bi(t.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,t])),r.end=Object.assign({},a),o.push(["exit",r,t]),e.add(n+1,0,o)}function bi(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const x1={name:"tasklistCheck",tokenize:k1};function _1(){return{text:{91:x1}}}function k1(e,t,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),o)}function o(u){return ht(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(u)}function l(u){return Ie(u)?t(u):Ge(u)?e.check({tokenize:w1},t,n)(u):n(u)}}function w1(e,t,n){return nt(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function C1(e){return qf([J0(),o1(),d1(e),v1(),_1()])}const S1={};function Pc(e){const t=this,n=e||S1,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(C1(n)),o.push(H0()),a.push(V0(n))}function T1(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function P1(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function E1(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function R1(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function A1(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function I1(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ii(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=o+1,l+=1,e.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,u);const f={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,f),e.applyData(t,f)}function D1(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function O1(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Eh(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function L1(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Eh(e,t);const i={src:Ii(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function M1(e,t){const n={src:Ii(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function j1(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function N1(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Eh(e,t);const i={href:Ii(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function B1(e,t){const n={href:Ii(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function z1(e,t,n){const r=e.all(t),i=n?F1(n):Rh(t),o={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(i||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?a.push(...d.children):a.push(d)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,f),e.applyData(t,f)}function F1(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Rh(n[r])}return t}function Rh(e){const t=e.spread;return t??e.children.length>1}function $1(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function U1(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function q1(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function K1(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Ah=Dh("end"),Ih=Dh("start");function Dh(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function H1(e){const t=Ih(e),n=Ah(e);if(t&&n)return{start:t,end:n}}function V1(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Ih(t.children[1]),u=Ah(t.children[t.children.length-1]);l&&u&&(a.position={start:l,end:u}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function W1(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let u=-1;const f=[];for(;++u<l;){const h=t.children[u],g={},v=a?a[u]:void 0;v&&(g.align=v);let x={type:"element",tagName:o,properties:g,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),f.push(x)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,d),e.applyData(t,d)}function Y1(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Ec=9,Rc=32;function J1(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(Ac(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(Ac(t.slice(i),i>0,!1)),o.join("")}function Ac(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===Ec||o===Rc;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===Ec||o===Rc;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function G1(e,t){const n={type:"text",value:J1(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Z1(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Q1={blockquote:T1,break:P1,code:E1,delete:R1,emphasis:A1,footnoteReference:I1,heading:D1,html:O1,imageReference:L1,image:M1,inlineCode:j1,linkReference:N1,link:B1,listItem:z1,list:$1,paragraph:U1,root:q1,strong:K1,table:V1,tableCell:Y1,tableRow:W1,text:G1,thematicBreak:Z1,toml:Zo,yaml:Zo,definition:Zo,footnoteDefinition:Zo};function Zo(){}const Oh=-1,Xa=0,ho=1,za=2,Xl=3,eu=4,tu=5,nu=6,Lh=7,Mh=8,Ic=typeof self=="object"?self:globalThis,X1=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case Xa:case Oh:return n(a,i);case ho:{const l=n([],i);for(const u of a)l.push(r(u));return l}case za:{const l=n({},i);for(const[u,f]of a)l[r(u)]=r(f);return l}case Xl:return n(new Date(a),i);case eu:{const{source:l,flags:u}=a;return n(new RegExp(l,u),i)}case tu:{const l=n(new Map,i);for(const[u,f]of a)l.set(r(u),r(f));return l}case nu:{const l=n(new Set,i);for(const u of a)l.add(r(u));return l}case Lh:{const{name:l,message:u}=a;return n(new Ic[l](u),i)}case Mh:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new Ic[o](a),i)};return r},Dc=e=>X1(new Map,e)(0),yi="",{toString:ex}={},{keys:tx}=Object,Qi=e=>{const t=typeof e;if(t!=="object"||!e)return[Xa,t];const n=ex.call(e).slice(8,-1);switch(n){case"Array":return[ho,yi];case"Object":return[za,yi];case"Date":return[Xl,yi];case"RegExp":return[eu,yi];case"Map":return[tu,yi];case"Set":return[nu,yi];case"DataView":return[ho,n]}return n.includes("Array")?[ho,n]:n.includes("Error")?[Lh,n]:[za,n]},Qo=([e,t])=>e===Xa&&(t==="function"||t==="symbol"),nx=(e,t,n,r)=>{const i=(a,l)=>{const u=r.push(a)-1;return n.set(l,u),u},o=a=>{if(n.has(a))return n.get(a);let[l,u]=Qi(a);switch(l){case Xa:{let d=a;switch(u){case"bigint":l=Mh,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return i([Oh],a)}return i([l,d],a)}case ho:{if(u){let g=a;return u==="DataView"?g=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(a)),i([u,[...g]],a)}const d=[],h=i([l,d],a);for(const g of a)d.push(o(g));return h}case za:{if(u)switch(u){case"BigInt":return i([u,a.toString()],a);case"Boolean":case"Number":case"String":return i([u,a.valueOf()],a)}if(t&&"toJSON"in a)return o(a.toJSON());const d=[],h=i([l,d],a);for(const g of tx(a))(e||!Qo(Qi(a[g])))&&d.push([o(g),o(a[g])]);return h}case Xl:return i([l,a.toISOString()],a);case eu:{const{source:d,flags:h}=a;return i([l,{source:d,flags:h}],a)}case tu:{const d=[],h=i([l,d],a);for(const[g,v]of a)(e||!(Qo(Qi(g))||Qo(Qi(v))))&&d.push([o(g),o(v)]);return h}case nu:{const d=[],h=i([l,d],a);for(const g of a)(e||!Qo(Qi(g)))&&d.push(o(g));return h}}const{message:f}=a;return i([l,{name:u,message:f}],a)};return o},Oc=(e,{json:t,lossy:n}={})=>{const r=[];return nx(!(t||n),!!t,new Map,r)(e),r},Fa=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Dc(Oc(e,t)):structuredClone(e):(e,t)=>Dc(Oc(e,t));function rx(e,t){const n=[{type:"text",value:"â©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function ix(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function ox(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||rx,r=e.options.footnoteBackLabel||ix,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[u]);if(!f)continue;const d=e.all(f),h=String(f.identifier).toUpperCase(),g=Ii(h.toLowerCase());let v=0;const x=[],S=e.footnoteCounts.get(h);for(;S!==void 0&&++v<=S;){x.length>0&&x.push({type:"text",value:" "});let F=typeof n=="string"?n:n(u,v);typeof F=="string"&&(F={type:"text",value:F}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,v),className:["data-footnote-backref"]},children:Array.isArray(F)?F:[F]})}const D=d[d.length-1];if(D&&D.type==="element"&&D.tagName==="p"){const F=D.children[D.children.length-1];F&&F.type==="text"?F.value+=" ":D.children.push({type:"text",value:" "}),D.children.push(...x)}else d.push(...x);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(d,!0)};e.patch(f,C),l.push(C)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Fa(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const yl={}.hasOwnProperty,ax={};function sx(e,t){const n=t||ax,r=new Map,i=new Map,o=new Map,a={...Q1,...n.handlers},l={all:f,applyData:ux,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:u,options:n,patch:lx,wrap:fx};return uh(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:i,g=String(d.identifier).toUpperCase();h.has(g)||h.set(g,d)}}),l;function u(d,h){const g=d.type,v=l.handlers[g];if(yl.call(l.handlers,g)&&v)return v(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in d){const{children:S,...D}=d,C=Fa(D);return C.children=l.all(d),C}return Fa(d)}return(l.options.unknownHandler||cx)(l,d,h)}function f(d){const h=[];if("children"in d){const g=d.children;let v=-1;for(;++v<g.length;){const x=l.one(g[v],d);if(x){if(v&&g[v-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=Lc(x.value)),!Array.isArray(x)&&x.type==="element")){const S=x.children[0];S&&S.type==="text"&&(S.value=Lc(S.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function lx(e,t){e.position&&(t.position=H1(e))}function ux(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,Fa(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function cx(e,t){const n=t.data||{},r="value"in t&&!(yl.call(n,"hProperties")||yl.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fx(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Lc(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Mc(e,t){const n=sx(e,t),r=n.one(e,void 0),i=ox(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function jc(e,t){return e&&"run"in e?async function(n,r){const i=Mc(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Mc(n,{file:r,...e||t})}}const hx=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Po{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Po.prototype.normal={};Po.prototype.property={};Po.prototype.space=void 0;function jh(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Po(n,r,t)}function bl(e){return e.toLowerCase()}class rn{constructor(t,n){this.attribute=n,this.property=t}}rn.prototype.attribute="";rn.prototype.booleanish=!1;rn.prototype.boolean=!1;rn.prototype.commaOrSpaceSeparated=!1;rn.prototype.commaSeparated=!1;rn.prototype.defined=!1;rn.prototype.mustUseProperty=!1;rn.prototype.number=!1;rn.prototype.overloadedBoolean=!1;rn.prototype.property="";rn.prototype.spaceSeparated=!1;rn.prototype.space=void 0;let dx=0;const qe=ei(),Et=ei(),xl=ei(),ce=ei(),pt=ei(),wi=ei(),ln=ei();function ei(){return 2**++dx}const _l=Object.freeze(Object.defineProperty({__proto__:null,boolean:qe,booleanish:Et,commaOrSpaceSeparated:ln,commaSeparated:wi,number:ce,overloadedBoolean:xl,spaceSeparated:pt},Symbol.toStringTag,{value:"Module"})),Ys=Object.keys(_l);class ru extends rn{constructor(t,n,r,i){let o=-1;if(super(t,n),Nc(this,"space",i),typeof r=="number")for(;++o<Ys.length;){const a=Ys[o];Nc(this,Ys[o],(r&_l[a])===_l[a])}}}ru.prototype.defined=!0;function Nc(e,t,n){n&&(e[t]=n)}function Di(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new ru(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[bl(r)]=r,n[bl(o.attribute)]=r}return new Po(t,n,e.space)}const Nh=Di({properties:{ariaActiveDescendant:null,ariaAtomic:Et,ariaAutoComplete:null,ariaBusy:Et,ariaChecked:Et,ariaColCount:ce,ariaColIndex:ce,ariaColSpan:ce,ariaControls:pt,ariaCurrent:null,ariaDescribedBy:pt,ariaDetails:null,ariaDisabled:Et,ariaDropEffect:pt,ariaErrorMessage:null,ariaExpanded:Et,ariaFlowTo:pt,ariaGrabbed:Et,ariaHasPopup:null,ariaHidden:Et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pt,ariaLevel:ce,ariaLive:null,ariaModal:Et,ariaMultiLine:Et,ariaMultiSelectable:Et,ariaOrientation:null,ariaOwns:pt,ariaPlaceholder:null,ariaPosInSet:ce,ariaPressed:Et,ariaReadOnly:Et,ariaRelevant:null,ariaRequired:Et,ariaRoleDescription:pt,ariaRowCount:ce,ariaRowIndex:ce,ariaRowSpan:ce,ariaSelected:Et,ariaSetSize:ce,ariaSort:null,ariaValueMax:ce,ariaValueMin:ce,ariaValueNow:ce,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Bh(e,t){return t in e?e[t]:t}function zh(e,t){return Bh(e,t.toLowerCase())}const px=Di({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wi,acceptCharset:pt,accessKey:pt,action:null,allow:null,allowFullScreen:qe,allowPaymentRequest:qe,allowUserMedia:qe,alt:null,as:null,async:qe,autoCapitalize:null,autoComplete:pt,autoFocus:qe,autoPlay:qe,blocking:pt,capture:null,charSet:null,checked:qe,cite:null,className:pt,cols:ce,colSpan:null,content:null,contentEditable:Et,controls:qe,controlsList:pt,coords:ce|wi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qe,defer:qe,dir:null,dirName:null,disabled:qe,download:xl,draggable:Et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qe,formTarget:null,headers:pt,height:ce,hidden:xl,high:ce,href:null,hrefLang:null,htmlFor:pt,httpEquiv:pt,id:null,imageSizes:null,imageSrcSet:null,inert:qe,inputMode:null,integrity:null,is:null,isMap:qe,itemId:null,itemProp:pt,itemRef:pt,itemScope:qe,itemType:pt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qe,low:ce,manifest:null,max:null,maxLength:ce,media:null,method:null,min:null,minLength:ce,multiple:qe,muted:qe,name:null,nonce:null,noModule:qe,noValidate:qe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qe,optimum:ce,pattern:null,ping:pt,placeholder:null,playsInline:qe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qe,referrerPolicy:null,rel:pt,required:qe,reversed:qe,rows:ce,rowSpan:ce,sandbox:pt,scope:null,scoped:qe,seamless:qe,selected:qe,shadowRootClonable:qe,shadowRootDelegatesFocus:qe,shadowRootMode:null,shape:null,size:ce,sizes:null,slot:null,span:ce,spellCheck:Et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ce,step:null,style:null,tabIndex:ce,target:null,title:null,translate:null,type:null,typeMustMatch:qe,useMap:null,value:Et,width:ce,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pt,axis:null,background:null,bgColor:null,border:ce,borderColor:null,bottomMargin:ce,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qe,declare:qe,event:null,face:null,frame:null,frameBorder:null,hSpace:ce,leftMargin:ce,link:null,longDesc:null,lowSrc:null,marginHeight:ce,marginWidth:ce,noResize:qe,noHref:qe,noShade:qe,noWrap:qe,object:null,profile:null,prompt:null,rev:null,rightMargin:ce,rules:null,scheme:null,scrolling:Et,standby:null,summary:null,text:null,topMargin:ce,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ce,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qe,disableRemotePlayback:qe,prefix:null,property:null,results:ce,security:null,unselectable:null},space:"html",transform:zh}),mx=Di({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ln,accentHeight:ce,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ce,amplitude:ce,arabicForm:null,ascent:ce,attributeName:null,attributeType:null,azimuth:ce,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ce,by:null,calcMode:null,capHeight:ce,className:pt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ce,diffuseConstant:ce,direction:null,display:null,dur:null,divisor:ce,dominantBaseline:null,download:qe,dx:null,dy:null,edgeMode:null,editable:null,elevation:ce,enableBackground:null,end:null,event:null,exponent:ce,externalResourcesRequired:null,fill:null,fillOpacity:ce,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wi,g2:wi,glyphName:wi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ce,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ce,horizOriginX:ce,horizOriginY:ce,id:null,ideographic:ce,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ce,k:ce,k1:ce,k2:ce,k3:ce,k4:ce,kernelMatrix:ln,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ce,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ce,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ce,overlineThickness:ce,paintOrder:null,panose1:null,path:null,pathLength:ce,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ce,pointsAtY:ce,pointsAtZ:ce,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ln,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ln,rev:ln,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ln,requiredFeatures:ln,requiredFonts:ln,requiredFormats:ln,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ce,specularExponent:ce,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ce,strikethroughThickness:ce,string:null,stroke:null,strokeDashArray:ln,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ce,strokeOpacity:ce,strokeWidth:null,style:null,surfaceScale:ce,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ln,tabIndex:ce,tableValues:null,target:null,targetX:ce,targetY:ce,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ln,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ce,underlineThickness:ce,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ce,values:null,vAlphabetic:ce,vMathematical:ce,vectorEffect:null,vHanging:ce,vIdeographic:ce,version:null,vertAdvY:ce,vertOriginX:ce,vertOriginY:ce,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ce,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Bh}),Fh=Di({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),$h=Di({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:zh}),Uh=Di({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),gx=/[A-Z]/g,Bc=/-[a-z]/g,vx=/^data[-\w.:]+$/i;function yx(e,t){const n=bl(t);let r=t,i=rn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&vx.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Bc,xx);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Bc.test(o)){let a=o.replace(gx,bx);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=ru}return new i(r,t)}function bx(e){return"-"+e.toLowerCase()}function xx(e){return e.charAt(1).toUpperCase()}const _x=jh([Nh,px,Fh,$h,Uh],"html"),qh=jh([Nh,mx,Fh,$h,Uh],"svg"),kx=/["&'<>`]/g,wx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cx=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Sx=/[|\\{}()[\]^$+*?.]/g,zc=new WeakMap;function Tx(e,t){if(e=e.replace(t.subset?Px(t.subset):kx,r),t.subset||t.escapeOnly)return e;return e.replace(wx,n).replace(Cx,r);function n(i,o,a){return t.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,a.charCodeAt(o+2),t)}function r(i,o,a){return t.format(i.charCodeAt(0),a.charCodeAt(o+1),t)}}function Px(e){let t=zc.get(e);return t||(t=Ex(e),zc.set(e,t)),t}function Ex(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(Sx,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const Rx=/[\dA-Fa-f]/;function Ax(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!Rx.test(String.fromCharCode(t))?r:r+";"}const Ix=/\d/;function Dx(e,t,n){const r="&#"+String(e);return n&&t&&!Ix.test(String.fromCharCode(t))?r:r+";"}const Ox=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Js={nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",Agrave:"Ã",Aacute:"Ã",Acirc:"Ã",Atilde:"Ã",Auml:"Ã",Aring:"Ã",AElig:"Ã",Ccedil:"Ã",Egrave:"Ã",Eacute:"Ã",Ecirc:"Ã",Euml:"Ã",Igrave:"Ã",Iacute:"Ã",Icirc:"Ã",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã",Ograve:"Ã",Oacute:"Ã",Ocirc:"Ã",Otilde:"Ã",Ouml:"Ã",times:"Ã",Oslash:"Ã",Ugrave:"Ã",Uacute:"Ã",Ucirc:"Ã",Uuml:"Ã",Yacute:"Ã",THORN:"Ã",szlig:"Ã",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",divide:"Ã·",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",fnof:"Æ",Alpha:"Î",Beta:"Î",Gamma:"Î",Delta:"Î",Epsilon:"Î",Zeta:"Î",Eta:"Î",Theta:"Î",Iota:"Î",Kappa:"Î",Lambda:"Î",Mu:"Î",Nu:"Î",Xi:"Î",Omicron:"Î",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï",rho:"Ï",sigmaf:"Ï",sigma:"Ï",tau:"Ï",upsilon:"Ï",phi:"Ï",chi:"Ï",psi:"Ï",omega:"Ï",thetasym:"Ï",upsih:"Ï",piv:"Ï",bull:"â¢",hellip:"â¦",prime:"â²",Prime:"â³",oline:"â¾",frasl:"â",weierp:"â",image:"â",real:"â",trade:"â¢",alefsym:"âµ",larr:"â",uarr:"â",rarr:"â",darr:"â",harr:"â",crarr:"âµ",lArr:"â",uArr:"â",rArr:"â",dArr:"â",hArr:"â",forall:"â",part:"â",exist:"â",empty:"â",nabla:"â",isin:"â",notin:"â",ni:"â",prod:"â",sum:"â",minus:"â",lowast:"â",radic:"â",prop:"â",infin:"â",ang:"â ",and:"â§",or:"â¨",cap:"â©",cup:"âª",int:"â«",there4:"â´",sim:"â¼",cong:"â",asymp:"â",ne:"â ",equiv:"â¡",le:"â¤",ge:"â¥",sub:"â",sup:"â",nsub:"â",sube:"â",supe:"â",oplus:"â",otimes:"â",perp:"â¥",sdot:"â",lceil:"â",rceil:"â",lfloor:"â",rfloor:"â",lang:"â©",rang:"âª",loz:"â",spades:"â ",clubs:"â£",hearts:"â¥",diams:"â¦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Å",oelig:"Å",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",circ:"Ë",tilde:"Ë",ensp:"â",emsp:"â",thinsp:"â",zwnj:"â",zwj:"â",lrm:"â",rlm:"â",ndash:"â",mdash:"â",lsquo:"â",rsquo:"â",sbquo:"â",ldquo:"â",rdquo:"â",bdquo:"â",dagger:"â ",Dagger:"â¡",permil:"â°",lsaquo:"â¹",rsaquo:"âº",euro:"â¬"},Lx=["cent","copy","divide","gt","lt","not","para","times"],Kh={}.hasOwnProperty,kl={};let Xo;for(Xo in Js)Kh.call(Js,Xo)&&(kl[Js[Xo]]=Xo);const Mx=/[^\dA-Za-z]/;function jx(e,t,n,r){const i=String.fromCharCode(e);if(Kh.call(kl,i)){const o=kl[i],a="&"+o;return n&&Ox.includes(o)&&!Lx.includes(o)&&(!r||t&&t!==61&&Mx.test(String.fromCharCode(t)))?a:a+";"}return""}function Nx(e,t,n){let r=Ax(e,t,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=jx(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const o=Dx(e,t,n.omitOptionalSemicolons);o.length<r.length&&(r=o)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Ci(e,t){return Tx(e,Object.assign({format:Nx},t))}const Bx=/^>|^->|<!--|-->|--!>|<!-$/g,zx=[">"],Fx=["<",">"];function $x(e,t,n,r){return r.settings.bogusComments?"<?"+Ci(e.value,Object.assign({},r.settings.characterReferences,{subset:zx}))+">":"<!--"+e.value.replace(Bx,i)+"-->";function i(o){return Ci(o,Object.assign({},r.settings.characterReferences,{subset:Fx}))}}function Ux(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function qx(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Kx(e){return e.join(" ").trim()}const Hx=/[ \t\n\f\r]/g;function iu(e){return typeof e=="object"?e.type==="text"?Fc(e.value):!1:Fc(e)}function Fc(e){return e.replace(Hx,"")===""}const It=Vh(1),Hh=Vh(-1),Vx=[];function Vh(e){return t;function t(n,r,i){const o=n?n.children:Vx;let a=(r||0)+e,l=o[a];if(!i)for(;l&&iu(l);)a+=e,l=o[a];return l}}const Wx={}.hasOwnProperty;function Wh(e){return t;function t(n,r,i){return Wx.call(e,n.tagName)&&e[n.tagName](n,r,i)}}const ou=Wh({body:Jx,caption:Gs,colgroup:Gs,dd:Xx,dt:Qx,head:Gs,html:Yx,li:Zx,optgroup:e_,option:t_,p:Gx,rp:$c,rt:$c,tbody:r_,td:Uc,tfoot:i_,th:Uc,thead:n_,tr:o_});function Gs(e,t,n){const r=It(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&iu(r.value.charAt(0)))}function Yx(e,t,n){const r=It(n,t);return!r||r.type!=="comment"}function Jx(e,t,n){const r=It(n,t);return!r||r.type!=="comment"}function Gx(e,t,n){const r=It(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Zx(e,t,n){const r=It(n,t);return!r||r.type==="element"&&r.tagName==="li"}function Qx(e,t,n){const r=It(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Xx(e,t,n){const r=It(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function $c(e,t,n){const r=It(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function e_(e,t,n){const r=It(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function t_(e,t,n){const r=It(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function n_(e,t,n){const r=It(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function r_(e,t,n){const r=It(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function i_(e,t,n){return!It(n,t)}function o_(e,t,n){const r=It(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function Uc(e,t,n){const r=It(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const a_=Wh({body:u_,colgroup:c_,head:l_,html:s_,tbody:f_});function s_(e){const t=It(e,-1);return!t||t.type!=="comment"}function l_(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function u_(e){const t=It(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&iu(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function c_(e,t,n){const r=Hh(n,t),i=It(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&ou(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function f_(e,t,n){const r=Hh(n,t),i=It(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&ou(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const ea={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function h_(e,t,n,r){const i=r.schema,o=i.space==="svg"?!1:r.settings.omitOptionalTags;let a=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const l=[];let u;i.space==="html"&&e.tagName==="svg"&&(r.schema=qh);const f=d_(r,e.properties),d=r.all(i.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=i,d&&(a=!1),(f||!o||!a_(e,t,n))&&(l.push("<",e.tagName,f?" "+f:""),a&&(i.space==="svg"||r.settings.closeSelfClosing)&&(u=f.charAt(f.length-1),(!r.settings.tightSelfClosing||u==="/"||u&&u!=='"'&&u!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(d),!a&&(!o||!ou(e,t,n))&&l.push("</"+e.tagName+">"),l.join("")}function d_(e,t){const n=[];let r=-1,i;if(t){for(i in t)if(t[i]!==null&&t[i]!==void 0){const o=p_(e,i,t[i]);o&&n.push(o)}}for(;++r<n.length;){const o=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&o!=='"'&&o!=="'"&&(n[r]+=" ")}return n.join("")}function p_(e,t,n){const r=yx(e.schema,t),i=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let a=e.quote,l;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const u=Ci(r.attribute,Object.assign({},e.settings.characterReferences,{subset:ea.name[i][o]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?qx:Kx)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?u:(e.settings.preferUnquoted&&(l=Ci(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:ea.unquoted[i][o]}))),l!==n&&(e.settings.quoteSmart&&Na(n,a)>Na(n,e.alternative)&&(a=e.alternative),l=a+Ci(n,Object.assign({},e.settings.characterReferences,{subset:(a==="'"?ea.single:ea.double)[i][o],attribute:!0}))+a),u+(l&&"="+l))}const m_=["<","&"];function Yh(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:Ci(e.value,Object.assign({},r.settings.characterReferences,{subset:m_}))}function g_(e,t,n,r){return r.settings.allowDangerousHtml?e.value:Yh(e,t,n,r)}function v_(e,t,n,r){return r.all(e)}const y_=t0("type",{invalid:b_,unknown:x_,handlers:{comment:$x,doctype:Ux,element:h_,raw:g_,root:v_,text:Yh}});function b_(e){throw new Error("Expected node, not `"+e+"`")}function x_(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const __={},k_={},w_=[];function C_(e,t){const n=t||__,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:S_,all:T_,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||hx,characterReferences:n.characterReferences||k_,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?qh:_x,quote:r,alternative:i}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function S_(e,t,n){return y_(e,t,n,this)}function T_(e){const t=[],n=e&&e.children||w_;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function qc(e){const t=this,n={...t.data("settings"),...e};t.compiler=r;function r(i){return C_(i,n)}}const P_={minInterval:300,maxSize:1e6};class E_{states=[];currentIndex=-1;options;constructor(t){this.options=ag(t,P_)}undo(){if(-this.currentIndex>this.states.length)return;const t=this.states.at(this.currentIndex-1);if(t)return this.currentIndex--,t}redo(){if(this.currentIndex>=-1)return;const t=this.states.at(this.currentIndex+1);if(t)return this.currentIndex++,t}getSize=()=>this.states.reduce((t,n)=>t+n.value.length*2,0);saveState(t,n){const r=this.states.at(-1);if(r?.value===t)return;this.currentIndex<-1&&(this.states=this.states.slice(0,this.currentIndex+1)),this.currentIndex=-1,r&&Date.now()-r.timestamp.getTime()<=(this.options.minInterval??300)&&this.states.pop();let i=this.getSize();for(this.states.push({timestamp:new Date,cursor:n,value:t}),i+=t.length*2;i>(this.options.maxSize??1e6);){const o=this.states.shift();if(!o)break;i-=o.value.length*2}}}class R_{textarea;container;settings;pressedKeys;escapePressed=!1;onKeyDownValue;history;events=new EventTarget;constructor(t,n,r){this.textarea=t,this.container=n,this.settings=r,this.pressedKeys=new Set,t.addEventListener("keydown",this.handleKeyDown.bind(this)),t.addEventListener("keyup",this.handleKeyUp.bind(this)),t.addEventListener("focus",()=>{this.pressedKeys.clear(),this.escapePressed=!1}),t.addEventListener("blur",()=>{this.pressedKeys.clear()}),t.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.history=new E_(r.historyOpts),this.history.saveState(this.textarea.value,this.textarea.selectionStart);for(const i of r.listeners)t.addEventListener(...i)}isWordCharacter(t){return new RegExp(/^[a-zA-Z0-9_\-']*$/).test(t)}handleMouseDown(t){const n=this.getSelection().start,r=this.textarea.value.at(n);t.detail==2&&r!=`
`&&r!=" "&&requestAnimationFrame(()=>{const i=this.isWordCharacter(this.textarea.value[n]);let o=n,a=n;for(;o>=0&&this.isWordCharacter(this.textarea.value[o])==i&&this.textarea.value[o]!=" ";)o--;for(;a<this.textarea.value.length&&this.isWordCharacter(this.textarea.value[a])==i&&this.textarea.value[a]!=" ";)a++;this.textarea.setSelectionRange(o+1,a)})}handleKeyDown(t){const n=t.key.toLowerCase();this.pressedKeys.add(n);const r=this.settings.shortcuts.filter(i=>og(this.pressedKeys,i.combination));if(r.length>0){t.preventDefault(),r.length>1&&console.warn(`[carta] Multiple keyboard shortcuts have the same the combination: ${this.pressedKeys}`);for(const i of r)i.action(this),i.preventSave||this.history.saveState(this.textarea.value,this.textarea.selectionStart),this.update();this.onKeyDownValue=void 0;return}if(n==="enter")this.handleNewLine(t);else if(n=="tab"&&!this.escapePressed){t.preventDefault();let i=null;const o=this.settings.tabOuts.map(a=>a.delimiter).flat();for(const a of o)if(this.textarea.value.slice(this.textarea.selectionEnd,this.textarea.selectionEnd+a.length)===a){i=a;break}if(i){const a=this.textarea.selectionEnd+i.length;this.textarea.setSelectionRange(a,a)}else{if(t.shiftKey){const a=this.getLine(),l=a.start,u=a.value,f=this.textarea.selectionStart;u.startsWith("	")&&(this.removeAt(l,1),this.textarea.selectionStart=f-1,this.textarea.selectionEnd=f-1)}else{const a=this.textarea.selectionStart;this.insertAt(this.textarea.selectionStart,"	"),this.textarea.selectionStart=a+1,this.textarea.selectionEnd=a+1}this.update()}}else n==="escape"&&(this.escapePressed=!0);this.onKeyDownValue=this.textarea.value}handleKeyUp(t){const n=t.key.toLowerCase();this.pressedKeys.delete(n),this.onKeyDownValue!==void 0&&this.textarea.value!=this.onKeyDownValue&&this.history.saveState(this.textarea.value,this.textarea.selectionStart)}handleNewLine(t){const n=this.textarea.selectionStart;let r;for(r=n;r>0&&this.textarea.value.at(r-1)!==`
`;r--);const i=this.textarea.value.slice(r,n);for(const o of this.settings.prefixes){const a=o.match(i);if(a){t.preventDefault();const l=Array.isArray(a)?a[0]:a;if(i.slice(l.length).trim()===""){const h=this.getLine(r);this.removeAt(r,h.value.length),this.textarea.setSelectionRange(h.start,h.start),this.update();return}const f=o.maker(a,i);this.insertAt(n,`
`+f),this.update();const d=n+f.length+1;this.textarea.setSelectionRange(d,d);break}}}getSelection(){const t=this.textarea.selectionStart,n=this.textarea.selectionEnd;return{start:t,end:n,direction:this.textarea.selectionDirection,slice:this.textarea.value.slice(t,n)}}getLine(t=this.textarea.selectionStart){let n,r;for(n=t;n>0&&this.textarea.value.at(n-1)!==`
`;n--);for(r=t;r<this.textarea.value.length-1&&this.textarea.value.at(r)!==`
`;r++);return{start:n,end:r,value:this.textarea.value.slice(n,r)}}insertAt(t,n){const r=this.textarea.value;this.textarea.value=r.slice(0,t)+n+r.slice(t)}removeAt(t,n=1){const r=this.textarea.value;this.textarea.value=r.slice(0,t)+r.slice(t+n)}toggleSelectionSurrounding(t){const n=this.getSelection(),r=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t[1]:t,o=this.textarea.value.slice(n.start-r.length,n.start),a=this.textarea.value.slice(n.end,n.end+i.length);o===r&&a===i?(this.removeAt(n.end,i.length),this.removeAt(n.start-r.length,r.length),this.textarea.setSelectionRange(n.start-i.length,n.end-i.length)):(this.insertAt(n.end,i),this.insertAt(n.start,r),this.textarea.setSelectionRange(n.start+r.length,n.end+r.length))}toggleLinePrefix(t,n="attach"){const r=this.getSelection();let i=r.start;for(;i>0&&this.textarea.value.at(i-1)!==`
`;)i--;let o=!0;const a=r.start;let l=r.end;for(;o;){for(this.textarea.value.slice(i,i+t.length)===t?n==="attach"&&this.textarea.value.at(i+t.length)===" "?(this.removeAt(i,t.length+1),l-=t.length+1):(this.removeAt(i,t.length),l-=t.length):n==="attach"?(this.insertAt(i,t+" "),l+=t.length+1):(this.insertAt(i,t),l+=t.length);i<this.textarea.value.length&&this.textarea.value.at(i)!==`
`;)i++;this.textarea.value.at(i)==`
`&&i++,o=i<l}this.textarea.setSelectionRange(a,l)}update=()=>this.events.dispatchEvent(new Event("update"));getCursorXY(t=this.textarea.selectionStart){const{offsetLeft:n,offsetTop:r}=this.textarea,i=document.createElement("div"),o=getComputedStyle(this.textarea);for(const g of o)i.style[g]=o[g];const l=this.textarea.tagName==="INPUT"?this.textarea.value.replace(/ /g,"."):this.textarea.value,u=l.substr(0,t);i.textContent=u,this.textarea.tagName==="TEXTAREA"&&(i.style.height="auto"),this.textarea.tagName==="INPUT"&&(i.style.width="auto");const f=document.createElement("span");f.className+="carta-font-code",f.textContent=l.substr(t)||".",i.appendChild(f),document.body.appendChild(i);const{offsetLeft:d,offsetTop:h}=f;return document.body.removeChild(i),{x:n+d,y:r+h,left:n+d,top:r+h,right:this.textarea.clientWidth-n,bottom:this.textarea.clientHeight-r}}moveElemToCaret(t){const n=t.clientWidth,r=t.clientHeight,i=this.getCursorXY(),o=this.getRowHeight();let a=i.left,l;n<this.container.clientWidth&&a+n-this.container.scrollLeft>=this.container.clientWidth&&(l=this.container.clientWidth-a,a=void 0);let u=i.top,f;r<this.container.clientHeight&&u+r-this.container.scrollTop>=this.container.clientHeight&&(f=this.container.clientHeight-u,u=void 0),t.style.left=a!==void 0?a+"px":"unset",t.style.right=l!==void 0?l+"px":"unset",t.style.top=u!==void 0?u+o+"px":"unset",t.style.bottom=f!==void 0?f+"px":"unset"}$bindToCaret(t,n){n.portal.appendChild(t);const r=Array.from(n.editorElement?.classList??[]).find(o=>o.startsWith("carta-theme__"));t.classList.add(r??"carta-theme__default"),t.style.position="fixed";const i=()=>{const o=this.getCursorXY(),a={x:o.x+this.textarea.getBoundingClientRect().left,y:o.y+this.textarea.getBoundingClientRect().top},l=this.getRowHeight(),u=t.clientWidth,f=t.clientHeight;let d=a.x,h;d+u>=window.innerWidth&&(h=window.innerWidth-d,d=void 0);let g=a.y,v;g+f>=window.innerHeight&&(v=window.innerHeight-g,g=void 0),t.style.left=d!==void 0?d+"px":"unset",t.style.right=h!==void 0?h+"px":"unset",t.style.top=g!==void 0?g+l+"px":"unset",t.style.bottom=v!==void 0?v+"px":"unset"};return this.textarea.addEventListener("input",i),window.addEventListener("resize",i),window.addEventListener("scroll",i),i(),{destroy:()=>{try{n.portal.removeChild(t)}catch{}this.textarea.removeEventListener("input",i),window.removeEventListener("resize",i),window.removeEventListener("scroll",i)}}}getRowHeight(){const t=getComputedStyle(this.container).lineHeight,n=parseFloat(t),r=parseFloat(getComputedStyle(this.container).fontSize);return isNaN(n)?Math.ceil(r*1.2):t.endsWith("em")?Math.ceil(n*r):t.endsWith("%")?Math.ceil(n/100*r):t.endsWith("px")?Math.ceil(n):Math.ceil(r*n)}}const A_=[{id:"bold",combination:new Set(["control","b"]),action:e=>e.toggleSelectionSurrounding("**")},{id:"italic",combination:new Set(["control","i"]),action:e=>e.toggleSelectionSurrounding("*")},{id:"quote",combination:new Set(["control","shift",","]),action:e=>e.toggleLinePrefix(">")},{id:"link",combination:new Set(["control","k"]),action:e=>{e.toggleSelectionSurrounding(["[","]"]);const t=e.getSelection().end+1;e.insertAt(t,"(url)"),e.textarea.setSelectionRange(t+1,t+4)}},{id:"strikethrough",combination:new Set(["control","shift","x"]),action:e=>e.toggleSelectionSurrounding("~~")},{id:"code",combination:new Set(["control","e"]),action:e=>e.toggleSelectionSurrounding("`")},{id:"undo",combination:new Set(["control","z"]),preventSave:!0,action:e=>{const t=e.history.undo();t&&(e.textarea.value=t.value,e.textarea.selectionStart=t.cursor,e.textarea.selectionEnd=t.cursor)}},{id:"redo",combination:new Set(["control","y"]),preventSave:!0,action:e=>{const t=e.history.redo();t&&(e.textarea.value=t.value,e.textarea.selectionStart=t.cursor,e.textarea.selectionEnd=t.cursor)}}];var I_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M4.5 2.75a.75.75 0 0 0-1.5 0v10.5a.75.75 0 0 0 1.5 0v-4.5h7v4.5a.75.75 0 0 0 1.5 0V2.75a.75.75 0 0 0-1.5 0v4.5h-7v-4.5Z" clip-rule="evenodd"></path></svg>');function D_(e){var t=I_();se(e,t)}var O_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M6.5 2a.75.75 0 0 0 0 1.5h1.93l-2.412 9H4A.75.75 0 0 0 4 14h5.5a.75.75 0 0 0 0-1.5H7.57l2.412-9H12A.75.75 0 0 0 12 2H6.5Z" clip-rule="evenodd"></path></svg>');function L_(e){var t=O_();se(e,t)}var M_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M4 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h5.5a3.5 3.5 0 0 0 1.852-6.47A3.5 3.5 0 0 0 8.5 2H4Zm4.5 5a1.5 1.5 0 1 0 0-3H5v3h3.5ZM5 9v3h4.5a1.5 1.5 0 0 0 0-3H5Z" clip-rule="evenodd"></path></svg>');function j_(e){var t=M_();se(e,t)}var N_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M1.5 3.75a.75.75 0 0 0-1.5 0v8.5a.75.75 0 0 0 1.5 0v-8.5ZM4.75 3a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Zm0 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm-.75 5a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg>');function B_(e){var t=N_();se(e,t)}var z_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M9.929 3.132a2.078 2.078 0 1 1 2.94 2.94l-.65.648a.75.75 0 0 0 1.061 1.06l.649-.648a3.579 3.579 0 0 0-5.06-5.06L6.218 4.72a3.578 3.578 0 0 0 0 5.06a.75.75 0 0 0 1.061-1.06a2.078 2.078 0 0 1 0-2.94L9.93 3.132Zm-.15 3.086a.75.75 0 0 0-1.057 1.064c.816.81.818 2.13.004 2.942l-2.654 2.647a2.08 2.08 0 0 1-2.94-2.944l.647-.647a.75.75 0 0 0-1.06-1.06l-.648.647a3.58 3.58 0 0 0 5.06 5.066l2.654-2.647a3.575 3.575 0 0 0-.007-5.068Z" clip-rule="evenodd"></path></svg>');function F_(e){var t=z_();se(e,t)}var $_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M1 4.75a1 1 0 1 0 0-2a1 1 0 0 0 0 2ZM4.75 3a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm0 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm-.75 5a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75a.75.75 0 0 1-.75-.75ZM2 8a1 1 0 1 1-2 0a1 1 0 0 1 2 0Zm-1 5.25a1 1 0 1 0 0-2a1 1 0 0 0 0 2Z" clip-rule="evenodd"></path></svg>');function U_(e){var t=$_();se(e,t)}var q_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M0 2h2v4H1V3H0V2Zm1.637 9.008H0v-1h1.637a1.382 1.382 0 0 1 .803 2.506L1.76 13H3v1H0v-.972L1.859 11.7a.382.382 0 0 0-.222-.693ZM4.75 3a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm0 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H4.75Zm-.75 5a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg>');function K_(e){var t=q_();se(e,t)}var H_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M4.78 3.28a.75.75 0 0 0-1.06-1.06L1.75 4.19l-.47-.47A.75.75 0 0 0 .22 4.78l1 1a.75.75 0 0 0 1.06 0l2.5-2.5ZM6 3.75A.75.75 0 0 1 6.75 3h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 6 3.75ZM6 8a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 6 8Zm.75 3.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Zm-1.97-1.28a.75.75 0 0 1 0 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0l-1-1a.75.75 0 1 1 1.06-1.06l.47.47l1.97-1.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg>');function V_(e){var t=H_();se(e,t)}var W_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M9.424 2.023a.75.75 0 0 1 .556.904L7.48 13.42a.75.75 0 0 1-1.46-.348L8.52 2.58a.75.75 0 0 1 .904-.556ZM11.16 4.22a.75.75 0 0 1 1.06 0l3.25 3.25L16 8l-.53.53l-3.25 3.25a.75.75 0 1 1-1.06-1.06L13.88 8l-2.72-2.72a.75.75 0 0 1 0-1.06ZM4.84 5.28a.75.75 0 1 0-1.06-1.06L.53 7.47L0 8l.53.53l3.25 3.25a.75.75 0 0 0 1.06-1.06L2.12 8l2.72-2.72Z" clip-rule="evenodd"></path></svg>');function Y_(e){var t=W_();se(e,t)}var J_=zn('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="16" height="16" fill="none" stroke="none"></rect><path fill="currentColor" fill-rule="evenodd" d="M7.886 1a3.136 3.136 0 0 0-2.41 5.144L6.4 7.25H2.75a.75.75 0 0 0 0 1.5h4.899l1.722 2.066A1.636 1.636 0 0 1 8.114 13.5H8a1.75 1.75 0 0 1-1.75-1.75a.75.75 0 0 0-1.5 0A3.25 3.25 0 0 0 8 15h.114a3.136 3.136 0 0 0 2.41-5.144L9.6 8.75h3.649a.75.75 0 0 0 0-1.5H8.351L6.63 5.184A1.636 1.636 0 0 1 7.886 2.5H8c.966 0 1.75.784 1.75 1.75a.75.75 0 0 0 1.5 0A3.25 3.25 0 0 0 8 1h-.114Z" clip-rule="evenodd"></path></svg>');function G_(e){var t=J_();se(e,t)}const Z_=[{id:"heading",action:e=>e.toggleLinePrefix("###"),component:D_,label:"Heading"},{id:"bold",action:e=>e.toggleSelectionSurrounding("**"),component:j_,label:"Bold"},{id:"italic",action:e=>e.toggleSelectionSurrounding("*"),component:L_,label:"Italic"},{id:"strikethrough",action:e=>e.toggleSelectionSurrounding("~~"),component:G_,label:"Strikethrough"},{id:"quote",action:e=>e.toggleLinePrefix(">"),component:B_,label:"Quote"},{id:"code",action:e=>e.toggleSelectionSurrounding("`"),component:Y_,label:"Code"},{id:"link",action:e=>{e.toggleSelectionSurrounding(["[","]"]);const t=e.getSelection().end+1;e.insertAt(t,"(url)"),e.textarea.setSelectionRange(t+1,t+4)},component:F_,label:"Link"},{id:"bulletedList",action:e=>e.toggleLinePrefix("- ","detach"),component:U_,label:"Bulleted list"},{id:"numberedList",action:e=>e.toggleLinePrefix("1. ","detach"),component:K_,label:"Numbered list"},{id:"taskList",action:e=>e.toggleLinePrefix("- [ ] ","detach"),component:V_,label:"Task list"}],ta={taskList:/^(\s*)(-\s+\[)[ xX]?(\]\s+)/,bulletedList:/^(\s*)([-*]\s+)/,numberedList:/^(\s*)(\d+)(\.\s+)/,blockquote:/^(\s*)([> ]*[>]\s+)/},Q_=[{id:"taskList",match:e=>ta.taskList.exec(e),maker:e=>`${e[1]}${e[2]} ${e[3]}`},{id:"bulletedList",match:e=>ta.bulletedList.exec(e),maker:e=>`${e[1]}${e[2]}`},{id:"numberedList",match:e=>ta.numberedList.exec(e),maker:e=>`${e[1]}${Number(e[2])+1}${e[3]}`},{id:"blockquote",match:e=>ta.blockquote.exec(e),maker:e=>`${e[1]}${e[2]}`}];class X_{container;constructor(t){this.container=t}}const ek=[{id:"bold",delimiter:"**"},{id:"italic",delimiter:["*","_"]},{id:"link",delimiter:")"},{id:"strikethrough",delimiter:"~~"},{id:"inline-code",delimiter:"`"},{id:"block-code",delimiter:"\n```"}],Kc=["carta-render","carta-render-ssr"];class Jh{sanitizer;historyOptions;theme;shikiOptions;rehypeOptions;rendererDebounce;keyboardShortcuts;icons;prefixes;tabOuts;grammarRules;highlightingRules;textareaListeners;cartaListeners;components;dispatcher=new EventTarget;gfmOptions;syncProcessor;asyncProcessor;mElement;mInput;mRenderer;mHighlighter;mSyncTransformers=[];mAsyncTransformers=[];get element(){return this.mElement}get input(){return this.mInput}get renderer(){return this.mRenderer}async highlighter(){return this.mHighlighter?this.mHighlighter:(this.mHighlighter=(async()=>{const t=await Ma(()=>import("./highlight.CUmUhhwc.js"),__vite__mapDeps([0,1])),{loadHighlighter:n,loadDefaultTheme:r}=t;return n({theme:this.theme??await r(),grammarRules:this.grammarRules,highlightingRules:this.highlightingRules,shiki:this.shikiOptions})})(),this.mHighlighter)}elementsToBind=[];constructor(t){this.sanitizer=t?.sanitizer||void 0,this.historyOptions=t?.historyOptions,this.theme=t?.theme,this.shikiOptions=t?.shikiOptions,this.rendererDebounce=t?.rendererDebounce??300,this.keyboardShortcuts=[],this.icons=[],this.prefixes=[],this.tabOuts=[],this.textareaListeners=[],this.cartaListeners=[],this.components=[],this.grammarRules=[],this.highlightingRules=[],this.rehypeOptions=t?.rehypeOptions??{};const n=[];for(const r of t?.extensions??[])this.keyboardShortcuts.push(...r.shortcuts??[]),this.icons.push(...r.icons??[]),this.prefixes.push(...r.prefixes??[]),this.tabOuts.push(...r.tabOuts??[]),this.components.push(...r.components??[]),this.grammarRules.push(...r.grammarRules??[]),this.highlightingRules.push(...r.highlightingRules??[]),n.push(...r.listeners??[]);this.textareaListeners=n.filter(r=>!Kc.includes(r[0])),this.cartaListeners=n.filter(r=>Kc.includes(r[0])),this.cartaListeners.forEach(r=>{this.dispatcher.addEventListener(...r)}),this.keyboardShortcuts.push(...A_.filter(r=>t?.disableShortcuts===!0?!1:!t?.disableShortcuts?.includes(r.id))),this.icons.unshift(...Z_.filter(r=>t?.disableIcons===!0?!1:!t?.disableIcons?.includes(r.id))),this.prefixes.push(...Q_.filter(r=>t?.disablePrefixes===!0?!1:!t?.disablePrefixes?.includes(r.id))),this.tabOuts.push(...ek.filter(r=>t?.disableTabOuts===!0?!1:!t?.disableTabOuts?.includes(r.id))),this.mSyncTransformers=[],this.mAsyncTransformers=[];for(const r of t?.extensions??[])for(const i of r.transformers??[])i.execution==="sync"?this.mSyncTransformers.push(i):this.mAsyncTransformers.push(i);this.gfmOptions=t?.gfmOptions,this.syncProcessor=this.setupSynchronousProcessor({gfmOptions:this.gfmOptions,rehypeOptions:this.rehypeOptions}),this.asyncProcessor=this.setupAsynchronousProcessor({gfmOptions:this.gfmOptions,rehypeOptions:this.rehypeOptions});for(const r of t?.extensions??[])r.onLoad&&r.onLoad({carta:this})}setupSynchronousProcessor({gfmOptions:t,rehypeOptions:n}){const r=oc(),i=this.mSyncTransformers.filter(a=>a.type==="remark"),o=this.mSyncTransformers.filter(a=>a.type==="rehype");r.use(bc),r.use(Pc,t);for(const a of i)a.transform({processor:r,carta:this});r.use(jc,n);for(const a of o)a.transform({processor:r,carta:this});return r.use(qc),r}async setupAsynchronousProcessor({gfmOptions:t,rehypeOptions:n}){const r=oc(),i=[...this.mSyncTransformers,...this.mAsyncTransformers].filter(a=>a.type==="remark"),o=[...this.mSyncTransformers,...this.mAsyncTransformers].filter(a=>a.type==="rehype");r.use(bc),r.use(Pc,t);for(const a of i)await a.transform({processor:r,carta:this});r.use(jc,n);for(const a of o)await a.transform({processor:r,carta:this});return r.use(qc),r}async render(t){{const o=await Ma(()=>import("./highlight.CUmUhhwc.js"),__vite__mapDeps([0,1])),{loadNestedLanguages:a}=o,l=await this.highlighter();await a(l,t)}const r=await(await this.asyncProcessor).process(t);if(!r)return"";const i=String(r);return this.dispatcher.dispatchEvent(new Gu("carta-render",{detail:{carta:this}})),(this.sanitizer&&this.sanitizer(i))??i}renderSSR(t){const n=String(this.syncProcessor.processSync(t));return typeof n!="string"?"":(this.dispatcher.dispatchEvent(new Gu("carta-render-ssr",{detail:{carta:this}})),this.sanitizer?this.sanitizer(n):n)}$setElement(t){this.mElement=t}$setInput(t,n,r){const i=this.input;this.mInput=new R_(t,n,{shortcuts:this.keyboardShortcuts,prefixes:this.prefixes,tabOuts:this.tabOuts,listeners:this.textareaListeners,historyOpts:this.historyOptions}),i&&(i.events.removeEventListener("update",r),this.mInput.history=i.history),this.mInput.events.addEventListener("update",r),this.elementsToBind.forEach(o=>{o.callback=this.input?.$bindToCaret(o.elem,{portal:o.portal,editorElement:this.element}).destroy})}$setRenderer(t){this.mRenderer=new X_(t)}bindToCaret(t,n=document.querySelector("body")){let r;return this.input&&(r=this.input.$bindToCaret(t,{portal:n,editorElement:this.element}).destroy),this.elementsToBind.push({elem:t,portal:n,callback:r}),{destroy:()=>{r&&r(),this.elementsToBind=this.elementsToBind.filter(i=>i.elem!=t)}}}}class tk{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return nk(t).buffer}}function nk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(o,r),r+=i.byteLength}return n}function Gh(e){return new rk(e).unpack()}function Zh(e){const t=new ik,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class rk{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",o,a;for(;r<t;)o=n[r],o<160?(a=o,r++):(o^192)<32?(a=(o&31)<<6|n[r+1]&63,r+=2):(o^224)<16?(a=(o&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(a=(o&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(a);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,a=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*a}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class ik{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const o=this.pack(t[i]);return o instanceof Promise?o.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,o=Math.floor(i*2**52),a=2**32,l=n<<31|r+1023<<20|o/a&1048575,u=o%a;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(u)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=o=>{if(o<n.length){const a=n[o];if(t.hasOwnProperty(a)){this.pack(a);const l=this.pack(t[a]);if(l instanceof Promise)return l.then(()=>i(o+1))}return i(o+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new tk,this._textEncoder=new TextEncoder}}let Qh=!0,Xh=!0;function io(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function ti(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(a,l){if(a!==t)return i.apply(this,arguments);const u=f=>{const d=n(f);d&&(l.handleEvent?l.handleEvent(d):l(d))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,u),i.apply(this,[a,u])};const o=r.removeEventListener;r.removeEventListener=function(a,l){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const u=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,u])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function ok(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Qh=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ak(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Xh=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function ed(){if(typeof window=="object"){if(Qh)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function au(e,t){Xh&&console.warn(e+" is deprecated, please use "+t+" instead.")}function sk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(io(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(io(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(io(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=io(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Hc(e){return Object.prototype.toString.call(e)==="[object Object]"}function td(e){return Hc(e)?Object.keys(e).reduce(function(t,n){const r=Hc(e[n]),i=r?td(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function wl(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?wl(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{wl(e,e.get(i),n)})}))}function Vc(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(l=>{l.type===r&&l.trackId===a.id&&wl(e,l,i)})}),i}const Wc=ed;function nd(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const u={};return Object.keys(l).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const d=typeof l[f]=="object"?l[f]:{ideal:l[f]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const h=function(g,v){return g?g+v.charAt(0).toUpperCase()+v.slice(1):v==="deviceId"?"sourceId":v};if(d.ideal!==void 0){u.optional=u.optional||[];let g={};typeof d.ideal=="number"?(g[h("min",f)]=d.ideal,u.optional.push(g),g={},g[h("max",f)]=d.ideal,u.optional.push(g)):(g[h("",f)]=d.ideal,u.optional.push(g))}d.exact!==void 0&&typeof d.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[h("",f)]=d.exact):["min","max"].forEach(g=>{d[g]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[h(g,f)]=d[g])})}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},i=function(l,u){if(t.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const f=function(d,h,g){h in d&&!(g in d)&&(d[g]=d[h],delete d[h])};l=JSON.parse(JSON.stringify(l)),f(l.audio,"autoGainControl","googAutoGainControl"),f(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let f=l.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const d=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete l.video.facingMode;let h;if(f.exact==="environment"||f.ideal==="environment"?h=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(h=["front"]),h)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(x=>x.kind==="videoinput");let v=g.find(x=>h.some(S=>x.label.toLowerCase().includes(S)));return!v&&g.length&&h.includes("back")&&(v=g[g.length-1]),v&&(l.video.deviceId=f.exact?{exact:v.deviceId}:{ideal:v.deviceId}),l.video=r(l.video),Wc("chrome: "+JSON.stringify(l)),u(l)})}l.video=r(l.video)}return Wc("chrome: "+JSON.stringify(l)),u(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,u,f){i(l,d=>{n.webkitGetUserMedia(d,u,h=>{f&&f(o(h))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return i(u,f=>l(f).then(d=>{if(f.audio&&!d.getAudioTracks().length||f.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(o(d))))}}}function rd(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function id(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const a=new Event("track");a.track=i,a.receiver=o,a.transceiver={receiver:o},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ti(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function od(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){let f=i.apply(this,arguments);return f||(f=t(this,l),this._senders.push(f)),f};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const u=this._senders.indexOf(l);u!==-1&&this._senders.splice(u,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{const l=this._senders.find(u=>u.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ad(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(a=>a._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>Vc(a,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),ti(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Vc(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,a;return this.getSenders().forEach(l=>{l.track===r&&(i?a=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?a=!0:o=l),l.track===r)),a||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function sd(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(u)===-1&&this._shimmedLocalStreams[l.id].push(u):this._shimmedLocalStreams[l.id]=[l,u],u};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(f=>{if(this.getSenders().find(h=>h.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(f=>l.indexOf(f)===-1);this._shimmedLocalStreams[a.id]=[a].concat(u)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const u=this._shimmedLocalStreams[l].indexOf(a);u!==-1&&this._shimmedLocalStreams[l].splice(u,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function ld(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return sd(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(h=>this._reverseStreams[h.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(h=>{if(this.getSenders().find(v=>v.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const h=new e.MediaStream(d.getTracks());this._streams[d.id]=h,this._reverseStreams[h.id]=d,d=h}r.apply(this,[d])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},e.RTCPeerConnection.prototype.addTrack=function(d,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(S=>S===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[h.id];if(x)x.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new e.MediaStream([d]);this._streams[h.id]=S,this._reverseStreams[S.id]=h,this.addStream(S)}return this.getSenders().find(S=>S.track===d)};function o(f,d){let h=d.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const v=f._reverseStreams[g],x=f._streams[v.id];h=h.replace(new RegExp(x.id,"g"),v.id)}),new RTCSessionDescription({type:d.type,sdp:h})}function a(f,d){let h=d.sdp;return Object.keys(f._reverseStreams||[]).forEach(g=>{const v=f._reverseStreams[g],x=f._streams[v.id];h=h.replace(new RegExp(v.id,"g"),x.id)}),new RTCSessionDescription({type:d.type,sdp:h})}["createOffer","createAnswer"].forEach(function(f){const d=e.RTCPeerConnection.prototype[f],h={[f](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[x=>{const S=o(this,x);g[0].apply(null,[S])},x=>{g[1]&&g[1].apply(null,x)},arguments[2]]):d.apply(this,arguments).then(x=>o(this,x))}};e.RTCPeerConnection.prototype[f]=h[f]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=u.get.apply(this);return f.type===""?f:o(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(v=>{this._streams[v].getTracks().find(S=>d.track===S)&&(g=this._streams[v])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Cl(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function ud(e,t){ti(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Yc=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ud,shimAddTrackRemoveTrack:ld,shimAddTrackRemoveTrackWithNative:sd,shimGetSendersWithDtmf:od,shimGetUserMedia:nd,shimMediaStream:rd,shimOnTrack:id,shimPeerConnection:Cl,shimSenderReceiverGetStats:ad},Symbol.toStringTag,{value:"Module"}));function cd(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,a){au("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(a,l,u){l in a&&!(u in a)&&(a[u]=a[l],delete a[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const l=a.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function lk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function fd(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Sl(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,a,l]=arguments;return r.apply(this,[o||null]).then(u=>{if(t.version<53&&!a)try{u.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;u.forEach((d,h)=>{u.set(h,Object.assign({},d,{type:n[d.type]||d.type}))})}return u}).then(a,l)}}function hd(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function dd(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ti(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function pd(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){au("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function md(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function gd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:a}=o,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function vd(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function yd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function bd(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Jc=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:gd,shimCreateAnswer:bd,shimCreateOffer:yd,shimGetDisplayMedia:lk,shimGetParameters:vd,shimGetUserMedia:cd,shimOnTrack:fd,shimPeerConnection:Sl,shimRTCDataChannel:md,shimReceiverGetStats:dd,shimRemoveStream:pd,shimSenderGetStats:hd},Symbol.toStringTag,{value:"Module"}));function xd(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function _d(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,r.dispatchEvent(a)})}),t.apply(r,arguments)}}}function kd(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(f,d){const h=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[h]);return d?(g.then(f,d),Promise.resolve()):g},t.createAnswer=function(f,d){const h=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[h]);return d?(g.then(f,d),Promise.resolve()):g};let l=function(u,f,d){const h=i.apply(this,[u]);return d?(h.then(f,d),Promise.resolve()):h};t.setLocalDescription=l,l=function(u,f,d){const h=o.apply(this,[u]);return d?(h.then(f,d),Promise.resolve()):h},t.setRemoteDescription=l,l=function(u,f,d){const h=a.apply(this,[u]);return d?(h.then(f,d),Promise.resolve()):h},t.addIceCandidate=l}function wd(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(Cd(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function Cd(e){return e&&e.video!==void 0?Object.assign({},e,{video:td(e.video)}):e}function Sd(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let a=0;a<r.iceServers.length;a++){let l=r.iceServers[a];l.urls===void 0&&l.url?(au("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[a])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Td(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pd(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Ed(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Gc=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ed,shimCallbacksAPI:kd,shimConstraints:Cd,shimCreateOfferLegacy:Pd,shimGetUserMedia:wd,shimLocalStreamsAPI:xd,shimRTCIceServerUrls:Sd,shimRemoteStreamsAPI:_d,shimTrackEventTransceiver:Td},Symbol.toStringTag,{value:"Module"}));var Zs={exports:{}},Zc;function uk(){return Zc||(Zc=1,function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)i=o[a].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?o.push(a+"="+n.parameters[a]):o.push(a)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");r.profile=o[2];for(let l=3;l<o.length;l++){const u=o[l],f=t.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(f){const d=t.parseRtpMap(f),h=t.matchPrefix(n,"a=fmtp:"+u+" ");switch(d.parameters=h.length?t.parseFmtp(h[0]):{},d.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(t.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(t.parseExtmap(l))});const a=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(l=>{a.forEach(u=>{l.rtcpFeedback.find(d=>d.type===u.type&&d.parameter===u.parameter)||l.rtcpFeedback.push(u)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let o=0;return r.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),u=l.length>0&&l[0].ssrc;let f;const d=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(x=>parseInt(x,10)));d.length>0&&d[0].length>1&&d[0][0]===u&&(f=d[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let v={ssrc:u,codecPayloadType:parseInt(g.parameters.apt,10)};u&&f&&(v.rtx={ssrc:f}),r.push(v),o&&(v=JSON.parse(JSON.stringify(v)),v.fec={ssrc:u,mechanism:a?"red+ulpfec":"red"},r.push(v))}}),r.length===0&&u&&r.push({ssrc:u});let h=t.matchPrefix(n,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substring(5),10)*1e3*.95-50*40*8:h=void 0,r.forEach(g=>{g.maxBitrate=h})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const a=t.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const a=t.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){const u=l[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const a=r!==void 0?r:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t}(Zs)),Zs.exports}var Rd=uk();const Si=Kl(Rd),ck=Lp({__proto__:null,default:Si},[Rd]);function la(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),o=Si.parseCandidate(r.candidate);for(const a in o)a in i||Object.defineProperty(i,a,{value:o[a]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,ti(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Tl(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||ti(e,"icecandidate",t=>{if(t.candidate){const n=Si.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function ua(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const u=Si.splitSections(l.sdp);return u.shift(),u.some(f=>{const d=Si.parseMLine(f);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(l){const u=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const f=parseInt(u[1],10);return f!==f?-1:f},i=function(l){let u=65536;return t.browser==="firefox"&&(t.version<57?l===-1?u=16384:u=2147483637:t.version<60?u=t.version===57?65535:65536:u=2147483637),u},o=function(l,u){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const d=Si.matchPrefix(l.sdp,"a=max-message-size:");return d.length>0?f=parseInt(d[0].substring(19),10):t.browser==="firefox"&&u!==-1&&(f=2147483637),f},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),f=i(u),d=o(arguments[0],u);let h;f===0&&d===0?h=Number.POSITIVE_INFINITY:f===0||d===0?h=Math.max(f,d):h=Math.min(f,d);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return h}}),this._sctp=g}return a.apply(this,arguments)}}function ca(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const l=arguments[0],u=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},ti(e,"datachannel",r=>(t(r.channel,r.target),r))}function Pl(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function El(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function fa(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ha(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}const fk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:El,shimAddIceCandidateNullOrEmpty:fa,shimConnectionState:Pl,shimMaxMessageSize:ua,shimParameterlessSetLocalDescription:ha,shimRTCIceCandidate:la,shimRTCIceCandidateRelayProtocol:Tl,shimSendThrowTypeError:ca},Symbol.toStringTag,{value:"Module"}));function hk({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=ed,r=sk(e),i={browserDetails:r,commonShim:fk,extractVersion:io,disableLog:ok,disableWarnings:ak,sdp:ck};switch(r.browser){case"chrome":if(!Yc||!Cl||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Yc,fa(e,r),ha(e),nd(e,r),rd(e),Cl(e,r),id(e),ld(e,r),od(e),ad(e),ud(e,r),la(e),Tl(e),Pl(e),ua(e,r),ca(e),El(e,r);break;case"firefox":if(!Jc||!Sl||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Jc,fa(e,r),ha(e),cd(e,r),Sl(e,r),fd(e),pd(e),hd(e),dd(e),md(e),gd(e),vd(e),yd(e),bd(e),la(e),Pl(e),ua(e,r),ca(e);break;case"safari":if(!Gc||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Gc,fa(e,r),ha(e),Sd(e),Pd(e),kd(e),xd(e),_d(e),Td(e),wd(e),Ed(e),la(e),Tl(e),ua(e,r),ca(e),El(e,r);break;default:n("Unsupported browser!");break}return i}const Qc=hk({window:typeof window>"u"?void 0:window});function ni(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class Ad{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let o=0,a=0;for(;a<r;){const l=Math.min(r,a+this.chunkedMTU),u=t.slice(a,l),f={__peerData:this._dataCount,n:o,data:u,total:i};n.push(f),a=l,o++}return this._dataCount++,n}}}function dk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const Qs=Qc.default||Qc,Xi=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Qs.browserDetails.browser}getVersion(){return Qs.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Qs.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},pk=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Id=()=>Math.random().toString(36).slice(2),Xc={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class mk extends Ad{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Xc,this.browser=Xi.getBrowser(),this.browserVersion=Xi.getVersion(),this.pack=Zh,this.unpack=Gh,this.supports=function(){const n={browser:Xi.isBrowserSupported(),webRTC:Xi.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Xc),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Xi.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=pk,this.randomToken=Id}}const tn=new mk,gk="PeerJS: ";class vk{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[gk,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Se=new vk,su={},yk=Object.prototype.hasOwnProperty,Qt="~";function wo(){}Object.create&&(wo.prototype=Object.create(null),new wo().__proto__||(Qt=!1));function bk(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Dd(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new bk(n,r||e,i),a=Qt?Qt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function da(e,t){--e._eventsCount===0?e._events=new wo:delete e._events[t]}function Kt(){this._events=new wo,this._eventsCount=0}Kt.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)yk.call(n,r)&&t.push(Qt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Kt.prototype.listeners=function(t){var n=Qt?Qt+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a};Kt.prototype.listenerCount=function(t){var n=Qt?Qt+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Kt.prototype.emit=function(t,n,r,i,o,a){var l=Qt?Qt+t:t;if(!this._events[l])return!1;var u=this._events[l],f=arguments.length,d,h;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,n),!0;case 3:return u.fn.call(u.context,n,r),!0;case 4:return u.fn.call(u.context,n,r,i),!0;case 5:return u.fn.call(u.context,n,r,i,o),!0;case 6:return u.fn.call(u.context,n,r,i,o,a),!0}for(h=1,d=new Array(f-1);h<f;h++)d[h-1]=arguments[h];u.fn.apply(u.context,d)}else{var g=u.length,v;for(h=0;h<g;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),f){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,n);break;case 3:u[h].fn.call(u[h].context,n,r);break;case 4:u[h].fn.call(u[h].context,n,r,i);break;default:if(!d)for(v=1,d=new Array(f-1);v<f;v++)d[v-1]=arguments[v];u[h].fn.apply(u[h].context,d)}}return!0};Kt.prototype.on=function(t,n,r){return Dd(this,t,n,r,!1)};Kt.prototype.once=function(t,n,r){return Dd(this,t,n,r,!0)};Kt.prototype.removeListener=function(t,n,r,i){var o=Qt?Qt+t:t;if(!this._events[o])return this;if(!n)return da(this,o),this;var a=this._events[o];if(a.fn)a.fn===n&&(!i||a.once)&&(!r||a.context===r)&&da(this,o);else{for(var l=0,u=[],f=a.length;l<f;l++)(a[l].fn!==n||i&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[o]=u.length===1?u[0]:u:da(this,o)}return this};Kt.prototype.removeAllListeners=function(t){var n;return t?(n=Qt?Qt+t:t,this._events[n]&&da(this,n)):(this._events=new wo,this._eventsCount=0),this};Kt.prototype.off=Kt.prototype.removeListener;Kt.prototype.addListener=Kt.prototype.on;Kt.prefixed=Qt;Kt.EventEmitter=Kt;su=Kt;var ri={};ni(ri,"ConnectionType",()=>Rr);ni(ri,"PeerErrorType",()=>Rt);ni(ri,"BaseConnectionErrorType",()=>Rl);ni(ri,"DataConnectionErrorType",()=>lu);ni(ri,"SerializationType",()=>es);ni(ri,"SocketEventType",()=>Er);ni(ri,"ServerMessageType",()=>Ut);var Rr=function(e){return e.Data="data",e.Media="media",e}({}),Rt=function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e}({}),Rl=function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e}({}),lu=function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e}({}),es=function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e}({}),Er=function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e}({}),Ut=function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e}({});const Od="1.5.5";class xk extends su.EventEmitter{constructor(t,n,r,i,o,a=5e3){super(),this.pingInterval=a,this._disconnected=!0,this._messagesQueue=[];const l=t?"wss://":"ws://";this._baseUrl=l+n+":"+r+i+"peerjs?key="+o}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Od),this._disconnected=!1,this._socket.onmessage=i=>{let o;try{o=JSON.parse(i.data),Se.log("Server message received:",o)}catch{Se.log("Invalid server message",i.data);return}this.emit(Er.Message,o)},this._socket.onclose=i=>{this._disconnected||(Se.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Er.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Se.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Se.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Ut.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Er.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Ld{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Rr.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},o=n.createDataChannel(r.label,i);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Se.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;Se.log("Listening for ICE candidates."),t.onicecandidate=a=>{!a.candidate||!a.candidate.candidate||(Se.log(`Received ICE candidates for ${n}:`,a.candidate),o.socket.send({type:Ut.Candidate,payload:{candidate:a.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Se.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Rl.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Se.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Rl.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Se.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Se.log("Listening for data channel"),t.ondatachannel=a=>{Se.log("Received data channel");const l=a.channel;o.getConnection(n,r)._initializeDataChannel(l)},Se.log("Listening for remote stream"),t.ontrack=a=>{Se.log("Received remote stream");const l=a.streams[0],u=o.getConnection(n,r);if(u.type===Rr.Media){const f=u;this._addStreamToMediaConnection(l,f)}}}cleanup(){Se.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Se.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Se.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Rr.Data){const o=this.connection;i={...i,label:o.label,reliable:o.reliable,serialization:o.serialization}}n.socket.send({type:Ut.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Rt.WebRTC,i),Se.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Rt.WebRTC,r),Se.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Se.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Se.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Ut.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Rt.WebRTC,i),Se.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Rt.WebRTC,r),Se.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Se.log("Setting remote description",n);const o=this;try{await r.setRemoteDescription(n),Se.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await o._makeAnswer()}catch(a){i.emitError(Rt.WebRTC,a),Se.log("Failed to setRemoteDescription, ",a)}}async handleCandidate(t){Se.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Se.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Rt.WebRTC,n),Se.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Se.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Se.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Se.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class Md extends su.EventEmitter{emitError(t,n){Se.error("Error:",n),this.emit("error",new _k(`${t}`,n))}}class _k extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class jd extends Md{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class $a extends jd{static#e=this.ID_PREFIX="mc_";get type(){return Rr.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||$a.ID_PREFIX+tn.randomToken(),this._negotiator=new Ld(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Se.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Ut.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Ut.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Se.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Se.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class kk{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:o,key:a}=this._options,l=new URL(`${n}://${r}:${i}${o}${a}/${t}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",Od),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Se.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==tn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===tn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Se.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Ua extends jd{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Rr.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Ua.ID_PREFIX+Id(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Ld(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Se.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(lu.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Ut.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Ut.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Se.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class uu extends Ua{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Ua.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Se.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Xs extends uu{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new Ad,this.serialization=es.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=Gh(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=dk(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=Zh(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Se.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class wk extends uu{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=es.None}}class Ck extends uu{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=tn.chunkedMTU){this.emitError(lu.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=es.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class cu extends Md{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:wk,json:Ck,binary:Xs,"binary-utf8":Xs,default:Xs},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:tn.CLOUD_HOST,port:tn.CLOUD_PORT,path:"/",key:cu.DEFAULT_KEY,token:tn.randomToken(),config:tn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==tn.CLOUD_HOST?this._options.secure=tn.isSecure():this._options.host==tn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Se.setLogFunction(this._options.logFunction),Se.logLevel=this._options.debug||0,this._api=new kk(n),this._socket=this._createServerConnection(),!tn.supports.audioVideo&&!tn.supports.data){this._delayedAbort(Rt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!tn.validateId(r)){this._delayedAbort(Rt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Rt.ServerError,i))}_createServerConnection(){const t=new xk(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Er.Message,n=>{this._handleMessage(n)}),t.on(Er.Error,n=>{this._abort(Rt.SocketError,n)}),t.on(Er.Disconnected,()=>{this.disconnected||(this.emitError(Rt.Network,"Lost connection to server."),this.disconnect())}),t.on(Er.Close,()=>{this.disconnected||this._abort(Rt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Ut.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ut.Error:this._abort(Rt.ServerError,r.msg);break;case Ut.IdTaken:this._abort(Rt.UnavailableID,`ID "${this.id}" is taken`);break;case Ut.InvalidKey:this._abort(Rt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ut.Leave:Se.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Ut.Expire:this.emitError(Rt.PeerUnavailable,`Could not connect to peer ${i}`);break;case Ut.Offer:{const o=r.connectionId;let a=this.getConnection(i,o);if(a&&(a.close(),Se.warn(`Offer received for existing Connection ID:${o}`)),r.type===Rr.Media){const u=new $a(i,this,{connectionId:o,_payload:r,metadata:r.metadata});a=u,this._addConnection(i,a),this.emit("call",u)}else if(r.type===Rr.Data){const u=new this._serializers[r.serialization](i,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});a=u,this._addConnection(i,a),this.emit("connection",u)}else{Se.warn(`Received malformed connection type:${r.type}`);return}const l=this._getMessages(o);for(const u of l)a.handleMessage(u);break}default:{if(!r){Se.warn(`You received a malformed message from ${i} of type ${n}`);return}const o=r.connectionId,a=this.getConnection(i,o);a&&a.peerConnection?a.handleMessage(t):o?this._storeMessage(o,t):Se.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Rt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Rt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Se.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new $a(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Se.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Se.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Se.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Se.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Se.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Se.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Rt.ServerError,n))}}var ef=cu;function Sk(e,t){if(k(t)===0){$(t,1);return}if(k(t)===1){$(t,2);return}Dm(),$(t,0)}async function Tk(e,t){fetch("/ResuMate/template.md").then(n=>n.text()).then(n=>{$e(Zr,n)}).catch(n=>{console.log(n)})}async function Pk(e,t){fetch("/ResuMate/knowledge.md").then(n=>n.text()).then(n=>{$e(bo,n)}).catch(n=>{console.log(n)})}var Ek=(e,t)=>{$e(mn,t()=="None"?"Settings":"None")},Rk=(e,t,n)=>$e(Ti,k(n).id),Ak=Re('<button class="px-3 py-2 cursor-pointer hover:bg-surface0 w-full text-left"> </button>'),Ik=Re('<div class="absolute z-10 top-full mt-1 left-0 right-0 bg-mantle border border-surface0 rounded-md shadow-lg max-h-60 overflow-auto"></div>'),Dk=Re('<div class="px-3 py-2 hover:bg-surface0 w-full text-left flex justify-between items-center"><span> </span> <button class="text-red hover:text-maroon transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div>'),Ok=()=>{Im()},Lk=(e,t)=>t(),Mk=(e,t)=>t(),jk=Re('<div><span class="font-semibold">Your Code:</span> <span class="ml-2 px-2 py-1 rounded bg-surface0 text-blue font-mono select-all"> </span></div>'),Nk=Re('<div class="text-yellow-600 font-medium">Waiting for Peer to be ready...</div>'),Bk=(e,t)=>t(),zk=Re('<div class="space-y-2"><!> <div><button class="mt-2 px-3 py-1 rounded bg-green text-base-100 font-medium">Generate & Wait for Connection</button></div></div>'),Fk=(e,t)=>t(),$k=Re('<div class="space-y-2"><div><label class="font-semibold" for="peer-code-input">Enter Code:</label> <input id="peer-code-input" class="ml-2 px-2 py-1 rounded bg-surface0 border border-blue text-blue font-mono" placeholder="Paste code here" autocomplete="off"/></div> <div><button class="mt-2 px-3 py-1 rounded bg-green text-base-100 font-medium">Connect</button></div></div>'),Uk=Re('<div class="text-yellow-600 font-medium">Waiting for peer...</div>'),qk=Re('<div class="text-green-600 font-medium">Connected!</div>'),Kk=Re('<div class="text-blue-600 font-medium">Transferring data...</div>'),Hk=Re('<div class="text-green-700 font-semibold">Transfer complete!</div>'),Vk=Re('<div class="text-red-600 font-medium"> </div>'),Wk=Re('<div class="text-sm mt-1"> </div>'),Yk=(e,t)=>t(),Jk=(e,t)=>t(),Gk=Re('<div class="mt-2 bg-yellow-100 border border-yellow-400 rounded p-2"><div class="mb-2 font-semibold text-yellow-800">Import received data?</div> <button class="px-3 py-1 rounded bg-green text-base-100 font-medium mr-2">Yes, Import</button> <button class="px-3 py-1 rounded bg-red text-base-100 font-medium">Cancel</button></div>'),Zk=Re(`<div class="w-full h-full absolute top-0 left-0 grid grid-cols-1 bg-crust/70"><div class="w-11/12 max-h-[90vh] bg-base place-self-center rounded-lg shadow-xl overflow-hidden flex flex-col"><div class="grid grid-cols-2 p-4"><button class="bg-red hover:bg-maroon transition-all duration-200 p-2 w-8 h-8 rounded flex items-center justify-center" aria-label="Close settings"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg></button> <h1 class="place-self-end px-4 text-xl font-semibold flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 15a3 3 0 100-6 3 3 0 000 6z"></path><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path></svg> Settings</h1></div> <div class="px-6 py-4 grid grid-cols-2 gap-8 modal-content flex-1 pb-8"><div class="space-y-6"><h2 class="text-lg font-medium text-text mb-4 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg> Personal Information</h2> <div class="space-y-2"><label for="name" class="text-text text-sm font-medium block">Name</label> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200"/></div>  <div class="space-y-2"><div class="flex items-center justify-between"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Email</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0 cursor-pointer relative"><input id="email-toggle" type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle email display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0 cursor-pointer" for="email-toggle"></label></label></div></div> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="space-y-2"><div class="flex items-center justify-between"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg> Phone</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle phone display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0 cursor-pointer" for="phone-toggle"></label></div></div> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="space-y-2"><div class="flex items-center justify-between"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg> Website</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><input id="website-toggle" type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle website display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0 cursor-pointer" for="website-toggle"></label></div></div> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="space-y-2"><div class="flex items-center justify-between"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"></path></svg> LinkedIn</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><input id="linkedin-toggle" type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle LinkedIn display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0 cursor-pointer" for="linkedin-toggle"></label></div></div> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="space-y-2"><div class="flex items-center justify-between"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> GitHub</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle GitHub display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0"></label></div></div> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="space-y-2"><div class="flex items-center justify-between"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> Address</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle address display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0"></label></div></div> <input class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex items-center justify-between py-2"><label class="text-text text-sm font-medium flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"></path></svg> US Citizenship</label> <div class="relative inline-block w-10 mr-2 align-middle select-none"><input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-surface0 border-4 appearance-none cursor-pointer transition-transform duration-200 checked:translate-x-full checked:bg-blue" aria-label="Toggle US citizenship display"/> <label class="toggle-label block overflow-hidden h-5 rounded-full bg-overlay0"></label></div></div> <div class="space-y-2"><div>Use <a target="_blank" rel="noopener noreferrer" href="https://openrouter.ai/settings/keys" class="text-blue underline">OpenRouter</a> to tune your resume. Enter API Key.</div> <input type="text" placeholder="Enter your OpenRouter API Key" class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200"/> <div class="flex flex-row relative"><input type="text" placeholder="Search for a model..." class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200"/> <!></div></div> <div class="space-y-2"><div>Edit the keywords found in the job description and the
                        resume. This will give more accurate scores.</div> <div class="flex flex-row gap-2"><input type="text" placeholder="New Keyword" class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200"/> <button class="px-3 py-2 bg-blue hover:bg-sapphire transition-all duration-200 rounded text-mantle">Add</button></div> <div class="relative"><input type="text" placeholder="Search keywords..." class="w-full text-text px-3 py-2 bg-mantle rounded-md border border-surface0 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent transition-all duration-200 mb-2"/> <div class="border border-surface0 rounded-md shadow-lg max-h-60 overflow-auto bg-mantle"></div></div></div> <div class="space-y-4 pt-4"><div class="flex items-center gap-4"><button style="transform-origin: center;"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span><!></span></button></div> <div class="flex items-center gap-4"><button class="flex items-center gap-2 px-4 py-2 bg-blue hover:bg-sapphire transition-colors duration-200 rounded-md text-base"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Download Data</button> <div class="relative"><input type="file" id="file-input" accept=".json" class="hidden"/> <label for="file-input" class="flex items-center gap-2 px-4 py-2 bg-blue hover:bg-sapphire transition-colors duration-200 rounded-md text-base cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L12 4m4 4v12"></path></svg> Upload Data</label></div></div></div> <div class="rounded-lg border-2 border-blue bg-blue/10 p-4 mb-6 shadow peerjs-transfer-section"><div class="flex items-center gap-2 mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h4a2 2 0 012 2v1"></path></svg> <span class="font-semibold text-red text-lg">PeerJS Transfer UNDER CONSTRUCTION</span></div> <div class="flex gap-2 mb-4"><button>Send</button> <button>Receive</button></div> <!> <div class="mt-4"><!> <!> <!></div></div></div> <div class="space-y-4"><h2 class="text-lg font-medium text-text mb-4 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9M16.5 3.5a2.12 2.12 0 013 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> Resume Template</h2> <button class="w-full bg-blue hover:bg-sapphire transition-all duration-200 px-4 py-2 rounded-md text-base flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Fetch Resume Template</button> <div class="h-[calc(100vh-24rem)] w-full rounded-lg overflow-hidden border border-surface0"><!></div> <h2 class="text-lg font-medium text-text mb-4 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9M16.5 3.5a2.12 2.12 0 013 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> Resume Template</h2> <button class="w-full bg-blue hover:bg-sapphire transition-all duration-200 px-4 py-2 rounded-md text-base flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Fetch Sample Knowledge Base</button> <div>This is going to be all the knowlege passed into the llm
                    when tuning your resume.</div> <div class="h-[calc(100vh-24rem)] w-full rounded-lg overflow-hidden border border-surface0"><textarea class="w-full h-full overflow-y-scroll bg-mantle p-2">
                        hi
                    </textarea></div></div></div></div></div>`);function Qk(e,t){Vt(t,!0);const[n,r]=Xr(),i=()=>Fe(Zr,"$resumeTemplate",n),o=()=>Fe(bo,"$knowlegeBase",n),a=()=>Fe(ba,"$name",n),l=()=>Fe(xa,"$email",n),u=()=>Fe(Pa,"$enableEmail",n),f=()=>Fe(_a,"$phone",n),d=()=>Fe(Ea,"$enablePhone",n),h=()=>Fe(ka,"$website",n),g=()=>Fe(Ra,"$enableWebsite",n),v=()=>Fe(wa,"$linkedin",n),x=()=>Fe(Aa,"$enableLinkedin",n),S=()=>Fe(Ca,"$github",n),D=()=>Fe(Ia,"$enableGithub",n),C=()=>Fe(Sa,"$address",n),F=()=>Fe(Da,"$enableAddress",n),O=()=>Fe(Oa,"$showUSCitizenship",n),z=()=>Fe(mn,"$modalState",n),H=()=>Fe(Ta,"$openRouterKey",n),E=()=>Fe(Ti,"$openRouterAIModel",n),W=()=>Fe(Pr,"$keywords",n);let oe=Ee(0);Zt(()=>{if(k(oe)>0){const K=setTimeout(()=>{$(oe,0)},3e3);return()=>clearTimeout(K)}});let ye=Ee(null);Zt(()=>($(ye,new Jh({sanitizer:!1,theme:"catppuccin-mocha",extensions:[Lf]}),!0),()=>{$(ye,null)})),Zt(()=>{a(),l(),u(),f(),d(),h(),g(),v(),x(),S(),D(),C(),F(),O(),Ul()});function j(K){if(console.log("file upload"),console.log(K),!K||!K.target)return;const we=K.target.files[0];if(!we)return;const Ke=new FileReader;Ke.onload=function(He){try{if(!He.target||!He.target.result||typeof He.target.result!="string")return;Yu(He.target.result)}catch(ct){console.error("Error parsing JSON file:",ct)}},Ke.onerror=function(He){console.error("Error reading file:",He)},Ke.readAsText(we)}let Q=Ee(Ri([]));async function ee(){fetch("https://openrouter.ai/api/v1/models").then(K=>K.json()).then(K=>{$(Q,K.data,!0),console.log(K.data)}).catch(K=>{console.log(K)})}let pe=Ee(!1),ie=Ee(""),re=Ee(""),ae=Ee(null),de=Ee(null),me=Ee("idle"),Ae=Ee(""),w=Ee("send"),Te=Ee(""),Pe=Ee(""),T=Ee(!1),Xe=Ee(!1),Je=Ee(""),Ne=Ee(""),rt=Ee(!1),st=Ee(!1);function _e(){const K=Array.from({length:3},()=>Math.random().toString(36).substring(2,6)).join("-"),we=Math.random().toString(16).substring(2,6);return`${K}-${we}`}function _t(){if(k(ae))try{k(ae).destroy()}catch{}$(ae,null),$(de,null),$(me,"idle"),$(Ae,""),$(Te,""),$(Pe,""),$(T,!1),$(Xe,!1),$(Je,""),$(Ne,""),$(rt,!1),$(st,!1)}async function Dt(){_t(),$(w,"send"),$(Te,_e(),!0),$(me,"waiting"),$(st,!1);try{console.log("[PeerJS] Creating Peer (send mode) with ID:",k(Te)),$(ae,new ef(k(Te),{debug:2}),!0),console.log("[PeerJS] Peer object created:",k(ae)),k(ae).on("open",K=>{console.log("[PeerJS] Peer open (send mode). My ID:",K),$(st,!0),console.log("[PeerJS] Peer is now ready for connections.")}),k(ae).on("connection",K=>{console.log("[PeerJS] Incoming connection from:",K.peer),$(de,K,!0),$(me,"connected"),$(Je,"Peer connected. Preparing data..."),K.on("error",we=>{console.error("[PeerJS] Connection error (send mode):",we),$(Ae,"Connection error: "+we),$(me,"error")}),K.on("close",()=>{console.log("[PeerJS] Connection closed (send mode)"),$(me,"idle")}),Me()}),k(ae).on("disconnected",()=>{console.warn("[PeerJS] Peer disconnected (send mode)")}),k(ae).on("error",K=>{console.error("[PeerJS] PeerJS error (send mode):",K),$(Ae,"PeerJS error: "+K),$(me,"error")}),k(ae).on("close",()=>{console.log("[PeerJS] Peer closed (send mode)")})}catch(K){$(Ae,"PeerJS init error: "+K),$(me,"error")}}async function Me(){if(k(de)){$(Je,"Exporting IndexedDB..."),$(me,"transferring");try{const K=["ResuMateMain","svelte-persist"],we={};for(const He of K){const ct=await window.indexedDB.open(He);await new Promise((bt,vt)=>{ct.onerror=()=>vt(ct.error),ct.onsuccess=()=>bt()});const Ze=ct.result;we[He]={};for(const bt of Ze.objectStoreNames){const an=Ze.transaction(bt,"readonly").objectStore(bt),Kn=[];await new Promise((Xt,wn)=>{const tr=an.openCursor();tr.onerror=()=>wn(tr.error),tr.onsuccess=di=>{const xr=di.target.result;xr?(Kn.push({key:xr.key,value:xr.value}),xr.continue()):Xt()}}),we[He][bt]=Kn}Ze.close()}const Ke=JSON.stringify(we);$(Je,"Sending data..."),k(de).send(Ke),$(Je,"Data sent. Waiting for confirmation..."),k(de).on("data",He=>{He==="received"&&($(Je,"Transfer complete!"),$(me,"done"),$(rt,!0))})}catch(K){$(Ae,"Export/send error: "+K),$(me,"error")}}}async function yt(){_t(),$(w,"receive"),$(Pe,""),$(me,"idle")}async function on(){$(me,"waiting"),$(Ae,"");try{console.log("[PeerJS] Creating Peer (receive mode) with default options"),$(ae,new ef("",{debug:2}),!0),console.log("[PeerJS] Peer object created (receive mode):",k(ae)),k(ae).on("open",K=>{console.log("[PeerJS] Peer open (receive mode). My ID:",K)}),k(ae).on("disconnected",()=>{console.warn("[PeerJS] Peer disconnected (receive mode)")}),k(ae).on("error",K=>{console.error("[PeerJS] PeerJS error (receive mode):",K),$(Ae,"PeerJS error: "+K),$(me,"error")}),k(ae).on("close",()=>{console.log("[PeerJS] Peer closed (receive mode)")}),console.log("[PeerJS] Attempting to connect to sender with ID:",k(Pe)),$(de,k(ae).connect(k(Pe)),!0),k(de).on("open",()=>{console.log("[PeerJS] Connection to sender opened"),$(me,"connected"),$(Je,"Connected. Waiting for data...")}),k(de).on("error",K=>{console.error("[PeerJS] Connection error (receive mode):",K)}),k(de).on("close",()=>{console.log("[PeerJS] Connection closed (receive mode)")}),k(de).on("data",K=>{console.log("[PeerJS] Data received from sender. Length:",K?.length),$(Je,"Data received. Validating...");try{const we=JSON.parse(K);if(!we.ResuMateMain||!we["svelte-persist"]){$(Ae,"Invalid data format."),$(me,"error");return}$(Xe,!0),window._peerReceivedJSON=K}catch(we){$(Ae,"Invalid JSON: "+we),$(me,"error")}}),k(de).on("error",K=>{$(Ae,"Connection error: "+K),$(me,"error")}),k(de).on("close",()=>{k(rt)||$(me,"idle")})}catch(K){$(Ae,"PeerJS error: "+K),$(me,"error")}}async function Ot(){$(Xe,!1),$(Je,"Importing data..."),$(me,"transferring");try{const K=window._peerReceivedJSON;await Yu(K),$(Je,"Import complete!"),$(me,"done"),$(rt,!0),k(de)&&k(de).send("received")}catch(K){$(Ae,"Import error: "+K),$(me,"error")}}function vn(){$(Xe,!1),$(Je,"Import cancelled."),$(me,"idle")}var Wt=Zk(),Nt=G(Wt),yn=G(Nt),hr=G(yn);hr.__click=[Ek,z],un(2),Y(yn);var Yt=ne(yn,2),dr=G(Yt),En=ne(G(dr),2),Ir=ne(G(En),2);dt(Ir),Y(En);var Rn=ne(En,2),X=G(Rn),fe=ne(G(X),2),De=G(fe),Le=G(De);dt(Le),un(2),Y(De),Y(fe),Y(X);var et=ne(X,2);dt(et),Y(Rn);var Tt=ne(Rn,2),At=G(Tt),Mt=ne(G(At),2),bn=G(Mt);dt(bn),un(2),Y(Mt),Y(At);var Lt=ne(At,2);dt(Lt),Y(Tt);var ke=ne(Tt,2),Bt=G(ke),Pt=ne(G(Bt),2),Dr=G(Pt);dt(Dr),un(2),Y(Pt),Y(Bt);var be=ne(Bt,2);dt(be),Y(ke);var Or=ne(ke,2),ii=G(Or),oi=ne(G(ii),2),Oi=G(oi);dt(Oi),un(2),Y(oi),Y(ii);var Lr=ne(ii,2);dt(Lr),Y(Or);var Li=ne(Or,2),Mi=G(Li),Gn=ne(G(Mi),2),Zn=G(Gn);dt(Zn),un(2),Y(Gn),Y(Mi);var Mr=ne(Mi,2);dt(Mr),Y(Li);var pr=ne(Li,2),ut=G(pr),kt=ne(G(ut),2),Eo=G(kt);dt(Eo),un(2),Y(kt),Y(ut);var mr=ne(ut,2);dt(mr),Y(pr);var gr=ne(pr,2),jr=ne(G(gr),2),Ro=G(jr);dt(Ro),un(2),Y(jr),Y(gr);var xn=ne(gr,2),Fn=ne(G(xn),2);dt(Fn);var An=ne(Fn,2),$n=G(An);dt($n);var ts=ne($n,2);{var Un=K=>{var we=Ik();Mn(we,21,()=>k(Q).filter(Ke=>!E()||Ke.name.toLowerCase().includes(E().toLowerCase())),Ln,(Ke,He)=>{var ct=Ak();ct.__mousedown=[Rk,E,He];var Ze=G(ct,!0);Y(ct),ot(()=>xt(Ze,k(He).name)),se(Ke,ct)}),Y(we),se(K,we)};Qe(ts,K=>{k(pe)&&k(Q).length>0&&K(Un)})}Y(An),Y(xn);var ai=ne(xn,2),In=ne(G(ai),2),Nr=G(In);dt(Nr),Nr.__keydown=K=>{K.key==="Enter"&&k(re).trim()&&(Pr.update(we=>{const Ke=[...we,k(re).trim()];return Ke.sort((He,ct)=>ct.length-He.length),Ke}),$(re,""))};var ji=ne(Nr,2);ji.__click=()=>{k(re).trim()&&(Pr.update(K=>{const we=[...K,k(re).trim()];return we.sort((Ke,He)=>He.length-Ke.length),we}),$(re,""))},Y(In);var gt=ne(In,2),_n=G(gt);dt(_n);var kn=ne(_n,2);Mn(kn,5,()=>W().filter(K=>k(ie).trim()===""||K.toLowerCase().includes(k(ie).toLowerCase())).reverse(),Ln,(K,we)=>{var Ke=Dk(),He=G(Ke),ct=G(He,!0);Y(He);var Ze=ne(He,2);Ze.__click=()=>{Pr.update(bt=>bt.filter(vt=>vt!==k(we)))},Y(Ke),ot(()=>xt(ct,k(we))),se(K,Ke)}),Y(kn),Y(gt),Y(ai);var si=ne(ai,2),qn=G(si),Qn=G(qn);Qn.__click=[Sk,oe];var li=ne(G(Qn),2),Ni=G(li);{var Xn=K=>{var we=so("Reset Application");se(K,we)},Ao=K=>{var we=St(),Ke=mt(we);{var He=Ze=>{var bt=so("Are you sure?");se(Ze,bt)},ct=Ze=>{var bt=so("ARE YOU REALLY SURE?");se(Ze,bt)};Qe(Ke,Ze=>{k(oe)===1?Ze(He):Ze(ct,!1)},!0)}se(K,we)};Qe(Ni,K=>{k(oe)===0?K(Xn):K(Ao,!1)})}Y(li),Y(Qn),Y(qn);var Br=ne(qn,2),Bi=G(Br);Bi.__click=[Ok];var Ve=ne(Bi,2),Io=G(Ve);Io.__change=j,un(2),Y(Ve),Y(Br),Y(si);var zi=ne(si,2),ui=ne(G(zi),2),lt=G(ui);let vr;lt.__click=[Lk,Dt];var yr=ne(lt,2);let er;yr.__click=[Mk,yt],Y(ui);var ci=ne(ui,2);{var Fi=K=>{var we=zk(),Ke=G(we);{var He=vt=>{var an=jk(),Kn=ne(G(an),2),Xt=G(Kn,!0);Y(Kn),Y(an),ot(()=>xt(Xt,k(Te))),se(vt,an)},ct=vt=>{var an=Nk();se(vt,an)};Qe(Ke,vt=>{k(st)?vt(He):vt(ct,!1)})}var Ze=ne(Ke,2),bt=G(Ze);bt.__click=[Bk,Dt],Y(Ze),Y(we),ot(()=>bt.disabled=k(me)==="waiting"||k(me)==="connected"||k(me)==="transferring"),se(K,we)},fi=K=>{var we=$k(),Ke=G(we),He=ne(G(Ke),2);dt(He),Y(Ke);var ct=ne(Ke,2),Ze=G(ct);Ze.__click=[Fk,on],Y(ct),Y(we),ot(()=>Ze.disabled=k(me)==="waiting"||k(me)==="connected"||k(me)==="transferring"),Ct(He,()=>k(Pe),bt=>$(Pe,bt)),se(K,we)};Qe(ci,K=>{k(w)==="send"?K(Fi):K(fi,!1)})}var $i=ne(ci,2),zr=G($i);{var Do=K=>{var we=Uk();se(K,we)},Fr=K=>{var we=St(),Ke=mt(we);{var He=Ze=>{var bt=qk();se(Ze,bt)},ct=Ze=>{var bt=St(),vt=mt(bt);{var an=Xt=>{var wn=Kk();se(Xt,wn)},Kn=Xt=>{var wn=St(),tr=mt(wn);{var di=Cn=>{var pi=Hk();se(Cn,pi)},xr=Cn=>{var pi=St(),rs=mt(pi);{var mi=_r=>{var $r=Vk(),is=G($r);Y($r),ot(()=>xt(is,`Error: ${k(Ae)??""}`)),se(_r,$r)};Qe(rs,_r=>{k(me)==="error"&&_r(mi)},!0)}se(Cn,pi)};Qe(tr,Cn=>{k(me)==="done"?Cn(di):Cn(xr,!1)},!0)}se(Xt,wn)};Qe(vt,Xt=>{k(me)==="transferring"?Xt(an):Xt(Kn,!1)},!0)}se(Ze,bt)};Qe(Ke,Ze=>{k(me)==="connected"?Ze(He):Ze(ct,!1)},!0)}se(K,we)};Qe(zr,K=>{k(me)==="waiting"?K(Do):K(Fr,!1)})}var Ui=ne(zr,2);{var ns=K=>{var we=Wk(),Ke=G(we,!0);Y(we),ot(()=>xt(Ke,k(Je))),se(K,we)};Qe(Ui,K=>{k(Je)&&K(ns)})}var tt=ne(Ui,2);{var qi=K=>{var we=Gk(),Ke=ne(G(we),2);Ke.__click=[Yk,Ot];var He=ne(Ke,2);He.__click=[Jk,vn],Y(we),se(K,we)};Qe(tt,K=>{k(Xe)&&K(qi)})}Y($i),Y(zi),Y(dr);var Oo=ne(dr,2),Lo=ne(G(Oo),2);Lo.__click=[Tk,i];var jt=ne(Lo,2),br=G(jt);{var hi=K=>{$f(K,{get carta(){return k(ye)},mode:"tabs",theme:"settings",get value(){return Af(),i()},set value(we){$e(Zr,we)}})};Qe(br,K=>{k(ye)&&K(hi)})}Y(jt);var Dn=ne(jt,4);Dn.__click=[Pk,o];var Ki=ne(Dn,4),Hi=G(Ki);Ml(Hi),Y(Ki),Y(Oo),Y(Yt),Y(Nt),Y(Wt),ot((K,we)=>{et.disabled=!u(),Lt.disabled=!d(),be.disabled=!g(),Lr.disabled=!x(),Mr.disabled=!D(),mr.disabled=!F(),hn(Qn,1,`flex items-center gap-2 px-4 py-2 bg-red hover:bg-maroon transition-all duration-200 rounded-md text-base ${k(oe)===1?"animate-shake-mild":k(oe)===2?"animate-shake-strong":""}`),vr=hn(lt,1,"px-3 py-1 rounded-l bg-red text-base font-medium text-base-100 focus:outline-none transition-all duration-150",null,vr,K),er=hn(yr,1,"px-3 py-1 rounded-r bg-red text-base font-medium text-base-100 focus:outline-none transition-all duration-150",null,er,we)},[()=>({"opacity-70":k(w)!=="send"}),()=>({"opacity-70":k(w)!=="receive"})]),Ct(Ir,a,K=>$e(ba,K)),Cr(Le,u,K=>$e(Pa,K)),Ct(et,l,K=>$e(xa,K)),Cr(bn,d,K=>$e(Ea,K)),Ct(Lt,f,K=>$e(_a,K)),Cr(Dr,g,K=>$e(Ra,K)),Ct(be,h,K=>$e(ka,K)),Cr(Oi,x,K=>$e(Aa,K)),Ct(Lr,v,K=>$e(wa,K)),Cr(Zn,D,K=>$e(Ia,K)),Ct(Mr,S,K=>$e(Ca,K)),Cr(Eo,F,K=>$e(Da,K)),Ct(mr,C,K=>$e(Sa,K)),Cr(Ro,O,K=>$e(Oa,K)),Ct(Fn,H,K=>$e(Ta,K)),fn("focus",$n,()=>{k(Q).length===0&&ee(),$(pe,!0)}),fn("blur",$n,()=>setTimeout(()=>$(pe,!1),200)),Ct($n,E,K=>$e(Ti,K)),Ct(Nr,()=>k(re),K=>$(re,K)),fn("focus",_n,()=>$(pe,!1)),Ct(_n,()=>k(ie),K=>$(ie,K)),Ct(Hi,o,K=>$e(bo,K)),se(e,Wt),Ht(),r()}gn(["click","mousedown","keydown","change"]);var Xk=Re('<div role="alert" class="text-sm text-red"> </div>'),ew=Re('<div class="bg-crust text-text rounded-md shadow-lg w-[min(480px,92vw)] p-4" role="document" aria-labelledby="create-project-title"><header class="mb-3"><h2 id="create-project-title" class="text-lg font-semibold">Create new project</h2> <p class="text-xs opacity-70">Choose a name. Optionally start from your saved template.</p></header> <form class="space-y-3"><div class="flex flex-col gap-1"><label for="create-project-name" class="text-sm">Project name</label> <input id="create-project-name" class="px-2 py-1 rounded bg-mantle text-text text-sm focus:outline-none focus:ring-1 focus:ring-blue" placeholder="e.g., Company - Role"/></div> <div class="flex flex-col gap-1"><label for="create-project-url" class="text-sm">Job URL (optional)</label> <input id="create-project-url" class="px-2 py-1 rounded bg-mantle text-text text-sm focus:outline-none focus:ring-1 focus:ring-blue" placeholder="https://example.com/job" inputmode="url" spellcheck="false"/> <p class="text-xs opacity-70">Used by the fetch tool to grab job description later.</p></div> <label class="flex items-center gap-2 text-sm"><input type="checkbox" class="accent-blue"/> Start from template</label> <!> <div class="flex justify-end gap-2 pt-2"><button type="button" class="px-3 py-1 rounded bg-mantle hover:bg-overlay0 transition-colors text-sm" aria-label="Cancel">Cancel</button> <button type="submit" class="px-3 py-1 rounded bg-blue text-mantle hover:bg-sapphire transition-colors text-sm disabled:opacity-60" aria-label="Create project"> </button></div></form></div>');function tw(e,t){Vt(t,!0);const[n,r]=Xr(),i=()=>Fe(Zr,"$resumeTemplate",n);let o=Ee(""),a=Ee(""),l=Ee(!0),u=Ee(!1),f=Ee("");function d(){$e(mn,"None")}async function h(j){if(j.preventDefault(),$(f,""),!k(o).trim()){$(f,"Please enter a project name.");return}$(u,!0);try{jf(),$e(Pn,k(o).trim()),$e(Yn,k(a).trim()||"https://example.com/"),k(l)?$e(pn,i()):$e(pn,""),await Ya(),d()}catch(Q){console.error(Q),$(f,"Failed to create project. Try again.")}finally{$(u,!1)}}var g=ew(),v=ne(G(g),2),x=G(v),S=ne(G(x),2);dt(S),gf(S,!0),Y(x);var D=ne(x,2),C=ne(G(D),2);dt(C),un(2),Y(D);var F=ne(D,2),O=G(F);dt(O),un(),Y(F);var z=ne(F,2);{var H=j=>{var Q=Xk(),ee=G(Q,!0);Y(Q),ot(()=>xt(ee,k(f))),se(j,Q)};Qe(z,j=>{k(f)&&j(H)})}var E=ne(z,2),W=G(E);W.__click=d;var oe=ne(W,2),ye=G(oe,!0);Y(oe),Y(E),Y(v),Y(g),ot(()=>{oe.disabled=k(u),xt(ye,k(u)?"Creatingâ¦":"Create")}),fn("submit",v,h),Ct(S,()=>k(o),j=>$(o,j)),Ct(C,()=>k(a),j=>$(a,j)),Cr(O,()=>k(l),j=>$(l,j)),se(e,g),Ht(),r()}gn(["click"]);function nw(e,t){e.key==="Escape"&&(e.stopPropagation(),t())}async function rw(e,t,n,r,i,o){$(t,""),$(n,!0);try{const a=k(r).trim();await Mf(k(i),a||void 0),o()}catch(a){console.error(a),$(t,"Failed to duplicate project.")}finally{$(n,!1)}}async function iw(e,t,n){if(confirm("Reset resume to template? This will discard current resume content.")){$(t,""),$(n,!0);try{pn.set(Oe(Zr))}catch(r){console.error(r),$(t,"Failed to reset content.")}finally{$(n,!1)}}}async function ow(e,t,n,r,i){if(confirm("Delete this project? This cannot be undone.")){$(t,""),$(n,!0);try{await Am(k(r)),i()}catch(o){console.error(o),$(t,"Failed to delete project.")}finally{$(n,!1)}}}var aw=Re('<div role="alert" class="text-sm text-red"> </div>'),sw=Re('<div class="bg-crust text-text rounded-md shadow-lg w-[min(560px,92vw)] p-4" role="document" aria-labelledby="project-options-title"><header class="mb-3"><div class="flex items-start justify-between gap-3"><div><h2 id="project-options-title" class="text-lg font-semibold">Project options</h2> <p class="text-xs opacity-70">Rename, set job URL, duplicate or delete.</p></div> <button type="button" class="p-1 rounded bg-mantle hover:bg-overlay0 transition-colors focus:outline-hidden focus:ring-2 focus:ring-blue/70" aria-label="Close dialog" title="Close"><img src="/ResuMate/icons/cancel.svg" alt="" aria-hidden="true" class="w-5 h-5 pointer-events-none"/></button></div></header> <form class="space-y-3"><div class="flex flex-col gap-1"><label for="po-name" class="text-sm">Project name</label> <input id="po-name" class="px-2 py-1 rounded bg-mantle text-text text-sm focus:outline-none focus:ring-1 focus:ring-blue" placeholder="e.g., Company â Role"/></div> <div class="flex flex-col gap-1"><label for="po-url" class="text-sm">Job URL (optional)</label> <input id="po-url" class="px-2 py-1 rounded bg-mantle text-text text-sm focus:outline-none focus:ring-1 focus:ring-blue" placeholder="https://example.com/job" inputmode="url" spellcheck="false"/> <p class="text-xs opacity-70">Used by the fetch tool to grab job description later.</p></div> <!> <div class="flex flex-wrap items-center justify-between gap-2 pt-2"><div class="flex items-center gap-2"><button type="button" class="px-3 py-1 rounded bg-red/80 hover:bg-red text-mantle text-sm transition-colors" aria-label="Delete project">Delete</button> <button type="button" class="px-3 py-1 rounded bg-red/80 hover:bg-red text-mantle text-sm transition-colors" aria-label="Reset resume to template" title="Reset resume content to template">Reset</button></div> <div class="flex items-center gap-2"><button type="button" class="px-3 py-1 rounded bg-mantle hover:bg-overlay0 text-text text-sm transition-colors" aria-label="Duplicate project" title="Create a copy">Duplicate</button> <button type="submit" class="px-3 py-1 rounded bg-blue hover:bg-sapphire text-mantle text-sm transition-colors disabled:opacity-60" aria-label="Save changes"> </button></div></div></form></div>');function lw(e,t){Vt(t,!0);let n=Ee(""),r=Ee(""),i=Ee(!1),o=Ee(""),a=Ee(-1);Pn.subscribe(ee=>$(n,ee,!0)),Yn.subscribe(ee=>$(r,ee,!0)),Bn.subscribe(ee=>$(a,ee,!0));function l(){mn.set("None")}or(()=>{document.getElementById("po-name")?.focus()});async function u(ee){ee?.preventDefault(),$(o,"");const pe=k(n).trim();if(!pe){$(o,"Please enter a project name.");return}$(i,!0);try{await Rm(k(a),pe),Yn.set(k(r).trim()),await Ya(),l()}catch(ie){console.error(ie),$(o,"Failed to save changes.")}finally{$(i,!1)}}var f=sw();f.__keydown=[nw,l];var d=G(f),h=G(d),g=ne(G(h),2);g.__click=l,Y(h),Y(d);var v=ne(d,2),x=G(v),S=ne(G(x),2);dt(S),Y(x);var D=ne(x,2),C=ne(G(D),2);dt(C),un(2),Y(D);var F=ne(D,2);{var O=ee=>{var pe=aw(),ie=G(pe,!0);Y(pe),ot(()=>xt(ie,k(o))),se(ee,pe)};Qe(F,ee=>{k(o)&&ee(O)})}var z=ne(F,2),H=G(z),E=G(H);E.__click=[ow,o,i,a,l];var W=ne(E,2);W.__click=[iw,o,i],Y(H);var oe=ne(H,2),ye=G(oe);ye.__click=[rw,o,i,n,a,l];var j=ne(ye,2),Q=G(j,!0);Y(j),Y(oe),Y(z),Y(v),Y(f),ot(()=>{E.disabled=k(i),W.disabled=k(i),ye.disabled=k(i),j.disabled=k(i),xt(Q,k(i)?"Workingâ¦":"Save")}),fn("submit",v,u),Ct(S,()=>k(n),ee=>$(n,ee)),Ct(C,()=>k(r),ee=>$(r,ee)),se(e,f),Ht()}gn(["keydown","click"]);function uw(e,t){t()}var cw=(e,t)=>t("None"),fw=e=>e.stopPropagation(),hw=Re("<div><!></div>"),dw=e=>e.stopPropagation(),pw=Re("<div><!></div>"),mw=e=>e.stopPropagation(),gw=Re("<div><!></div>"),vw=e=>e.stopPropagation(),yw=Re('<div class="bg-crust p-4 rounded shadow text-text"> </div>'),bw=Re('<div class="fixed inset-0 z-50 flex items-start justify-center p-8 bg-black/40" role="dialog" aria-modal="true" tabindex="-1"><!></div>'),xw=Re('<div class="sr-only" role="status" aria-live="polite"> </div> <div class="flex flex-row w-full h-full"><!> <div class="w-1 cursor-ew-resize hover:bg-overlay0" role="separator" aria-orientation="vertical" aria-label="Resize sidebar"></div> <div class="flex flex-col flex-1 min-w-0 h-full"><!> <main class="flex-1 min-h-0 overflow-hidden" tabindex="-1" aria-label="Main content"><!></main> <!></div></div>',1);function _w(e,t){Vt(t,!0);const n=it(t,"onNewproject",3,()=>{}),r=it(t,"onSelect",3,()=>{}),i=it(t,"onEditProject",3,()=>{});let o=Ee("None");mn.subscribe(Pe=>$(o,Pe,!0));function a(Pe){mn.set(Pe)}let l=Ee(!1),u=Ee(288),f=Ee(!1),d=0,h=288;const g=0,v=480;let x=288;function S(){k(l)?($(l,!1),$(u,x||288,!0),$(H,"Sidebar expanded")):(x=k(u),$(l,!0),$(u,0),$(H,"Sidebar collapsed"))}function D(Pe){k(l)||($(f,!0),d=Pe.clientX,h=k(u),window.addEventListener("mousemove",C),window.addEventListener("mouseup",F,{once:!0}))}function C(Pe){if(!k(f))return;const T=Pe.clientX-d;$(u,Math.min(v,Math.max(g,h+T)),!0)}function F(){$(f,!1),window.removeEventListener("mousemove",C),k(u)<=48?($(l,!0),$(u,0),$(H,"Sidebar collapsed")):(k(l)&&$(H,"Sidebar expanded"),$(l,!1),x=k(u))}function O(){$(l,!1),k(u)===0&&$(u,x||288,!0),$(H,"Sidebar expanded")}function z(Pe){Pe.key==="Escape"&&k(o)!=="None"&&a("None")}let H=Ee(""),E=null,W=null;function oe(Pe){const T=["a[href]","button:not([disabled])","textarea:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(Pe.querySelectorAll(T)).filter(Xe=>Xe===Pe||Xe.offsetParent!==null)}function ye(Pe){if(k(o)==="None"||!E||Pe.key!=="Tab")return;const T=oe(E);if(T.length===0){Pe.preventDefault(),E.focus();return}const Xe=T[0],Je=T[T.length-1],Ne=document.activeElement;Pe.shiftKey?(Ne===Xe||!E.contains(Ne))&&(Pe.preventDefault(),Je.focus()):Ne===Je&&(Pe.preventDefault(),Xe.focus())}Zt(()=>{k(o)!=="None"?(W=document.activeElement,Op().then(()=>{if(!E)return;(oe(E)[0]??E).focus()})):(W&&W.focus(),W=null)});var j=xw();fn("keydown",va,z);var Q=mt(j),ee=G(Q,!0);Y(Q);var pe=ne(Q,2),ie=G(pe);Wm(ie,{get collapsed(){return k(l)},get width(){return k(u)},onToggleSidebar:S,onSelect:r(),onNewproject:n(),onEditProject:i()});var re=ne(ie,2);re.__mousedown=D,re.__dblclick=[uw,S];var ae=ne(re,2),de=G(ae);ig(de,{get collapsed(){return k(l)},onShowSidebar:O});var me=ne(de,2),Ae=G(me);Fp(Ae,t,"default",{}),Y(me);var w=ne(me,2);{var Te=Pe=>{var T=bw();T.__click=[cw,a],T.__keydown=ye;var Xe=G(T);{var Je=rt=>{var st=hw();st.__click=[fw];var _e=G(st);Qk(_e,{}),Y(st),se(rt,st)},Ne=rt=>{var st=St(),_e=mt(st);{var _t=Me=>{var yt=pw();yt.__click=[dw];var on=G(yt);tw(on,{}),Y(yt),se(Me,yt)},Dt=Me=>{var yt=St(),on=mt(yt);{var Ot=Wt=>{var Nt=gw();Nt.__click=[mw];var yn=G(Nt);lw(yn,{}),Y(Nt),se(Wt,Nt)},vn=Wt=>{var Nt=yw();Nt.__click=[vw];var yn=G(Nt);Y(Nt),ot(()=>xt(yn,`Unimplemented modal: ${k(o)??""}`)),se(Wt,Nt)};Qe(on,Wt=>{k(o)==="Project Options"?Wt(Ot):Wt(vn,!1)},!0)}se(Me,yt)};Qe(_e,Me=>{k(o)==="CreateProject"?Me(_t):Me(Dt,!1)},!0)}se(rt,st)};Qe(Xe,rt=>{k(o)==="Settings"?rt(Je):rt(Ne,!1)})}Y(T),cn(T,rt=>E=rt,()=>E),se(Pe,T)};Qe(w,Pe=>{k(o)!=="None"&&Pe(Te)})}Y(ae),Y(pe),ot(()=>{xt(ee,k(H)),at(re,"aria-hidden",k(l))}),se(e,j),Ht()}gn(["mousedown","dblclick","click","keydown"]);var kw=Re('<div class="w-full h-full"><!></div>');function ww(e,t){Vt(t,!0);const[n,r]=Xr(),i=()=>Fe(Nn,"$jobDescription",n),o=()=>Fe(Wa,"$header",n),a=()=>Fe(pn,"$resumeMd",n);let l=new Jh({sanitizer:!1,theme:"catppuccin-mocha",extensions:[Lf]}),u=null,f=null,d=null;function h(){$e(xi,0)}Zt(()=>{i(),$e(vo,l.render(o()+Hu(a()))),h(),u!==null&&clearTimeout(u),f!==null&&clearTimeout(f),d!==null&&clearTimeout(d),u=setTimeout(()=>{ql()},500),f=setTimeout(()=>{Ya()},1e3),d=setTimeout(()=>{$e(vo,l.render(o()+Hu(a())))},1e3)});var g=kw(),v=G(g);$f(v,{get carta(){return l},mode:"tabs",theme:"main",get value(){return Af(),a()},set value(x){$e(pn,x)}}),Y(g),se(e,g),Ht(),r()}var Cw=Re('<div class="p-1 bg-crust flex flex-col items-center"><div class="relative overflow-hidden w-full"><iframe title="Resume Preview" class="w-[8.5in] h-[11in] border-none origin-top mx-auto" sandbox="allow-same-origin allow-scripts allow-downloads allow-popups allow-forms allow-modals"></iframe></div></div>');function tf(e,t){Vt(t,!0);let n,r,i=Ee(1),o=Ee("");async function a(){try{const h=await fetch("/ResuMate/style.css");h.ok?$(o,await h.text(),!0):console.error("Failed to load stylesheet")}catch(h){console.error("Error loading stylesheet:",h)}}a();function l(){if(n&&r){const v=window.innerHeight*.95,x=n.clientWidth,S=v/1056,D=x/816;$(i,Math.min(S,D)*1),r.style.transform=`scale(${k(i)})`,r.style.transformOrigin="center top";const C=1056*k(i);n.style.height=`${C+20}px`}}Zt(()=>{if(r&&t.html&&k(o)!==""){const h=r.contentDocument||r.contentWindow.document;h.open();const g=`
                <!DOCTYPE html>
                <html>
                    <head>
                        <style>
                            ${k(o)}
                            
                            body, html {
                                margin: 0;
                                padding: 0;
                                height: 100%;
                            }
                            .pdf-page {
                                width: 8.5in;
                                height: 11in;
                                background-color: white;
                                padding-top: 0.0in;
                                padding-left: 0.2in;
                                padding-right: 0.2in;
                                box-sizing: border-box;
                                overflow: hidden;
                            }
                        </style>
                    </head>
                    <body>
                        <div class="pdf-page">${t.html}</div>
                    </body>
                </html>
            `;h.write(g),h.close()}});var u=Cw();fn("resize",va,l);var f=G(u),d=G(f);cn(d,h=>r=h,()=>r),Y(f),cn(f,h=>n=h,()=>n),jl(f,h=>l?.()),Y(u),se(e,u),Ht()}var Sw=()=>{ql()},Tw=Re("<div> </div>"),Pw=Re("<div> </div>"),Ew=Re('<div class="w-full h-full flex flex-col gap-2 p-4 svelte-1s4klrq"><div class="w-full flex items-center justify-between mb-1 svelte-1s4klrq"><div class="text-xs text-subtext0 svelte-1s4klrq"> </div> <button class="px-3 py-1 bg-mantle hover:bg-overlay0 transition-all duration-200 rounded text-xs svelte-1s4klrq">Rescore</button></div> <div class="w-full flex flex-col gap-1 svelte-1s4klrq"><div class="w-full h-2 bg-surface0 rounded overflow-hidden svelte-1s4klrq"><div class="h-full transition-all duration-500 rounded animate-gradient svelte-1s4klrq"></div></div> <div class="w-full flex justify-between text-[10px] text-subtext1 px-0.5 svelte-1s4klrq"><span class="svelte-1s4klrq">0%</span> <span class="svelte-1s4klrq">100%</span></div></div> <div class="grid grid-cols-2 w-full gap-2 mt-2 svelte-1s4klrq"><div class="flex flex-col min-h-0 svelte-1s4klrq"><div class="text-xs mb-1 font-medium text-subtext0 svelte-1s4klrq">Job Keywords</div> <div class="flex flex-row flex-wrap content-start overflow-y-auto gap-1 scrollbar-thin scrollbar-thumb-overlay0 scrollbar-track-crust pr-1 h-[calc(100svh-15rem)] svelte-1s4klrq"></div></div> <div class="flex flex-col min-h-0 svelte-1s4klrq"><div class="text-xs mb-1 font-medium text-subtext0 svelte-1s4klrq">Resume Keywords</div> <div class="flex flex-row flex-wrap content-start overflow-y-auto gap-1 scrollbar-thin scrollbar-thumb-overlay0 scrollbar-track-crust pr-1 h-[calc(100svh-15rem)] svelte-1s4klrq"></div></div></div> <button class="w-full bg-blue hover:bg-sapphire transition-all duration-200 px-4 py-2 rounded-md text-base flex items-center justify-center gap-2 mt-auto svelte-1s4klrq"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 svelte-1s4klrq" viewBox="0 0 36 36"><path fill="currentColor" d="M33.18 26.11L20.35 13.28A9.28 9.28 0 0 0 7.54 2.79l-1.34.59l5.38 5.38l-2.82 2.83l-5.38-5.38l-.59 1.33a9.27 9.27 0 0 0 10.49 12.81l12.83 12.83a2 2 0 0 0 2.83 0l4.24-4.24a2 2 0 0 0 0-2.83m-5.66 5.66L13.88 18.12l-.57.16a7.27 7.27 0 0 1-9.31-7a7.2 7.2 0 0 1 .15-1.48l4.61 4.61l5.66-5.66l-4.61-4.6a7.27 7.27 0 0 1 8.47 9.16l-.16.57l13.65 13.65Z" class="clr-i-outline clr-i-outline-path-1 svelte-1s4klrq"></path><circle cx="27.13" cy="27.09" r="1.3" fill="currentColor" class="clr-i-outline clr-i-outline-path-2 svelte-1s4klrq" transform="rotate(-45 27.132 27.092)"></circle><path fill="none" d="M0 0h36v36H0z" class="svelte-1s4klrq"></path></svg> <!></button></div>'),Rw=Re('<div class="w-full h-full text-subtext0 svelte-1s4klrq">Press the score button to generate a similarity score</div>');function Aw(e,t){Vt(t,!1);const[n,r]=Xr(),i=()=>Fe(lr,"$combinedScore",n),o=()=>Fe(sr,"$jobKeywords",n),a=()=>Fe(ar,"$resumeKeywords",n),l=()=>Fe(yo,"$overlappingKeywords",n),u=()=>Fe(ia,"$tuning",n),f=()=>Fe(Ti,"$openRouterAIModel",n);$e(lr,i()),$e(sr,o()),$e(ar,a()),$e(yo,l()),Ef();var d=St(),h=mt(d);{var g=x=>{var S=Ew(),D=G(S),C=G(D),F=G(C);Y(C);var O=ne(C,2);O.__click=[Sw],Y(D);var z=ne(D,2),H=G(z),E=G(H);Y(H),un(2),Y(z);var W=ne(z,2),oe=G(W),ye=ne(G(oe),2);Mn(ye,5,o,Ln,(ae,de)=>{var me=Tw();let Ae;var w=G(me,!0);Y(me),ot(Te=>{Ae=hn(me,1,"inline-flex px-2 py-0.5 text-xs rounded transition-all duration-200 svelte-1s4klrq",null,Ae,Te),xt(w,k(de))},[()=>({"bg-green":l().includes(k(de)),"bg-surface0":!l().includes(k(de)),"text-base":l().includes(k(de)),"text-text":!l().includes(k(de))})]),se(ae,me)}),Y(ye),Y(oe);var j=ne(oe,2),Q=ne(G(j),2);Mn(Q,5,a,Ln,(ae,de)=>{var me=Pw();let Ae;var w=G(me,!0);Y(me),ot(Te=>{Ae=hn(me,1,"inline-flex px-2 py-0.5 text-xs rounded transition-all duration-200 svelte-1s4klrq",null,Ae,Te),xt(w,k(de))},[()=>({"bg-green":l().includes(k(de)),"bg-surface0":!l().includes(k(de)),"text-base":l().includes(k(de)),"text-text":!l().includes(k(de))})]),se(ae,me)}),Y(Q),Y(j),Y(W);var ee=ne(W,2);ee.__click=function(...ae){Mm?.apply(this,ae)};var pe=ne(G(ee),2);{var ie=ae=>{var de=so();ot(()=>xt(de,`Calling LLM ${f()??""}...`)),se(ae,de)},re=ae=>{var de=so("Tune Resume");se(ae,de)};Qe(pe,ae=>{u()?ae(ie):ae(re,!1)})}Y(ee),Y(S),ot(()=>{xt(F,`Match Score: ${i()??""}%`),Gr(E,`width: ${i()??""}%; background: linear-gradient(90deg,
                            rgb(243, 139, 168) 0%,      /* red */
                            rgb(235, 160, 172) 5%,      /* maroon */
                            rgb(250, 179, 135) 10%,     /* peach */
                            rgb(249, 226, 175) 15%,     /* yellow */
                            rgb(166, 227, 161) 20%,     /* green */
                            rgb(148, 226, 213) 25%,     /* teal */
                            rgb(137, 220, 235) 30%,     /* blue */
                            rgb(116, 199, 236) 35%,     /* sapphire */
                            rgb(180, 190, 254) 40%,     /* lavender */
                            rgb(243, 139, 168) 45%      /* red */
                        ); background-size: 400% 100%;`)}),se(x,S)},v=x=>{var S=Rw();se(x,S)};Qe(h,x=>{o()?x(g):x(v,!1)})}se(e,d),Ht(),r()}gn(["click"]);function Iw(e,t,n){fetch("https://api.cors.lol/?url="+t()).then(r=>r.text()).then(r=>{const o=new DOMParser().parseFromString(r,"text/html");o.querySelectorAll("script, style, header, footer, nav").forEach(f=>f.remove()),r=(o.body.textContent||"").replace(/\s+/g," ").trim(),$e(Nn,r)}).catch(r=>{console.log(r)})}var Dw=Re('<div class="w-full h-full bg-crust"><div class="w-full h-full bg-base p-2 rounded-xs flex flex-col"><div class="w-full h-fit flex flex-row mb-2 gap-2"><input class="text-text px-2 py-1 w-full bg-mantle rounded" placeholder="try to fetch with a link"/> <button class="text-text px-2 py-1 ml-1 bg-mantle rounded hover:bg-overlay0 transition-all duration-200">fetch</button></div> <textarea class="w-full flex-grow overflow-y-scroll bg-mantle p-2"></textarea></div></div>'),Ow=Re('<div class="h-full"><!></div>'),Lw=Re("<div><!></div>"),Mw=Re("<div><!></div>"),jw=Re('<div class="grid grid-cols-[1fr_1fr] w-full h-full"><div class="w-full h-full overflow-clip"><!></div> <!></div>');function Jw(e,t){Vt(t,!1);const[n,r]=Xr(),i=()=>Fe(Pr,"$keywords",n),o=()=>Fe(Wa,"$header",n),a=()=>Fe(Yn,"$jobUrl",n),l=()=>Fe(Nn,"$jobDescription",n),u=()=>Fe(uo,"$projectEditingStage",n),f=()=>Fe(vo,"$resumeHtml",n);i().length===0&&fetch("/ResuMate/keywords.txt").then(d=>d.text()).then(d=>{let h=d.split(`
`).map(g=>g.toLowerCase()).filter((g,v,x)=>x.indexOf(g)===v);h.sort((g,v)=>v.length-g.length),$e(Pr,h)}).catch(d=>{console.log(d)}),o()===""&&Ul(),Ef(),_w(e,{children:(d,h)=>{var g=jw(),v=G(g),x=G(v);ww(x,{}),Y(v);var S=ne(v,2);{var D=F=>{var O=Dw(),z=G(O),H=G(z),E=G(H);dt(E);var W=ne(E,2);W.__click=[Iw,a,l],Y(H);var oe=ne(H,2);Ml(oe),Y(z),Y(O),Ct(E,a,ye=>$e(Yn,ye)),Ct(oe,l,ye=>$e(Nn,ye)),se(F,O)},C=F=>{var O=St(),z=mt(O);{var H=W=>{var oe=Ow(),ye=G(oe);Aw(ye,{}),Y(oe),se(W,oe)},E=W=>{var oe=St(),ye=mt(oe);{var j=Q=>{var ee=St(),pe=mt(ee);Np(pe,f,ie=>{var re=Mw(),ae=G(re);tf(ae,{html:"<h1>Loading...</h1>"}),Y(re),se(ie,re)},(ie,re)=>{var ae=Lw(),de=G(ae);tf(de,{get html(){return k(re)}}),Y(ae),se(ie,ae)}),se(Q,ee)};Qe(ye,Q=>{u()==="Preview"&&Q(j)},!0)}se(W,oe)};Qe(z,W=>{u()==="Tuning"?W(H):W(E,!1)},!0)}se(F,O)};Qe(S,F=>{u()==="Content"?F(D):F(C,!1)})}Y(g),se(d,g)},$$slots:{default:!0}}),Ht(),r()}gn(["click"]);export{Jw as A,Ma as _,C_ as t};
